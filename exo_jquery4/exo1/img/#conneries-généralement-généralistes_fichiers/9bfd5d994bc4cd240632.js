(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{6521:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i,u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(0)),a=P(r(8)),o=r(259),l=P(r(3)),s=r(7056),c=P(r(185)),d=r(88),f=r(6612),_=r(99),p=P(r(58)),S=P(r(6559)),I=P(r(65)),m=r(1),E=P(r(5956));function P(e){return e&&e.__esModule?e:{default:e}}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function R(e,t,r,n){i||(i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&u)for(var o in u)void 0===t[o]&&(t[o]=u[o]);else t||(t=u||{});if(1===a)t.children=n;else if(a>1){for(var l=new Array(a),s=0;s<a;s++)l[s]=arguments[s+3];t.children=l}return{$$typeof:i,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function M(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var U={SMOL:"Smol",MINI:"Mini",SMALLER:"Smaller",SMALL:"Small",MEDIUM:"Medium",LARGE:"Large",XLARGE:"XLarge"},v=((n={})[U.SMOL]=[10,10,8,6,6,4],n[U.MINI]=[12,12,10,10,8,6,4],n[U.SMALLER]=[13,13,11,11,9,7,5],n[U.SMALL]=[14,14,12,12,10,8,6],n[U.MEDIUM]=[16,16,14,14,12,10,8],n[U.LARGE]=[18,18,16,16,14,12,10],n[U.XLARGE]=[20,20,18,18,16,14,12],n),N=function(e){function t(){return e.apply(this,arguments)||this}M(t,e);var r=t.prototype;return r.renderAcronym=function(){var e=this.props.guild;return null!=e.icon?null:e.acronym},r.renderBadge=function(){var e=this.props,t=e.showBadge,r=e.guild,n=e.badgeStrokeColor;return t&&null!=r.hasFeature?R(S.default,{className:E.default.guildIconBadge,guild:r,badgeStrokeColor:n}):null},r.renderIcon=function(){var e,t=this.props,r=t.guild,n=t.className,i=(t.showBadge,t.active),o=t.size,l=t.style,s=void 0===l?{}:l,c=t.textScale,d=(t.showTooltip,t.tooltipPosition,t.onClick),f=t.to,S=(t.badgeStrokeColor,t.animate,function(e,t){if(null==e)return{};var r,n,i={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(t,["guild","className","showBadge","active","size","style","textScale","showTooltip","tooltipPosition","onClick","to","badgeStrokeColor","animate"])),I=v[o];return u.createElement(p.default,T({className:(0,a.default)(E.default.icon,n,(0,_.getClass)(E.default,"iconSize",o),(e={},e[(0,_.getClass)(E.default,"iconActive",o)]=i,e[E.default.iconInactive]=!i,e[E.default.noIcon]=null==r.icon,e)),style:null==r.icon?T({fontSize:(I[r.acronym.length]||I[I.length-1])*c},s):s,onClick:null!=f||null==d?null:d},S),this.renderAcronym(),this.renderBadge())},r.renderTooltip=function(){var e=this,t=this.props,r=t.guild,n=t.showTooltip,i=t.tooltipPosition;return n?R(I.default,{text:r.name,position:i,"aria-label":!1},void 0,function(t){return u.cloneElement(u.Children.only(e.renderIcon()),T({},t))}):this.renderIcon()},r.render=function(){var e=this.props,t=e.to,r=e.guild,n=e.source;return null!=t?R(o.Link,{to:{pathname:t,state:null!=n?{analyticsSource:n}:null},"aria-label":r.toString()},void 0,this.renderTooltip()):this.renderTooltip()},t}(u.PureComponent);N.displayName="GuildIcon";var L=l.default.connectStores([c.default],function(e){var t=e.guild,r=e.animate,n=e.iconSrc;return{style:T({},e.style,{backgroundImage:(0,f.makeCssUrlString)(null!=n?n:t.getIconURL((0,d.hasAnimatedGuildIcon)(t)&&r&&c.default.isFocused()?"gif":"jpg"))})}})((0,s.backgroundImagePreloader)(function(e){return u.createElement(N,e)})),A=function(e){function t(){return e.apply(this,arguments)||this}return M(t,e),t.prototype.render=function(){return u.createElement(L,this.props)},t}(u.PureComponent);A.displayName="GuildIconWrapper",A.Sizes=U,A.defaultProps={size:U.LARGE,textScale:1,showBadge:!1,showTooltip:!1,active:!1,tooltipPosition:I.default.Positions.TOP,badgeStrokeColor:m.Colors.WHITE,animate:!1};var O=A;t.default=O},6529:function(e,t,r){"use strict";t.__esModule=!0,t.getChannelIconURL=function(e,t){switch(e.type){case u.ChannelTypes.DM:var r=e.recipients.map(n.default.getUser).filter(Boolean)[0];return null==r?null:!0===t&&i.default.hasAnimatedAvatar(r)?r.getAvatarURL("gif"):r.getAvatarURL();case u.ChannelTypes.GROUP_DM:return i.default.getChannelIconURL({id:e.id,icon:e.icon,applicationId:e.getApplicationId()})}},t.getChannelIconSource=function(e){switch(e.type){case u.ChannelTypes.DM:var t=e.recipients.map(n.default.getUser).filter(Boolean)[0];return null!=t?t.getAvatarSource():null;case u.ChannelTypes.GROUP_DM:return i.default.getChannelIconSource({id:e.id,icon:e.icon,applicationId:e.getApplicationId()})}};var n=a(r(11)),i=a(r(88)),u=r(1);function a(e){return e&&e.__esModule?e:{default:e}}},6534:function(e,t,r){"use strict";t.__esModule=!0,t.getTierName=function(e){switch(e){case o.PremiumGuildTiers.NONE:return l.default.Messages.PREMIUM_GUILD_TIER_0;case o.PremiumGuildTiers.TIER_1:return l.default.Messages.PREMIUM_GUILD_TIER_1;case o.PremiumGuildTiers.TIER_2:return l.default.Messages.PREMIUM_GUILD_TIER_2;case o.PremiumGuildTiers.TIER_3:return l.default.Messages.PREMIUM_GUILD_TIER_3;default:throw new Error("Not a valid tier type")}},t.getGuildTierFromSubscriberCount=function(e){for(var t=0,r=d;t<r.length;t++){var n=r[t];if(e>=n.amount)return n.tier}return o.PremiumGuildTiers.NONE},t.getNextGuildTierFromSubscriberCount=f,t.getPremiumGuildSubscriptionMonths=function(e){return(0,i.default)().diff((0,i.default)(e),"months")||1},t.getUserLevel=function(e){for(var t=(0,i.default)().diff(e,"months"),r=1,n=0,u=Object.keys(o.UserPremiumGuildSubscriptionMonths);n<u.length;n++){var a=u[n];t<o.UserPremiumGuildSubscriptionMonths[a]||(r=+a)}return r},t.isGuildPremiumAtLeast=_,t.isTierUnlocked=function(e,t){return _(e.premiumTier,t)},t.getProgressPercentToTopTier=function(e){var t=e.premiumSubscriberCount,r=e.premiumTier,n=f(t);if(null==n)return 100;var i=d.length,u=o.PremiumGuildSubscriptionsRequired[r],a=o.PremiumGuildSubscriptionsRequired[n],l=100*r/i,s=100*(t-u)/(a-u);return Math.min(l+s/i,100)},t.getAvailableUserPremiumGuildSubscriptionSlots=function(e){return n.default.values(e).filter(function(e){return null==e.premiumGuildSubscription&&(null==e.cooldownEndsAt||new Date(e.cooldownEndsAt)<Date.now())})},t.GuildTierSubscriptionsOrdered=t.getTiers=t.PerkIcons=void 0;var n=s(r(6)),i=s(r(5)),u=r(361),a=s(r(183)),o=r(1),l=s(r(4));function s(e){return e&&e.__esModule?e:{default:e}}var c=Object.freeze({EMOJI:1,AUDIO:2,ANIMATED:3,CUSTOMIZATION:4,UPLOAD:5,VANITY:6,STREAM:7});t.PerkIcons=c;t.getTiers=function(){return[{tier:o.PremiumGuildTiers.TIER_1,title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERKS_TITLE_TIER_1,perks:[{title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_TITLE_TIER_ANY_EMOJI.format({adding:o.PremiumGuildLimits[o.PremiumGuildTiers.TIER_1].emoji-o.PremiumGuildLimits[o.PremiumGuildTiers.NONE].emoji,total:o.PremiumGuildLimits[o.PremiumGuildTiers.TIER_1].emoji}),description:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_DESCRIPTION_TIER_1_EMOJI,icon:c.EMOJI},{title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_TITLE_TIER_ANY_AUDIO_QUALITY.format({bitrate:o.PremiumGuildLimits[o.PremiumGuildTiers.TIER_1].bitrate/1e3}),description:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_DESCRIPTION_TIER_1_AUDIO_QUALITY,icon:c.AUDIO},{title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_TITLE_TIER_1_ANIMATED_GUILD_ICON,description:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_DESCRIPTION_TIER_1_ANIMATED_GUILD_ICON.format(),icon:c.ANIMATED},{title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_TITLE_TIER_1_SPLASH,description:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_DESCRIPTION_TIER_1_SPLASH,icon:c.CUSTOMIZATION},{title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_TITLE_TIER_1_STREAMING,description:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_DESCRIPTION_TIER_1_STREAMING,icon:c.STREAM}]},{tier:o.PremiumGuildTiers.TIER_2,title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERKS_TITLE_TIER_2,perks:[{title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_TITLE_TIER_ANY_EMOJI.format({adding:o.PremiumGuildLimits[o.PremiumGuildTiers.TIER_2].emoji-o.PremiumGuildLimits[o.PremiumGuildTiers.TIER_1].emoji,total:o.PremiumGuildLimits[o.PremiumGuildTiers.TIER_2].emoji}),description:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_DESCRIPTION_TIER_2_EMOJI,icon:c.EMOJI},{title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_TITLE_TIER_ANY_AUDIO_QUALITY.format({bitrate:o.PremiumGuildLimits[o.PremiumGuildTiers.TIER_2].bitrate/1e3}),description:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_DESCRIPTION_TIER_2_AUDIO_QUALITY,icon:c.AUDIO},{title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_TITLE_TIER_2_BANNER,description:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_DESCRIPTION_TIER_2_BANNER,icon:c.CUSTOMIZATION},{title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_TITLE_TIER_ANY_UPLOAD_LIMIT.format({fileSize:(0,u.formatSize)(o.PremiumGuildLimits[o.PremiumGuildTiers.TIER_2].fileSize/1024,{useKibibytes:!0})}),description:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_DESCRIPTION_TIER_2_UPLOAD_LIMIT.format(),icon:c.UPLOAD},{title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_TITLE_TIER_2_STREAMING,description:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_DESCRIPTION_TIER_2_STREAMING,icon:c.STREAM}]},{tier:o.PremiumGuildTiers.TIER_3,title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERKS_TITLE_TIER_3,perks:[{title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_TITLE_TIER_ANY_EMOJI.format({adding:o.PremiumGuildLimits[o.PremiumGuildTiers.TIER_3].emoji-o.PremiumGuildLimits[o.PremiumGuildTiers.TIER_2].emoji,total:o.PremiumGuildLimits[o.PremiumGuildTiers.TIER_3].emoji}),description:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_DESCRIPTION_TIER_3_EMOJI,icon:c.EMOJI},{title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_TITLE_TIER_ANY_AUDIO_QUALITY.format({bitrate:o.PremiumGuildLimits[o.PremiumGuildTiers.TIER_3].bitrate/1e3}),description:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_DESCRIPTION_TIER_3_AUDIO_QUALITY,icon:c.AUDIO},{title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_TITLE_TIER_3_VANITY_URL,description:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_DESCRIPTION_TIER_3_VANITY_URL.format({helpdeskArticle:a.default.getArticleURL(o.HelpdeskArticles.GUILD_VANITY_URL)}),icon:c.VANITY},{title:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_TITLE_TIER_ANY_UPLOAD_LIMIT.format({fileSize:(0,u.formatSize)(o.PremiumGuildLimits[o.PremiumGuildTiers.TIER_3].fileSize/1024,{useKibibytes:!0})}),description:l.default.Messages.GUILD_SETTINGS_GUILD_PREMIUM_PERK_DESCRIPTION_TIER_3_UPLOAD_LIMIT.format(),icon:c.UPLOAD}]}]};var d=[{tier:o.PremiumGuildTiers.TIER_3,amount:o.PremiumGuildSubscriptionsRequired[o.PremiumGuildTiers.TIER_3],nextTier:null},{tier:o.PremiumGuildTiers.TIER_2,amount:o.PremiumGuildSubscriptionsRequired[o.PremiumGuildTiers.TIER_2],nextTier:o.PremiumGuildTiers.TIER_3},{tier:o.PremiumGuildTiers.TIER_1,amount:o.PremiumGuildSubscriptionsRequired[o.PremiumGuildTiers.TIER_1],nextTier:o.PremiumGuildTiers.TIER_2}];function f(e){for(var t=0,r=d;t<r.length;t++){var n=r[t];if(e>=n.amount)return n.nextTier}return o.PremiumGuildTiers.TIER_1}function _(e,t){return null==t||null!=e&&e>=t}t.GuildTierSubscriptionsOrdered=d},6555:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=d(r(3)),i=d(r(27)),u=d(r(2)),a=d(r(10)),o=d(r(225)),l=d(r(39)),s=d(r(25)),c=r(1);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var _="LAST_VIEWED_PATH",p=c.Routes.ME;function S(e){var t=e.guilds;if(a.default.isGuest()){if(null!=t&&1===t.length){var r=t[0].id;return p=c.Routes.CHANNEL(r,l.default.getChannelId(r)),!0}return!1}var n=s.default.disableGamesTab?c.Routes.ME:c.Routes.ACTIVITY;return n!==p&&(p=n,!0)}var I=new(function(e){var t,r,n,i,u;function c(){return e.apply(this,arguments)||this}return r=e,(t=c).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,c.prototype.initialize=function(){this.waitFor(o.default,s.default,a.default,l.default)},n=c,(i=[{key:"defaultRoute",get:function(){return p}}])&&f(n.prototype,i),u&&f(n,u),c}(n.default.Store))(u.default,{CONNECTION_OPEN:S,EXPERIMENTS_FETCH_SUCCESS:S,EXPERIMENT_OVERRIDE_TYPE:S,EXPERIMENT_OVERRIDE_BUCKET:S,CURRENT_USER_UPDATE:S,USER_SETTINGS_UPDATE:S,SAVE_LAST_ROUTE:function(e){var t=e.path;return i.default.set(_,t),!1}});t.default=I},6559:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(0)),u=f(r(8)),a=f(r(879)),o=f(r(42)),l=f(r(65)),s=r(1),c=f(r(4)),d=f(r(5955));function f(e){return e&&e.__esModule?e:{default:e}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t,r,i){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&u)for(var o in u)void 0===t[o]&&(t[o]=u[o]);else t||(t=u||{});if(1===a)t.children=i;else if(a>1){for(var l=new Array(a),s=0;s<a;s++)l[s]=arguments[s+3];t.children=l}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var S=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var f=n.prototype;return f.renderBadge=function(e,t,r){var n=this.props,s=n.className,c=n.badgeStrokeColor,f=n.tooltipColor,S=void 0===f?l.default.Colors.BRAND:f,I=n.tooltipPosition,m=n.width,E=n.height,P=n.badgeColor,T=n.iconClassName;return p(l.default,{color:S,position:I,text:e},void 0,function(e){return i.createElement(a.default,_({},e,{className:(0,u.default)(r,s),color:P,stroke:c,width:m,height:E}),p(o.default,{name:t,className:(0,u.default)(d.default.icon,T)}))})},f.render=function(){var e=this.props.guild;return e.features.has(s.GuildFeatures.VERIFIED)?this.renderBadge(c.default.Messages.GUILD_VERIFIED,o.default.Names.VERIFIED,d.default.verified):e.features.has(s.GuildFeatures.PARTNERED)?this.renderBadge(c.default.Messages.GUILD_PARTNERED,o.default.Names.PARTNER,d.default.partnered):null},n}(i.PureComponent);S.displayName="GuildBadge";var I=S;t.default=I},6563:function(e,t,r){"use strict";t.__esModule=!0,t.fetchPremiumSubscriptions=function(e){return f.apply(this,arguments)},t.fetchUserPremiumGuildSubscriptions=function(){return _.apply(this,arguments)},t.fetchUserPremiumGuildSubscriptionSlots=p,t.fetchPremiumSubscriptionCooldown=function(){return I.apply(this,arguments)},t.subscribeToGuild=function(e,t){return m.apply(this,arguments)},t.unsubscribeFromGuild=function(e,t){return E.apply(this,arguments)},t.cancelUserPremiumGuildSubscriptionSlot=function(e){return P.apply(this,arguments)},t.uncancelUserPremiumGuildSubscriptionSlot=function(e){return T.apply(this,arguments)};var n=s(r(12)),i=s(r(2)),u=r(237),a=s(r(8500)),o=s(r(1029)),l=r(1);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r,n,i,u,a){try{var o=e[u](a),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var u=e.apply(t,r);function a(e){c(u,n,i,a,o,"next",e)}function o(e){c(u,n,i,a,o,"throw",e)}a(void 0)})}}function f(){return(f=d(regeneratorRuntime.mark(function e(t){var r,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.default.get(l.Endpoints.GUILD_PREMIUM_SUBSCRIPTIONS(t));case 2:return r=e.sent,u=r.body.map(function(e){return a.default.createFromServer(e)}),i.default.dispatch({type:l.ActionTypes.GUILD_PREMIUM_SUBSCRIPTIONS_FETCH_SUCCESS,guildId:t,subscriptions:u}),e.abrupt("return",u);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(){return(_=d(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.default.get(l.Endpoints.USER_GUILD_PREMIUM_SUBSCRIPTIONS);case 2:return t=e.sent,r=t.body.map(function(e){return a.default.createFromServer(e)}),i.default.dispatch({type:l.ActionTypes.GUILD_USER_PREMIUM_SUBSCRIPTIONS_FETCH_SUCCESS,subscriptions:r}),e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function p(){return S.apply(this,arguments)}function S(){return(S=d(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.default.get(l.Endpoints.USER_PREMIUM_GUILD_SUBSCRIPTION_SLOTS);case 2:return t=e.sent,r=t.body.map(function(e){return o.default.createFromServer(e)}),i.default.dispatch({type:l.ActionTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_SLOTS_FETCH_SUCCESS,userPremiumGuildSubscriptionSlots:r}),e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(){return(I=d(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.default.get(l.Endpoints.GUILD_PREMIUM_SUBSCRIPTION_COOLDOWN);case 3:return t=e.sent,r=t.body.ends_at,i.default.dispatch({type:l.ActionTypes.GUILD_PREMIUM_SUBSCRIPTIONS_COOLDOWN_FETCH_SUCCESS,endsAt:r}),e.abrupt("return",r);case 9:if(e.prev=9,e.t0=e.catch(0),404!==e.t0.status){e.next=15;break}i.default.dispatch({type:l.ActionTypes.GUILD_PREMIUM_SUBSCRIPTIONS_COOLDOWN_FETCH_SUCCESS,endsAt:null}),e.next=16;break;case 15:throw new u.PremiumGuildSubscriptionError(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}function m(){return(m=d(regeneratorRuntime.mark(function e(t,r){var o,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.default.dispatch({type:l.ActionTypes.GUILD_PREMIUM_SUBSCRIBE_START}),e.prev=1,e.next=4,n.default.put({url:l.Endpoints.GUILD_PREMIUM_SUBSCRIPTIONS(t),body:{user_premium_guild_subscription_slot_ids:r}});case 4:return o=e.sent,s=Array.isArray(o.body)?o.body.map(a.default.createFromServer):[a.default.createFromServer(o.body)],i.default.dispatch({type:l.ActionTypes.GUILD_PREMIUM_SUBSCRIBE_SUCCESS,subscriptions:s}),p(),e.abrupt("return",s);case 11:throw e.prev=11,e.t0=e.catch(1),c=new u.PremiumGuildSubscriptionError(e.t0),i.default.dispatch({type:l.ActionTypes.GUILD_PREMIUM_SUBSCRIBE_FAIL,error:c}),c;case 16:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}function E(){return(E=d(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.default.dispatch({type:l.ActionTypes.GUILD_PREMIUM_UNSUBSCRIBE_START}),e.prev=1,e.next=4,n.default.delete(l.Endpoints.GUILD_PREMIUM_SUBSCRIPTION(t,r));case 4:p(),e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(1),a=new u.PremiumGuildSubscriptionError(e.t0),i.default.dispatch({type:l.ActionTypes.GUILD_PREMIUM_UNSUBSCRIBE_FAIL,error:a}),a;case 12:i.default.dispatch({type:l.ActionTypes.GUILD_PREMIUM_UNSUBSCRIBE_SUCCESS,subscriptionId:r});case 13:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function P(){return(P=d(regeneratorRuntime.mark(function e(t){var r,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.default.post({url:l.Endpoints.USER_PREMIUM_GUILD_SUBSCRIPTION_SLOT_CANCEL(t)});case 2:return r=e.sent,u=o.default.createFromServer(r.body),i.default.dispatch({type:l.ActionTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_SLOT_UPDATE_SUCCESS,userPremiumGuildSubscriptionSlot:u}),e.abrupt("return",u);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(){return(T=d(regeneratorRuntime.mark(function e(t){var r,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.default.post({url:l.Endpoints.USER_PREMIUM_GUILD_SUBSCRIPTION_SLOT_UNCANCEL(t)});case 2:return r=e.sent,u=o.default.createFromServer(r.body),i.default.dispatch({type:l.ActionTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_SLOT_UPDATE_SUCCESS,userPremiumGuildSubscriptionSlot:u}),e.abrupt("return",u);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}},6612:function(e,t,r){"use strict";function n(e,t,r,n,i,u){if(void 0===i&&(i=0),void 0===u&&(u=0),e!==r||t!==n){var a=e>r?r/e:1;e=Math.max(Math.round(e*a),i);var o=(t=Math.max(Math.round(t*a),u))>n?n/t:1;e=Math.max(Math.round(e*o),i),t=Math.max(Math.round(t*o),u)}return{width:e,height:t}}t.__esModule=!0,t.fit=n,t.zoomFit=function(e,t){var r=Math.min(Math.round(.65*window.innerHeight),i),u=Math.min(Math.round(.75*window.innerWidth),i);return n(e,t,u,r)},t.getRatio=function(e,t,r,n){var i=1;e>r&&(i=r/e);e=Math.round(e*i),t=Math.round(t*i);var u=1;t>n&&(u=n/t);return Math.min(i*u,1)},t.makeCssUrlString=function(e){if(null==e||""===e)return"none";return"url("+e+")"},t.IMAGE_MAX_ZOOM=void 0;var i=2e3;t.IMAGE_MAX_ZOOM=i},6640:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=f(r(6)),i=f(r(5)),u=f(r(3)),a=r(29),o=f(r(2)),l=r(876),s=f(r(1042)),c=r(284),d=r(1);function f(e){return e&&e.__esModule?e:{default:e}}var _={},p={},S=[],I=[],m=[],E={},P=new Set,T={},R={},M=null,U=null,v=null,N=new Set;function L(e){var t=s.default.createFromServer(e),r=t.code;if(null!=p[r])p[r]=p[r].merge(t);else if(p[r]=t,null!=t.expiresAt){var n=new a.Timeout;_[r]=n,function e(t){var r=p[t];if(null==r||null==r.expiresAt)return;var n=r.expiresAt.valueOf()-(0,i.default)().valueOf();if(n<=0)delete p[t],delete _[t],g.emitChange();else{var u=_[t];if(null==u)return;u.start(Math.min(d.MAX_TIMEOUT_MS,n),function(){return e(t)})}}(r)}}function A(e,t){if(void 0===t&&(t=!1),t&&!N.has(e.channel_id))return!1;var r=(0,c.findGiftCodes)(e.content);return 0!==r.length&&(r.forEach(function(e){S.includes(e)||m.includes(e)||(O({code:e}),o.default.wait(function(){return(0,l.resolveGiftCode)(e,!1,!0).catch(d.NOOP_NULL)}))}),!1)}function O(e){var t=e.code;S.includes(t)||(S=[].concat(S,[t]))}function C(e){return A(e.message,!0)}function y(e){var t=e.channelId,r=e.messages;N.add(t),r.forEach(function(e){return A(e,!0)})}var g=new(function(e){var t,r;function i(){return e.apply(this,arguments)||this}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=i.prototype;return u.isOpen=function(){return null!=M},u.getProps=function(){return{giftCode:null!=M?p[M]:null,channelContext:U,analyticsLocation:v}},u.get=function(e){var t=p[e];return null==t||t.isExpired()?null:t},u.getError=function(e){return null!=e?R[e]:null},u.getForGifterSKUAndPlan=function(e,t,r){return n.default.values(p).filter(function(n){return n.userId===e&&n.skuId===t&&(null==r||n.subscriptionPlanId===r)&&!n.isExpired()})},u.getIsResolved=function(e){return m.includes(e)},u.getIsAccepting=function(e){return I.includes(e)},u.getNativeAppState=function(e){return E[e]},u.getUserGiftCodesFetchingForSKUAndPlan=function(e,t){return P.has((0,c.makeComboId)(e,t))},u.getUserGiftCodesLoadedAtForSKUAndPlan=function(e,t){return T[(0,c.makeComboId)(e,t)]},u.getResolvingCodes=function(){return S},u.getResolvedCodes=function(){return m},u.getAcceptingCodes=function(){return I},u.getChannelContext=function(){return U},i}(u.default.Store))(o.default,{CONNECTION_OPEN:function(e){return N.clear(),!1},CHANNEL_SELECT:function(e){var t=e.channelId;return null!=t&&N.add(t),!1},GIFT_CODE_RESOLVE:O,GIFT_CODE_RESOLVE_SUCCESS:function(e){var t=e.giftCode;return S=S.filter(function(e){return e!==t.code}),m.includes(t)||(m=[].concat(m,[t.code])),L(t)},GIFT_CODE_RESOLVE_FAILURE:function(e){var t=e.code;S=S.filter(function(e){return e!==t}),m.includes(t)||(m=[].concat(m,[t]))},GIFT_CODE_REDEEM:function(e){var t=e.code;I.includes(t)||(I=[].concat(I,[t]))},GIFT_CODE_REDEEM_SUCCESS:function(e){var t=e.code;I=I.filter(function(e){return e!==t});var r=p[t];null!=r&&(p[t]=r.merge({redeemed:!0,uses:r.uses+1}))},GIFT_CODE_REDEEM_FAILURE:function(e){var t=e.code,r=e.error;I=I.filter(function(e){return e!==t});var n=p[t];if(R[t]=r,null!=n)switch(r.code){case d.AbortCodes.UNKNOWN_GIFT_CODE:p[t]=n.set("revoked",!0);break;case d.AbortCodes.INVALID_GIFT_REDEMPTION_EXHAUSTED:p[t]=n.set("uses",n.maxUses)}},GIFT_CODE_REVOKE_SUCCESS:function(e){var t=e.code;delete p[t];var r=_[t];null!=r&&(r.stop(),delete _[t]),m.includes(t)||(m=[].concat(m,[t]))},GIFT_CODE_CREATE_SUCCESS:function(e){L(e.giftCode)},GIFT_CODES_FETCH:function(e){var t=e.skuId,r=e.subscriptionPlanId;P.add((0,c.makeComboId)(t,r))},GIFT_CODES_FETCH_SUCCESS:function(e){var t=e.giftCodes,r=e.skuId,n=e.subscriptionPlanId;t.forEach(L);var i=(0,c.makeComboId)(r,n);T[i]=Date.now(),P.delete(i)},GIFT_CODES_FETCH_FAILURE:function(e){var t=e.skuId,r=e.subscriptionPlanId;P.delete((0,c.makeComboId)(t,r))},GIFT_CODE_NATIVE_APP_MODAL_OPEN:function(e){var t=e.code;E[t]=d.NativeAppStates.OPENING},GIFT_CODE_NATIVE_APP_MODAL_OPEN_SUCCESS:function(e){var t=e.code;E[t]=d.NativeAppStates.OPEN},GIFT_CODE_NATIVE_APP_MODAL_OPEN_FAILURE:function(e){var t=e.code;E[t]=d.NativeAppStates.OPEN_FAIL},MESSAGE_CREATE:C,MESSAGE_UPDATE:C,LOAD_MESSAGES_SUCCESS:y,LOAD_MESSAGES_AROUND_SUCCESS:y,LOAD_RECENT_MENTIONS_SUCCESS:function(e){e.messages.forEach(function(e){return A(e)})},LOAD_PINNED_MESSAGES_SUCCESS:function(e){e.messages.forEach(function(e){return A(e)})},SEARCH_FINISH:function(e){e.messages.forEach(function(e){e.forEach(function(e){return A(e)})})},GIFT_CODE_MODAL_OPEN:function(e){var t=e.code,r=e.channelId,n=e.analyticsLocation;M=t,U=r,v=n},GIFT_CODE_MODAL_CLOSE:function(e){return M=null,U=null,void(v=null)},GIFT_CODE_UPDATE:function(e){var t=e.uses,r=e.code,n=p[r];null!=n&&(p[r]=n.set("uses",Math.max(n.uses,t)))}}),G=g;t.default=G},6694:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=u(r(3)),i=u(r(2));r(1);function u(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var l=!1,s={};function c(e){var t,r=e.userPremiumGuildSubscriptionSlot;s=o({},s,((t={})[r.id]=r,t))}var d=new(function(e){var t,r,n,i,u;function o(){return e.apply(this,arguments)||this}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o.prototype.getSlot=function(e){return s[e]},n=o,(i=[{key:"hasFetched",get:function(){return l}},{key:"slots",get:function(){return s}}])&&a(n.prototype,i),u&&a(n,u),o}(n.default.Store))(i.default,{USER_PREMIUM_GUILD_SUBSCRIPTION_SLOTS_FETCH_SUCCESS:function(e){var t=e.userPremiumGuildSubscriptionSlots;s={},t.forEach(function(e){s[e.id]=e}),l=!0},USER_PREMIUM_GUILD_SUBSCRIPTION_SLOT_UPDATE_SUCCESS:c,USER_PREMIUM_GUILD_SUBSCRIPTION_SLOT_CREATE:c,LOGOUT:function(e){return s={},void(l=!1)}});t.default=d},7056:function(e,t,r){"use strict";t.__esModule=!0,t.backgroundImagePreloader=function(e){var t=function(t){var r,n;function u(e){var r;(r=t.call(this,e)||this).cachedURLs=[],r.canceller=null;var n=e.style,i=n?s(n.backgroundImage):null;return r.cachedURLs=[i],r.state={cached:i,url:null,loaded:!0},r}n=t,(r=u).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n;var l=u.prototype;return l.componentDidUpdate=function(e,t){var r=this;if(t!==this.state){var n=this.state,i=n.cached,u=n.loaded,a=this.props.style,o=a?s(a.backgroundImage):null;null==o&&o!==i?this.setState({loaded:!0,cached:o}):this.cachedURLs.indexOf(o)>=0?this.setState({loaded:!0,cached:o}):null!=o&&o!==i&&!0===u&&this.setState({loaded:!1},function(){return r.preloadURL(o)})}},l.preloadURL=function(e){var t=this;this.canceller&&this.canceller(),this.canceller=(0,a.loadImage)(e,function(r){t.canceller&&(t.canceller=null),r||(t.cachedURLs.push(e),t.setState({cached:e,loaded:!0}));var n=t.props.onBackgroundImageLoad;n&&n(r,e)})},l.componentWillUnmount=function(){this.canceller&&this.canceller(),this.cachedURLs.length=0},l.render=function(){var t=this.props,r=t.style,n=(t.onBackgroundImageLoad,function(e,t){if(null==e)return{};var r,n,i={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(t,["style","onBackgroundImageLoad"])),u=this.state,a=u.loaded,l=u.cached;return!a&&r&&(r=o({},r,{backgroundImage:c(l)})),i.createElement(e,o({style:r},n))},u}(i.Component);return t.displayName="BackgroundImagePreloader",(0,u.default)(t,e),t};var n,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(0)),u=(n=r(6864))&&n.__esModule?n:{default:n},a=r(229);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var l=/url\(['"](.*)['"]\)/,s=function(e){if(!e||"none"===e)return null;var t=e.match(l);return t?t[1]:e};function c(e){return e&&"none"!==e?"url("+e+")":"none"}},7078:function(e,t,r){"use strict";t.__esModule=!0,t.calculateAdditionalPlansWithPremiumGuildAdjustment=function(e,t){var r=i.default.getHardcoded(e.planId),n=i.default.getHardcodedForSkuAndInterval(a.PremiumSubscriptionSKUs.GUILD,r.interval),o=null!=e.renewalMutations?e.renewalMutations.additionalPlans:e.additionalPlans,l=(0,u.getNumPremiumGuildSubscriptions)(o)+t,s=o.filter(function(e){return e.planId!==n.id});if(l<0)throw new Error("Invalid adjustment");if(0===l)return s;return[].concat(s,[{planId:n.id,quantity:l}])};var n,i=(n=r(221))&&n.__esModule?n:{default:n},u=r(96),a=r(1)},7702:function(e,t,r){"use strict";t.__esModule=!0,t.PremiumGuildSubscriptionPurchaseModal=ie,t.openPremiumGuildSubscriptionPurchaseModal=function(e,t,r,n){var i=P.default.getSubscription();if(null!=i&&i.paymentGateway===B.PaymentGateways.APPLE)return null!=r&&r(),void s.default.show({title:j.default.Messages.BILLING_MANAGED_BY_APPLE,body:j.default.Messages.PREMIUM_GUILD_PERKS_MODAL_BUTTON_UPGRADE_TO_PREMIUM_IOS_ERROR.format({appleBillingLink:B.AppleBillingUrls.SUBSCRIPTION_MANAGEMENT})});(0,O.openModal)(function(i){var u=i.transitionState,a=i.onClose;return H(ie,{transitionState:u,onClose:function(e){a(),null!=n&&n(e)},analyticsLocation:e,guildId:t,closeGuildPerksModal:r})},{onCloseRequest:function(){}})};var n,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(0)),u=Y(r(16)),a=r(230),o=Y(r(74)),l=r(3),s=Y(r(142)),c=r(186),d=r(6563),f=Y(r(329)),_=Y(r(882)),p=Y(r(528)),S=Y(r(19)),I=Y(r(25)),m=Y(r(277)),E=Y(r(221)),P=Y(r(336)),T=Y(r(6694)),R=Y(r(895)),M=Y(r(21)),U=Y(r(24)),v=Y(r(274)),N=Y(r(182)),L=Y(r(65)),A=r(220),O=r(265),C=Y(r(15)),y=r(6534),g=r(385),G=r(206),b=r(298),h=r(7078),D=Y(r(7703)),w=r(531),k=Y(r(8506)),F=r(7704),B=r(1),j=Y(r(4)),x=Y(r(6280));function Y(e){return e&&e.__esModule?e:{default:e}}function H(e,t,r,i){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&u)for(var o in u)void 0===t[o]&&(t[o]=u[o]);else t||(t=u||{});if(1===a)t.children=i;else if(a>1){for(var l=new Array(a),s=0;s<a;s++)l[s]=arguments[s+3];t.children=l}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function V(e,t,r,n,i,u,a){try{var o=e[u](a),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function W(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var u=e.apply(t,r);function a(e){V(u,n,i,a,o,"next",e)}function o(e){V(u,n,i,a,o,"throw",e)}a(void 0)})}}var z=B.SubscriptionPlans.NONE_MONTH;function J(e){switch(e){case G.Steps.PLAN_SELECT:return j.default.Messages.BILLING_STEP_SELECT_PLAN;case G.Steps.PAYMENT_TYPE:return j.default.Messages.BILLING_STEP_PAYMENT_TYPE;case G.Steps.CREDIT_CARD_INFORMATION:return j.default.Messages.BILLING_STEP_CREDIT_CARD_INFORMATION;case G.Steps.PAYPAL_INFORMATION:return j.default.Messages.BILLING_STEP_PAYPAL;case G.Steps.PAYMENT_REQUEST_INFORMATION:return j.default.Messages.BILLING_STEP_PAYMENT_INFO;case G.Steps.ADDRESS:return j.default.Messages.BILLING_STEP_ADDRESS;case G.Steps.REVIEW:return j.default.Messages.BILLING_STEP_REVIEW}throw new Error("Unexpected step: "+e)}var $=[G.Steps.PLAN_SELECT,G.Steps.REVIEW,G.Steps.CONFIRM],Q=[G.Steps.PLAN_SELECT].concat(w.SHARED_ADD_PAYMENT_STEPS,[G.Steps.REVIEW,G.Steps.CONFIRM]),X=[G.Steps.PLAN_SELECT].concat(w.SHARED_CREDIT_CARD_STEPS,[G.Steps.REVIEW,G.Steps.CONFIRM]),q=[G.Steps.PLAN_SELECT].concat(w.SHARED_PAYPAL_STEPS,[G.Steps.REVIEW,G.Steps.CONFIRM]),Z=[G.Steps.PLAN_SELECT].concat(w.SHARED_PAYMENT_REQUEST_STEPS,[G.Steps.REVIEW,G.Steps.CONFIRM]),ee=500;function te(e,t){return re.apply(this,arguments)}function re(){return(re=W(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.fetchUserPremiumGuildSubscriptionSlots)();case 2:return n=(0,y.getAvailableUserPremiumGuildSubscriptionSlots)(T.default.slots),e.abrupt("return",(0,d.subscribeToGuild)(t,n.map(function(e){return e.id}).slice(0,r)));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ne=H("div",{},void 0,H(N.default,{}));function ie(e){var t=e.transitionState,r=e.onClose,n=e.closeGuildPerksModal,s=e.analyticsLocation,d=e.guildId,T=e.onSubscribeComplete,N=e.disablePremiumUpsell,O=void 0!==N&&N,y=(0,l.useStateFromStores)([P.default],function(){return P.default.getSubscription()});if(null!=y&&null!=y.renewalMutations)throw new Error("Purchasing guild subscriptions with a pending subscription mutation is not permitted.");var Y=(0,l.useStateFromStores)([P.default],function(){return P.default.hasFetchedSubscriptions()}),V=null!=y?y.paymentSourceId:null,re=(0,l.useStateFromStores)([E.default],function(){return null!=y?E.default.get(y.planId):null}),ie=(0,l.useStateFromStores)([E.default],function(){return null==re?E.default.getHardcoded(z):re}),ue=(0,l.useStateFromStores)([I.default],function(){return I.default.theme}),ae=(0,l.useStateFromStores)([m.default],function(){return m.default.defaultPaymentSourceId}),oe=(0,w.useSharedPaymentModal)(null!=V?V:Y?ae:null),le=oe.paymentSources,se=oe.paymentSourceId,ce=oe.setPaymentSourceId,de=oe.creditCardState,fe=oe.setCreditCardState,_e=oe.billingAddressState,pe=oe.setBillingAddressState,Se=oe.isSubmittingCurrentStep,Ie=oe.setIsSubmittingCurrentStep,me=oe.braintreeEmail,Ee=oe.braintreeNonce,Pe=oe.paymentError,Te=oe.paymentAuthenticationState,Re=oe.purchaseError,Me=oe.setPurchaseError,Ue=oe.purchaseErrorBlockRef,ve=Object.keys(le).length>0,Ne=i.useState(1),Le=Ne[0],Ae=Ne[1],Oe=i.useState(!1),Ce=Oe[0],ye=Oe[1],ge=i.useMemo(function(){return null==y?[{planId:B.SubscriptionPlans.PREMIUM_MONTH_GUILD,quantity:Le}]:(0,h.calculateAdditionalPlansWithPremiumGuildAdjustment)(y,Le)},[y,Le]),Ge=(0,a.useLazyValue)(function(){return[o.default.v4(),Date.now()]}),be=Ge[0],he=Ge[1],De={load_id:be,payment_type:"subscription",sku_id:B.PremiumSubscriptionSKUs.GUILD,subscription_plan_id:ge.some(function(e){return e.planId===B.SubscriptionPlans.PREMIUM_YEAR_GUILD})?B.SubscriptionPlans.PREMIUM_YEAR_GUILD:B.SubscriptionPlans.PREMIUM_MONTH_GUILD,quantity:Le,location:s};i.useEffect(function(){P.default.hasFetchedSubscriptions()||(0,c.fetchSubscriptions)(),C.default.track(B.AnalyticEvents.PAYMENT_FLOW_STARTED,De)},[]);var we=i.useState($),ke=we[0],Fe=we[1],Be=i.useState(G.Steps.PLAN_SELECT),je=Be[0],xe=Be[1],Ye=i.useState(b.PurchaseState.WAITING),He=Ye[0],Ke=Ye[1],Ve=(0,a.useStableMemo)(function(){return Date.now()},[je]),We=function(e){xe(e),Me(null);var t=Date.now();C.default.track(B.AnalyticEvents.PAYMENT_FLOW_STEP,K({},De,{from_step:je,to_step:e,step_duration_ms:t-Ve,flow_duration_ms:t-he}))},ze=function(){r(He===b.PurchaseState.COMPLETED)};Te!==g.PaymentAuthenticationState.PENDING&&je!==G.Steps.CONFIRM&&null!=V&&(ke!==$&&Fe($),$.includes(je)||je===G.Steps.PREMIUM_UPSELL||We(G.Steps.REVIEW)),je===G.Steps.PAYMENT_TYPE&&ke!==Q&&Fe(Q);var Je=null!=y&&y.isPurchasedViaApple;Je&&je!==G.Steps.PLAN_SELECT&&xe(G.Steps.PLAN_SELECT),(0,g.setPaymentStepForAuthentication)(je,Te,We),(0,G.setPurchaseStateForStep)(je,He,Ke);var $e,Qe=i.useRef(null),Xe=(0,p.default)(!1,ee),qe=Xe[0],Ze=Xe[1];if(Y)if(je===G.Steps.PREMIUM_UPSELL)$e=H(k.default,{premiumSubscriptionPlan:ie,premiumSubscriptionPaymentSourceId:V,analyticsLocation:s,onClose:ze,onBack:function(){return We(G.Steps.PLAN_SELECT)},onSkip:function(){We(null!=V||ve?G.Steps.REVIEW:G.Steps.PAYMENT_TYPE)}});else{var et,tt,rt,nt;switch(je){case G.Steps.PLAN_SELECT:et=H(F.PremiumGuildSubscriptionPlanSelect,{premiumSubscriptionPlan:ie,numGuildSubscriptions:Le,setNumGuildSubscriptions:Ae,premiumSubscription:y,onClickPremiumSubscriptionLink:function(){ze(),null!=n&&n(),f.default.open(B.UserSettingsSections.PREMIUM)}}),Je&&(et=i.createElement(i.Fragment,null,H(v.default,{className:x.default.appleErrorBlock},void 0,j.default.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_APPLE.format({appleSubscriptionLink:B.AppleBillingUrls.SUBSCRIPTION_MANAGEMENT})),et)),rt=H(M.default,{look:M.default.Looks.LINK,color:ue===B.ThemeTypes.LIGHT?M.default.Colors.PRIMARY:M.default.Colors.WHITE,onClick:ze},void 0,j.default.Messages.NEVERMIND),nt=H(M.default,{type:"submit",disabled:0===Le||Je,onClick:function(){O||null!=re&&re.premiumSubscriptionType===B.PremiumTypes.TIER_2?We(null!=V||ve?G.Steps.REVIEW:G.Steps.PAYMENT_TYPE):We(G.Steps.PREMIUM_UPSELL)}},void 0,j.default.Messages.CONTINUE);break;case G.Steps.PAYMENT_TYPE:case G.Steps.CREDIT_CARD_INFORMATION:case G.Steps.PAYPAL_INFORMATION:case G.Steps.PAYMENT_REQUEST_INFORMATION:case G.Steps.ADDRESS:case G.Steps.AWAITING_AUTHENTICATION:var it=(0,w.renderPaymentModalStep)(je,We,ke,Fe,_e,pe,le,ce,de,fe,Se,Ie,me,Ee,G.Steps.REVIEW,X,q,Z,Q);et=it.body,nt=it.submitButton,tt=je===G.Steps.PAYMENT_TYPE&&null==it.backStep?G.Steps.PLAN_SELECT:it.backStep;break;case G.Steps.REVIEW:et=H(F.PremiumGuildSubscriptionReview,{paymentSources:le,paymentSourceId:se,currentPremiumSubscription:y,premiumSubscriptionPaymentSourceId:V,premiumSubscriptionPlan:ie,newAdditionalPlans:ge,onPaymentSourceChange:function(e){return ce(null!=e?e.id:null)},onPaymentSourceAdd:function(){We(G.Steps.PAYMENT_TYPE),ce(null)},onPurchaseTermsChange:ye,legalTermsNodeRef:Qe,hasLegalTermsFlash:qe}),tt=G.Steps.PLAN_SELECT,nt=Ce?H(M.default,{color:M.default.Colors.GREEN,type:"submit",submitting:Se,onClick:W(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,u.default)(null!=ge,"Missing newAdditionalPlans"),e.prev=1,Ke(b.PurchaseState.PURCHASING),Ie(!0),(0,u.default)(null!=se,"Missing paymentSourceId"),C.default.track(B.AnalyticEvents.PAYMENT_FLOW_COMPLETED,K({},De,{duration_ms:Date.now()-he})),null!=y&&null!=re){e.next=11;break}return e.next=9,(0,c.createSubscription)({additionalPlans:ge,planId:z,paymentSource:le[se]});case 9:e.next=15;break;case 11:return t={additionalPlans:ge},null==V&&(t.paymentSourceId=se),e.next=15,(0,c.updateSubscription)(y,t);case 15:We(G.Steps.CONFIRM),Ke(b.PurchaseState.COMPLETED),null!=d&&te(d,Le),null!=T&&T(),e.next=27;break;case 21:e.prev=21,e.t0=e.catch(1),Ke(b.PurchaseState.FAIL),Me(e.t0),r=null!=se?le[se]:null,C.default.track(B.AnalyticEvents.PAYMENT_FLOW_FAILED,K({},De,{payment_gateway:null!=r?r.type===B.PaymentSourceTypes.CARD?B.PaymentGateways.STRIPE:B.PaymentGateways.BRAINTREE:null,payment_source_id:se,duration_ms:Date.now()-he}));case 27:return e.prev=27,Ie(!1),e.finish(27);case 30:case"end":return e.stop()}},e,null,[[1,21,27,30]])}))},void 0,j.default.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_SUBMIT):H(L.default,{text:j.default.Messages.BILLING_ACCEPT_TERMS_TOOLTIP},void 0,function(e){return i.createElement(M.default,K({},e,{color:M.default.Colors.GREEN,onClick:function(){null!=Qe.current&&(Qe.current.scrollIntoView({behavior:"smooth"}),Ze(!0))},type:"submit"}),j.default.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_SUBMIT)});break;case G.Steps.CONFIRM:var ut=S.default.getGuild(d);(0,u.default)(null!=ut,"Unexpected missing guild"),et=H(F.PremiumGuildSubscriptionConfirmation,{guild:ut,guildSubscriptionQuantity:Le,onClose:ze,withAnimation:!1})}var at=null!=Pe&&null==(0,G.errorToStep)(Pe)?Pe:Re;$e=H("form",{className:x.default.contentWrapper,onSubmit:function(e){return e.preventDefault()}},void 0,H(A.ModalContent,{outerClassName:x.default.content},void 0,je!==G.Steps.CONFIRM?H("div",{className:x.default.breadcrumbsWrapper},void 0,H(R.default,{activeId:G.COLLAPSED_PAYMENT_BREADCRUMB_STEPS.has(je)?G.Steps.PAYMENT_TYPE:je,breadcrumbs:ke.filter(function(e){return e!==G.Steps.CONFIRM&&!G.COLLAPSED_PAYMENT_BREADCRUMB_STEPS.has(e)}).map(function(e){return{id:e,label:J(e)}})})):null,null==at?null:i.createElement(v.default,{ref:Ue},at.message),H("div",{className:x.default.bodyWrapper},void 0,H(_.default,{step:je,steps:ke,sideMargin:20},void 0,et))),je!==G.Steps.CONFIRM?H(A.ModalFooter,{direction:U.default.Direction.HORIZONTAL,align:U.default.Align.CENTER,justify:U.default.Justify.END},void 0,null!=tt?H("div",{className:x.default.backStep},void 0,H(M.default,{color:ue===B.ThemeTypes.LIGHT?M.default.Colors.PRIMARY:M.default.Colors.WHITE,look:M.default.Looks.LINK,size:M.default.Sizes.NONE,onClick:function(){null!=tt&&We(tt)}},void 0,j.default.Messages.BACK)):null,H("div",{className:x.default.footerRight},void 0,rt,nt)):null)}else $e=ne;return H(A.ModalRoot,{transitionState:t},void 0,je!==G.Steps.PREMIUM_UPSELL?H(D.default,{onClose:ze,currentStep:je,purchaseState:He}):null,$e)}ie.displayName="PremiumGuildSubscriptionPurchaseModal"},7703:function(e,t,r){"use strict";t.__esModule=!0,t.default=d;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}t.default=e}(r(0));var n,i=s(r(24)),u=r(996),a=r(220),o=r(1043),l=s(r(6276));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r,i){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&u)for(var o in u)void 0===t[o]&&(t[o]=u[o]);else t||(t=u||{});if(1===a)t.children=i;else if(a>1){for(var l=new Array(a),s=0;s<a;s++)l[s]=arguments[s+3];t.children=l}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function d(e){var t=e.purchaseState,r=e.currentStep,n=e.onClose,s=(0,o.usePaymentModalAnimationScene)({purchaseState:t,currentStep:r,initialScene:u.PremiumPaymentGuildAnimation.Scenes.ENTRY,purchaseScene:u.PremiumPaymentGuildAnimation.Scenes.STARS,errorScene:u.PremiumPaymentGuildAnimation.Scenes.ERROR,successScene:u.PremiumPaymentGuildAnimation.Scenes.SUCCESS}),d=s[0],f=s[1];return c(a.ModalHeader,{align:i.default.Align.START,className:l.default.header,separator:!1},void 0,c(u.PremiumPaymentGuildAnimation,{className:l.default.animation,nextScene:d,onScenePlay:function(e){return f(u.PremiumPaymentGuildAnimation.getNextScene(e))}}),c("div",{className:l.default.headerTitle}),c(a.ModalCloseButton,{onClick:n,className:l.default.closeButton}))}d.displayName="PremiumGuildModalHeader"},7704:function(e,t,r){"use strict";t.__esModule=!0,t.PremiumGuildSubscriptionPlanSelect=j,t.PremiumGuildSubscriptionInvoicePreview=H,t.PremiumGuildSubscriptionReview=V,t.PremiumGuildSubscriptionConfirmation=W;var n,i=w(r(0)),u=D(r(8)),a=D(r(16)),o=r(3),l=D(r(910)),s=D(r(481)),c=D(r(359)),d=D(r(1044)),f=D(r(97)),_=D(r(11)),p=D(r(277)),S=D(r(221)),I=D(r(21)),m=D(r(42)),E=D(r(8507)),P=r(996),T=D(r(182)),R=r(65),M=D(r(352)),U=r(136),v=w(r(96)),N=r(156),L=r(351),A=r(283),O=r(363),C=D(r(1047)),y=D(r(530)),g=r(489),G=r(1),b=D(r(4)),h=D(r(6279));function D(e){return e&&e.__esModule?e:{default:e}}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function k(e,t,r,i){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&u)for(var o in u)void 0===t[o]&&(t[o]=u[o]);else t||(t=u||{});if(1===a)t.children=i;else if(a>1){for(var l=new Array(a),s=0;s<a;s++)l[s]=arguments[s+3];t.children=l}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var F=1,B=30;function j(e){var t=e.premiumSubscriptionPlan,r=e.numGuildSubscriptions,n=e.setNumGuildSubscriptions,i=e.premiumSubscription,l=e.onClickPremiumSubscriptionLink,s=t.interval,c=(0,o.useStateFromStores)([S.default],function(){return S.default.getForSkuAndInterval(G.PremiumSubscriptionSKUs.GUILD,s)}),d=(0,o.useStateFromStores)([_.default],function(){return _.default.getCurrentUser()});(0,a.default)(null!=c,"Missing premiumGuildSubscriptionPlan");var f=v.default.isPremium(d)?c.getPriceForPremiumUser():c.price,p=(0,N.formatPrice)(f,c.currency),I=r*f,P=v.default.isPremium(d)&&null!=i?b.default.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_FOOTER_DISCOUNT.format({planName:v.default.getDisplayPremiumType(i.planId)}):b.default.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_FOOTER_UPSELL.format({onPremiumSubscriptionClick:l,discountPercentage:L.PREMIUM_GUILD_FOR_PREMIUM_USER_DISCOUNT_PERCENT,freeSubscriptionCount:L.NUM_FREE_GUILD_SUBSCRIPTIONS_WITH_PREMIUM});return k("div",{className:h.default.planSelectStep},void 0,k("div",{className:(0,u.default)(h.default.planSelectText,h.default.bodyText)},void 0,b.default.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_STEP_SELECT_DESCRIPTION),k("div",{className:h.default.planSelectRow},void 0,k("div",{className:h.default.planSelectorWrapper},void 0,k(E.default,{value:r,onChange:function(e){return n(e)},className:h.default.planSelector,minValue:F,maxValue:B}),k("div",{className:h.default.planSelectorLabel},void 0,b.default.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_COUNTER)),k("div",{className:h.default.planSelectorPreviewPrice},void 0,s===G.SubscriptionIntervalTypes.MONTH?b.default.Messages.BILLING_PRICE_PER_MONTH_EACH.format({price:p}):s===G.SubscriptionIntervalTypes.YEAR?b.default.Messages.BILLING_PRICE_PER_YEAR_EACH.format({price:p}):null)),k("div",{className:h.default.planSelectDivider}),k("div",{className:h.default.planSelectRow},void 0,k("div",{className:h.default.planSelectorSubtotal},void 0,b.default.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_SUBTOTAL),k("div",{className:h.default.planSelectorSubtotalPrice},void 0,k(C.default,{price:I,currency:c.currency,intervalType:s}))),k("div",{className:h.default.upsellFooter},void 0,k(m.default,{className:h.default.upsellFooterIcon,name:m.default.Names.NITRO_WHEEL,gradient:m.default.Gradients.PREMIUM_TIER_2}),k("div",{},void 0,P)))}function x(e){var t=S.default.get(e);switch((0,a.default)(null!=t,"Missing subscriptionPlan"),t.interval){case G.SubscriptionIntervalTypes.MONTH:return b.default.Messages.PREMIUM_GUILD_PLAN_MONTH;case G.SubscriptionIntervalTypes.YEAR:return b.default.Messages.PREMIUM_GUILD_PLAN_YEAR}throw new Error("Unexpected subscriptionPlan: "+e)}j.displayName="PremiumGuildSubscriptionPlanSelect";var Y=k(O.PremiumInvoiceTableDivider,{});function H(e){var t=e.premiumSubscription,r=e.premiumSubscriptionPlan,n=e.proratedInvoicePreview,u=e.renewalInvoicePreview,l=r.interval,s=(0,o.useStateFromStores)([S.default],function(){return S.default.getForSkuAndInterval(G.PremiumSubscriptionSKUs.GUILD,l)});(0,a.default)(null!=s,"Missing premiumGuildSubscriptionPlan");var c=function(e){return n.invoiceItems.find(function(t){return(t.subscriptionPlanId===G.SubscriptionPlans.PREMIUM_MONTH_GUILD||t.subscriptionPlanId===G.SubscriptionPlans.PREMIUM_YEAR_GUILD)&&e(t)})},d=c(function(e){return e.amount>=0});(0,a.default)(null!=d,"Missing guild subscription invoice item");var f=c(function(e){return e.amount<0}),_=null!=f?d.quantity-f.quantity:d.quantity,p=n.invoiceItems.filter(function(e){return(0,v.isPremiumBaseSubscriptionPlan)(e.subscriptionPlanId)}),I=p.reduce(function(e,t){return e+t.amount},0),m=(0,A.getItemUnitPriceWithDiscount)(d)*_,E=(0,N.formatRate)((0,N.formatPrice)(m,n.currency),l),P=(0,N.formatPrice)(n.total,n.currency),T=n.total-m-I;return i.createElement(i.Fragment,null,k(g.SubscriptionPeriodResetNotice,{proratedInvoice:n,renewalInvoice:u}),k(O.PremiumInvoiceTable,{},void 0,k(O.PremiumInvoiceTableHeader,{},void 0,b.default.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_PURCHASE_DETAILS_HEADER),k(O.PremiumInvoiceDiscountedTableRow,{label:b.default.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_INVOICE_ROW_CONTENT.format({numGuildSubscriptions:_,planName:x(s.id)}),value:E,discounts:d.discounts,originalAmount:d.subscriptionPlanPrice*_,currency:s.currency,interval:s.interval}),0!==I?k(O.PremiumInvoiceTableRow,{label:k(g.PremiumInvoiceLabelWithAdjustment,{label:b.default.Messages.PREMIUM_SUBSCRIPTION_PLAN_ADJUSTMENT.format({planName:(0,v.getTierDisplayName)(p[0].subscriptionPlanId)}),tooltipText:b.default.Messages.PREMIUM_SUBSCRIPTION_ADJUSTMENT_TOOLTIP}),value:(0,N.formatPrice)(I,n.currency)}):null,0!==T?k(O.PremiumInvoiceTableRow,{label:k(g.PremiumInvoiceLabelWithAdjustment,{label:b.default.Messages.PREMIUM_SUBSCRIPTION_GUILD_SUBSCRIPTION_ADJUSTMENT,tooltipText:b.default.Messages.PREMIUM_SUBSCRIPTION_ADJUSTMENT_TOOLTIP}),value:(0,N.formatPrice)(T,n.currency)}):null,Y,k(O.PremiumInvoiceTableTotalRow,{label:(n.taxInclusive?b.default.Messages.BILLING_INVOICE_TODAY_TOTAL_TAX_INCLUSIVE:b.default.Messages.BILLING_INVOICE_TODAY_TOTAL).format(),value:P}),k(g.SubscriptionInvoiceFooter,null!=t?{premiumSubscription:t,proratedInvoice:n,renewalInvoice:u,isUpdate:!0}:{renewalInvoice:u})))}var K=k("div",{},void 0,k(T.default,{}));function V(e){var t=e.paymentSources,r=e.paymentSourceId,n=e.currentPremiumSubscription,u=e.premiumSubscriptionPaymentSourceId,a=e.premiumSubscriptionPlan,d=e.newAdditionalPlans,_=e.onPaymentSourceChange,S=e.onPaymentSourceAdd,I=e.onPurchaseTermsChange,m=e.legalTermsNodeRef,E=e.hasLegalTermsFlash,P=(0,o.useStateFromStores)([p.default],function(){return null!=u?p.default.getPaymentSource(u):null}),T=(0,o.useStateFromStores)([f.default],function(){return f.default.hidePersonalInformation}),M=(0,A.useSubscriptionInvoice)({premiumSubscription:n,planId:a.id,additionalPlans:d,renewal:!1})[0],N=(0,A.useSubscriptionInvoice)({premiumSubscription:n,planId:a.id,additionalPlans:d,renewal:!0})[0];return k("div",{className:h.default.reviewStep},void 0,null!=M&&null!=N?k(H,{premiumSubscription:n,premiumSubscriptionPlan:a,proratedInvoicePreview:M,renewalInvoicePreview:N}):null,k("div",{className:h.default.paymentSourceWrapper},void 0,k(U.FormTitle,{tag:U.FormTitleTags.H5},void 0,b.default.Messages.PAYMENT_SOURCE_PAYMENT_REQUEST_INFO_TITLE),null!=u?null!=P?k(R.TooltipContainer,{text:b.default.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_PAYMENT_SOURCE_TOOLTIP},void 0,k(s.default,{paymentSources:[P],selectedPaymentSourceId:P.id,hidePersonalInformation:T,disabled:!0})):K:k(s.default,{paymentSources:Object.values(t),selectedPaymentSourceId:r,onChange:_,onPaymentSourceAdd:S,hidePersonalInformation:T}),a.taxInclusive?k(l.default,{icon:l.default.Icons.RECEIPT,color:l.default.Colors.PRIMARY,iconSize:l.default.Sizes.LARGE,className:h.default.taxInclusiveNote},void 0,b.default.Messages.BILLING_SALES_TAX_INCLUDED):null),i.createElement(y.default,{isActive:E,ref:m},k(c.default,{onChange:I,forceShow:!0}),k("div",{className:h.default.subscriptionLegal},void 0,v.default.getLegalString(a.interval))))}function W(e){var t=e.onClose,r=e.guild,n=e.guildSubscriptionQuantity,u=e.isTransfer,a=void 0!==u&&u,o=e.withAnimation,l=void 0===o||o,s=i.useContext(M.default),c=i.useState(P.PremiumPaymentGuildAnimation.Scenes.ENTRY),f=c[0],_=c[1],p=i.useState(!1),S=p[0],m=p[1];return k("div",{className:h.default.confirmationContainer},void 0,l?k(P.PremiumPaymentGuildAnimation,{className:h.default.confirmationAnimation,nextScene:f,onScenePlay:function(e){if(!S)switch(e){case P.PremiumPaymentGuildAnimation.Scenes.ENTRY:return _(P.PremiumPaymentGuildAnimation.Scenes.IDLE);case P.PremiumPaymentGuildAnimation.Scenes.IDLE:return _(P.PremiumPaymentGuildAnimation.Scenes.SUCCESS);case P.PremiumPaymentGuildAnimation.Scenes.SUCCESS:return m(!0),_(P.PremiumPaymentGuildAnimation.Scenes.IDLE)}}}):null,k(d.default,{className:h.default.confirmationUpgradedBanner,theme:s,premiumType:G.PremiumTypes.TIER_2,type:d.default.Types.PREMIUM_GUILD_SUBSCRIPTION_ACTIVATED}),k("div",{className:h.default.confirmationText},void 0,a?b.default.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_TRANSFERRED_DESCRIPTION.format({guildName:r.name}):b.default.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_ACTIVATED_DESCRIPTION.format({guildName:r.name,guildSubscriptionQuantity:n})),k(I.default,{onClick:t},void 0,b.default.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_ACTIVATED_CLOSE_BUTTON))}V.displayName="PremiumGuildSubscriptionReview",W.displayName="PremiumGuildSubscriptionConfirmation"},8500:function(e,t,r){"use strict";var n;t.__esModule=!0,t.default=void 0;var i=function(e){var t,r;function n(t){var r;return(r=e.call(this)||this).id=t.id,r.guildId=t.guildId,r.userId=t.userId,r.user=t.user,r.ended=t.ended,r}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.createFromServer=function(e){return new n({id:e.id,guildId:e.guild_id,userId:null!=e.user?e.user.id:e.user_id,user:e.user,ended:e.ended})},n}(((n=r(52))&&n.__esModule?n:{default:n}).default);t.default=i},8506:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e){var t=e.premiumSubscriptionPlan,r=e.premiumSubscriptionPaymentSourceId,n=e.onClose,u=e.onBack,a=e.onSkip,o=e.analyticsLocation,c=i.useContext(d.default)===E.ThemeTypes.LIGHT?l.default.Colors.PRIMARY:l.default.Colors.WHITE,S=null==t||null==t.premiumSubscriptionType,R=_.default.getPrice(E.SubscriptionPlans.PREMIUM_MONTH_TIER_2),v=(0,p.formatPrice)(R.amount,R.currency);return i.createElement(i.Fragment,null,U(f.ModalContent,{outerClassName:T.default.content},void 0,U(f.ModalCloseButton,{onClick:n,className:T.default.closeButton}),U("div",{className:T.default.upsellImage}),U("div",{className:T.default.bodyText},void 0,P.default.Messages.PREMIUM_UPSELL_FEATURE_PRETEXT.format({monthlyPrice:v})),U(N,{shouldUpsellFromNoneTier:S})),U(f.ModalFooter,{align:s.default.Align.CENTER,justify:s.default.Justify.END},void 0,U("div",{className:T.default.footerRight},void 0,U(l.default,{look:l.default.Looks.LINK,color:c,onClick:a},void 0,P.default.Messages.PREMIUM_UPSELL_CONTINUE_TO_BOOSTS),U(l.default,{color:l.default.Colors.GREEN,type:"submit",onClick:function(){n();var e=t.interval===E.SubscriptionIntervalTypes.YEAR?E.SubscriptionPlans.PREMIUM_YEAR_TIER_2:E.SubscriptionPlans.PREMIUM_MONTH_TIER_2;null!=r?(0,m.openPremiumSwitchPlanModal)({initialPlanId:e,analyticsLocation:M({},o,{section:E.AnalyticsSections.PREMIUM_GUILD_PURCHASE_MODAL})}):(0,I.openPremiumSubscriptionNewPlanModal)({planId:e,analyticsLocation:M({},o,{section:E.AnalyticsSections.PREMIUM_GUILD_PURCHASE_MODAL})})}},void 0,P.default.Messages.PREMIUM_UPSELL_UPGRADE)),U("div",{className:T.default.backStep},void 0,U(l.default,{color:c,look:l.default.Looks.LINK,size:l.default.Sizes.NONE,onClick:function(){return u()}},void 0,P.default.Messages.BACK))))};var n,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(0)),u=R(r(8)),a=r(3),o=R(r(25)),l=R(r(21)),s=R(r(24)),c=R(r(42)),d=R(r(352)),f=r(220),_=R(r(96)),p=r(156),S=r(351),I=r(881),m=r(896),E=r(1),P=R(r(4)),T=R(r(6277));function R(e){return e&&e.__esModule?e:{default:e}}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function U(e,t,r,i){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&u)for(var o in u)void 0===t[o]&&(t[o]=u[o]);else t||(t=u||{});if(1===a)t.children=i;else if(a>1){for(var l=new Array(a),s=0;s<a;s++)l[s]=arguments[s+3];t.children=l}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function v(e){var t=e.iconName,r=e.iconClassName,n=e.description;return U("div",{className:T.default.perkRow},void 0,U("div",{className:T.default.perkIconContainer},void 0,U(c.default,{name:t,className:(0,u.default)(T.default.perkIcon,r)})),U("div",{className:T.default.perkDescription},void 0,n))}function N(e){var t=e.shouldUpsellFromNoneTier,r=(0,a.useStateFromStores)([o.default],function(){return o.default.locale});return U("div",{className:T.default.perksList},void 0,U(v,{iconName:c.default.Names.PREMIUM_GUILD_SUBSCRIBER_BADGE,iconClassName:T.default.perkIconGuild,description:P.default.Messages.PREMIUM_UPSELL_FEATURE_FREE_GUILD_SUBSCRIPTION.format({numFreeGuildSubscriptions:S.NUM_FREE_GUILD_SUBSCRIPTIONS_WITH_PREMIUM})}),U(v,{iconName:c.default.Names.PREMIUM_GUILD_SUBSCRIBER_BADGE,iconClassName:T.default.perkIconGuild,description:P.default.Messages.PREMIUM_UPSELL_FEATURE_GUILD_SUBSCRIPTION_DISCOUNT.format({percent:(0,p.formatPercent)(r,S.PREMIUM_GUILD_FOR_PREMIUM_USER_DISCOUNT_PERCENT/100)})}),t?U(v,{iconName:c.default.Names.EMOJI_SMILE,iconClassName:T.default.perkIconChatPerks,description:P.default.Messages.PREMIUM_UPSELL_FEATURE_CHAT_PERKS}):null,U(v,{iconName:c.default.Names.STREAM,iconClassName:T.default.perkIconStream,description:P.default.Messages.PREMIUM_UPSELL_FEATURE_STREAM}),U(v,{iconName:c.default.Names.UPLOAD_2,iconClassName:T.default.perkIconUpload,description:P.default.Messages.PREMIUM_UPSELL_FEATURE_UPLOAD}))}v.displayName="PremiumUpsellPerkRow",N.displayName="PremiumUpsellPerks"},8507:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(0)),u=s(r(8)),a=s(r(42)),o=s(r(138)),l=s(r(6278));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r,i){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&u)for(var o in u)void 0===t[o]&&(t[o]=u[o]);else t||(t=u||{});if(1===a)t.children=i;else if(a>1){for(var l=new Array(a),s=0;s<a;s++)l[s]=arguments[s+3];t.children=l}return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function d(e){return""===e||"-"===e}var f=function(e){var t,r,n=e.value,s=e.onChange,f=e.className,_=e.minValue,p=e.maxValue,S=i.useState(n),I=S[0],m=S[1],E=function(e){s(d(e)?0:e),m(e)};return c("div",{className:(0,u.default)(l.default.actions,f)},void 0,c("div",{className:(0,u.default)(l.default.iconWrapper,l.default.subtract)},void 0,c(a.default,{name:a.default.Names.NOVA_SUBTRACT,onClick:function(){d(I)||null!=_&&I<=_||E(I-1)},className:(0,u.default)(l.default.icon,(t={},t[l.default.disabled]=d(I)||null!=_&&I<=_,t))})),c(o.default,{value:""+I,onChange:function(e){if(d(e))return E(e);var t=parseInt(e);return isNaN(t)?void 0:E(null!=p&&t>=p?p:null!=_&&t<=_?_:t)},inputClassName:l.default.value}),c("div",{className:(0,u.default)(l.default.iconWrapper,l.default.add)},void 0,c(a.default,{name:a.default.Names.NOVA_ADD,onClick:function(){d(I)||null!=p&&I>=p||E(I+1)},className:(0,u.default)(l.default.icon,(r={},r[l.default.disabled]=d(I)||null!=p&&I>=p,r))})))};f.displayName="NumberInputStepper";var _=f;t.default=_}}]);
//# sourceMappingURL=9bfd5d994bc4cd240632.js.map