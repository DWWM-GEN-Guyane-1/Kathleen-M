(window.webpackJsonp=window.webpackJsonp||[]).push([[4,206,213],{6524:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EmptyStateText=t.EmptyStateImage=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=d(n(8)),i=d(n(24)),l=n(1),u=d(n(455)),s=d(n(6203));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var h=a.createContext(l.ThemeTypes.DARK),m=h.Provider,v=h.Consumer,y=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.render=function(){var e=this.props,t=e.lightSrc,n=e.darkSrc,r=e.width,a=e.height,d=e.offsetX,p=e.offsetY,h=e.style;return c(v,{},void 0,function(e){return c(i.default.Child,{grow:0,className:(0,o.default)(s.default.image,u.default.marginBottom40),style:f({},h,{width:r,height:a,marginLeft:d,marginTop:p,backgroundImage:"url("+(e===l.ThemeTypes.DARK?n:t)+")"})})})},t}(a.PureComponent);t.EmptyStateImage=y,y.displayName="EmptyStateImage";var _=function(e){var t=e.children,n=e.className,r=e.noteClassName,a=e.note,l=e.style;return c(i.default.Child,{grow:0,direction:i.default.Direction.VERTICAL,style:l},void 0,t&&c("h4",{className:(0,o.default)(n,s.default.title)},void 0,t),a&&c("div",{className:(0,o.default)(r,s.default.text,u.default.marginTop8)},void 0,a))};t.EmptyStateText=_,_.displayName="EmptyStateText";var g=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.theme,r=e.className,a=e.style;return c(m,{value:n},void 0,c(i.default,{direction:i.default.Direction.VERTICAL,align:i.default.Align.CENTER,justify:i.default.Justify.CENTER,className:(0,o.default)(s.default.wrapper,r),style:a},void 0,t))},t}(a.PureComponent);t.default=g,g.displayName="EmptyState",g.Text=_,g.Image=y},6525:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=f(n(8)),i=n(99),l=f(n(457)),u=f(n(461)),s=f(n(65)),d=n(1),c=f(n(6287));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var m={SMALL:"7px 10px",MEDIUM:"10px"},v=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(){var e=t.props,n=e.onClick,r=e.option;return n&&n(r)},t}return h(t,e),t.prototype.render=function(){var e,t=this.props,n=t.checked,r=t.disabled,f=t.option,h=t.size,m=t.infoClassName,v=n?"checked":null,y=f.desc?p("div",{className:(0,i.getClass)(c.default,"desc",v)},void 0,f.desc):null,_=n?f.color||d.Colors.BRAND:"",g=n?d.Colors.WHITE:f.color,E=r||f.disabled,S=f.tooltipText,I=p(l.default,{className:(0,o.default)(c.default.item,(e={},e[c.default.disabled]=E,e)),style:{borderColor:_,backgroundColor:_,padding:h},editable:!0,onClick:!E&&this.handleClick},void 0,p(u.default,{value:n,disabled:E,onChange:this.handleClick,color:_}),p("div",{className:(0,o.default)(c.default.info,m)},void 0,p("div",{className:(0,i.getClass)(c.default,"title",v),style:{color:g}},void 0,f.name),y));return null!=S?p(s.default,{text:S},void 0,function(e){return a.createElement("div",e,I)}):I},t}(a.PureComponent);v.displayName="RadioItem";var y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).renderRadio=function(e){var n=t.props,r=n.value,a=n.disabled,o=n.size,i=n.itemInfoClassName,l=r===e.value;return p(v,{disabled:a,checked:l,option:e,onClick:t.props.onChange,size:o,infoClassName:i},e.value)},t}return h(t,e),t.prototype.render=function(){var e=this.props,t=e.options,n=e.className;return p("div",{className:(0,o.default)(c.default.radioGroup,n)},void 0,t.map(this.renderRadio))},t}(a.PureComponent);y.displayName="RadioGroup",y.Sizes=m,y.defaultProps={options:[],onChange:d.NOOP,value:null,disabled:!1,size:m.MEDIUM};var _=y;t.default=_},6530:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=f(n(6557)),i=n(867),l=f(n(8301)),u=f(n(8395)),s=f(n(8396)),d=f(n(8527)),c=f(n(5958));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h=p(d.default,{}),m=p(s.default,{}),v=p(u.default,{}),y=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).renderToolbar=function(){var e=t.props,n=e.isGuest,r=e.toolbar;return null==r?null:i.isMobile?null:p(a.Fragment,{},void 0,r,t.renderSearch(),h,n?null:m,v)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var u=r.prototype;return u.renderSearch=function(){var e=this.props,t=e.guildId,n=e.channelId;return null!=n?p(l.default,{className:c.default.search},t||n):null},u.renderLoggedOut=function(){var e=this.props,t=e.children,n=e.className;return p(o.default,{className:n},void 0,t)},u.renderLoggedIn=function(){var e=this.props,t=e.children,n=e.className,r=e.transparent;return p(o.default,{className:n,toolbar:this.renderToolbar(),transparent:r},void 0,t)},u.render=function(){return this.props.isAuthenticated?this.renderLoggedIn():this.renderLoggedOut()},r}(a.Component);y.displayName="HeaderBarContainer",y.Title=o.default.Title,y.Icon=o.default.Icon,y.Divider=o.default.Divider,y.defaultProps={isAuthenticated:!0,transparent:!1};var _=y;t.default=_},6532:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.InviteRow=void 0;var r,a,o=le(n(0)),i=ie(n(8)),l=le(n(3)),u=n(29),s=ie(n(269)),d=n(8244),c=ie(n(30)),f=ie(n(8246)),p=n(6529),h=ie(n(137)),m=n(184),v=n(330),y=ie(n(333)),_=ie(n(6544)),g=n(485),E=ie(n(98)),S=le(n(985)),I=ie(n(14)),T=ie(n(7016)),O=ie(n(8247)),A=ie(n(64)),N=ie(n(68)),C=ie(n(39)),M=ie(n(153)),b=ie(n(97)),R=ie(n(25)),P=ie(n(11)),D=ie(n(72)),L=ie(n(106)),w=ie(n(21)),U=ie(n(58)),k=n(6524),G=ie(n(24)),F=ie(n(42)),j=ie(n(460)),H=ie(n(852)),x=ie(n(71)),B=ie(n(138)),V=ie(n(65)),K=ie(n(75)),W=n(136),z=le(n(328)),Y=ie(n(15)),q=n(272),$=le(n(193)),J=ie(n(503)),Q=ie(n(6576)),X=ie(n(6685)),Z=n(1),ee=ie(n(4)),te=ie(n(464)),ne=ie(n(455)),re=ie(n(5944)),ae=ie(n(499)),oe=ie(n(6205));function ie(e){return e&&e.__esModule?e:{default:e}}function le(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function ue(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function se(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var de=$.default.getMaxAgeOptions,ce=$.default.getMaxUsesOptions,fe=$.default.INVITE_OPTIONS_FOREVER,pe=$.default.INVITE_OPTIONS_1_DAY,he=$.default.INVITE_OPTIONS_12_HOURS,me=$.default.INVITE_OPTIONS_6_HOURS,ve=$.default.INVITE_OPTIONS_1_HOUR,ye=$.default.INVITE_OPTIONS_30_MINUTES,_e=$.default.INVITE_OPTIONS_UNLIMITED,ge={MINUTES:"minutes",HOURS:"hours",DAYS:"days",NEVER:"never"},Ee=((r={})[ye.value]={value:30,type:ge.MINUTES},r[ve.value]={value:1,type:ge.HOURS},r[me.value]={value:6,type:ge.HOURS},r[he.value]={value:12,type:ge.HOURS},r[pe.value]={value:1,type:ge.DAYS},r[fe.value]={value:0,type:ge.NEVER},r),Se=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={sending:!1,invited:!1,hovered:!1},t.handleMouseEnter=function(){t.setState({hovered:!0})},t.handleMouseLeave=function(){t.setState({hovered:!1})},t.handleClickInvite=function(){var e=t.props,n=e.user,r=e.channel,a=e.location,o=e.code,i=e.row;t.setState({sending:!0});var l={code:o,user:n,channel:r,location:a,suggested:null!=i?O.default.getSelectedInviteMetadata(i):null};f.default.enqueue(l,function(e){t.setState({sending:!1,invited:e})})},t}se(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return this.state.sending!==t.sending||this.state.invited!==t.invited||this.state.hovered!==t.hovered||this.props.user!==e.user||this.props.channel!==e.channel},n.renderUserOrChannel=function(){var e,t,n=this.props,r=n.user,a=n.channel;return null!=r?(e=r.avatarURL||r.getAvatarURL("jpg"),t=r.username):null!=a&&(e=(0,p.getChannelIconURL)(a),t=(0,h.default)(a)),null==e||null==t?null:ue(z.default,{src:e,"aria-label":t,size:z.Sizes.SIZE_32,className:oe.default.inviteRowAvatar})},n.render=function(){var e,t=this.props,n=t.user,r=t.channel,a=this.state,o=a.sending,i=a.invited,l=a.hovered;return e=i?ue(w.default,{look:w.default.Looks.LINK,size:w.default.Sizes.SMALL,disabled:!0,color:w.default.Colors.GREY},void 0,ee.default.Messages.INVITE_FRIEND_MODAL_SENT):ue(w.default,{color:w.default.Colors.GREEN,look:l?w.default.Looks.FILLED:w.default.Looks.OUTLINED,className:oe.default.inviteRowButton,size:w.default.Sizes.SMALL,submitting:o,onClick:this.handleClickInvite},void 0,ee.default.Messages.INVITE_FRIEND_MODAL_INVITE),ue("div",{className:oe.default.inviteRow,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,ue("div",{className:oe.default.inviteRowInfo},void 0,this.renderUserOrChannel(),ue("div",{className:oe.default.inviteRowName},void 0,null!=n?n.toString():null,null!=r?(0,h.default)(r):null)),e)},t}(o.Component);t.InviteRow=Se,Se.displayName="InviteRow";var Ie=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={focused:!1,copied:!1},t._unsetCopiedState=new u.DelayedCall(1e3,function(){return t.setState({copied:!1})}),t.handleCopy=function(){var e=t.props,n=e.value,r=e.onCopy;t.setState({copied:!0}),t._unsetCopiedState.delay(),r(n)},t}se(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._unsetCopiedState.cancel()},n.render=function(){var e,t=this,n=this.props,r=n.value,a=n.autoFocus,o=n.hideValue,l=this.state,u=l.focused,s=l.copied;return ue("div",{className:(0,i.default)(ae.default.input,te.default.flexJustifyBetween,te.default.flexCenter,(e={},e[ae.default.success]=s,e[ae.default.focused]=u,e))},void 0,ue(B.default,{className:oe.default.copyInput,name:"invite",value:o?ee.default.Messages.INSTANT_INVITE_HIDDEN:r,editable:!1,inputClassName:oe.default.noBorder,autoFocus:a,onFocus:function(){return a?t.setState({focused:!0}):null},onBlur:function(){return a?t.setState({focused:!1}):null},spellCheck:"false",onClick:function(e){return e.currentTarget.select()}}),q.SUPPORTS_COPY?ue(w.default,{size:w.default.Sizes.SMALL,color:s?w.default.Colors.GREEN:w.default.Colors.BRAND,className:oe.default.copyButton,onClick:this.handleCopy},void 0,s?ee.default.Messages.INVITE_COPIED:ee.default.Messages.COPY):null)},t}(o.PureComponent);Ie.displayName="InviteCopyInput";var Te=l.default.connectStores([b.default],function(){return{hideValue:b.default.hideInstantInvites}})(Ie),Oe=(0,v.registerUserExperiment)({id:y.default.USER_AFFINITY_INVITE_SUGGESTIONS,title:"User Affinity Invite Suggestions Experiment",description:["Populate Invite Suggestions with User Affinity-driven lists","Control: Keep Invite Suggestions as is","Treatment 1: Put User Affinity recommendations first + Invite Suggestions and as is after + filter out users already in the Guild","Treatment 2: Treatment 1, but first row is the most recent user DM"],buckets:[m.ExperimentBuckets.CONTROL,m.ExperimentBuckets.TREATMENT_1,m.ExperimentBuckets.TREATMENT_2]}),Ae=ue(X.default,{}),Ne=function(e){function t(t){var n;(n=e.call(this,t)||this)._scroller=o.createRef(),n.handleGenerateNewLink=function(){var e=n.props,t=e.channel,r=e.source,a=null!=t?t.id:C.default.getChannelId();null!=a&&s.default.createInvite(a,{max_age:n.state.maxAge,max_uses:n.state.maxUses,temporary:n.state.temporary},r),n.state.maxAge===fe.value||n.state.savedMaxAge===fe.value?n.setState({settingsOpen:!1}):n.setState({settingsOpen:!1,savedMaxAge:fe.value})},n.handleCopy=function(e){var t=n.props,r=t.channel,a=t.source,o=t.code;(0,q.copy)(e);var i,l=null!=r?r.id:C.default.getChannelId();if(null!=r)i=r.type;else{var u=I.default.getChannel(l);null!=u&&(i=u.type)}Y.default.track(Z.AnalyticEvents.COPY_INSTANT_INVITE,{server:M.default.getGuildId(),channel:l,channel_type:i,location:a,code:o})},n.openSettings=function(){n.setState({settingsOpen:!0})},n.maxAgeString=function(){var e=n.state,t=e.maxAge,r=e.maxUses,a=parseInt(r,10),o=0===a,i=Ee[t].value;switch(Ee[t].type){case ge.MINUTES:return o?ee.default.Messages.INVITE_EXPIRES_MINUTES:ee.default.Messages.INVITE_EXPIRES_MINUTES_OR_USES.format({numUses:a});case ge.HOURS:return o?ee.default.Messages.INVITE_EXPIRES_HOURS.format({numHours:i}):ee.default.Messages.INVITE_EXPIRES_HOURS_OR_USES.format({numHours:i,numUses:a});case ge.DAYS:return o?ee.default.Messages.INVITE_EXPIRES_DAYS:ee.default.Messages.INVITE_EXPIRES_DAYS_OR_USES.format({numUses:a});case ge.NEVER:return o?ee.default.Messages.INVITE_EXPIRES_NEVER:ee.default.Messages.INVITE_EXPIRES_USES.format({numUses:a});default:return""}},n.handleSelectMaxAge=function(e){n.setState({maxAge:parseInt(e.value,10),savedMaxAge:n.state.maxAge})},n.handleSelectMaxUses=function(e){n.setState({maxUses:parseInt(e.value,10)})},n.handleToggleTemporary=function(e){n.setState({temporary:e.currentTarget.checked})},n.handleQueryChange=function(e){var t=n._scroller.current;null!=t&&t.scrollTo(0),(0,d.searchInviteSuggestions)(e),n.setState({query:e})},n.handleClearSearch=function(){n.handleQueryChange("")},n.handleToggleMaxAge=function(){n.setState({maxAge:n.state.savedMaxAge,savedMaxAge:n.state.maxAge},n.handleGenerateNewLink)},n.handleDone=function(){var e=n.props.onDone;n.state.settingsOpen?n.setState({settingsOpen:!1}):c.default.pop(),e&&e()};var r=t.maxAge,a=t.maxUses,i=t.temporary;return n.state={query:"",settingsOpen:!1,maxAge:null!=r?r:pe.value,savedMaxAge:r===fe.value?pe.value:fe.value,maxUses:a||_e.value,temporary:i||!1},n}se(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.channel,n=e.code,r=e.guild,a=e.source,o=e.canCreateInvites,i=e.analyticsLocation,l=e.streamUserId,u=e.targetUserType,d=e.targetUserId,c=this.state,f=c.maxAge,p=c.maxUses,h=c.temporary,m=this.props,v=m.initialCounts,y=m.rows,_=m.showFriends;if(o){var S=null!=t?t.id:C.default.getChannelId();if(null==S)return;s.default.createInvite(S,{validate:n||null,max_age:f,max_uses:p,target_user_id:d,target_user_type:u,temporary:h},a)}if(_&&Y.default.track(Z.AnalyticEvents.INVITE_SUGGESTION_OPENED,{location:a,num_suggestions:y.length,num_friends:v.numFriends,num_dms:v.numDms,num_group_dms:v.numGroupDms,guild_id:r.id}),null!=l){var I=E.default.getActiveStream(),T=(0,g.getStreamerApplication)(I,N.default);Y.default.track(Z.AnalyticEvents.OPEN_MODAL,{Type:"Send Stream Invite",Source:a,location:i,other_user_id:l,application_id:null!=T?T.id:null,application_name:null!=T?T.name:null,game_id:null!=T?T.id:null})}else Y.default.track(Z.AnalyticEvents.OPEN_MODAL,{Type:"Instant Invite Modal",Source:a})},n.getInviteCode=function(){var e=this.props,t=e.code,n=e.vanityURLCode;return t||n},n.renderCopyInput=function(){var e=this.props,t=e.canCreateInvites,n=e.showFriends,r=(0,$.getInviteURL)(this.getInviteCode()||"");return ue(o.Fragment,{},void 0,ue(Te,{value:r,autoFocus:n,onCopy:this.handleCopy}),t?ue(x.default,{className:(0,i.default)(ne.default.marginTop8,oe.default.footerText)},void 0,this.maxAgeString()," ",n?ue(L.default,{onClick:this.openSettings},void 0,ee.default.Messages.INVITE_EDIT_LINK):null):null)},n.renderHeader=function(){var e=this.props,t=e.guild,n=e.showFriends,r=e.streamUserId,a=this.state,o=a.query,i=a.settingsOpen,l=null,u=null!=r?ee.default.Messages.INVITE_STREAM_HEADER:ee.default.Messages.GROUP_DM_INVITE_WITH_NAME.format({groupname:t.toString()});return l=i?ue(W.FormTitle,{tag:W.FormTitle.Tags.H2,className:ne.default.marginReset},void 0,ee.default.Messages.INVITE_SETTINGS_TITLE):n?ue("div",{className:oe.default.header},void 0,ue(W.FormTitle,{tag:W.FormTitle.Tags.H2,className:ne.default.marginBottom8},void 0,u),ue(Q.default,{query:o,className:ne.default.marginTop4,onQueryChange:this.handleQueryChange,placeholder:ee.default.Messages.INVITE_SEARCH_FOR_FRIENDS,autoFocus:!0,onClear:this.handleClearSearch})):ue(W.FormTitle,{tag:W.FormTitle.Tags.H2,className:ne.default.marginReset},void 0,u),ue(K.default.Header,{separator:n&&!i},void 0,ue(K.default.CloseButton,{className:oe.default.closeButton,onClick:this.handleDone}),null!=r?Ae:null,l)},n.renderSettingsBody=function(){var e=this.state,t=e.maxAge,n=e.maxUses,r=e.temporary,a=de.find(function(e){return e.value===t}),o=ce.find(function(e){return e.value===n});return ue(K.default.Content,{outerClassName:oe.default.settingsContent,className:oe.default.noScroll},void 0,ue("form",{onSubmit:this.handleGenerateNewLink},void 0,ue(W.FormItem,{title:ee.default.Messages.EXPIRE_AFTER,className:ne.default.marginTop20},void 0,ue(j.default,{value:a,clearable:!1,searchable:!1,options:de,onChange:this.handleSelectMaxAge})),ue(W.FormItem,{title:ee.default.Messages.MAX_NUMBER_OF_USES,className:(0,i.default)(ne.default.marginTop20,ne.default.marginBottom4)},void 0,ue(j.default,{value:o,clearable:!1,searchable:!1,options:ce,onChange:this.handleSelectMaxUses})),ue(W.FormItem,{className:(0,i.default)(ne.default.marginTop20,oe.default.switch)},void 0,ue(H.default,{value:r,clearable:!1,searchable:!1,options:ce,onChange:this.handleToggleTemporary,note:ee.default.Messages.TEMPORARY_MEMBERSHIP_EXPLANATION,hideBorder:!0},void 0,ue(x.default,{},void 0,ee.default.Messages.GRANT_TEMPORARY_MEMBERSHIP)))))},n.renderFriendsBody=function(){var e,t=this.props,n=t.analyticsLocation,r=t.rows,a=this.getInviteCode();if(0===r.length?e=ee.default.Messages.INVITE_FRIEND_MODAL_NO_RESULTS:null==a&&(e=ee.default.Messages.INVITE_FRIEND_MODAL_LOADING),null!=e)return ue(K.default.Content,{className:ne.default.marginBottom20},void 0,ue(k.EmptyStateText,{},void 0,e));var o=r.map(function(e){var t=e.type+"-"+e.item.id;switch(e.type){case $.RowTypes.GROUP_DM:return ue(Se,{row:e,channel:e.item,code:a,location:n},t);case $.RowTypes.DM:case $.RowTypes.FRIEND:return ue(Se,{row:e,user:e.item,code:a,location:n},t);default:return null}});return ue(K.default.LazyContent,{className:oe.default.scroller,elementHeight:44,scrollerRef:this._scroller},void 0,o)},n.renderBody=function(){var e=this.props,t=e.guild,n=e.showFriends,r=e.streamUserId;if(this.state.settingsOpen)return this.renderSettingsBody();if(n)return this.renderFriendsBody();var a=P.default.getCurrentUser(),o=t.isOwner(a)?ee.default.Messages.INVITE_SHARE_LINK_OWN_SERVER:ee.default.Messages.SHARE_INVITE_LINK_FOR_ACCESS;return null!=r&&(o=ee.default.Messages.INVITE_SHARE_LINK_TO_STREAM),ue(K.default.Content,{className:oe.default.noScroll},void 0,ue(G.default,{direction:G.default.Direction.VERTICAL,className:ne.default.marginBottom20},void 0,ue(x.default,{className:oe.default.subText},void 0,o),this.renderCopyInput()))},n.renderFooter=function(){var e,t=this,n=this.props,r=n.canCreateInvites,a=n.showFriends,l=n.streamUserId,u=this.state,s=u.settingsOpen,d=u.maxAge,c=R.default.theme,f=null;if(s)f=ue(o.Fragment,{},void 0,ue(w.default,{onClick:this.handleGenerateNewLink},void 0,ee.default.Messages.GENERATE_A_NEW_LINK),ue(w.default,{look:w.default.Looks.LINK,color:c===Z.ThemeTypes.LIGHT?w.default.Colors.PRIMARY:w.default.Colors.WHITE,onClick:this.handleDone},void 0,ee.default.Messages.CANCEL));else if(a){var p=null!=l?ee.default.Messages.INVITE_STREAM_FOOTER_LINK_HEADER:ee.default.Messages.INVITE_FOOTER_LINK_HEADER;f=ue(G.default,{direction:G.default.Direction.VERTICAL,className:oe.default.content},void 0,ue(W.FormTitle,{tag:W.FormTitle.Tags.H5,className:ne.default.marginBottom8},void 0,p),this.renderCopyInput())}else r&&(f=ue(G.default,{justify:G.default.Justify.BETWEEN,className:ne.default.marginTop20},void 0,ue(J.default,{checked:d===fe.value,onChange:this.handleToggleMaxAge},void 0,ue(x.default,{className:oe.default.checkBoxLabel},void 0,ee.default.Messages.SET_INVITE_LINK_NEVER_EXPIRE)),ue(V.default,{text:ee.default.Messages.LINK_SETTINGS},void 0,function(e){var n=e.onMouseEnter,r=e.onMouseLeave;return ue(U.default,{onClick:t.openSettings,onMouseEnter:n,onMouseLeave:r,className:re.default.cursorPointer},void 0,ue(F.default,{name:F.default.Names.GEAR,width:18,height:18,color:Z.Colors.PRIMARY_DARK_400}))})));return null!=f?ue(K.default.Footer,{className:s?oe.default.settingsFooter:(0,i.default)((e={},e[oe.default.noPadding]=!a,e[oe.default.footer]=a,e))},void 0,f):null},n.render=function(){return ue("div",{className:this.props.showFriends?oe.default.wrapper:void 0},void 0,ue(K.default,{className:oe.default.modal},void 0,this.renderHeader(),this.renderBody(),this.renderFooter()))},t}(o.PureComponent);Ne.displayName="InstantInviteModal",Ne.defaultProps={analyticsLocation:Z.AnalyticsLocations.GUILD_CREATE_INVITE_SUGGESTION};var Ce=o.forwardRef(function(e,t){var n=e.channel,r=e.guild,a=e.source,i=e.streamUserId,u=(0,l.useStateFromStores)([C.default,I.default],function(){return null!=n?n:I.default.getChannel(C.default.getChannelId())},[n]),s=(0,l.useStateFromStores)([A.default],function(){return null!=u&&A.default.can(Z.Permissions.CREATE_INSTANT_INVITE,u)},[u]),c=s?null:r.vanityURLCode,f=null==i?null:Z.InviteTargetUserTypes.STREAM,p=i,h=null!=n?n.getGuildId():null!=r?r.id:null,m=(0,l.useStateFromStoresArray)([A.default,O.default,T.default],function(){var e=null!=u?u.id:null;return[O.default.getInviteSuggestionRows(),O.default.getTotalSuggestionsCount()>=O.default.getMinFriendSuggestions(),O.default.getInitialCounts(),null!=e?T.default.getInvite(e,f,p):null,null!=n?D.default.getVoiceStatesForChannel(u):null,null!=h?S.default.getProps(h,e):null]},[u,f,p,h]),v=m[0],y=m[1],g=m[2],E=m[3],N=m[4],M=m[5];(0,_.default)(Oe);var b=o.useState(function(){var e=new Set;return null!=i&&null!=N?N.forEach(function(t){var n=t.userId;e.add(n)}):null!=h&&null!=M&&M.rows.forEach(function(t){t.type===S.MemberListRowTypes.MEMBER&&e.add(t.userId)}),e})[0];o.useEffect(function(){(0,d.loadInviteSuggestions)(b,r,n).catch(Z.NOOP_NULL)},[b,n,r]);var R=null!=E?E.code:void 0,P=null!=E?E.maxAge:void 0,L=null!=E?E.maxUses:void 0,w=null!=E?E.temporary:void 0;return o.createElement(Ne,{ref:t,canCreateInvites:s,channel:n,guild:r,streamUserId:i,vanityURLCode:c,targetUserType:f,targetUserId:p,rows:v,showFriends:y,initialCounts:g,code:R,maxAge:P,maxUses:L,temporary:w,source:a})});t.default=Ce},6533:function(e,t,n){"use strict";t.__esModule=!0,t.getIconNameForChannel=h,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=d(n(8)),i=d(n(58)),l=d(n(42)),u=n(1),s=d(n(6210));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var f={SELECTED:s.default.modeSelected,CONNECTED:s.default.modeConnected,UNREAD:s.default.modeUnread,MUTED:s.default.modeMuted,LOCKED:s.default.modeLocked};function p(e){e.stopPropagation()}function h(e,t,n,r){if(void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!1),null==e)return null;switch(e.type){case u.ChannelTypes.GUILD_ANNOUNCEMENT:return null!=e.isNSFW&&e.isNSFW()?l.default.Names.MEGAPHONE_NSFW:e.isRoleRequired()?l.default.Names.MEGAPHONE_LIMITED:l.default.Names.MEGAPHONE;case u.ChannelTypes.GUILD_STORE:return l.default.Names.STORE_TAG;case u.ChannelTypes.DM:case u.ChannelTypes.GROUP_DM:return l.default.Names.NOVA_AT;case u.ChannelTypes.GUILD_TEXT:return null!=e.isNSFW&&e.isNSFW()?l.default.Names.CHANNEL_TEXT_NSFW:e.isRoleRequired()?l.default.Names.CHANNEL_TEXT_LIMITED:l.default.Names.CHANNEL_TEXT;case u.ChannelTypes.GUILD_VOICE:return t?l.default.Names.LOCK_CLOSED:r?l.default.Names.STREAM:e.isRoleRequired()?n?l.default.Names.VIDEO_CAMERA_LIMITED:l.default.Names.SPEAKER_LIMITED:n?l.default.Names.VIDEO_CAMERA:l.default.Names.SPEAKER;case u.ChannelTypes.GUILD_CATEGORY:default:return null}}function m(e){switch(e){case u.ChannelTypes.GUILD_VOICE:return s.default.typeVoice;case u.ChannelTypes.GUILD_ANNOUNCEMENT:case u.ChannelTypes.GUILD_TEXT:case u.ChannelTypes.GUILD_STORE:default:return s.default.typeDefault}}var v=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props,r=n.onClick,a=n.channel;r&&r(e,a)},t.handleMouseDown=function(e){var n=t.props,r=n.onMouseDown,a=n.channel;r&&r(e,a)},t.handleMouseUp=function(e){var n=t.props,r=n.onMouseUp,a=n.channel;r&&r(e,a)},t.handleContextMenu=function(e){var n=t.props,r=n.onContextMenu,a=n.channel;r&&r(e,a)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var u=r.prototype;return u.getModeClassName=function(){var e=this.props,t=e.muted,n=e.selected,r=e.connected,a=e.unread,o=e.locked;return n?f.SELECTED:r?f.CONNECTED:o?f.LOCKED:t?f.MUTED:a?f.UNREAD:null},u.renderUnread=function(){var e=this.props,t=e.unread,n=e.muted,r=e.selected;return n||!t||r?null:c("div",{className:s.default.unread})},u.renderTypeIcon=function(){var e=this.props,t=h(e.channel,e.locked);return null!=t?c(l.default,{name:t,className:s.default.icon}):null},u.renderName=function(){var e=this.props,t=e.channel,n=e.name;return c("div",{className:s.default.name},void 0,null==n?t.name:n)},u.renderIcons=function(){var e=this.props.children;return a.Children.count(e)>0?c("div",{onClick:p,className:s.default.children},void 0,e):null},u.render=function(){var e=this.props,t=e.onClick,n=e.onMouseDown,r=e.onMouseUp,a=e.onContextMenu,l=e.connectDragPreview,u=e.className,d=e.channel.type,f=c("div",{className:s.default.content},void 0,this.renderTypeIcon(),this.renderName(),this.renderIcons()),p=null!=t||null!=r||null!=n;return c(i.default,{className:(0,o.default)(u,p?s.default.wrapper:s.default.notInteractive,this.getModeClassName(),m(d)),onClick:t&&this.handleClick,onMouseUp:r&&this.handleMouseUp,onMouseDown:n&&this.handleMouseDown,onContextMenu:a&&this.handleContextMenu},void 0,this.renderUnread(),l?l(f):f)},r}(a.Component);v.displayName="ChannelItem";var y=v;t.default=y},6536:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=f(n(8)),i=n(264),l=f(n(329)),u=f(n(58)),s=n(1),d=f(n(4)),c=f(n(6295));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(){t.props.disableButton||((0,i.pushLayer)(s.Layers.USER_SETTINGS),l.default.setSection(s.UserSettingsSections.STREAMER_MODE))},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e;return p("div",{className:c.default.streamerModeEnabled},void 0,p("div",{className:c.default.streamerModeEnabledImage}),p(u.default,{className:(0,o.default)(c.default.streamerModeEnabledBtn,(e={},e[c.default.disabled]=this.props.disableButton,e)),onClick:this.handleClick},void 0,d.default.Messages.STREAMER_MODE_ENABLED))},r}(a.Component);h.displayName="StreamerModeEnabled",h.defaultProps={disableButton:!1};var m=h;t.default=m},6540:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(2))&&r.__esModule?r:{default:r},o=n(1);var i={updateChannelDimensions:function(e,t,n,r){a.default.dirtyDispatch({type:o.ActionTypes.UPDATE_CHANNEL_DIMENSIONS,channelId:e,scrollTop:t,scrollHeight:n,offsetHeight:r})},updateChannelListScroll:function(e,t){a.default.dirtyDispatch({type:o.ActionTypes.UPDATE_CHANNEL_LIST_DIMENSIONS,guildId:e,scrollTop:t})},channelListScrollTo:function(e,t){a.default.dirtyDispatch({type:o.ActionTypes.UPDATE_CHANNEL_LIST_DIMENSIONS,guildId:e,scrollTo:t})},clearChannelListScrollTo:function(e){a.default.dirtyDispatch({type:o.ActionTypes.UPDATE_CHANNEL_LIST_DIMENSIONS,guildId:e,scrollTo:null})},clearChannelDimensions:function(e){this.updateChannelDimensions(e,null,null,null)},updateGuildListScrollTo:function(e){a.default.dirtyDispatch({type:o.ActionTypes.UPDATE_GUILD_LIST_DIMENSIONS,scrollTop:e})}};t.default=i},6541:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=p(n(6)),a=p(n(3)),o=p(n(2)),i=p(n(10)),l=p(n(14)),u=p(n(64)),s=p(n(222)),d=p(n(39)),c=p(n(188)),f=n(1);function p(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m={},v={},y={},_={},g={};function E(e){switch(e){case"null":case null:case void 0:return null;default:return e}}function S(e){var t,n,r,a=E(e),o=!1,i=!1,l=0,u=0,d=_[a];(null==d&&(I(),d=_[a]||new Set),d.forEach(function(e){null!==a&&(i=i||!c.default.isGuildOrCategoryOrChannelMuted(a,e)&&s.default.hasUnread(e),u+=s.default.getUnreadCount(e)),l+=s.default.getMentionCount(e)}),i)?null==a||m[a]||(m=h({},m,((t={})[a]=!0,t)),o=!0):null!=a&&m[a]&&(delete(m=h({},m))[a],o=!0);null!=a&&y[a]!==u&&(y=h({},y,((n={})[a]=u,n)),o=!0);v[a]!==l&&(v=h({},v,((r={})[a]=l,r)),o=!0);if(o){var f=g[a||"null"];g[a||"null"]=null!=f?++f:1}return o}function I(){_={},r.default.forEach(l.default.getChannels(),function(e){if(e.type!==f.ChannelTypes.GUILD_VOICE&&(e.isPrivate()||u.default.can(f.Permissions.VIEW_CHANNEL,{channelId:e.id}))){var t=e.getGuildId(),n=_[t];null==n&&(n=new Set,_[t]=n),n.add(e.id)}})}function T(e){return I(),S(e)}function O(e,t){var n=l.default.getChannel(e);if(null!=n)return t(E(n.getGuildId()));for(var r=0,a=Object.keys(_);r<a.length;r++){var o=a[r];if(_[o].has(e))return t(E(o))}return!1}function A(e){var t=e.guilds;m={},v={},y={},g={},I(),S(null),t.forEach(function(e){return S(e.id)})}function N(e){return O(e.channelId,S)}function C(e){return O(e.channel.id,T)}function M(e){return T(e.guildId)}var b=new(function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.initialize=function(){this.waitFor(l.default,d.default,s.default,u.default,i.default,c.default)},o.hasAnyUnread=function(){return Object.keys(m).length>0},o.getUnreadGuilds=function(){return m},o.getGuildUnreadCount=function(e){return void 0===e?0:y[e]||0},o.hasUnread=function(e){return m[e]||!1},o.getMentionCount=function(e){return v[e]||0},o.getMentionCounts=function(){return v},o.getUnreadGuildsIgnoreMuted=function(e){var t=_[e];return null!=t&&Array.from(t).some(function(e){return s.default.hasUnread(e)})},o.getTotalMentionCount=function(){return(0,r.default)(v).values().sum()},o.getGuildChangeSentinel=function(e){return g[e]||0},a}(a.default.Store))(o.default,{CONNECTION_OPEN:A,OVERLAY_INITIALIZE:A,CACHE_LOADED_LAZY:A,GUILD_CREATE:function(e){return T(e.guild.id)},GUILD_DELETE:function(e){var t=e.guild;null!=m[t.id]&&delete(m=h({},m))[t.id],null!=y[t.id]&&delete(y=h({},y))[t.id],null!=v[t.id]&&delete(v=h({},v))[t.id],delete _[t.id]},MESSAGE_CREATE:N,MESSAGE_ACK:N,UPDATE_CHANNEL_DIMENSIONS:N,CHANNEL_SELECT:function(e){return S(e.guildId)},CHANNEL_DELETE:function(e){var t=e.channel;return O(t.id,function(e){return _[e].delete(t.id),S(e)})},WINDOW_FOCUS:function(e){return null!=(t=d.default.getChannelId())&&O(t,S);var t},GUILD_ACK:function(e){return S(e.guildId)},GUILD_ROLE_CREATE:M,GUILD_ROLE_DELETE:M,GUILD_ROLE_UPDATE:M,CHANNEL_CREATE:C,CHANNEL_UPDATE:C,CHANNEL_UNREAD_UPDATE:function(e){e.channelUnreadUpdates.forEach(function(e){O(e.id,S)})},GUILD_MEMBER_UPDATE:function(e){var t=e.user,n=e.guildId;return t.id===i.default.getId()&&T(n)},USER_GUILD_SETTINGS_UPDATE:function(e){Object.keys(m).forEach(S)}});t.default=b},6542:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=d(n(6854)),o=d(n(7507)),i=d(n(41)),l=n(6849),u=d(n(6631)),s=d(n(13));function d(e){return e&&e.__esModule?e:{default:e}}var c=!1,f=(0,o.default)(new a.default(window)),p=/Darwin|OS X/.test(i.default.os.family||""),h=p?"cmd":"ctrl",m=p?"opt":"alt",v=p?"return":"enter",y=[].concat(l.JUMP_TO_GUILD.binds,["mod+shift+[","mod+shift+]","ctrl+shift+tab","ctrl+tab","mod+n","mod+t","mod+shift+t","mod+plus","mod+minus","mod+0"]).map(function(e){return e.replace("mod",h)}),_=[];s.default.isDesktop()&&new a.default(document).bind("backspace",function(e){return e.preventDefault()});function g(e){var t=[];for(var n in e)t=t.concat(e[n].binds);return t.map(function(e){return e.replace("mod",h)})}function E(e){var t=function(t){var n=e[t],r=u.default.getKeybindList();s.default.embedded||(r=r.concat(y));var a=n.binds.filter(function(e){return e=e.replace("mod",h),r.indexOf(e)<0});if(0===a.length)return"continue";var o,i,l,d=n.global?f.bindGlobal:f.bind;if(n.action&&d.call(f,a,n.action),n.keyup&&d.call(f,a,n.keyup,"keyup"),n.keydown){var c=a.indexOf("any-character");-1!==c&&(o="keydown",i=n.keydown,l=function(e){return i(e,e.key)},document.addEventListener(o,l),_.push(function(){return document.removeEventListener(o,l)}),a.splice(c,1)),a.length>0&&d.call(f,a,n.keydown,"keydown")}n.keypress&&d.call(f,a,n.keypress,"keypress")};for(var n in e)t(n)}var S={combokeys:f,modKey:h,altKey:m,returnKey:v,checkDupes:function(e){for(var t={},n=[],r=g(e),a=0,o=r.length;a<o;a++)void 0===t[r[a]]?t[r[a]]=0:t[r[a]]+=1;for(var i in t)t[i]&&n.push(i);n.length&&console.warn("Duplicate keyboard shortcuts defined:",n)},setLayout:function(e){r=e},enable:function(){c||(c=!0,this.checkDupes(r),E(r))},enableTemp:function(e){E(e),c=!0},disableTemp:function(){this.disable(),this.enable()},disable:function(){c&&(c=!1,_.forEach(function(e){return e()}),_=[],f.reset())},validateKeybind:function(e){c&&this.hasBind(e)&&f.unbind(e)},hasBind:function(e){var t=g(r);return e=(e=e.replace("meta","cmd")).replace(/right|left/i,"").trim(),!(t.indexOf(e)<0)}};t.default=S},6544:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=e.id,n=e.clientFilter,r=(0,o.useStateFromStores)([u.default],function(){return u.default.getUserExperimentDescriptor(t)},[t]),s=(0,a.useState)(function(){return null==n||n.isEligible()}),d=s[0],c=s[1];return(0,a.useEffect)(function(){if(null!=n&&null!=n.subscribe)return n.subscribe(void 0,function(e){return c(e)})},[n]),(0,a.useEffect)(function(){d&&null!=r&&(0,l.triggerExperiment)(t,r)},[d,t,r]),null!=r?r.bucket:i.ExperimentBuckets.NOT_ELIGIBLE};var r,a=n(0),o=n(3),i=n(184),l=n(330),u=(r=n(280))&&r.__esModule?r:{default:r}},6549:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.Item=t.Separator=t.Header=t.Types=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=d(n(8)),i=n(158),l=d(n(58)),u=n(1),s=d(n(6215));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p={SIDE:s.default.side,TOP:s.default.top,TOP_PILL:s.default.topPill};t.Types=p;var h=function(e){var t=e.className,n=e.onClick,r=e.children,a=e["aria-expanded"],i=e["aria-controls"];return f(l.default,{className:(0,o.default)(s.default.header,t),onClick:n,"aria-expanded":a,"aria-controls":i},void 0,r)};t.Header=h,h.displayName="Header";var m=function(e){var t=e.style;return f("div",{className:s.default.separator,style:t})};t.Separator=m,m.displayName="Separator";var v={DEFAULT:"Default",HOVER:"Hover",SELECTED:"Selected"};function y(e,t){if(null==e)return null;var n={};return t===v.SELECTED?(n.backgroundColor=e,n.color=u.Colors.WHITE,n):(t===v.HOVER&&(n.backgroundColor=(0,i.hex2rgb)(e,.1)),n.color=e,n)}var _=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={hover:!1,active:!1},t.handleClick=function(e){var n=t.props,r=n.onClick,a=n.id,o=n.onItemSelect;null!=r?r(e):null!=o&&o(a)},t.handleMouseDown=function(){null!=t.props.color&&t.setState({active:!0})},t.handleMouseUp=function(){t.setState({active:!1})},t.handleMouseOver=function(){t.setState({hover:!0})},t.handleMouseOut=function(){t.setState({hover:!1,active:!1})},t}c(t,e);var n=t.prototype;return n.getStyle=function(){var e=this.props,t=e.color,n=e.id,r=e.selectedItem,a=e.itemType,o=this.state,l=o.hover,s=o.active;return null==t?null:a===p.SIDE?null!=n&&r===n||s?y(t,v.SELECTED):l?y(t,v.HOVER):y(t):a===p.TOP?r===n?{borderColor:t,color:t}:l?{borderColor:(0,i.hex2rgb)(t,.1),color:(0,i.hex2rgb)(t,.6)}:{borderColor:"transparent",color:(0,i.hex2rgb)(t,.4)}:a===p.TOP_PILL?r===n?{backgroundColor:(0,i.hex2rgb)(t,.2),color:t}:{backgroundColor:t,color:u.Colors.WHITE}:null},n.render=function(){var e,t=this.props,n=t.children,r=t.className,a=t.id,i=t.selectedItem,u=t.color,d=this.props["aria-label"];return f(l.default,{className:(0,o.default)(r,(e={},e[s.default.item]=!0,e[s.default.selected]=null==u&&i===a,e[s.default.themed]=null==u,e)),style:this.getStyle(),onMouseEnter:null!=u?this.handleMouseOver:null,onClick:this.handleClick,onMouseLeave:null!=u?this.handleMouseOut:null,onMouseUp:null!=u?this.handleMouseUp:null,onMouseDown:this.handleMouseDown,"aria-label":d},void 0,n)},t}(a.Component);t.Item=_,_.displayName="Item";var g=function(e){function t(){return e.apply(this,arguments)||this}c(t,e);var n=t.prototype;return n.renderChildren=function(e){var t=this.props,n=t.selectedItem,r=t.onItemSelect,o=t.type,i=void 0===o?p.SIDE:o;return null==e?null:a.cloneElement(e,{selectedItem:n,onItemSelect:r,itemType:i})},n.render=function(){var e=this.props,t=e.className,n=e.children,r=e.type,i=void 0===r?p.SIDE:r,l=e.style;return f("div",{className:(0,o.default)(t,i),style:l},void 0,a.Children.map(n,this.renderChildren,this))},t}(a.Component);g.displayName="TabBar",g.Types=p,g.Header=h,g.Item=_,g.Separator=m;var E=g;t.default=E},6556:function(e,t,n){"use strict";t.__esModule=!0;var r={createAutocompleterResult:!0,findNextSelectedResult:!0,sortByMatchScore:!0,createHeaderResult:!0};t.default=t.createHeaderResult=t.sortByMatchScore=t.findNextSelectedResult=t.createAutocompleterResult=void 0;var a=s(n(8257)),o=n(6850);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||(t[e]=o[e]))});var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(7501));t.createAutocompleterResult=i.default,t.createHeaderResult=i.createHeaderResult;var l=s(n(8258));t.findNextSelectedResult=l.default;var u=s(n(970));function s(e){return e&&e.__esModule?e:{default:e}}t.sortByMatchScore=u.default;var d=a.default;t.default=d},6557:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.Divider=t.Icon=t.Title=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=c(n(8)),o=c(n(58)),i=c(n(42)),l=c(n(65)),u=c(n(456)),s=c(n(271)),d=c(n(6206));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p=function(e){var t=e.className,n=e.children,r=e.onContextMenu,o=e.onClick,i=e.muted,l=void 0!==i&&i;return f(u.default,{className:(0,a.default)(t,d.default.title),size:u.default.Sizes.SIZE_16,muted:l,onContextMenu:r,onClick:o},void 0,n)};t.Title=p,p.displayName="Title";var h=function(e){var t=e.className,n=e.iconClassName,r=e.selected,u=void 0!==r&&r,c=e.disabled,p=void 0!==c&&c,h=e.showBadge,m=void 0!==h&&h,v=e.foreground,y=e.background,_=e.name,g=e.onClick,E=e.onContextMenu,S=e.tooltip,I=void 0===S?null:S,T=e.tooltipColor,O=e.tooltipPosition,A=void 0===O?l.default.Positions.BOTTOM:O,N=e.hideOnClick,C=void 0===N||N,M=e.role,b=e["aria-label"],R=e["aria-checked"],P=e["aria-roledescription"],D=f(i.default,{x:0,y:0,width:24,height:24,name:_,className:(0,a.default)(n,d.default.icon),foreground:v,background:y});return f(l.default,{text:I,color:T,position:A,hideOnClick:C},void 0,function(e){var n,r=e.onMouseEnter,i=e.onMouseLeave;return f(o.default,{tag:"div",onClick:p?null:g,onContextMenu:p?null:E,onMouseEnter:r,onMouseLeave:i,className:(0,a.default)(t,(n={},n[d.default.iconWrapper]=!0,n[d.default.clickable]=!p&&null!=g,n[d.default.selected]=u,n)),role:M,"aria-label":b,"aria-checked":R,"aria-roledescription":P},void 0,m?f(s.default,{mask:s.default.Masks.HEADER_BAR_BADGE},void 0,D):D,m?f("span",{className:d.default.iconBadge}):null)})};t.Icon=h,h.displayName="Icon",h.Names=i.default.Names;var m=function(e){var t=e.className;return f("div",{className:(0,a.default)(d.default.divider,t)})};t.Divider=m,m.displayName="Divider";var v=function(e){var t,n=e.className,r=e.children,o=e.toolbar,i=e.transparent,l=void 0!==i&&i;return f("div",{className:(0,a.default)(n,d.default.container,(t={},t[d.default.themed]=!l,t[d.default.transparent]=l,t))},void 0,f("div",{className:d.default.children},void 0,r),null!=o?f("div",{className:d.default.toolbar},void 0,o):null)};v.displayName="HeaderBar",v.Icon=h,v.Title=p,v.Divider=m;var y=v;t.default=y},6560:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)).createContext({isDiscover:!1});t.default=r},6576:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SearchBarIcon=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=h(n(8)),i=h(n(106)),l=h(n(58)),u=h(n(42)),s=n(80),d=n(266),c=n(1),f=h(n(4)),p=h(n(6204));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var v=Object.freeze({SMALL:p.default.small,MEDIUM:p.default.medium,LARGE:p.default.large}),y=function(e){var t,n,r,a=e.hasContent,i=e.onClear,s=e.className,c=e.themeOverride,f=e.size,h=void 0===f?v.SMALL:f;return m(l.default,{className:(0,o.default)(s,p.default.iconLayout,h,(0,d.getThemeClass)(c),(t={},t[p.default.clear]=a,t)),onClick:function(e){e.stopPropagation(),null!=i&&i(e)},onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}},void 0,m("div",{className:p.default.iconContainer},void 0,m(u.default,{name:u.default.Names.SEARCH,className:(0,o.default)((n={},n[p.default.icon]=!0,n[p.default.visible]=!a,n))}),m(u.default,{name:u.default.Names.CLOSE,className:(0,o.default)((r={},r[p.default.icon]=!0,r[p.default.visible]=a,r))})))};t.SearchBarIcon=y,y.displayName="SearchBarIcon";var _=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).ref=a.createRef(),t.handleKeyDown=function(e){var n=t.props,r=n.onActivate,a=n.onQueryChange,o=t.ref.current;if(null!=o&&null==r)return e.keyCode===c.KeyboardKeys.ESCAPE&&o.value&&o.value.length>0?(o.value="",void(null!=a&&a(""))):void(t.props.gridResults?t.handleKeyDownGrid(e):t.handleKeyDownList(e));e.keyCode!==c.KeyboardKeys.TAB&&null!=r&&r(e)},t.handleChange=function(e){var n=t.props.onQueryChange;null!=n&&n(e.currentTarget.value)},t.handleFocus=function(e){var n=t.props.onFocus;null!=n&&n(e)},t.handleClear=function(){var e=t.props.onClear,n=t.ref.current;null!=e&&e(),null!=n&&n.focus()},t.handleRemoveTag=function(e){var n=t.props.onRemoveTag;n&&n(e)},t.focus=function(){var e=t.ref.current;null!=e&&e.focus()},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=r.prototype;return l.componentDidMount=function(){var e=this.props.subscribeToFocusEvent;e&&s.ComponentDispatch.subscribe(e,this.focus)},l.componentWillUnmount=function(){var e=this.props.subscribeToFocusEvent;e&&s.ComponentDispatch.unsubscribe(e,this.focus)},l.handleKeyDownGrid=function(e){var t=this.props,n=t.selectedRow,r=t.selectedColumn,a=t.sections,o=t.query,i=t.tags,l=t.onSelectionChange,u=t.onSelect,s=t.onRemoveTag;if(0!==a.length){switch(e.keyCode){case c.KeyboardKeys.BACKSPACE:(null==o||0===o.length)&&null!=i&&i.length>0&&(e.preventDefault(),e.stopPropagation(),s&&s(i.length-1));break;case c.KeyboardKeys.TAB:if(c.EnableAccessibility)break;case c.KeyboardKeys.ARROW_DOWN:e.preventDefault(),e.stopPropagation(),-1===n?(n=0,r=0):((n+=1)>=a.length&&(n=a.length-1),r>=a[n]&&(r=a[n]-1));break;case c.KeyboardKeys.ARROW_UP:e.preventDefault(),e.stopPropagation(),(n-=1)<0?(n=0,r=0):r>=a[n]&&(r=a[n]-1);break;case c.KeyboardKeys.ARROW_LEFT:e.preventDefault(),e.stopPropagation(),-1===n&&(n=0),(r-=1)<0&&((n-=1)>=0?r=a[n]-1:n<0&&(n=0,r=0));break;case c.KeyboardKeys.ARROW_RIGHT:e.preventDefault(),e.stopPropagation(),-1===n&&(n=0),(r+=1)>=a[n]&&(r=0,(n+=1)>=a.length&&(r=a[n=a.length-1]-1));break;case c.KeyboardKeys.ENTER:if(e.preventDefault(),e.stopPropagation(),-1===n&&(n=0),-1===r&&(r=0),n>=a.length||r>=a[n])return;return void(null!=u&&u(n,r,e));case c.KeyboardKeys.ESCAPE:return e.preventDefault(),e.stopPropagation(),void(null!=u&&u(null,null,e));default:return}null!=l&&l(n,r)}},l.handleKeyDownList=function(e){var t=this.props,n=t.sections,r=t.selectedSection,a=t.selectedRow,o=t.onSelect,i=t.onSelectionChange,l=t.query,u=t.tags,s=t.onKeyDown,d=this.ref.current;if(null!=s&&s(e),null!=d)switch(e.keyCode){case c.KeyboardKeys.BACKSPACE:(null==l||0===l.length)&&null!=u&&u.length>0&&(e.preventDefault(),e.stopPropagation(),this.props.onRemoveTag&&this.props.onRemoveTag(u.length-1));break;case c.KeyboardKeys.TAB:if(c.EnableAccessibility)break;case c.KeyboardKeys.ARROW_DOWN:e.preventDefault(),e.stopPropagation(),n.length>r&&++a>=n[r]&&(++r>=n.length&&(r=0),a=0),i&&i(r,a);break;case c.KeyboardKeys.ARROW_UP:e.preventDefault(),e.stopPropagation(),--a<0&&(--r<0&&(r=n.length-1),a=n[r]-1),i&&i(r,a);break;case c.KeyboardKeys.ENTER:e.preventDefault(),e.stopPropagation(),n.length>r&&n[r]>a&&o&&o(r,a,e);break;case c.KeyboardKeys.ESCAPE:e.preventDefault(),e.stopPropagation(),o&&o(null,null,e),d.blur()}},l.render=function(){var e,t=this,n=this.props,r=n.autoFocus,l=n.query,s=n.placeholder,c=n.themeOverride,f=n.disabled,h=n.onClear,v=n.size,_=n.tags,g=n.onActivate,E=n.className,S=null!=l&&l.length>0,I=[];return null!=_&&_.forEach(function(e,n){return I.push(m(i.default,{className:p.default.tag,onClick:t.handleRemoveTag.bind(t,n)},n,e,m(u.default,{name:u.default.Names.CLOSE,className:p.default.close})))}),m("div",{className:(0,o.default)(E,p.default.container,v,(0,d.getThemeClass)(c),(e={},e[p.default.disabled]=f,e))},void 0,m("div",{className:p.default.inner},void 0,I,a.createElement("input",{className:p.default.input,type:"text",ref:this.ref,spellCheck:"false",placeholder:s,value:l,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,disabled:f,autoFocus:r,onMouseDown:g}),h?m(y,{size:v,themeOverride:c,hasContent:S,onClear:this.handleClear}):null))},r}(a.Component);_.displayName="SearchBar",_.Sizes=v,_.defaultProps={size:v.SMALL,query:"",sections:[],selectedSection:0,selectedRow:-1,selectedColumn:-1,gridResults:!1,placeholder:f.default.Messages.DM_SEARCH_PLACEHOLDER,disabled:!1,autoFocus:!1};var g=_;t.default=g},6577:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(2))&&r.__esModule?r:{default:r},o=n(1);var i={selectChannel:function(e,t,n){a.default.dispatch({type:o.ActionTypes.DELAYED_CHANNEL_SELECT,guildId:e,channelId:t,analyticsSource:n})},flushSelection:function(e){void 0===e&&(e=!1),a.default.dispatch({type:o.ActionTypes.DELAYED_SELECT_FLUSH,immediate:e})}};t.default=i},6578:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(__OVERLAY__){var n=t.getGame(),a=(0,r.getPID)();return null==n||null==a?null:{id:n.id,pid:a,pidPath:[],nativeProcessObserverId:0,hidden:!1,elevated:!1,name:n.name,lastFocused:0,exePath:"",exeName:"",cmdLine:"",processName:"",distributor:null,windowHandle:null}}return e.getVisibleGame()};var r=n(286)},6590:function(e,t,n){"use strict";(function(e){t.__esModule=!0,t.default=void 0;var r,a=f(n(12)),o=f(n(2)),i=f(n(341)),l=f(n(87)),u=f(n(15)),s=(f(n(8242)),f(n(139))),d=f(n(30)),c=n(1);function f(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(t){l.default.addConditionalChangeListener(function(){var n=l.default.getDefaultChannel(t.id);if(null!=n)return e(function(){null!=r?(m(),setTimeout(function(){d.default.push(r,{guild:new i.default(p({},t)),channel:n,source:c.InstantInviteSources.GUILD_CREATE})},1e3)):m()}),!1})}function m(){o.default.dispatch({type:c.ActionTypes.CREATE_GUILD_MODAL_CLOSE})}r=r=n(6532).default;var v={open:function(e,t,n){switch(void 0===t&&(t=null),void 0===n&&(n=null),o.default.dispatch({type:c.ActionTypes.CREATE_GUILD_MODAL_OPEN,screen:e}),e){case c.CreateGuildModalScreens.CreateGuild:u.default.track(c.AnalyticEvents.OPEN_MODAL,{Type:"Create Guild Step 2",Source:t,location_section:n});break;case c.CreateGuildModalScreens.JoinGuild:u.default.track(c.AnalyticEvents.OPEN_MODAL,{Type:"Join Guild",Source:t,location_section:n});break;default:u.default.track(c.AnalyticEvents.OPEN_MODAL,{Type:"Create Guild",Source:t,location_section:n})}},setScreen:function(e){o.default.dispatch({type:c.ActionTypes.CREATE_GUILD_MODAL_SET_SCREEN,screen:e})},close:m,updateTemporaryGuild:function(e){o.default.dispatch({type:c.ActionTypes.CREATE_GUILD_MODAL_UPDATE,guild:e})},createGuild:function(e,t,n){return void 0===n&&(n=null),o.default.dispatch({type:c.ActionTypes.CREATE_GUILD_MODAL_SUBMIT}),a.default.post({url:c.Endpoints.GUILDS,body:{name:e,region:t,icon:n}}).then(function(e){return h(e.body),s.default.transitionToGuildSync(e.body.id)},function(e){return o.default.dispatch({type:c.ActionTypes.CREATE_GUILD_MODAL_SUBMIT_FAILURE,errors:e.body})})},createGuildPromise:function(e,t,n){return void 0===n&&(n=null),a.default.post({url:c.Endpoints.GUILDS,body:{name:e,region:t,icon:n}}).then(function(e){h(e.body),s.default.transitionToGuildSync(e.body.id)},function(e){throw e.body})}};t.default=v}).call(this,n(43).setImmediate)},6592:function(e,t,n){"use strict";t.__esModule=!0,t.makeFile=function(e,t,r){if(null==t&&(t="unknown",e instanceof Blob))switch(e.type){case"image/png":t+=".png"}if(null==r){e instanceof Blob&&(r=e.type);var a=n(8415);r=r||a.lookup(t)}if("function"!=typeof File||"Microsoft Edge"===o.default.name){var i=new Date,l=0;return null!=e.size&&"number"==typeof e.size?l=e.size:null!=e.byteLength&&"number"==typeof e.byteLength&&(l=e.byteLength),{lastModified:i.getTime(),lastModifiedDate:i,name:t,size:l,type:r}}return new File([e],t,{type:r})},t.classifyFile=function(e){return f(e.name,e.type)},t.classifyFileName=f,t.sizeString=function(e){return r.default.filesize(e)},t.maxFileSize=p,t.anyFileTooLarge=function(e,t){var n=p(t);return Array.from(e).some(function(e){return e.size>n})};var r=d(n(7058)),a=d(n(6)),o=d(n(41)),i=d(n(19)),l=d(n(11)),u=d(n(96)),s=n(1);function d(e){return e&&e.__esModule?e:{default:e}}var c=[{reType:/^image\/vnd.adobe.photoshop/,klass:"photoshop"},{reType:/^image\/svg\+xml/,klass:"webcode"},{reType:/^image\//,klass:"image"},{reType:/^video\//,klass:"video"},{reName:/\.pdf$/,klass:"acrobat"},{reName:/\.ae/,klass:"ae"},{reName:/\.sketch$/,klass:"sketch"},{reName:/\.ai$/,klass:"ai"},{reName:/\.(?:rar|zip|7z|tar|tar\.gz)$/,klass:"archive"},{reName:/\.(?:c\+\+|cpp|cc|c|h|hpp|mm|m|json|js|rb|rake|py|asm|fs|pyc|dtd|cgi|bat|rss|java|graphml|idb|lua|o|gml|prl|sls|conf|cmake|make|sln|vbe|cxx|wbf|vbs|r|wml|php|bash|applescript|fcgi|yaml|ex|exs|sh|ml|actionscript)$/,klass:"code"},{reName:/\.(?:txt|rtf|doc|docx|md|pages|ppt|pptx|pptm|key|log)$/,klass:"document"},{reName:/\.(?:xls|xlsx|numbers|csv)$/,klass:"spreadsheet"},{reName:/\.(?:html|xhtml|htm|js|xml|xls|xsd|css|styl)$/,klass:"webcode"},{reName:/\.(?:mp3|ogg|wav|flac)$/,klass:"audio"}];function f(e,t){e=e?e.toLowerCase():"";var n=a.default.find(c,function(n){return n.reType&&t?n.reType.test(t):!(!n.reName||!e)&&n.reName.test(e)});return n?n.klass:"unknown"}function p(e){var t=l.default.getCurrentUser(),n=u.default.getUserMaxFileSize(t);if(null==e)return n;var r=i.default.getGuild(e),a=null!=r?s.PremiumGuildLimits[r.premiumTier].fileSize:s.MAX_ATTACHMENT_SIZE;return Math.max(a,n)}},6593:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SearchIcon=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=c(n(8)),i=c(n(58)),l=c(n(42)),u=c(n(182)),s=c(n(4)),d=c(n(6229));function c(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h=Object.freeze({SMALL:d.default.small,MEDIUM:d.default.medium,LARGE:d.default.large}),m=function(e){var t,n,r,s=e.hasContent,c=e.onClear,f=e.className,m=e.isLoading,v=e.size,y=void 0===v?h.SMALL:v;return p(i.default,{className:(0,o.default)(f,d.default.iconLayout,y,(t={},t[d.default.pointer]=s,t)),onClick:function(e){e.stopPropagation(),null!=c&&c(e)},onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}},void 0,p("div",{className:d.default.iconContainer},void 0,m?p(u.default,{type:u.default.Type.SPINNING_CIRCLE,className:(0,o.default)(d.default.icon,d.default.visible)}):p(a.Fragment,{},void 0,p(l.default,{name:l.default.Names.SEARCH,className:(0,o.default)(d.default.icon,(n={},n[d.default.visible]=!s,n))}),p(l.default,{name:l.default.Names.CLOSE,className:(0,o.default)(d.default.clear,(r={},r[d.default.visible]=s,r))}))))};t.SearchIcon=m,m.displayName="SearchIcon",m.Sizes=h;var v=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).inputRef=a.createRef(),t.handleOnChange=function(e){var n=t.props.onChange;n&&n(e.currentTarget.value)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.focus=function(){var e=this.inputRef.current;null!=e&&e.focus()},i.blur=function(){var e=this.inputRef.current;null!=e&&e.blur()},i.render=function(){var e,t=this.props,n=t.query,r=t.autoFocus,i=t.onClear,l=t.className,u=t.placeholder,s=t.iconClassName,c=t.onKeyDown,h=t.onKeyUp,v=t.onKeyPress,y=t.isLoading,_=t.size,g=t.disabled,E=(t.onChange,t.onBlur),S=t.onFocus,I=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["query","autoFocus","onClear","className","placeholder","iconClassName","onKeyDown","onKeyUp","onKeyPress","isLoading","size","disabled","onChange","onBlur","onFocus"]);return a.createElement("div",f({className:(0,o.default)(l,d.default.container,_,(e={},e[d.default.disabled]=g,e))},I),p("div",{className:d.default.inner},void 0,a.createElement("input",{onFocus:S,onBlur:E,className:d.default.input,value:n,onChange:this.handleOnChange,onKeyDown:c,onKeyUp:h,onKeyPress:v,placeholder:u,disabled:g,autoFocus:r,ref:this.inputRef}),p(m,{size:_,hasContent:n.length>0,onClear:i,className:s,isLoading:y})))},r}(a.PureComponent);v.displayName="SearchBar",v.Sizes=h,v.defaultProps={size:h.SMALL,placeholder:s.default.Messages.SEARCH,isLoading:!1,disabled:!1};var y=v;t.default=y},6594:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=s(n(8)),o=n(462),i=s(n(106)),l=n(857),u=s(n(6265));function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e){var t=e.icon,n=e.iconNode,r=e.timestamp,i=e.className,s=e.children;return d(l.BackgroundOpacityContext.Consumer,{},void 0,function(e){return d("div",{className:(0,a.default)(u.default.container,i)},void 0,null!=n&&d("div",{className:u.default.icon},void 0,n),null!=t&&d("div",{className:u.default.icon,style:{backgroundImage:"url('"+t+"')"}}),d("div",{className:(0,a.default)(u.default.content,u.default[e.backgroundOpacity+"BackgroundOpacity"])},void 0,s,d("time",{dateTime:r.toISOString(),className:(0,a.default)(u.default.timestamp,u.default[e.backgroundOpacity+"BackgroundOpacity"])},void 0,(0,o.calendarFormat)(r))))})}c.displayName="SystemMessage";var f=function(e){var t=e.onClick,n=e.children;return d("span",{className:u.default.action},void 0,"",d(i.default,{onClick:t,className:u.default.actionAnchor},void 0,n))};f.displayName="SystemMessageAction",c.Action=f;var p=c;t.default=p},6600:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a,o=c(n(82)),i=c(n(21)),l=c(n(24)),u=c(n(75)),s=n(136),d=c(n(6350));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p=(0,o.default)({UPGRADE:null,CANCEL:null,UNVERIFIED:null,UNCLAIMED:null,GRANDFATHERED:null}),h=((r={})[p.UPGRADE]="imageUpgrade",r[p.CANCEL]="imageCancel",r[p.UNVERIFIED]="imageUnverified",r[p.UNCLAIMED]="imageUnclaimed",r[p.GRANDFATHERED]="imageCancel",r),m=function(e){var t=e.children,n=e.onClose;return f(u.default.Header,{separator:!1},void 0,f(s.FormTitle,{tag:s.FormTitleTags.H4},void 0,t),null!=n?f(u.default.CloseButton,{className:d.default.closeIcon,onClick:n}):null)};m.displayName="Header";var v=function(e){var t=e.children,n=e.type;return f(u.default.Content,{},void 0,f("div",{className:d.default[h[n]]}),f("div",{className:d.default.message},void 0,t))};v.displayName="Content";var y=function(e){var t=e.primary,n=e.primaryRenderer,r=e.secondary;return f(u.default.Footer,{},void 0,f(l.default,{justify:l.default.Justify.END},void 0,null!=r?f(i.default,{onClick:r.onClick,look:i.default.Looks.LINK,innerClassName:d.default.secondaryButton},void 0,r.label):null,null!=t?f(i.default,{onClick:t.onClick,color:i.default.Colors.BRAND},void 0,t.label):n))};y.displayName="Footer";var _=function(e){var t=e.children;return f(u.default,{},void 0,t)};_.displayName="PremiumModal",_.Header=m,_.Content=v,_.Footer=y,_.Types=p;var g=_;t.default=g},6608:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(6)),a=l(n(3)),o=l(n(2)),i=l(n(19));n(1);function l(e){return e&&e.__esModule?e:{default:e}}var u=null,s={};var d=new(function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.initialize=function(){this.waitFor(i.default)},o.getOptimalRegion=function(e){void 0===e&&(e=null);var t=this.getRegions(e);return null!=t?t.find(function(e){return e.optimal})||r.default.sample(t):null},o.getOptimalRegionId=function(e){void 0===e&&(e=null);var t=this.getOptimalRegion(e);return null!=t?t.id:null},o.getRandomRegion=function(e){void 0===e&&(e=null);var t=this.getRegions(e);return null!=t?r.default.sample(t):null},o.getRandomRegionId=function(e){void 0===e&&(e=null);var t=this.getRandomRegion(e);return null!=t?t.id:null},o.getRegions=function(e){return null!=e?s[e]:u},a}(a.default.Store))(o.default,{LOAD_REGIONS:function(e){var t=r.default.sortBy(e.regions,function(e){return e.name});e.guildId?s[e.guildId]=t:u=t},GUILD_DELETE:function(e){delete s[e.guild.id]}});t.default=d},6609:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(3)),a=u(n(2)),o=n(264),i=u(n(859)),l=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var s=null;function d(e){(s=e.requiredAction)===l.UserRequiredActions.REQUIRE_CAPTCHA||s===l.UserRequiredActions.REQUIRE_VERIFIED_EMAIL||s===l.UserRequiredActions.REQUIRE_VERIFIED_PHONE?(0,o.pushLayer)(l.Layers.VERIFICATION):i.default.hasLayers()&&null==s&&(0,o.popLayer)()}var c=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.hasAction=function(){return null!=s},a.getAction=function(){return s},r}(r.default.Store))(a.default,{CONNECTION_OPEN:d,USER_REQUIRED_ACTION_UPDATE:d});t.default=c},6610:function(e,t,n){"use strict";t.__esModule=!0,t.getQuickSwitcherOptions=A,t.trackOpen=N,t.trackClose=C,t.show=b,t.hide=R,t.toggle=function(e){void 0===e&&(e="KEYBIND");p.default.isOpen()?R():b(e)},t.search=function(e){r.default.dispatch(S({type:g.ActionTypes.QUICKSWITCHER_SEARCH},A(e)))},t.selectResult=function(e){r.default.dispatch({type:g.ActionTypes.QUICKSWITCHER_SELECT,selectedIndex:e})},t.switchToResult=function(e){C(g.AnalyticEvents.QUICKSWITCHER_RESULT_SELECTED,e);var t,n=e.type,s=e.record,p={page:g.AnalyticsPages.QUICK_SWITCHER};switch(n){case u.AutocompleterResultTypes.GUILD:t=h.default.getChannelId(s.id),o.default.selectChannel(s.id,t,p),o.default.flushSelection(!0);break;case u.AutocompleterResultTypes.TEXT_CHANNEL:null!=(t=c.default.getChannel(s.id))&&(o.default.selectChannel(t.guild_id,s.id,p),o.default.flushSelection(!0));break;case u.AutocompleterResultTypes.VOICE_CHANNEL:null!=(t=c.default.getChannel(s.id))&&l.default.selectVoiceChannel(s.id);break;case u.AutocompleterResultTypes.USER:a.default.openPrivateChannel(d.default.getId(),[s.id]),i.default.channelListScrollTo(g.ME,s.id);break;case u.AutocompleterResultTypes.GROUP_DM:o.default.selectChannel(g.ME,s.id),o.default.flushSelection(!0),i.default.channelListScrollTo(g.ME,s.id);break;case u.AutocompleterResultTypes.APPLICATION:var m=(0,_.getLibraryApplicationForApplicationId)(s.id,f.default,v.default);I(s.id,m,{analyticsParams:{source:g.AnalyticsLocations.QUICK_SWITCHER,location:g.AnalyticsLocations.QUICK_SWITCHER}})}r.default.dispatch({type:g.ActionTypes.QUICKSWITCHER_SWITCH_TO,result:e}),M()};var r=E(n(2)),a=E(n(140)),o=E(n(6577)),i=E(n(6540)),l=E(n(107)),u=n(6556),s=E(n(67)),d=E(n(10)),c=E(n(14)),f=E(n(50)),p=E(n(6851)),h=E(n(39)),m=E(n(153)),v=E(n(126)),y=E(n(15)),_=n(89),g=n(1);function E(e){return e&&e.__esModule?e:{default:e}}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var I=function(){return Promise.resolve()},T=n(163);I=T.playApplication;var O=Object.freeze({"@":u.AutocompleterResultTypes.USER,"#":u.AutocompleterResultTypes.TEXT_CHANNEL,"!":u.AutocompleterResultTypes.VOICE_CHANNEL,"*":u.AutocompleterResultTypes.GUILD,$:u.AutocompleterResultTypes.APPLICATION});function A(e){var t=function(e){var t=e.charAt(0),n=O[t]||null;return[e.replace(/^@|#|!|\*|\$/,""),n]}(e);return{query:t[0],queryMode:t[1]}}function N(e){if(!p.default.isOpen()){var t,n=m.default.getGuildId(),r=h.default.getChannelId(n);if(null!=r){var a=c.default.getChannel(r);t=null!=a?a.type:null}y.default.track(g.AnalyticEvents.QUICKSWITCHER_OPENED,{source:e,current_guild_id:n,current_channel_id:r,current_channel_type:t})}}function C(e,t){var n=p.default.getProps(),r=n.results,a=n.queryMode,o=n.query,i=m.default.getGuildId(),l=h.default.getChannelId(i),d=r[(0,u.findNextSelectedResult)(u.FindResultDirections.DOWN,-1,r)],f={current_channel_id:l,current_guild_id:i,query_mode:a||"GENERAL",query_length:o.length,top_result_type:d?d.type:null,top_result_score:d?d.score:null,num_results_total:p.default.getResultTotals(),num_results_users:p.default.getResultTotals(u.AutocompleterResultTypes.USER),num_results_text_channels:p.default.getResultTotals(u.AutocompleterResultTypes.TEXT_CHANNEL),num_results_voice_channels:p.default.getResultTotals(u.AutocompleterResultTypes.VOICE_CHANNEL),num_results_guilds:p.default.getResultTotals(u.AutocompleterResultTypes.GUILD),num_results_group_dms:p.default.getResultTotals(u.AutocompleterResultTypes.GROUP_DM)};if(null!=l){var v=c.default.getChannel(l);f.current_channel_type=null!=v?v.type:null}if(null!=t){var _=t.type,g=t.score,E=t.record;switch(f.selected_type=_,f.selected_score=g,f.selected_index=r.indexOf(t),_){case u.AutocompleterResultTypes.GUILD:f.selected_guild_id=E.id;break;case u.AutocompleterResultTypes.TEXT_CHANNEL:case u.AutocompleterResultTypes.VOICE_CHANNEL:E instanceof s.default&&(f.selected_guild_id=null!=E.guild_id?E.guild_id:null),f.selected_channel_id=E.id;break;case u.AutocompleterResultTypes.GROUP_DM:f.selected_channel_id=E.id;break;case u.AutocompleterResultTypes.USER:f.selected_user_id=E.id}}y.default.track(e,f)}function M(){r.default.dispatch({type:g.ActionTypes.QUICKSWITCHER_HIDE})}function b(e,t){void 0===e&&(e="KEYBIND"),void 0===t&&(t=""),N(e),r.default.dispatch(S({type:g.ActionTypes.QUICKSWITCHER_SHOW},A(t)))}function R(){C(g.AnalyticEvents.QUICKSWITCHER_CLOSED),M()}},6613:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=c(n(8)),i=c(n(122)),l=c(n(42)),u=c(n(328)),s=c(n(5944)),d=c(n(6235));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e,t,n){return f("div",{className:t},n,e)}p.displayName="defaultRenderMoreUsers";var h=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).defaultRenderUser=function(e,n,r,a){var l=t.props,c=l.onClick,p=l.size,h=e instanceof i.default?e:null!=e?e.user:null;return null==h?f("div",{className:(0,o.default)(d.default.emptyUser,n)},r):f(u.default,{src:h.getAvatarURL("png"),size:p,"aria-label":h.username,className:(0,o.default)(n,s.default.cursorPointer,d.default.avatarSize),onClick:function(e){return null!=c?c(e,h,t._ref):null}},h.id)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var c=r.prototype;return c.renderUsers=function(){for(var e=this.props,t=e.users,n=e.max,r=e.renderUser,a=void 0===r?this.defaultRenderUser:r,o=e.renderMoreUsers,i=[],l=t.length===n?t.length:n-1,u=0;u<l&&u<t.length;){var s=u===t.length-1;i.push(a(t[u]||null,s?null:d.default.avatarMasked,"user-"+u,s)),u++}if(u<t.length){var c=Math.min(t.length-u,99);i.push(o("+"+c,d.default.moreUsers,"more-users",c))}return i},c.renderIcon=function(){return this.props.icon?f("div",{className:d.default.iconContainer},void 0,f(l.default,{name:l.default.Names.SPEAKER,width:16,height:16,foreground:d.default.foreground,className:d.default.icon})):null},c.render=function(){var e=this,t=this.props.className;return a.createElement("div",{className:(0,o.default)(t,d.default.container),ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e._ref=t})},this.renderIcon(),this.renderUsers())},r}(a.PureComponent);h.displayName="VoiceUserSummaryItem",h.defaultProps={max:10,renderMoreUsers:p,size:u.default.Sizes.SIZE_24};var m=h;t.default=m},6614:function(e,t,n){"use strict";t.__esModule=!0,t.renderVideoComponent=j,t.renderAudioComponent=H,t.renderImageComponent=x,t.renderMaskedLinkComponent=B,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=L(n(8)),i=L(n(124)),l=n(3),u=n(6868),s=L(n(141)),d=L(n(8445)),c=L(n(878)),f=L(n(6749)),p=L(n(6637)),h=L(n(8453)),m=n(6692),v=L(n(7065)),y=n(6869),_=L(n(8454)),g=n(909),E=n(80),S=n(8469),I=L(n(8470)),T=L(n(8472)),O=L(n(7695)),A=L(n(8473)),N=L(n(7689)),C=L(n(8475)),M=L(n(540)),b=L(n(8478)),R=L(n(7699)),P=n(1),D=L(n(6264));function L(e){return e&&e.__esModule?e:{default:e}}function w(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var G=function(e){return function(t){e&&e(t),(0,S.setVolume)(t)}},F=function(e){return function(t){e&&e(t),(0,S.setMuted)(t)}};function j(e){var t=e.onVolumeChange,n=e.onMute,r=e.volume,o=e.autoMute,i=k(e,["onVolumeChange","onMute","volume","autoMute"]),l=G(t),u=F(n);return r=null==r?S.getVolume:r,o=null==o?S.getMuted:o,a.createElement(v.default,U({},i,{volume:r,autoMute:o,onVolumeChange:l,onMute:u}))}function H(e){var t=e.onVolumeChange,n=e.volume,r=e.onMute,o=k(e,["onVolumeChange","volume","onMute"]),i=G(t),l=F(r);n=null==n?S.getVolume:n;return a.createElement(h.default,U({},o,{onVolumeChange:i,onMute:l,volume:n,autoMute:function(){return!1}}))}function x(e){return a.createElement(C.default,e)}function B(e){return a.createElement(M.default,e)}j.displayName="renderVideoComponent",H.displayName="renderAudioComponent",x.displayName="renderImageComponent",B.displayName="renderMaskedLinkComponent";var V=function(e){var t=e.width,n=e.height,r=e.url,a=e.src,o=e.format,i=e.className,s=(0,l.useStateFromStores)([f.default],function(){return f.default.getIsFavorite(r)});return w(N.default,{className:i,onClick:function(e){e?(0,u.removeFavoriteGIF)(r):((0,u.addFavoriteGIF)({url:r,src:a,width:t,height:n,format:o}),E.ComponentDispatch.dispatch(P.ComponentActions.FAVORITE_GIF))},isFavorite:s})};V.displayName="ConnectedGIFFavButton";var K=function(e,t,n){return function(){var r=t||n;if(null==r)return null;var a=r.url,o=r.proxyURL,i=r.width,l=r.height;return w(V,{width:i,height:l,src:o||a,url:e||o||a,format:null!=n?P.GIFResultFormat.VIDEO:P.GIFResultFormat.IMAGE,className:D.default.gifFavoriteButton})}},W=function(e){return function(){var t=e.proxy_url,n=e.width,r=e.height;return m.IMAGE_GIF_RE.test(e.filename)&&null!=n&&null!=r?w(V,{width:n,height:r,src:t,url:t,format:P.GIFResultFormat.IMAGE,className:D.default.gifFavoriteButton}):null}},z=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).getAcceptInviteContext=function(e){var n=t.props,r=n.channel,a=n.message;return{location:e,location_guild_id:r.getGuildId(),location_channel_id:r.id,location_channel_type:r.type,location_message_id:a.id}},t.renderEmbed=function(e,n){var r=t.props,o=r.disableAutoPlayGif,i=r.inlineEmbedMedia,l=r.backgroundOpacity,u=r.canSuppressEmbeds,s=r.hasSpoilerEmbeds;return w(y.GIFAccessoryContext.Provider,{value:K(e.url,e.image,e.video)},e.id,a.createElement(p.default,U({className:D.default.embedWrapper,embed:e,spoiler:s,autoPlayGif:!o,hideMedia:!i,backgroundOpacity:l,suppressEmbed:u?t.handleEmbedSuppressed:void 0,renderTitle:t.renderEmbedTitle,renderDescription:t.renderEmbedDescription},n)))},t.renderEmbedTitle=function(e,n){return e.type===P.EmbedTypes.RICH?c.default.parseEmbedTitle(n,!0,{channelId:t.props.channel.id}):n},t.renderEmbedDescription=function(e,n){return e.type===P.EmbedTypes.RICH?c.default.parseAllowLinks(n,!0,{channelId:t.props.channel.id}):n},t.handleEmbedSuppressed=function(){var e=t.props,n=e.channel,r=e.message;s.default.suppressEmbeds(n.id,r.id)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=r.prototype;return l.renderInvites=function(e){var t=this;return 0===e.invites.length?null:e.invites.map(function(n){return w(I.default,{code:n,author:e.author,getAcceptInviteContext:t.getAcceptInviteContext},n)})},l.renderGiftCodes=function(e){return e.giftCodes.map(function(t){return w("div",{className:D.default.giftCodeContainer},t,w(b.default,{code:t,author:e.author,channelId:e.channel_id}))})},l.renderReactions=function(e){var t=this.props,n=t.disableReactionCreates,r=t.disableReactionReads,a=t.disableReactionUpdates,o=t.channel;return r?null:w(O.default,{message:e,channel:o,disableReactionCreates:n,disableReactionUpdates:a})},l.renderAttachments=function(e){var t=this.props,n=t.disableAutoPlayGif,r=t.inlineAttachmentMedia,a=t.onContextMenuMessage,o=t.channel;return e.attachments.length?e.attachments.map(function(t){return w(y.GIFAccessoryContext.Provider,{value:W(t)},t.id,w(_.default,{className:D.default.embedWrapper,attachment:t,inlineMedia:r,autoPlayGif:!n,onContextMenu:function(n){a(n,{attachment:t,message:e,channel:o,target:n.target||n.currentTarget})},renderImageComponent:x,renderVideoComponent:j,renderAudioComponent:H}))}):null},l.renderEmbeds=function(e){var t=this,n=this.props,r=n.disableEmbeds,a=n.hasSpoilerEmbeds;return!e.embeds.length||r?null:e.embeds.map(function(e){if(e.type===P.EmbedTypes.APPLICATION_NEWS)return w(A.default,{embed:e,spoiler:a},e.id);var n=e.type===P.EmbedTypes.RICH?{renderImageComponent:x,renderVideoComponent:j,renderLinkComponent:B}:{renderImageComponent:x,renderVideoComponent:j,renderLinkComponent:g.defaultRenderLinkComponent};if(e.type===P.EmbedTypes.ARTICLE&&null!=e.url&&e.url.includes("discordapp.com/store/skus")&&null!=e.provider&&"Discord"===e.provider.name){var r=i.default.parse(e.url);if(null!=r.pathname){var o=r.pathname.split("/")[3];if(null!=o)return w(R.default,{skuId:o,renderFallback:function(){return t.renderEmbed(e,n)}},e.id)}}return t.renderEmbed(e,n)})},l.renderActivityInvite=function(e){if(null==e.activity)return null;var t=this.props.channel;return w(T.default,{channel:t,message:e,hideParty:!1})},l.renderPublishBump=function(e){var t=this.props,n=t.channel,r=t.onPublishMessage;return n.type!==P.ChannelTypes.GUILD_ANNOUNCEMENT?null:w(d.default,{channelId:e.channel_id,messageId:e.id,onPublishMessage:r})},l.render=function(){var e=this.props,t=e.isCompact,n=e.className,r=e.message,a=this.renderInvites(r),i=this.renderGiftCodes(r),l=this.renderAttachments(r),u=this.renderEmbeds(r),s=this.renderActivityInvite(r),d=this.renderReactions(r),c=this.renderPublishBump(r);return null==a&&null==l&&null==u&&null==s&&null==d&&null==i&&null==c?null:w("div",{className:(0,o.default)(n,t?D.default.containerCompact:D.default.containerCozy)},void 0,a,i,l,u,s,d,c)},r}(a.PureComponent);t.default=z,z.displayName="MessageAccessories",z.defaultProps={disableEmbeds:!0,isCompact:!1}},6615:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(12)),a=u(n(2)),o=u(n(141)),i=u(n(14)),l=n(1);function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,l,"next",e)}function l(e){s(o,r,a,i,l,"throw",e)}i(void 0)})}}var c,f,p,h={createChannelFollower:function(e,t){return r.default.post({url:l.Endpoints.CHANNEL_FOLLOWERS(t),body:{webhook_channel_id:e}})},fetchChannelFollowerStats:(p=d(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.dirtyDispatch({type:l.ActionTypes.CHANNEL_FOLLOWER_STATS_FETCH_START}),e.prev=1,e.next=4,r.default.get({url:l.Endpoints.CHANNEL_FOLLOWER_STATS(t),body:{channel_id:t}});case 4:n=e.sent,a.default.dispatch({type:l.ActionTypes.CHANNEL_FOLLOWER_STATS_FETCH_SUCCESS,stats:n.body,channelId:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.default.dispatch({type:l.ActionTypes.CHANNEL_FOLLOWER_STATS_FETCH_FAILURE,channelId:t});case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return p.apply(this,arguments)}),fetchChannelFollowerMessageStats:(f=d(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.dirtyDispatch({type:l.ActionTypes.CHANNEL_FOLLOWER_MESSAGE_STATS_FETCH_START}),e.prev=1,e.next=4,r.default.get({url:l.Endpoints.CHANNEL_FOLLOWER_MESSAGE_STATS(t)});case 4:n=e.sent,a.default.dispatch({type:l.ActionTypes.CHANNEL_FOLLOWER_MESSAGE_STATS_FETCH_SUCCESS,stats:n.body,channelId:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.default.dispatch({type:l.ActionTypes.CHANNEL_FOLLOWER_MESSAGE_STATS_FETCH_FAILURE,channelId:t});case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return f.apply(this,arguments)}),fetchMessagePreviews:(c=d(regeneratorRuntime.mark(function e(t){var n,u,s,d,c,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.channelId,u=t.before,s=t.after,d=t.limit,null==(c=i.default.getChannel(n))||c.type!==l.ChannelTypes.GUILD_STORE){e.next=4;break}return e.abrupt("return",!1);case 4:if(!o.default._tryFetchMessagesCached(n,u,s,d)){e.next=6;break}return e.abrupt("return");case 6:return a.default.dirtyDispatch({type:l.ActionTypes.CHANNEL_FOLLOWING_FETCH_MESSAGE_PREVIEWS,channelId:n}),e.prev=7,e.next=10,r.default.get({url:l.Endpoints.MESSAGES(n),query:{before:u,after:s,limit:d},retries:2});case 10:f=e.sent,a.default.dispatch({type:l.ActionTypes.CHANNEL_FOLLOWING_FETCH_MESSAGE_PREVIEWS_SUCCESS,channelId:n,messages:f.body}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),a.default.dispatch({type:l.ActionTypes.CHANNEL_FOLLOWING_FETCH_MESSAGE_PREVIEWS_FAILURE,channelId:n});case 17:case"end":return e.stop()}},e,null,[[7,14]])})),function(e){return c.apply(this,arguments)}),dismissPublishBump:function(e){a.default.dispatch({type:l.ActionTypes.CHANNEL_FOLLOWING_PUBLISH_BUMP_DISMISSED,messageId:e})},permanentlyHidePublishBump:function(e){a.default.dispatch({type:l.ActionTypes.CHANNEL_FOLLOWING_PUBLISH_BUMP_HIDE_PERMANENTLY,channelId:e})}};t.default=h},6616:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=V(n(0)),o=B(n(8)),i=B(n(118)),l=n(966),u=B(n(3)),s=B(n(263)),d=V(n(186)),c=n(6563),f=B(n(329)),p=B(n(861)),h=B(n(6871)),m=B(n(6872)),v=B(n(19)),y=B(n(25)),_=B(n(11)),g=n(7076),E=B(n(58)),S=B(n(274)),I=B(n(42)),T=B(n(8504)),O=B(n(152)),A=B(n(6873)),N=B(n(900)),C=n(871),M=B(n(456)),b=B(n(257)),R=B(n(15)),P=n(486),D=n(80),L=B(n(183)),w=n(6534),U=B(n(6874)),k=n(7077),G=B(n(8505)),F=B(n(8509)),j=n(1),H=B(n(4)),x=B(n(6286));function B(e){return e&&e.__esModule?e:{default:e}}function V(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function K(){var e=function(e,t){t||(t=e.slice(0));return e.raw=t,e}(["0px 8px 16px ",""]);return K=function(){return e},e}function W(e,t,n,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function z(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Y(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var q=(0,l.cssValueToNumber)(x.default.carouselInactiveOffsetY),$=(0,l.cssValueToNumber)(x.default.contentMinWidth),J=function(e){function t(){return e.apply(this,arguments)||this}Y(t,e);var n=t.prototype;return n.renderPerk=function(e,t){var n=(0,k.getPerkIcon)(e.icon,t),r=n.name,a=n.className;return z("div",{className:x.default.perk},e.title,z(I.default,{name:r,className:(0,o.default)(x.default.perkIcon,a)}),z("div",{className:x.default.perkText},void 0,e.title))},n.render=function(){var e=this,t=this.props,n=t.subscriberCount,r=t.tier,o=j.PremiumGuildSubscriptionsRequired[r.tier],i=n>=o,l=r.tier!==j.PremiumGuildTiers.NONE&&r.tier!==j.PremiumGuildTiers.TIER_1;return z("div",{className:x.default.tier},r.tier,z("div",{className:i?x.default.tierHeaderUnlocked:x.default.tierHeaderLocked},void 0,z(N.default,{tier:r.tier,className:x.default.tierIcon}),z("div",{className:x.default.tierTitle},void 0,r.title),i?z("div",{className:x.default.tierUnlocked},void 0,H.default.Messages.GUILD_SETTINGS_PREMIUM_GUILD_UNLOCKED):z(a.Fragment,{},void 0,z("div",{className:x.default.tierRequirements},void 0,H.default.Messages.GUILD_SETTINGS_PREMIUM_GUILD_TIER_REQUIREMENT.format({required:o})),z(I.default,{name:I.default.Names.LOCK_CLOSED,className:x.default.tierLock}))),z("div",{className:x.default.tierBody},void 0,z("div",{className:x.default.previousPerks},void 0,l?H.default.Messages.PREMIUM_GUILD_PERKS_MODAL_PREVIOUS_PERKS:H.default.Messages.PREMIUM_GUILD_PERKS_MODAL_BASE_PERKS),z("div",{},void 0,r.perks.map(function(t){return e.renderPerk(t,i)}))))},t}(a.Component);J.displayName="GuildPremiumTierPerksModalCard";var Q=z(F.default,{}),X=z(m.default,{}),Z=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={selectedTier:t.props.guild.premiumTier!==j.PremiumGuildTiers.NONE?t.props.guild.premiumTier:j.PremiumGuildTiers.TIER_1,error:null},t.handleClose=function(){t.props.close(),R.default.track(j.AnalyticEvents.MODAL_DISMISSED,{type:j.AnalyticsSections.PREMIUM_GUILD_USER_MODAL,location_section:t.props.locationSection})},t.selectTier=function(e){t.setState({selectedTier:e})},t.handleSubscribeModalClose=function(e){var n=t.props.guild;e&&n.premiumTier!==j.PremiumGuildTiers.NONE&&t.selectTier(n.premiumTier)},t.handleError=function(e){t.setState({error:e})},t.handleDismissError=function(){t.setState({error:null})},t}Y(t,e);var r=t.prototype;return r.componentDidMount=function(){var e,t=(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.default.track(j.AnalyticEvents.OPEN_MODAL,{type:j.AnalyticsSections.PREMIUM_GUILD_USER_MODAL,location_section:this.props.locationSection}),D.ComponentDispatch.subscribe(j.ComponentActions.MODAL_CLOSE,this.handleClose),e.prev=2,e.next=5,Promise.all([(0,c.fetchUserPremiumGuildSubscriptionSlots)(),(0,c.fetchPremiumSubscriptionCooldown)(),d.fetchSubscriptions(),d.fetchPaymentSources()]);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.setState({error:e.t0});case 10:case"end":return e.stop()}},e,this,[[2,7]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){W(o,r,a,i,l,"next",e)}function l(e){W(o,r,a,i,l,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}(),r.componentDidUpdate=function(e){this.props.layerTransitionState!==e.layerTransitionState&&this.props.layerTransitionState===C.TransitionStates.ENTERED&&this.props.triggerResize()},r.componentWillUnmount=function(){D.ComponentDispatch.unsubscribe(j.ComponentActions.MODAL_CLOSE,this.handleClose)},r.canSelectTier=function(e){return e!==j.PremiumGuildTiers.NONE},r.renderClose=function(){return z("div",{className:x.default.closeWrapper},void 0,z("div",{className:x.default.closeContent},void 0,z(U.default,{className:x.default.closeIcon,closeAction:this.handleClose,theme:this.props.theme,keybind:"ESC"})))},r.renderProgressBar=function(){var e=this.props,t=e.guild,n=e.theme;return z(T.default,{className:x.default.progressBar,selectedTier:this.state.selectedTier,guild:t,onSelectTier:this.selectTier,canSelectTier:this.canSelectTier,initialAnimationDelay:500,theme:n})},r.renderCarouselItem=function(e,t){var n=this,r=null!=t?t.interpolate({inputRange:[0,1],outputRange:[j.Colors.TRANSPARENT,(0,P.hexWithOpacity)(j.Colors.BLACK,this.props.theme===j.ThemeTypes.DARK?.2:.1)]}):j.Colors.TRANSPARENT;return z(i.default.div,{className:x.default.tierWrapper,style:null!=t?{transform:[{translateY:t.interpolate({inputRange:[0,1],outputRange:[q+"px","0px"]})}],boxShadow:i.default.template(K(),r),opacity:t.interpolate({inputRange:[0,1],outputRange:[.5,1]})}:null},void 0,z(E.default,{className:this.state.selectedTier===e.tier?x.default.carouselItemSelected:x.default.carouselItemClickable,onClick:function(){return n.selectTier(e.tier)}},void 0,z(J,{subscriberCount:this.props.guild.premiumSubscriberCount,tier:e})))},r.getCarouselAlignment=function(e){switch(e){case j.PremiumGuildTiers.TIER_1:return g.Alignment.LEFT;case j.PremiumGuildTiers.TIER_3:return g.Alignment.RIGHT;default:return g.Alignment.CENTER}},r.renderCarousel=function(){var e=this,t=this.state.selectedTier,n=this.props,r=n.width;return n.layerTransitionState===C.TransitionStates.ENTERING?z("div",{className:x.default.carouselPlaceholder}):z("div",{className:(0,o.default)(x.default.carouselContainer,x.default.carouselContainerVisible)},void 0,z(g.CarouselWithPreview,{className:x.default.carousel,edgeItems:0,items:(0,w.getTiers)(),renderItem:function(t,n,r){return e.renderCarouselItem(t,r)},currentIndex:t-1,itemSize:{width:350,margin:30},width:r,gutter:(r-$)/2,align:this.getCarouselAlignment(t),hideOverflow:!1}))},r.render=function(){var e=this,t=this.state.error;return z(a.Fragment,{},void 0,this.renderClose(),z(O.default,{className:x.default.perksModal,theme:O.default.Themes.GHOST},void 0,z("div",{className:x.default.perksModalContentWrapper},void 0,z("div",{className:x.default.content},void 0,z("img",{className:x.default.headerGraphic,alt:"",src:n(8510)}),z(I.default,{name:I.default.Names.PREMIUM_GUILD_SUBSCRIPTION_LOGO_CENTERED,className:x.default.headerLogo}),z(b.default,{size:b.default.Sizes.SIZE_16,className:x.default.headerBlurb},void 0,H.default.Messages.PREMIUM_GUILD_PERKS_MODAL_BLURB.format({helpdeskArticle:L.default.getArticleURL(j.HelpdeskArticles.GUILD_SUBSCRIPTIONS),openPremiumGuildSettings:function(){e.handleClose(),f.default.open(j.UserSettingsSections.PREMIUM_GUILD_SUBSCRIPTION)}})),z(G.default,{closeLayer:this.handleClose,guild:this.props.guild,onSubscribeModalClose:this.handleSubscribeModalClose}),z(M.default,{className:x.default.subscriberPerksHeader,size:M.default.Sizes.SIZE_24},void 0,H.default.Messages.PREMIUM_GUILD_PERKS_MODAL_SUBSCRIBER_PERKS_HEADER),Q,this.renderProgressBar()),this.renderCarousel(),z("div",{className:x.default.content},void 0,z("div",{className:x.default.divider}),X,z(h.default,{onOpenPremiumClick:this.handleClose})))),z(s.default,{},void 0,null!=t?z(A.default,{className:x.default.slideIn},void 0,z(S.default,{onDismiss:this.handleDismissError,className:x.default.error},void 0,t.message)):null))},t}(a.PureComponent);Z.displayName="PremiumGuildPerksModal";var ee=u.default.connectStores([_.default,y.default,v.default],function(e){var t=e.guildId;return{currentUser:_.default.getCurrentUser(),theme:y.default.theme,guild:v.default.getGuild(t)}})(Z),te=(0,p.default)(ee);t.default=te},6628:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(6)),a=n(184),o=n(330),i=l(n(225));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var a;if(n){if(r>=t.length)break;a=t[r++]}else{if((r=t.next()).done)break;a=r.value}var o=a,l=i.default.getEligibleExperiment(o);if(null!=l)return[o,l]}return null}var s={getFirstEligibleUserExperiment:u,isInExperimentBucket:function(e,t){return i.default.getExperimentBucket(e)===t},experimentDescriptorEquals:function(e,t){if(null==e&&null==t)return!0;if(e===t)return!0;if(null==e&&null!=t)return!1;if(null!=e&&null==t)return!1;if(null!=e&&null!=t){if(e.type!==t.type)return!1;if(e.bucket!==t.bucket)return!1;if(e.revision!==t.revision)return!1;if(e.type===a.ExperimentTypes.USER&&t.type===a.ExperimentTypes.USER)return r.default.isEqual(e.context,t.context)}return!0},triggerFirstEligibleUserExperiment:function(e){var t=u(e);if(null!=t){var n=t[0],r=t[1];return(0,o.triggerExperiment)(n,r),r}},getExperimentBucketName:function(e){return e===a.ExperimentBuckets.CONTROL?"Control":e===a.ExperimentBuckets.NOT_ELIGIBLE?"Not Eligible":"Treatment "+e}};t.default=s},6629:function(e,t,n){"use strict";t.__esModule=!0,t.getDefaultLayoutContent=function(){return[{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_NAVIGATE_SERVERS,binds:w(D.KeybindActions.SERVER_PREV,D.KeybindActions.SERVER_NEXT)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_NAVIGATE_CHANNELS,binds:w(D.KeybindActions.CHANNEL_PREV,D.KeybindActions.CHANNEL_NEXT)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_UNREAD_CHANNELS,binds:w(D.KeybindActions.UNREAD_PREV,D.KeybindActions.UNREAD_NEXT)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_UNREAD_MENTION_CHANNELS,binds:w(D.KeybindActions.MENTION_CHANNEL_PREV,D.KeybindActions.MENTION_CHANNEL_NEXT),groupEnd:!0},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_TOGGLE_PREVIOUS_GUILD,binds:w(D.KeybindActions.TOGGLE_PREVIOUS_GUILD)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_MARK_SERVER_READ,binds:w(D.KeybindActions.MARK_SERVER_READ)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_MARK_CHANNEL_READ,binds:w(D.KeybindActions.MARK_CHANNEL_READ)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_CREATE_GUILD,binds:w(D.KeybindActions.CREATE_GUILD)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_QUICKSWITCHER,binds:w(D.KeybindActions.QUICKSWITCHER_SHOW)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_CREATE_DM_GROUP,binds:w(D.KeybindActions.CREATE_DM_GROUP),groupEnd:!0},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_TOGGLE_PINS,binds:w(D.KeybindActions.TOGGLE_CHANNEL_PINS)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_TOGGLE_MENTIONS,binds:w(D.KeybindActions.TOGGLE_MENTIONS)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_TOGGLE_USERS,binds:w(D.KeybindActions.TOGGLE_USERS)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_SEARCH_EMOJIS,binds:w(D.KeybindActions.SEARCH_EMOJIS)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_SEARCH_GIFS,binds:w(D.KeybindActions.SEARCH_GIFS),groupEnd:!0},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_TOGGLE_MUTE,binds:w(D.KeybindActions.TOGGLE_MUTE)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_TOGGLE_DEAFEN,binds:w(D.KeybindActions.TOGGLE_DEAFEN)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_CALL_ACCEPT,binds:w(D.KeybindActions.CALL_ACCEPT)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_CALL_DECLINE,binds:w(D.KeybindActions.MARK_CHANNEL_READ)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_CALL_START,binds:w(D.KeybindActions.CALL_START),groupEnd:!0},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_SCROLL_CHAT,binds:w(D.KeybindActions.SCROLL_UP,D.KeybindActions.SCROLL_DOWN)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_JUMP_TO_FIRST_UNREAD,binds:w(D.KeybindActions.JUMP_TO_FIRST_UNREAD)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_FOCUS_TEXT_AREA,binds:w(D.KeybindActions.TEXTAREA_FOCUS)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_UPLOAD_FILE,binds:w(D.KeybindActions.UPLOAD_FILE)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_TOGGLE_HELP,binds:w(D.KeybindActions.TOGGLE_HELP)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_SEARCH,binds:w(D.KeybindActions.FOCUS_SEARCH)},{description:L.default.Messages.KEYBIND_DESCRIPTION_MODAL_EASTER_EGG,binds:["h+h+right+n+k"]}]},t.default=t.DEFAULT_LAYOUT=void 0;var r,a,o=n(7022),i=n(7023),l=n(8254),u=n(8255),s=n(8256),d=n(6849),c=n(7024),f=n(7025),p=n(7026),h=n(7499),m=n(7027),v=n(7028),y=n(7029),_=n(8259),g=n(7030),E=n(7031),S=n(7032),I=n(7034),T=n(7035),O=n(8261),A=n(8262),N=n(7036),C=n(8263),M=n(8264),b=n(7038),R=n(8266),P=n(7503),D=n(1),L=(r=n(4))&&r.__esModule?r:{default:r};function w(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(function(e){var t=U[e];if(null==t)throw new Error("getBindsFor(...): No bind for "+t);return t.binds[0]})}var U=((a={})[D.KeybindActions.SERVER_NEXT]=g.SERVER_NEXT,a[D.KeybindActions.SERVER_PREV]=g.SERVER_PREV,a[D.KeybindActions.CHANNEL_NEXT]=i.CHANNEL_NEXT,a[D.KeybindActions.CHANNEL_PREV]=i.CHANNEL_PREV,a[D.KeybindActions.UNREAD_NEXT]=b.UNREAD_NEXT,a[D.KeybindActions.UNREAD_PREV]=b.UNREAD_PREV,a[D.KeybindActions.MENTION_CHANNEL_NEXT]=b.MENTION_NEXT,a[D.KeybindActions.MENTION_CHANNEL_PREV]=b.MENTION_PREV,a[D.KeybindActions.TOGGLE_PREVIOUS_GUILD]=i.TOGGLE_PREVIOUS_GUILD,a[D.KeybindActions.JUMP_TO_GUILD]=d.JUMP_TO_GUILD,a[D.KeybindActions.SUBMIT]=E.SUBMIT,a[D.KeybindActions.TEXTAREA_FOCUS]=S.TEXTAREA_FOCUS,a[D.KeybindActions.MARK_CHANNEL_READ]=c.MARK_CHANNEL_READ,a[D.KeybindActions.MARK_SERVER_READ]=f.MARK_SERVER_READ,a[D.KeybindActions.TOGGLE_CHANNEL_PINS]=O.TOGGLE_CHANNEL_PINS,a[D.KeybindActions.TOGGLE_MENTIONS]=C.TOGGLE_MENTIONS,a[D.KeybindActions.TOGGLE_USERS]=M.TOGGLE_USERS,a[D.KeybindActions.TOGGLE_HELP]=A.TOGGLE_HELP,a[D.KeybindActions.TOGGLE_MUTE]=I.TOGGLE_MUTE,a[D.KeybindActions.TOGGLE_DEAFEN]=I.TOGGLE_DEAFEN,a[D.KeybindActions.TOGGLE_CATEGORY_COLLAPSED]=T.TOGGLE_CATEGORY_COLLAPSED,a[D.KeybindActions.SCROLL_UP]=v.SCROLL_UP,a[D.KeybindActions.SCROLL_DOWN]=v.SCROLL_DOWN,a[D.KeybindActions.QUICKSWITCHER_SHOW]=h.QUICKSWITCHER_SHOW,a[D.KeybindActions.CREATE_DM_GROUP]=l.CREATE_DM_GROUP,a[D.KeybindActions.SEARCH_EMOJIS]=y.SEARCH_EMOJIS,a[D.KeybindActions.SEARCH_GIFS]=_.SEARCH_GIFS,a[D.KeybindActions.TOGGLE_HOTKEYS]=N.TOGGLE_HOTKEYS,a[D.KeybindActions.JUMP_TO_FIRST_UNREAD]=p.JUMP_TO_FIRST_UNREAD,a[D.KeybindActions.CREATE_GUILD]=u.CREATE_GUILD,a[D.KeybindActions.UPLOAD_FILE]=R.UPLOAD_FILE,a[D.KeybindActions.RETURN_TO_AUDIO_CHANNEL]=m.RETURN_TO_AUDIO_CHANNEL,a[D.KeybindActions.CALL_ACCEPT]=o.CALL_ACCEPT,a[D.KeybindActions.CALL_START]=o.CALL_START,a[D.KeybindActions.FOCUS_SEARCH]=s.FOCUS_SEARCH,a[D.KeybindActions.ZOOM_IN]=P.ZOOM_IN,a[D.KeybindActions.ZOOM_OUT]=P.ZOOM_OUT,a[D.KeybindActions.ZOOM_RESET]=P.ZOOM_RESET,a);t.DEFAULT_LAYOUT=U;var k=U;t.default=k},6630:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(2))&&r.__esModule?r:{default:r},o=n(1);var i={show:function(){this.deactivateRagingDemon(),a.default.dispatch({type:o.ActionTypes.SHOW_KEYBOARD_SHORTCUTS})},hide:function(){a.default.dispatch({type:o.ActionTypes.HIDE_KEYBOARD_SHORTCUTS})},activateRagingDemon:function(){a.default.dispatch({type:o.ActionTypes.ACTIVATE_RAGING_DEMON})},deactivateRagingDemon:function(){a.default.dispatch({type:o.ActionTypes.DEACTIVATE_RAGING_DEMON})}};t.default=i},6631:function(e,t,n){"use strict";(function(e){t.__esModule=!0,t.default=void 0;var r=L(n(6854)),a=L(n(7507)),o=L(n(6)),i=L(n(3)),l=n(45),u=L(n(2)),s=L(n(189)),d=L(n(338)),c=n(195),f=L(n(6855)),p=L(n(6542)),h=n(108),m=n(889),v=L(n(6632)),y=L(n(6578)),_=L(n(15)),g=L(n(20)),E=L(n(13)),S=n(282),I=L(n(98)),T=L(n(14)),O=L(n(40)),A=L(n(484)),N=L(n(224)),C=L(n(54)),M=L(n(39)),b=L(n(97)),R=L(n(11)),P=L(n(469)),D=n(1);function L(e){return e&&e.__esModule?e:{default:e}}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var U={},k={},G=0,F=!0,j={};j[D.KeybindCustomActions.UNASSIGNED]={onTrigger:function(){},keyEvents:{}},j[D.KeybindCustomActions.PUSH_TO_TALK]={onTrigger:function(e,t){O.default.getMode(t)===D.InputModes.PUSH_TO_TALK&&(j[D.KeybindCustomActions.PUSH_TO_TALK].isPressed=e,O.default.getMediaEngine().eachConnection(function(t){return t.setForceAudioInput(e,!1)},t))},keyEvents:{keyup:!0,keydown:!0},isPressed:!1},j[D.KeybindCustomActions.PUSH_TO_TALK_PRIORITY]={onTrigger:function(e){O.default.getMode()===D.InputModes.PUSH_TO_TALK&&(j[D.KeybindCustomActions.PUSH_TO_TALK_PRIORITY].isPressed=e,O.default.getMediaEngine().eachConnection(function(t){return t.setForceAudioInput(e,!0)},l.MediaEngineContextTypes.DEFAULT))},keyEvents:{keyup:!0,keydown:!0},isPressed:!1},j[D.KeybindCustomActions.PUSH_TO_MUTE]={onTrigger:function(e){O.default.getMode()===D.InputModes.VOICE_ACTIVITY&&(O.default.isSelfDeaf()||(j[D.KeybindCustomActions.PUSH_TO_MUTE].isPressed=e,s.default.setTemporarySelfMute(e)))},keyEvents:{keyup:!0,keydown:!0},isPressed:!1},j[D.KeybindCustomActions.TOGGLE_MUTE]={onTrigger:function(){s.default.toggleSelfMute()},keyEvents:{keyup:!0,keydown:!1}},j[D.KeybindCustomActions.TOGGLE_DEAFEN]={onTrigger:function(){s.default.toggleSelfDeaf()},keyEvents:{keyup:!0,keydown:!1}},j[D.KeybindCustomActions.TOGGLE_VOICE_MODE]={onTrigger:function(){var e=O.default.getMode()===D.InputModes.PUSH_TO_TALK?D.InputModes.VOICE_ACTIVITY:D.InputModes.PUSH_TO_TALK;s.default.setMode(e)},keyEvents:{keyup:!0,keydown:!1}},j[D.KeybindCustomActions.TOGGLE_OVERLAY]={onTrigger:function(){var e=A.default.enabled;d.default.setEnabled(!e)},keyEvents:{keyup:!0,keydown:!1}},j[D.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK]={onTrigger:function(e){var t=A.default.getFocusedPID();null!=t&&(A.default.isReady(t)||A.default.isCrashed(t))&&(e?d.default.setUILocked(!N.default.isUILocked(t),t):d.default.setInputLocked(!A.default.isInputLocked(t),t))},keyEvents:{keyup:!0,keydown:!0}},j[D.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET]={onTrigger:function(){var e=A.default.getFocusedPID();null!=e&&(null!=e||!1)&&N.default.isPinned(D.OverlayWidgets.TEXT)&&A.default.isReady(e)&&A.default.isInputLocked(e)&&d.default.activateRegion(D.OverlayActiveRegions.TEXT_WIDGET)},keyEvents:{keyup:!0,keydown:!1}},j[D.KeybindCustomActions.TOGGLE_GO_LIVE_STREAMING]={onTrigger:function(){var e=R.default.getCurrentUser(),t=I.default.getActiveStream();if(null!=t&&e.id===t.ownerId)return(0,c.stopStream)((0,h.encodeStreamKey)(t));if((0,v.default)(O.default,R.default)){var n=(0,y.default)(C.default,P.default);if(null!=n){if(n.isLauncher){var r=C.default.getAssociatedApplicationForLauncherId(n.id);null!=r&&(n=r)}var a=M.default.getVoiceChannelId(),o=T.default.getChannel(a);if(null!=o){var i=o.getGuildId();null!=i&&(0,m.canStreamInChannel)(e,o)&&(0,c.startGuildStream)(i,o.id,n.pid,null,null)}}}},keyEvents:{keyup:!0,keydown:!1}},j[D.KeybindCustomActions.TOGGLE_STREAMER_MODE]={onTrigger:function(){f.default.setEnabled(!b.default.enabled)},keyEvents:{keyup:!0,keydown:!1}};var H=[D.KeybindCustomActions.PUSH_TO_TALK,D.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK,D.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET];function x(t){if(E.default.embedded)g.default.inputEventUnregister(parseInt(t,10));else if(U[t]){var n=k[t],r=j[n.action];r&&!0===r.isPressed&&e.nextTick(function(){return r.onTrigger(!1)}),U[t].reset(),U[t]=null}}function B(e){if(F&&!__OVERLAY__){var t=e.shortcut,n=e.action,o=e.context;if(""!==t&&null!=t&&n!==D.KeybindCustomActions.UNASSIGNED)if(null!=j[n]){var i=e.id,l=j[n].keyEvents;!function(e,t,n,o){if(E.default.embedded)g.default.inputEventRegister(parseInt(e),t,n,o);else{x(e);var i=(0,a.default)(new r.default(document));o.keyup&&i.bindGlobal((0,S.toString)(t),function(){return n(!1)},"keyup"),o.keydown&&i.bindGlobal((0,S.toString)(t),function(){return n(!0)},"keydown"),U[e]=i}}(i,t,function(e){return function(e,t,n){var r=k[e];null!=r&&j[r.action].onTrigger(t,n)}(i,e,o)},w({focused:!0,blurred:!0,keydown:!1,keyup:!1},l)),p.default.validateKeybind((0,S.toString)(e.shortcut))}else console.error("KeybindStore: Looking for callback action "+n+" but it doesn't exist in this version. Skipping")}}function V(e){var t,n=w({id:G.toString(),action:D.KeybindCustomActions.UNASSIGNED,shortcut:[],managed:!1},e);return k=w({},k,((t={})[n.id]=n,t)),G+=1,n}function K(e){x(e.id),delete(k=w({},k))[e.id]}function W(e){var t,n=e.keybind;k=w({},k,((t={})[n.id]=n,t)),__OVERLAY__||(_.default.track(D.AnalyticEvents.USER_SETTINGS_KEYBIND_UPDATED,{keybind_action:n.action,keybind_is_bound:!0,keybind_has_shortcut:!!n.shortcut.length}),n.action===D.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK?_.default.track(D.AnalyticEvents.OVERLAY_SETTINGS_UPDATED,{hotkey:n.action===D.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK?(0,S.toString)(n.shortcut):null}):n.action===D.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET&&_.default.track(D.AnalyticEvents.OVERLAY_SETTINGS_UPDATED,{text_activation_hotkey:n.action===D.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET?(0,S.toString)(n.shortcut):null})),B(n)}function z(){return!1!==(e=O.default.getShortcuts(),o.default.each(k,function(t){t.action!==D.KeybindCustomActions.PUSH_TO_TALK||!0!==t.managed||null!=t.context&&null!=e[t.context]||K(t)}),o.default.reduce(O.default.getShortcuts(),function(e,t,n){var r=o.default.find(k,function(e){return e.action===D.KeybindCustomActions.PUSH_TO_TALK&&!0===e.managed&&e.context===n});if(null==r)B(V({action:D.KeybindCustomActions.PUSH_TO_TALK,shortcut:t,managed:!0,context:n}));else{if(null==t)return e||!1;W({keybind:w({},r,{shortcut:"string"==typeof t?(0,S.toCombo)(t):t,context:n})})}return!0},!1)||function(){if(A.default.enabled){if(null!=o.default.find(k,function(e){return e.action===D.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK&&!0===e.managed}))return!1;var e=(0,S.toCombo)("shift+`");B(V({action:D.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK,shortcut:e,managed:!0}))}}()||function(){if(!A.default.enabled)return!1;if(null!=o.default.find(k,function(e){return e.action===D.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET&&!0===e.managed}))return!1;var e=(0,S.toCombo)("]");B(V({action:D.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET,shortcut:e,managed:!0}))}());var e}var Y=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(e){__OVERLAY__||this.waitFor(O.default,A.default),U={},G=0,F=!0,k=e||{},Object.keys(k).filter(function(e){var t=k[e];return H.includes(t.action)&&!0===t.managed}).length!==H.length&&z(),o.default.forEach(k,function(e){G=Math.max(parseInt(e.id,10),G)+1;try{B(e)}catch(t){console.error("Failed to register keybind",e,t)}})},a.getState=function(){return k},a.getKeybindList=function(){var e=[];for(var t in k)k.hasOwnProperty(t)&&e.push((0,S.toString)(k[t].shortcut));return e},a.getOverlayKeybind=function(){return o.default.find(k,function(e){return e.action===D.KeybindCustomActions.TOGGLE_OVERLAY_INPUT_LOCK&&!0===e.managed})},a.getOverlayChatKeybind=function(){return o.default.find(k,function(e){return e.action===D.KeybindCustomActions.OVERLAY_ACTIVATE_REGION_TEXT_WIDGET&&!0===e.managed})},r}(i.default.PersistedStore);Y.persistKey="keybinds",Y.migrations=[function(e){void 0===e&&(e={});var t=e,n=t.v,r=t.keybinds,a=void 0===r?e:r;return o.default.reduce(a,function(e,t,r){var a=parseInt(t.id,10);return isNaN(a)||t.id!==r?e:((null==n||n<2)&&("string"==typeof t.shortcut?(t.shortcut=t.shortcut.replace("escape","esc").replace("capslock","caps lock").replace("numlock","num lock").replace("pageup","page up").replace("pagedown","page down"),t.shortcut=(0,S.toCombo)(t.shortcut)):t.shortcut=t.shortcut.map(function(e){return e.length<3?[].concat(e,[(0,S.getEnv)()]):e})),e[r]=t,e)},{})},function(e){return e}];var q=new Y(u.default,{CONNECTION_OPEN:function(e){return z()},AUDIO_SET_MODE:function(e){return z()},OVERLAY_SET_ENABLED:function(e){return z()},RPC_APP_CONNECTED:function(e){return z()},RPC_APP_DISCONNECTED:function(e){return z()},KEYBINDS_ADD_KEYBIND:function(e){V()},KEYBINDS_DELETE_KEYBIND:function(e){var t=e.id,n=k[t];__OVERLAY__||_.default.track(D.AnalyticEvents.USER_SETTINGS_KEYBIND_UPDATED,{keybind_action:n.action,keybind_is_bound:!1,keybind_has_shortcut:!1}),null!=n&&K(n)},KEYBINDS_SET_KEYBIND:W,KEYBINDS_ENABLE_ALL_KEYBINDS:function(e){var t=e.enable;F=t,t?(p.default.enable(),o.default.forEach(k,B)):(p.default.disable(),o.default.forEach(k,function(e){return x(e.id)}))}});t.default=q}).call(this,n(123))},6632:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!e.supportsInApp(a.Features.VIDEO))return!1;var n=t.getNullableCurrentUser();return o.default.isWindows()||o.default.embedded&&null!=n&&n.isStaff()};var r,a=n(45),o=(r=n(13))&&r.__esModule?r:{default:r}},6636:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=m(n(6)),a=m(n(3)),o=m(n(27)),i=m(n(2)),l=m(n(8381)),u=n(8382),s=m(n(8384)),d=n(6745),c=m(n(14)),f=m(n(19)),p=m(n(51)),h=n(1);function m(e){return e&&e.__esModule?e:{default:e}}var v=.05,y={},_=!1;function g(e){return null==y[e]&&(y[e]={searchId:e,searchType:E(e),isIndexing:!1,isHistoricalIndexing:!1,isSearching:!1,analyticsId:null,editorState:null,offset:0,query:null,hasError:!1,searchFetcher:null,searchResults:null,results:null,totalResults:0,documentsIndexed:0,resultsBlocked:0,showBlockedResults:!1,showNoResultsAlt:!1}),y[e]}function E(e){return f.default.getGuild(e)?h.SearchTypes.GUILD:c.default.getChannel(e)?h.SearchTypes.CHANNEL:null}function S(e,t,n){if(void 0===n&&(n=null),null==e)return n;var r=y[e];return null==r?n:t(r)}var I="SearchStore",T=!1,O={},A=null;function N(e){var t=e.searchId,n=y[t];if(null==n)return!1;null!=n.searchFetcher&&n.searchFetcher.cancel(),delete y[t]}function C(){(0,d.refreshSearchTokens)()}var M=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(f.default,c.default);var e,t=o.default.get(I);t&&t.history&&(e=t.history,Object.keys(e).forEach(function(t){Array.isArray(e[t])&&(e[t]=e[t].filter(function(e){return"string"==typeof e&&e.trim()})),Array.isArray(e[t])&&e[t].length||delete e[t]}),O=e),T=!!o.default.get("tokenized")||!1},a.isOpen=function(){return _},a.getCurrentSearchId=function(){return A},a.isActive=function(e){return void 0===e&&(e=A),null!=e&&(this.isIndexing(e)||this.isSearching(e)||this.hasResults(e))},a.isTokenized=function(){return T},a.getSearchType=function(e){return S(e||A,function(e){return e.searchType})},a.getResults=function(e){return S(e,function(e){return e.searchResults})},a.hasResults=function(e){return null!=S(e,function(e){return e.searchResults})},a.isIndexing=function(e){return S(e,function(e){return e.isIndexing})||!1},a.isHistoricalIndexing=function(e){return S(e,function(e){return e.isHistoricalIndexing})||!1},a.isSearching=function(e){return S(e,function(e){return e.isSearching})||!1},a.getAnalyticsId=function(e){return S(e,function(e){return e.analyticsId})},a.getResultsBlocked=function(e){return S(e,function(e){return e.resultsBlocked})},a.getDocumentsIndexedCount=function(e){return S(e,function(e){return e.documentsIndexed})},a.getSearchFetcher=function(e){return S(e,function(e){return e.searchFetcher})},a.getTotalResults=function(e){return S(e,function(e){return e.totalResults})||0},a.getEditorState=function(e){return S(e,function(e){return e.editorState})},a.getHistory=function(e){return O[e]},a.getOffset=function(e){return S(e,function(e){return e.offset})||0},a.getQuery=function(e){return S(e,function(e){return e.query})},a.hasError=function(e){return S(e,function(e){return e.hasError})||!1},a.shouldShowBlockedResults=function(e){return S(e,function(e){return e.showBlockedResults},!1)||!1},a.shouldShowNoResultsAlt=function(e){return S(e,function(e){return e.showNoResultsAlt},!1)||!1},a.getResultsState=function(e){return{isSearching:this.isSearching(e),isIndexing:this.isIndexing(e),isHistoricalIndexing:this.isHistoricalIndexing(e),documentsIndexed:this.getDocumentsIndexedCount(e),offset:this.getOffset(e),results:this.getResults(e),totalResults:this.getTotalResults(e),hasError:this.hasError(e),resultsBlocked:this.getResultsBlocked(e),showBlockedResults:this.shouldShowBlockedResults(e),showNoResultsAlt:this.shouldShowNoResultsAlt(e)}},r}(a.default.Store))(i.default,{SEARCH_START:function(e){var t=e.queryString,n=e.searchId,a=e.query,u=g(n);u.searchFetcher&&(u.searchFetcher.cancel(),u.searchFetcher=null);var s=new l.default(n,u.searchType,a);u.searchFetcher=s,u.isSearching=!0,u.searchResults=null,u.analyticsId=null,u.query=r.default.omit(a,"type"),u.offset=a.offset?a.offset:0,u.showBlockedResults=!1,function(e,t){if("string"!=typeof t)return;var n=O[e]=O[e]||[];t=t.trim();var r=n.indexOf(t);-1!==r?(n.splice(r,1),n.unshift(t)):n[0]&&t.startsWith(n[0])?n[0]=t:r<0&&n.unshift(t);n.length>5&&n.splice(5,n.length);o.default.set(I,{history:O})}(n,t),s.fetch(function(e){i.default.dispatch({type:h.ActionTypes.SEARCH_FINISH,searchId:n,analyticsId:e.body.analytics_id,totalResults:e.body.total_results,messages:e.body.messages,hasError:!1,doingHistoricalIndex:e.body.doing_deep_historical_index,documentsIndexed:e.body.documents_indexed})},function(){i.default.dispatch({type:h.ActionTypes.SEARCH_INDEXING,searchId:n})},function(){i.default.dispatch({type:h.ActionTypes.SEARCH_FINISH,searchId:n,messages:[],totalResults:0,analyticsId:null,hasError:!0,doingHistoricalIndex:!1,documentsIndexed:0})})},SEARCH_INDEXING:function(e){var t=g(e.searchId);t.isIndexing=!0,t.isHistoricalIndexing=!0,t.isSearching=!1},SEARCH_FINISH:function(e){var t=g(e.searchId);t.isSearching=!1,t.isIndexing=!1,t.isHistoricalIndexing=e.doingHistoricalIndex,t.searchFetcher=null,t.totalResults=e.totalResults,t.hasError=e.hasError,t.analyticsId=e.analyticsId,t.documentsIndexed=null!=e.documentsIndexed?e.documentsIndexed:0,t.showNoResultsAlt=Math.random()<v;var n=t.query;if(n){var a=(0,u.createASTHighlighter)(n.content||""),o=0;t.searchResults=(0,r.default)(e.messages).map(function(e){return e.map(function(e){return s.default.create(e,a)})}).map(function(e){return e.filter(function(e){var t=p.default.isBlocked(e.message.author.id);return t&&e.hit&&o++,!t||e.hit})}).value(),t.resultsBlocked=o}else t.hasError=!0},SEARCH_EDITOR_STATE_CLEAR:N,SEARCH_ENSURE_SEARCH_STATE:function(e){var t=e.searchId;t&&g(t)},SEARCH_EDITOR_STATE_CHANGE:function(e){var t=e.searchId,n=e.editorState;g(t).editorState=n},SEARCH_SET_SHOW_BLOCKED_RESULTS:function(e){var t=e.searchId,n=e.showBlocked;g(t).showBlockedResults=n},CHANNEL_SELECT:function(e){var t=e.guildId,n=e.channelId,r=t||n;if(r===A)return!1;r&&!y[r]&&g(r),A=r},CHANNEL_TOGGLE_SECTION:function(e){return null!=A&&N({searchId:A})},SEARCH_CLEAR_HISTORY:function(e){var t=e.searchId;null==t?(o.default.remove(I),O={}):(delete O[t],o.default.set(I,{history:O}))},LOGOUT:function(e){return o.default.remove(I),void(O={})},CONNECTION_OPEN:function(e){Object.keys(y).forEach(function(e){null!=y[e]&&(y[e].searchType=E(e))})},SEARCH_MODAL_OPEN:function(e){_=!0},SEARCH_MODAL_CLOSE:function(e){_=!1},USER_SETTINGS_UPDATE:function(e){return C()},I18N_LOAD_SUCCESS:function(e){return C()}});t.default=M},6637:function(e,t,n){"use strict";t.__esModule=!0,t.EmbedVideo=N,t.EmbedGIFV=C,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=I(n(8)),i=I(n(124)),l=n(462),u=n(6612),s=I(n(58)),d=I(n(42)),c=I(n(8447)),f=I(n(6692)),p=I(n(914)),h=I(n(8452)),m=I(n(935)),v=n(6869),y=n(496),_=n(1),g=I(n(4)),E=I(n(6242)),S=I(n(940));function I(e){return e&&e.__esModule?e:{default:e}}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var A=12;function N(e){var t=e.className,n=e.maxWidth,r=e.maxHeight,l=e.thumbnail,s=e.video,d=e.allowFullScreen,c=void 0===d||d,f=e.renderImageComponent,p=e.renderVideoComponent,h=e.renderLinkComponent,v=e.playable,y=void 0===v||v,_=e.autoPlay,g=void 0!==_&&_,S=e.autoMute,I=e.volume,A=e.onPlay,N=e.onEnded,C=e.onVolumeChange,M=e.onMute,b=e.href,R=a.useState(g),P=R[0],D=R[1],L=function(e){e.preventDefault(),e.stopPropagation(),A&&A(!1),D(!0)},w=l.width,U=l.height;P&&null!=s&&(w=s.width,U=s.height);var k=(0,u.fit)(w,U,n,r);w=k.width,U=k.height;var G=l.proxyURL||l.url;if(null!=s&&null!=s.proxyURL)return O("div",{className:(0,o.default)(E.default.embedVideo,t),style:{width:w,height:U}},void 0,p({poster:G,src:s.proxyURL,width:w,height:U,autoPlay:g,onEnded:N,naturalWidth:s.width,naturalHeight:s.height,onVolumeChange:C,playable:y,autoMute:S,volume:I,onPlay:A,onMute:M}));if(P&&null!=s){var F=i.default.parse(s.url,!0);F.query=T({},F.query,{autoplay:"1",auto_play:"1"}),delete F.search;var j=i.default.format(F);return O("div",{className:(0,o.default)(E.default.embedVideo,t),style:{width:w,height:U}},void 0,O("iframe",{className:E.default.embedIframe,src:j,width:w,height:U,frameBorder:0,allowFullScreen:c}))}return O("div",{className:(0,o.default)(E.default.embedVideo,t),style:{width:w,height:U}},void 0,f({src:G,width:w,height:U,className:E.default.embedVideoImageComponent,imageClassName:E.default.embedVideoImageComponentInner,onClick:y&&null!=s?L:null}),O("div",{className:E.default.embedVideoActions},void 0,O("div",{className:E.default.centerContent},void 0,y?O(m.default,{onPlay:null!=s?L:null,externalURL:b,renderLinkComponent:h}):null)))}function C(e){var t=e.className,n=e.href,r=e.autoPlay,a=e.maxWidth,i=e.maxHeight,l=e.thumbnail,u=e.video,s=e.renderImageComponent,d=e.playable,f=void 0===d||d;return O(c.default,{className:(0,o.default)(E.default.embedVideo,t),original:n,poster:l.proxyURL||l.url,src:u.proxyURL||u.url,width:l.width,height:l.height,naturalHeight:u.height,naturalWidth:u.width,maxWidth:a,maxHeight:i,autoPlay:r,playable:f,renderImageComponent:s})}function M(e){var t=e.className,n=e.embed.url,r=e.backgroundOpacity;if(null==n)return null;var a=null,l=null;try{var u=i.default.parse(n,!0);a=u.host,l=u.pathname}catch(e){return null}if("open.spotify.com"!==a||null==l)return null;var s=l.split("/"),d=null!=s[1]?s[1].toLowerCase():null,c=null!=s[3]?s[3].toLowerCase():null;return!["track","playlist","album","artist","user"].includes(d||"")||"user"===d&&"playlist"!==c?null:O(h.default,{className:(0,o.default)(E.default.embedSpotify,t,E.default[r+"BackgroundOpacity"]),src:_.SpotifyEndpoints.EMBED(l),style:{width:400,height:"track"===d?80:300}})}N.displayName="EmbedVideo",C.displayName="EmbedGIFV",M.displayName="SpotifyEmbed";var b=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:!t.props.spoiler},t.renderGalleryImageChildren=function(e){var t=e.src,n=e.alt;return O("img",{className:E.default.embedGalleryImageElement,alt:n,src:t})},t.renderImageChildren=function(e){var t=e.src,n=e.size,r=e.alt;return O("img",{className:e.className||void 0,alt:r,src:t,style:n})},t.onReveal=function(){t.setState({isVisible:!0})},t.handleSuppressEmbedClicked=function(){var e=t.props,n=e.embed,r=e.suppressEmbed;r&&r(n)},t.renderMediaEmbed=function(e){var n;void 0===e&&(e=!1);var r=t.props,a=r.spoiler,i=r.className;return O("div",{"aria-hidden":e,className:(0,o.default)(E.default.embed,i,(n={},n[E.default.spoilerAttachment]=a,n[E.default.hiddenSpoiler]=e,n))},void 0,t.renderMedia(e))},t.renderEmbedContent=function(e){var n,r;void 0===e&&(e=!1);var a=t.props,i=a.className,l=a.backgroundOpacity,u=a.suppressEmbed,s=a.spoiler,d=t.renderAll(),c=d.provider,f=d.author,p=d.title,h=d.description,m=d.fields,v=d.thumbnail,y=d.media,_=d.footer;return O("div",{className:(0,o.default)(i,E.default.embedFull,S.default.markup,l&&E.default[l+"BackgroundOpacity"],(n={},n[E.default.hiddenSpoiler]=e,n[E.default.spoilerEmbed]=s,n)),"aria-hidden":e,style:{borderColor:t.getEmbedColor(e),maxWidth:t.getMaxWidth()}},void 0,O("div",{className:(0,o.default)((r={},r[E.default.grid]=!0,r[E.default.hasThumbnail]=null!=v,r))},void 0,u?t.renderSuppressButton():null,c,f,p,h,m,y,v,_))},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.renderProvider=function(e){void 0===e&&(e=!0);var t=this.props,n=t.embed.provider,r=t.renderLinkComponent;return null==n?null:O("div",{className:(0,o.default)(E.default.embedProvider,E.default.embedMargin)},void 0,null!=n.url?r({className:E.default.embedLink,href:n.url,tabIndex:e?0:-1,children:n.name,target:"_blank",rel:"noreferrer noopener"}):O("span",{},void 0,n.name))},a.renderAuthor=function(e){void 0===e&&(e=!0);var t=this.props,n=t.embed.author,r=t.renderLinkComponent;return null==n?null:O("div",{className:(0,o.default)(E.default.embedAuthor,E.default.embedMargin)},void 0,null!=n.iconProxyURL?O("img",{alt:"",className:E.default.embedAuthorIcon,src:n.iconProxyURL}):null,null!=n.url?r({className:E.default.embedAuthorNameLink,href:n.url,tabIndex:e?0:-1,children:n.name,target:"_blank",rel:"noreferrer noopener"}):O("span",{className:E.default.embedAuthorName},void 0,n.name))},a.renderTitle=function(e){void 0===e&&(e=!0);var t=this.props,n=t.embed,r=t.renderLinkComponent,a=t.renderTitle,i=n.rawTitle,l=n.url;return null==i?null:O("div",{className:(0,o.default)(E.default.embedTitle,E.default.embedMargin)},void 0,null!=l?r({className:E.default.embedTitleLink,href:l,tabIndex:e?0:-1,children:a(n,i),target:"_blank",rel:"noreferrer noopener"}):a(n,i))},a.renderDescription=function(){var e=this.props,t=e.embed,n=e.renderDescription,r=t.rawDescription;return null==r?null:O("div",{className:(0,o.default)(E.default.embedDescription,E.default.embedMargin)},void 0,n(t,r))},a.renderThumbnail=function(e){void 0===e&&(e=!0);var t=this.props,n=t.embed.thumbnail,r=t.maxThumbnailWidth,a=t.maxThumbnailHeight,o=t.renderImageComponent,i=t.autoPlayGif;return null==n?null:O(y.MessagesInteractionContext.Consumer,{},void 0,function(t){var l=t.disableAnimations;return o({className:E.default.embedThumbnail,src:n.proxyURL||n.url,original:n.url,width:n.width,height:n.height,maxWidth:r,maxHeight:a,shouldLink:e,autoPlay:i&&!l})})},a.renderFields=function(){var e=this,t=this.props.embed,n=t.fields;if(null==n)return null;var r=[],a=null;return n.forEach(function(n){var o=n.rawName,i=n.rawValue,l=n.inline;l||null==a||(r.push(a),a=null),null==a&&(a=[]),a.push([e.props.renderTitle(t,o),e.props.renderDescription(t,i)]),3!==a.length&&l||(r.push(a),a=null)}),null!=a&&r.push(a),O("div",{className:E.default.embedFields},void 0,r.map(function(e,t){var n=e.length;return e.map(function(e,r){var a,o,i,l,u=e[0],s=e[1];return O("div",{className:E.default.embedField,style:{gridColumn:(a=r,o=n,i=A/o,l=a*i,l+1+" / "+(l+i+1))}},t+"-"+r,O("div",{className:E.default.embedFieldName},void 0,u),O("div",{className:E.default.embedFieldValue},void 0,s))})}))},a.renderImages=function(e){var t=this,n=void 0===e?{}:e,r=n.hiddenSpoiler,a=void 0!==r&&r,o=n.isVisible,i=void 0===o||o,l=this.props,u=l.embed,s=l.maxMediaHeight;if(null==u.images)return null;var d=u.images.map(function(e){return t.renderImage({hiddenSpoiler:a,isVisible:i,image:e,isGalleryImage:!0})}),c=d[0],f=d[1],p=d[2],h=d[3];return null==c&&null==f&&null==p&&null==h?null:O("div",{className:E.default.embedGalleryImagesWrapper,style:{height:s}},void 0,O("div",{className:E.default.embedGallerySide},void 0,c,null!=h&&p),O("div",{className:E.default.embedGallerySide},void 0,f,null==h&&null!=p&&p,null!=h&&h))},a.renderImage=function(e){var t=this,n=void 0===e?{}:e,r=n.hiddenSpoiler,a=void 0!==r&&r,i=n.isVisible,l=void 0===i||i,u=n.image,s=n.isGalleryImage,d=void 0!==s&&s,c=this.props,p=c.maxMediaWidth,h=c.maxMediaHeight,m=c.renderImageComponent,_=c.className,g=c.autoPlayGif;if(null==u)return null;var S=f.default.isAnimated({src:u.proxyURL||u.url,original:u.url,animated:!1});return O(v.GIFAccessoryContext.Consumer,{},void 0,function(e){return O(y.MessagesInteractionContext.Consumer,{},u.url,function(n){var r,i=n.disableAnimations;return m({className:(0,o.default)(_,(r={},r[E.default.embedMedia]=!d,r[E.default.embedImage]=!d,r)),src:u.proxyURL||u.url,width:u.width,height:u.height,maxWidth:p,maxHeight:h,children:d?t.renderGalleryImageChildren:t.renderImageChildren,renderAccessory:S?e:null,original:u.url,autoPlay:g&&!i&&!a,shouldLink:l})})})},a.renderVideo=function(e){var t=void 0===e?{}:e,n=t.gifv,r=void 0!==n&&n,a=t.isVisible,o=void 0===a||a,i=t.hiddenSpoiler,l=void 0!==i&&i,u=this.props,s=u.embed,d=s.url,c=s.thumbnail,f=s.video,p=u.maxMediaWidth,h=u.maxMediaHeight,m=u.renderVideoComponent,v=u.renderImageComponent,_=u.renderLinkComponent,g=u.allowFullScreen,S=u.autoPlayGif;return null==d?null:null==c?null:r?null==f?null:O(y.MessagesInteractionContext.Consumer,{},void 0,function(e){var t=e.disableAnimations;return O(C,{className:E.default.embedMedia,href:d,thumbnail:c,video:f,maxWidth:p,maxHeight:h,autoPlay:!l&&S&&!t&&o,renderImageComponent:v,playable:o})}):O(N,{className:E.default.embedMedia,href:d,allowFullScreen:g,thumbnail:c,video:f,maxWidth:p,maxHeight:h,renderImageComponent:v,renderVideoComponent:m,renderLinkComponent:_,playable:o&&!l})},a.renderFooter=function(){var e=this.props.embed,t=e.footer,n=e.timestamp;if(null!=t){var r=t.iconProxyURL||t.iconURL;return O("div",{className:(0,o.default)(E.default.embedFooter,E.default.embedMargin)},void 0,null!=r?O("img",{alt:"",className:E.default.embedFooterIcon,src:r}):null,O("span",{className:E.default.embedFooterText},void 0,t.text,null!=t.text&&null!=n?O("span",{className:E.default.embedFooterSeparator},void 0,""):null,null!=n?(0,l.calendarFormat)(n):null))}if(null!=n)return O("div",{className:(0,o.default)(E.default.embedFooter,E.default.embedMargin)},void 0,O("span",{className:E.default.embedFooterText},void 0,(0,l.calendarFormat)(n)))},a.renderMedia=function(e){void 0===e&&(e=!1);var t=this.props.embed,n=this.state.isVisible;switch(t.type){case _.EmbedTypes.GIFV:return this.renderVideo({gifv:!0,hiddenSpoiler:e,isVisible:n});case _.EmbedTypes.VIDEO:default:return null!=t.video?this.renderVideo({gifv:!1,hiddenSpoiler:e,isVisible:n}):null!=t.images?this.renderImages({hiddenSpoiler:e,isVisible:n}):this.renderImage({hiddenSpoiler:e,isVisible:n,image:t.image})}},a.renderAll=function(){var e,t=this.props,n=t.embed,r=t.hideMedia,a=this.state.isVisible,o=this.renderProvider(a),i=this.renderAuthor(a),l=this.renderTitle(a);switch(n.type){case _.EmbedTypes.IMAGE:case _.EmbedTypes.VIDEO:case _.EmbedTypes.GIFV:break;default:e=this.renderDescription()}var u,s=this.renderFields();r||(u=this.renderMedia(!a));var d=this.renderFooter(),c=null==u;return n.type===_.EmbedTypes.RICH&&(c=null==n.video),{provider:o,author:i,title:l,description:e,thumbnail:!r&&c?this.renderThumbnail(a):null,fields:s,media:u,footer:d}},a.getMaxWidth=function(){var e=this.props,t=e.maxMediaWidth,n=e.maxMediaHeight,r=e.embed,a=r.image,o=r.video,i=a||o;if(null!=i){var l=(0,u.fit)(i.width,i.height,t,n).width;return l>=300?l+36:void 0}},a.isInline=function(){var e=this.props,t=e.hideMedia,n=e.inlineGIFV,r=e.embed,a=r.type,o=r.author,i=r.rawTitle,l=r.image,u=r.video;return!t&&((null!=l||null!=u)&&(a===_.EmbedTypes.GIFV&&n||a!==_.EmbedTypes.RICH&&null==o&&null==i))},a.renderSuppressButton=function(){return O(s.default,{className:E.default.embedSuppressButton,onClick:this.handleSuppressEmbedClicked,"aria-label":g.default.Messages.SUPPRESS_ALL_EMBEDS},void 0,O(d.default,{name:d.default.Names.CLOSE,width:16,height:16}))},a.getEmbedColor=function(e){var t=this.props.embed.color;return null!=t&&"#ffffff"===t.toLowerCase()||e?void 0:t},a.render=function(){var e=this.props,t=e.embed,n=e.spoiler,r=e.className,a=e.backgroundOpacity;return null!=t.provider&&"Spotify"===t.provider.name?O(M,{embed:t,className:r,backgroundOpacity:a}):this.isInline()?n?O(p.default,{type:p.default.Types.ATTACHMENT,onReveal:this.onReveal},void 0,this.renderMediaEmbed):this.renderMediaEmbed():n?O(p.default,{type:p.default.Types.EMBED,onReveal:this.onReveal},void 0,this.renderEmbedContent):this.renderEmbedContent()},r}(a.PureComponent);t.default=b,b.displayName="Embed",b.defaultProps={hideMedia:!1,allowFullScreen:!0,inlineGIFV:!0,maxThumbnailWidth:80,maxThumbnailHeight:80,maxMediaWidth:400,maxMediaHeight:300,backgroundOpacity:"",spoiler:!1}},6639:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=l(n(8)),o=l(n(6560)),i=l(n(6251));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}t.default=function(e){var t=e.tag,n=void 0===t?"div":t,r=e.padded,l=void 0===r||r,s=e.inset,d=void 0!==s&&s,c=e.className,f=e.children,p=e.onClick,h=e.onMouseEnter,m=e.onMouseLeave;return u(o.default.Consumer,{},void 0,function(e){var t,r=e.isDiscover;return u(n,{onClick:p,onMouseEnter:h,onMouseLeave:m,className:(0,a.default)(c,(t={},t[i.default.homepage]=r,t[i.default.outer]=!d,t[i.default.inset]=d,t[i.default.padded]=l,t[i.default.interactive]=null!=p,t))},void 0,f)})}},6641:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=v(n(8)),i=v(n(118)),l=n(29),u=v(n(263)),s=n(867),d=v(n(58)),c=v(n(42)),f=v(n(7072)),p=v(n(182)),h=v(n(869)),m=v(n(6259));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function _(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var g=400,E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._animatedValue=new i.default.Value(1),t.state={imageLoadError:!1,imageLoading:!0},t.componentWillEnter=function(e){t._animatedValue.setValue(0),i.default.timing(t._animatedValue,{toValue:1,duration:g}).start(e)},t.componentWillLeave=function(e){i.default.timing(t._animatedValue,{toValue:0,duration:g}).start(e)},t.getImageStyle=function(){return{opacity:t._animatedValue}},t.handleImageError=function(){t.setState({imageLoadError:!0,imageLoading:!1})},t.handleImageLoaded=function(){t.setState({imageLoading:!1})},t}_(t,e);var n=t.prototype;return n.renderMedia=function(){var e,t=this.props,n=t.src,r=t.className,a=t.title,l=this.state.imageLoading;return y(i.default.img,{className:(0,o.default)((e={},e[m.default.imageLoading]=l,e),r),src:n,alt:a,style:this.getImageStyle(),onError:this.handleImageError,onLoad:this.handleImageLoaded})},n.render=function(){var e=this.props,t=e.className,n=e.title,r=e.src,a=this.state,l=a.imageLoadError,u=a.imageLoading;return null==r||l?y(i.default.div,{className:(0,o.default)(m.default.titleContainer,t),style:this.getImageStyle()},void 0,n):y(i.default.div,{className:(0,o.default)(u?m.default.loadingContainer:null,t),style:this.getImageStyle()},void 0,u?y(p.default,{className:m.default.spinner,itemClassName:m.default.spinnerItem,type:p.default.Type.PULSING_ELLIPSIS,animated:!0}):null,this.renderMedia())},t}(a.Component);E.displayName="TileMediaImage";var S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={currentIndex:0,videoLoadError:!1,videoLoaded:!1},t._video=a.createRef(),t.videoTimeout=new l.Timeout,t.videoPlaying=!1,t.handleToggleMute=function(e){e.stopPropagation(),e.preventDefault();var n=t.props.onToggleMute;n&&n(e)},t.handleVideoError=function(){t.setState({videoLoadError:!0})},t.handleVideoLoaded=function(){t.setState({videoLoaded:!0})},t.renderTypeVideo=function(){var e,n=t.state.videoLoaded,r=t.props,i=r.video,l=r.image,f=r.title,p=r.playing,v=r.muted,_=r.splashClassName,g=r.splashPlaceholderClassName,S=r.renderMediaOverlay;return y(a.Fragment,{},void 0,s.isMobile?null:a.createElement(h.default,{className:(0,o.default)(m.default.splash,_),muted:v,loop:!0,preload:"none",ref:t._video,onLoadedMetadata:t.handleVideoLoaded,onError:t.handleVideoError},y("source",{src:i,type:"video/mp4"})),y(u.default,{},void 0,p&&n?null:y(E,{className:(0,o.default)(m.default.splashPlaceholder,g),src:l,title:f},0)),y(d.default,{className:(0,o.default)(m.default.muteContainer,(e={},e[m.default.muteContainerPlaying]=p&&n,e[m.default.muteContainerMediaOverlay]=null!=S,e)),onClick:t.handleToggleMute},void 0,p&&n?y(c.default,{name:v?c.default.Names.SPEAKER_OFF:c.default.Names.SPEAKER,className:m.default.mute}):null))},t.nextItem=function(){var e=t.props.slideImages;null!=e&&t.setState({currentIndex:(t.state.currentIndex+1)%e.length})},t.renderSlideItem=function(e){var n=t.props,r=n.image,a=n.title,i=n.playing,l=n.splashClassName,u=t.state.currentIndex;return i?y(E,{className:(0,o.default)(m.default.splash,l),src:e[u],title:a},u):y(E,{className:(0,o.default)(m.default.splash,l),src:r,title:a},"image")},t}_(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.videoTimeout.stop()},n.componentDidUpdate=function(e){var t=this,n=this.props.playing,r=this._video.current;if(null!=r)if(n&&!e.playing){this.videoTimeout.stop(),isFinite(r.duration)&&isFinite(r.currentTime)&&(r.currentTime=0),r.volume=.3;var a=r.play();null!=a&&a.then(function(){t.videoPlaying=!0})}else e.playing&&!n&&this.videoTimeout.start(g,function(){t.videoPlaying&&(r.pause(),t.videoPlaying=!1)})},n.renderTypeImage=function(){var e=this.props,t=e.playing,n=e.slideImages,r=e.image,a=e.title,i=e.splashClassName;return null==n?y(E,{className:(0,o.default)(m.default.splash,i),src:r,title:a},"image"):y(f.default,{onInterval:this.nextItem,interval:2e3,className:m.default.slideshowWrapper,disable:!t},void 0,y(u.default,{},void 0,this.renderSlideItem(n)))},n.render=function(){var e=this.props,t=e.video,n=e.className,r=e.placeholder,a=e.renderMediaOverlay,i=e.playing,l=this.state,u=l.videoLoadError,s=l.videoLoaded;return r?y("div",{className:n}):y("figure",{className:(0,o.default)(m.default.tileMedia,n)},void 0,null==t||u?this.renderTypeImage():this.renderTypeVideo(),null!=a&&a(i&&s))},t}(a.Component);S.displayName="TileMedia";var I=S;t.default=I},6684:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this).code=t.code||"",n.temporary=t.temporary||!1,n.revoked=t.revoked||!1,n.uses=t.uses||0,n.maxUses=t.maxUses||0,n.maxAge=t.maxAge||0,n.createdAt=t.createdAt||new Date,n.channel=t.channel,n.guild=t.guild,n.inviter=t.inviter||null,n.targetUserType=t.targetUserType||null,n.targetUser=t.targetUser||null,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.isExpired=function(){var e=this.maxAge;if(e>0&&(0,r.default)(this.createdAt).add(e,"seconds").isBefore(Date.now()))return!0;return!1},o.getExpiresAt=function(){return this.maxAge>0?(0,r.default)(this.createdAt).add(this.maxAge,"seconds").toDate():1/0},o.toString=function(){return this.code},a}(a(n(52)).default);t.default=o},6685:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=s(n(339)),i=n(29),l=s(n(13)),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._flashTitleInterval=new i.Interval,t.state={titleIndex:null},t.handleFocus=function(){t._flashTitleInterval.stop(),t.setState({titleIndex:null}),document.removeEventListener("focusin",t.handleFocus)},t.rotateTitle=function(){var e=t.state.titleIndex;document.hasFocus()?(t._flashTitleInterval.stop(),t.setState({titleIndex:null})):t.setState({titleIndex:(e+1)%t.titles.length})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,s,f,p=r.prototype;return p.componentDidMount=function(){l.default.embedded||document.hasFocus()||(this.setState({titleIndex:0}),this._flashTitleInterval.start(1e3,this.rotateTitle),document.addEventListener("focusin",this.handleFocus))},p.componentWillUnmount=function(){this._flashTitleInterval.stop(),document.removeEventListener("focusin",this.handleFocus)},p.render=function(){return null!=this.title?d(o.default,{},void 0,d("title",{},void 0,this.title)):null},a=r,(s=[{key:"titles",get:function(){return[u.default.Messages.GO_LIVE_HEY,u.default.Messages.GO_LIVE_LOOK,u.default.Messages.GO_LIVE_LISTEN]}},{key:"title",get:function(){var e=this.state.titleIndex;return null!=e?this.titles[e]:null}}])&&c(a.prototype,s),f&&c(a,f),r}(a.PureComponent);t.default=f,f.displayName="TitleFocusFlasher"},6686:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(3)),a=c(n(2)),o=c(n(14)),i=c(n(6555)),l=c(n(19)),u=c(n(39)),s=c(n(279)),d=n(1);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=null,h=!1;function m(e){var t=e.link;p=t}var v=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,d,c,m=r.prototype;return m.initialize=function(){this.waitFor(i.default,s.default,u.default,l.default,o.default)},m.getHomeLink=function(){return p||i.default.defaultRoute},a=r,(d=[{key:"hasHandledRedirect",get:function(){return h}}])&&f(a.prototype,d),c&&f(a,c),r}(r.default.Store))(a.default,{OVERLAY_INITIALIZE:function(e){return t=s.default.getPrivateChannelIds(),void(((n=u.default.getChannelId(d.ME))||t[0])&&(p=d.Routes.CHANNEL(d.ME,n||t[0])));var t,n},APP_VIEW_SET_HOME_LINK:m,ACTIVITY_FEED_HANDLE_REDIRECT:function(e){h=!0},APPLICATION_STORE_LOCATION_CHANGE:function(e){m({link:e.location.pathname})},APPLICATION_STORE_RESET_NAVIGATION:function(e){return function(){if(null==p||!p.startsWith(d.Routes.APPLICATION_STORE))return!1;p=d.Routes.APPLICATION_STORE}()},CHANNEL_SELECT:function(e){var t=e.guildId,n=e.channelId;if(null==t&&null!=n){var r=d.Routes.CHANNEL(d.ME,n);if(r!==p)return p=r,!0}return!1}});t.default=v},6687:function(e,t,n){"use strict";t.__esModule=!0,t.transitionToChannel=function(e,t,n){void 0===n&&(n=!0);if(i.default.hasModalOpen())return;o.default.closeAll(),n&&a.default.channelListScrollTo(e,t),r.default.selectChannel(e,t)},t.transitionToPage=function(e){if(i.default.hasModalOpen())return;o.default.closeAll(),l.default.replaceWith(e)};var r=u(n(6577)),a=u(n(6540)),o=u(n(192)),i=u(n(463)),l=u(n(36));function u(e){return e&&e.__esModule?e:{default:e}}},6690:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.PRETTY_KEYS=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=l(n(8)),o=l(n(6542)),i=l(n(5930));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var s="up",d="right",c="down",f="left",p=u("g",{fill:"#4F545C"},void 0,u("polygon",{transform:"translate(5.025000, 5.000000) scale(1, -1) translate(-5.025000, -5.000000) ",points:"4.16666667 10 4.16666672 3.33333333 1.25 6.25 0.05 5 5.00000005 0 9.99999967 5 8.75 6.25 5.83333338 3.33333333 5.83333333 10"})),h=function(e){var t=e.direction,n=void 0===t?s:t;return u("svg",{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg",className:(0,a.default)(i.default.bindArrow,i.default[n])},void 0,p)};h.displayName="ArrowSVG";var m={mod:function(){return o.default.modKey},alt:function(){return o.default.altKey},up:function(){return u(h,{direction:s})},down:function(){return u(h,{direction:c})},left:function(){return u(h,{direction:f})},right:function(){return u(h,{direction:d})},pageup:function(){return"page up"},pagedown:function(){return"page down"},"any-character":function(){return"any key"},return:function(){return o.default.returnKey}};t.PRETTY_KEYS=m;var v=function(e){var t=e.shortcut,n=e.className;return u("div",{className:(0,a.default)(i.default.keybindShortcut,n)},void 0,t.split("+").map(function(e){return m[e]?m[e]():e}).map(function(e,t){return u("span",{},t,e)}))};v.displayName="KeyboardShortcut";var y=v;t.default=y},6691:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=V(n(3)),i=V(n(6863)),l=n(35),u=V(n(334)),s=V(n(141)),d=V(n(30)),c=n(883),f=V(n(927)),p=V(n(7675)),h=V(n(6865)),m=V(n(10)),v=V(n(7676)),y=V(n(19)),_=V(n(276)),g=V(n(64)),E=V(n(97)),S=V(n(185)),I=V(n(458)),T=n(857),O=V(n(8406)),A=V(n(8409)),N=V(n(8410)),C=n(908),M=n(80),b=n(7678),R=n(90),P=V(n(13)),D=V(n(6747)),L=V(n(6614)),w=n(7695),U=V(n(8480)),k=V(n(8511)),G=V(n(6876)),F=V(n(7706)),j=V(n(343)),H=n(1),x=V(n(4)),B=V(n(455));function V(e){return e&&e.__esModule?e:{default:e}}function K(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var z=function(e){var t=e.guildId;return g.default.can(H.Permissions.MANAGE_GUILD,{guildId:t})},Y=function(e){var t=e.channel,n=e.canChat,r=e.renderReactions,a=e.canAddNewReactions,o=e.isLurking,i=t.isPrivate(),l=t.isSystemDM(),u=n||i;return{disableReactionReads:!r,disableReactionCreates:o||!u||!((!0===a||i)&&!l),disableReactionUpdates:o||!u}},q=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).onResize=function(e){var n=e.target,r=e.isEditing,a=t.props,o=a.onEdit,i=a.onUpdate;r?o&&n&&o(n):i&&n&&i(n)},t.onClickUsername=function(e,n){var r=n.user;if(e.shiftKey&&!r.isNonUserBot()){var a=t.props.disablePersonalInformation,o=r.username,i=r.tag,l="@"+(a?o:i);M.ComponentDispatch.dispatchToLastSubscribed(H.ComponentActions.INSERT_TEXT,{content:l}),e.preventDefault(),e.stopPropagation();var u=t.props.channel;null!=u&&f.default.startTyping(u.id)}},t.onContextMenuMessage=function(e,t){if(P.default.embedded){var n=t.message.type!==H.MessageTypes.DEFAULT?H.ContextMenuTypes.MESSAGE_SYSTEM:H.ContextMenuTypes.MESSAGE_MAIN;(0,l.openContextMenu)(e,function(e){return a.createElement(k.default,W({},e,t,{type:n}))})}},t.onContextMenuUser=function(e,t){var n=t.user,r=t.channel;(0,b.openUserContextMenu)(e,n,r)},t.handleSaveMessage=function(e,n,r){var a=r.content,o=t.props,i=o.editingMessage,l=o.canCrosspost,u=o.currentUserId,d=o.canManageMessages,c=null!=i&&null!=i.author?i.author.id:null;l&&(c===u||d)&&null!=i&&(0,R.hasFlag)(i.flags,H.MessageFlags.CROSSPOSTED)?G.default.confirmEdit(e,n,a):s.default.editMessage(e,n,{content:a})},t.handlePublishMessage=function(e,t){G.default.confirmPublish(e,t)},t.renderAccessories=function(e){var n=e.message,r=e.hasSpoilerEmbeds,o=t.props,i=o.compact,l=o.channel,u=o.accessoriesClassName,s=o.gifAutoPlay,d=o.renderReactions,c=o.canAddNewReactions,f=o.canManageMessages,p=o.inlineAttachmentMedia,h=o.inlineEmbedMedia,m=o.renderEmbeds,v=o.canChat,y=o.isLurking,_=o.currentUserId===n.author.id||f,g=Y({channel:l,canChat:v,renderReactions:d,canAddNewReactions:c,isLurking:y});return K(T.BackgroundOpacityContext.Consumer,{},void 0,function(e){return a.createElement(L.default,W({},g,{className:u,message:n,channel:l,isCompact:i,disableAutoPlayGif:!s,disableEmbeds:!m,inlineAttachmentMedia:p,inlineEmbedMedia:h,onContextMenuMessage:t.onContextMenuMessage,backgroundOpacity:e.backgroundOpacity,canSuppressEmbeds:_,onPublishMessage:t.handlePublishMessage,hasSpoilerEmbeds:r}))})},t.renderButtonsMessage=function(e){var n=e.message,r=e.channel,o=n.state===H.MessageStates.SENDING,l=t.props,d=l.developerMode,f=l.canManageMessages,p=l.messageOption,h=l.currentUserId,m=l.canCrosspost;if(!1===p||o)return null;var v,y=n.author,_=f||y.id===h,g=n.type!==H.MessageTypes.DEFAULT,E=r.isSystemDM(),S=!E&&!g&&(f||r.isPrivate()),I=!E&&!g&&t.props.canEdit,T=t.props,O=T.canChat,C=T.canAddNewReactions,M=T.renderReactions,b=T.isLurking,P=Y({channel:r,canChat:O,renderReactions:M,canAddNewReactions:C,isLurking:b}).disableReactionCreates;if(m&&(y.id===h||f)&&n.type===H.MessageTypes.DEFAULT){var D=(0,R.hasFlag)(n.flags,H.MessageFlags.CROSSPOSTED);v=K(N.default,{title:D?x.default.Messages.NEWS_CHANNEL_PUBLISHED:x.default.Messages.NEWS_CHANNEL_PUBLISH,onClick:function(){return t.handlePublishMessage(r.id,n.id)},look:D?N.default.Looks.LINK:N.default.Looks.FILLED,disabled:D})}return K(a.Fragment,{},void 0,v,!P&&K(w.ButtonAddReaction,{message:n,channel:r,subscribeToGlobalOpen:!0}),K(A.default,{channel:r,message:n,developerMode:d,canEdit:I,canPin:S,canDelete:_,onStartEditMessage:s.default.startEditMessage,onRetrySendMessage:s.default.retrySendMessage,onMarkUnread:c.markUnread,onDeleteMessage:s.default.deleteMessage,onConfirmDelete:G.default.confirmDelete,onConfirmPin:G.default.confirmPin,onOpenGuildSettings:u.default.open,onUnpinMessage:i.default.unpinMessage,onConfirmUnpin:G.default.confirmUnpin,onCanManageGuild:z,onShowReactionsModal:t.renderReactionsModal,currentUserId:h}))},t.renderEditor=function(e){var t=e.value,n=e.message,r=e.channel,a=e.onChange,o=e.onSubmit,i=e.onKeyDown,l=e.onResize;return K(D.default,{className:B.default.marginTop8,value:t,channel:r,type:H.TextareaTypes.EDIT,onChange:a,onSubmit:o,onKeyDown:i,onResize:l},n.id)},t.renderPopoutUser=function(e){return a.createElement(j.default,e)},t.renderPopoutGuild=function(e){return a.createElement(p.default,e)},t.renderSystemMessage=function(e){return a.createElement(U.default,W({},e,{key:e.message.id,onContextMenu:t.onContextMenuMessage}))},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.validateEdit=function(e){var t=e.value,n=e.channel;return(0,C.applyChatRestrictions)(null,t,n,!1,!1)},o.renderReactionsModal=function(e){var t=e.message;d.default.push(F.default,{message:t})},o.render=function(){var e=this,t=this.props,n=t.onClickAnywhere,r=t.hasDivider,o=t.compact,i=t.canFlash,l=t.enableInteraction,u=t.messages,d=t.channel,f=t.jumpSequenceId,p=t.jumpMessageId,m=t.registerMessageDOMNode,v=t.renderMentioned,y=t.groupOption,_=t.editingMessage,g=t.disableInteractionLabel,E=t.editingContent,S=t.isFocusedWindow,I=t.className,A=t.cozyClassName,N=t.canChat,C=t.renderReactions,M=t.canAddNewReactions,b=t.gifAutoPlay,R=t.renderEmbeds,P=t.canManageMessages,D=t.developerMode,L=t.isLurking,w={messages:u,channel:d,jumpSequenceId:f,jumpMessageId:p,registerMessageDOMNode:m,disableInteractionLabel:g,editingContent:E,isFocusedWindow:S},U=W({},Y({channel:d,canChat:N,renderReactions:C,canAddNewReactions:M,isLurking:L}),{disableAutoPlayGif:!b,disableEmbeds:!R,disableManageMessages:!P,disableDeveloperMode:!D});return K(T.BackgroundOpacityContext.Consumer,{},void 0,function(t){return a.createElement(O.default,W({isCompact:o,onClick:n,disableDivider:r,disableJumpFlash:!i,disableInteraction:!l,disableMentionStyles:!v,onResize:e.onResize,validateEdit:e.validateEdit,onCancelEditing:s.default.endEditMessage,onConfirmDelete:G.default.confirmDelete,onChange:s.default.updateEditMessage,saveMessage:e.handleSaveMessage,editingMessage:_,onMarkUnread:c.markUnread,onClickUsername:e.onClickUsername,onContextMenuMessage:e.onContextMenuMessage,onContextMenuUser:e.onContextMenuUser,onDeleteMessage:s.default.deleteMessage,renderAccessories:e.renderAccessories,renderButtonsMessage:e.renderButtonsMessage,renderEditor:e.renderEditor,renderPopoutUser:e.renderPopoutUser,renderPopoutGuild:e.renderPopoutGuild,renderSystemMessage:e.renderSystemMessage,renderButtonsGroup:y,renderMessageMarkup:h.default,className:I,cozyClassName:A,backgroundOpacity:t.backgroundOpacity},w,U))})},r}(a.Component);q.displayName="ConnectedMessageGroup",q.defaultProps={canManageMessages:!1,hasDivider:!1,popoutPosition:I.default.Positions.RIGHT,compact:!1,messageOption:!0,canEdit:!0,jumpTargetIndex:-1,enableInteraction:!0,developerMode:!1,canFlash:!0,renderMentioned:!0,inlineAttachmentMedia:!1,inlineEmbedMedia:!1,gifAutoPlay:!1,renderEmbeds:!1,renderEmbedsSmall:!1,renderReactions:!0,canChat:!1};var $=o.default.connectStores([v.default,m.default,S.default,y.default,_.default],function(e){var t=e.channel,n=e.messages,r=e.canEdit,a=t.id,o=t.getGuildId(),i=!1!==r&&n.some(function(e){return e&&v.default.isEditing(a,e.id)}),l=i?v.default.getEditingMessage():null,u=i?v.default.getEditingContent():null,s=S.default.isFocused(),d=E.default.hidePersonalInformation,c=_.default.isLurking(o),f=y.default.getGuild(o),p=t.type===H.ChannelTypes.GUILD_ANNOUNCEMENT,h=null!=f&&f.hasFeature(H.GuildFeatures.NEWS),g=p&&h;return{currentUserId:m.default.getId(),editingMessage:l,isFocusedWindow:s,disablePersonalInformation:d,editingContent:u,isLurking:c,canCrosspost:g}})(q);t.default=$},6692:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.IMAGE_GIF_RE=void 0;var r,a,o=f(n(0)),i=n(6638),l=(r=n(8450))&&r.__esModule?r:{default:r},u=f(n(8451)),s=n(229),d=n(6612),c=n(857);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function p(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=/\.gif($|\?|#)/i;t.IMAGE_GIF_RE=v;var y=p(l.default,{}),_=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={readyState:u.ImageReadyStates.LOADING,hasMouseOver:!1},n._cancellers=new Set,n.observeVisibility=function(){r.visibilityObserver.observe(m(n))},n.unobserveVisibility=function(){r.visibilityObserver.unobserve(m(n))},n.handleImageLoad=function(e){return n.setState({readyState:e?u.ImageReadyStates.ERROR:u.ImageReadyStates.READY})},n.preloadImage=function(e,t){var r=e.width,a=e.height,o=n.props,i=o.width,l=o.height;1===i&&1===l||n.loadImage(n.getSrc((0,d.getRatio)(i,l,r,a)),t)},n.onMouseEnter=function(e){r.isAnimated(n.props)&&n.setState({hasMouseOver:!0});var t=n.props.onMouseEnter;null!=t&&t(e,{preloadImage:n.preloadImage})},n.onMouseLeave=function(){return n.setState({hasMouseOver:!1})},n.onClick=function(e){var t=n.props,r=t.onZoom,a=t.onClick;null!=a?a(e):null!=r&&(e.preventDefault(),r(e,{placeholder:n.getSrc(n.getRatio())}))},n.renderAccessory=function(){var e=n.state.hasMouseOver,t=null!=n.props.renderAccessory?n.props.renderAccessory():null;return e?t:y},(0,s.isImageLoaded)(n.getSrc(n.getRatio(),r.isAnimated(n.props)))&&(n.state.readyState=u.ImageReadyStates.READY),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.isAnimated=function(e){var t=e.src,n=e.original;return e.animated||v.test(n||t)};var a=r.prototype;return a.componentDidMount=function(){this.state.readyState===u.ImageReadyStates.LOADING&&this.loadImage(this.getSrc(this.getRatio(),r.isAnimated(this.props)),this.handleImageLoad),r.isAnimated(this.props)&&this.observeVisibility()},a.componentDidUpdate=function(e){var t=r.isAnimated(this.props);r.isAnimated(e)!==t&&(t?this.observeVisibility():this.unobserveVisibility())},a.componentWillUnmount=function(){r.isAnimated(this.props)&&this.unobserveVisibility(),this._cancellers.forEach(function(e){return e()}),this._cancellers.clear()},a.getSrc=function(e,t){void 0===t&&(t=!1);var n=this.props,r=n.src,a=n.width,o=n.height;return(0,s.getImageSrc)(r,a,o,e,t?"png":null)},a.getWidth=function(){var e=this.props,t=e.width,n=e.minWidth;return Math.max(Math.round(t*this.getRatio()),n)},a.getHeight=function(){var e=this.props,t=e.height,n=e.minHeight;return Math.max(Math.round(t*this.getRatio()),n)},a.getRatio=function(){var e=this.props,t=e.width,n=e.height,r=e.maxWidth,a=void 0===r?400:r,o=e.maxHeight,i=void 0===o?300:o;return(0,d.getRatio)(t,n,a,i)},a.loadImage=function(e,t){var n=this,r=this.props,a=r.width,o=r.height;if(1!==a||1!==o){var i=(0,s.loadImage)(e,function(e,r){null!=i&&n._cancellers.delete(i),t&&t(e,r)});null!=i&&this._cancellers.add(i)}},a.render=function(){var e=this.props,t=e.alt,n=e.placeholder,a=e.onZoom,i=e.shouldLink,l=e.onContextMenu,s=e.autoPlay,d=e.original,f=e.className,m=e.imageClassName,v=e.children,y=e.animated,_=e.shouldAnimate,g=e.minWidth,E=e.minHeight,S=e.renderItem,I=e.onClick,T=e.renderAccessory,O=e.tabIndex,A=this.state,N=A.readyState,C=A.hasMouseOver,M=!!a,b={alt:null!=t?t:"",readyState:N,onContextMenu:l,zoomable:M,className:f,imageClassName:m,minWidth:g,minHeight:E,tabIndex:O,width:this.getWidth(),height:this.getHeight(),renderItem:S,src:"",children:null!=v?function(e){var t=e.src,n=e.size,r=e.alt;return v({src:t,size:n,alt:r})}:void 0,onMouseEnter:this.onMouseEnter};if(1===b.width&&1===b.height)return null;switch((M||null!=I)&&(b.onClick=this.onClick),i&&(b.original=d||b.src),N){case u.ImageReadyStates.LOADING:null!=n&&(b.src=n);break;case u.ImageReadyStates.READY:if(r.isAnimated(this.props)){b.onMouseLeave=this.onMouseLeave;var R=(s||C)&&(null==_||_)&&r.visibilityObserver.isVisible(this);R?(b.src=this.getSrc(this.getRatio()),b.renderAccessory=T):(b.src=this.getSrc(this.getRatio(),!y),b.renderAccessory=this.renderAccessory),null!=v&&(b.children=function(e){var t=e.src,n=e.size,r=e.alt;return v({src:t,size:n,animating:R,alt:r})})}else b.src=this.getSrc(this.getRatio())}return p(c.BackgroundOpacityContext.Consumer,{},void 0,function(e){return o.createElement(u.default,h({},b,{backgroundOpacity:e.backgroundOpacity}))})},r}(o.Component);t.default=_,_.displayName="LazyImage",_.visibilityObserver=new i.VisibilityObserver({threshold:0}),_.defaultProps={shouldLink:!1,autoPlay:!1,animated:!1,minWidth:0,minHeight:0}},6693:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.InLibraryPrice=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=d(n(8)),i=d(n(888)),l=d(n(42)),u=d(n(4)),s=d(n(5946));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var f=Object.freeze({DIRECTORY_HERO:1,DIRECTORY_TILE:2,DIRECTORY_SEARCH:3,LISTING:4,EMBED:5}),p=Object.freeze({IN_LIBRARY:1,ON_SALE:2,PREMIUM:3,DEFAULT:4,ENTITLEMENT_BRANCH:5}),h=function(e){var t=e.className;return c("div",{className:(0,o.default)(s.default.row,t)},void 0,c(l.default,{className:s.default.icon,name:l.default.Names.LIBRARY}),u.default.Messages.APPLICATION_STORE_IN_LIBRARY)};t.InLibraryPrice=h,h.displayName="InLibraryPrice";var m=function(e){var t=e.sku,n=e.className;return c("div",{className:(0,o.default)(s.default.row,n)},void 0,c(l.default,{className:s.default.icon,name:l.default.Names.NITRO_WHEEL}),(0,i.default)(t))};m.displayName="PremiumPrice";var v=function(e){var t=e.sku,n=e.className;return c("div",{className:(0,o.default)(s.default.salePercentage,n)},void 0,t.getDisplaySalePercentage())};v.displayName="SalePercent";var y=function(e){var t=e.sku,n=e.className;return c("div",{className:(0,o.default)(s.default.originalAmount,n)},void 0,(0,i.default)(t,!1))};y.displayName="OriginalAmount";var _=function(e){var t=e.sku;return c("div",{className:e.className},void 0,(0,i.default)(t))};_.displayName="Price";var g=function(e){var t=e.sku,n=e.className;return c("div",{className:(0,o.default)(s.default.row,n)},void 0,c(v,{sku:t}),c(y,{sku:t}),c(_,{sku:t}))};g.displayName="InlineSale";var E=function(e){return c("div",{className:e.className},void 0,u.default.Messages.APPLICATION_STORE_FREE)};E.displayName="EntitlementBranchPrice";var S=c(E,{}),I=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.getState=function(){var e=this.props,t=e.inLibrary,n=e.sku;return e.hasEntitlementBranch?p.ENTITLEMENT_BRANCH:t?p.IN_LIBRARY:n.available?n.premium?p.PREMIUM:n.isOnSale?p.ON_SALE:null!=n.getPrice()?p.DEFAULT:null:p.DEFAULT},i.renderGeneric=function(e,t){var n=this.props,r=n.className,a=n.sku;switch(e){case p.ENTITLEMENT_BRANCH:return c(E,{className:(0,o.default)(t,r)});case p.IN_LIBRARY:return c(h,{className:(0,o.default)(t,r)});case p.PREMIUM:return c(m,{sku:a,className:(0,o.default)(t,r)});case p.ON_SALE:return c(g,{sku:a,className:(0,o.default)(t,r)});default:return c(_,{className:(0,o.default)(t,r),sku:a})}},i.renderDirectoryHero=function(e){var t=this.props,n=t.className,r=t.sku;switch(e){case p.ENTITLEMENT_BRANCH:return c(E,{className:(0,o.default)(n)});case p.PREMIUM:return c(m,{sku:r,className:(0,o.default)(s.default.directoryHeroPricePremium,n)});case p.ON_SALE:return c(g,{sku:r,className:(0,o.default)(s.default.directoryHeroPrice,n)});default:return c(_,{className:(0,o.default)(s.default.directoryHeroPrice,n),sku:r})}},i.renderListing=function(e){var t,n=this.props,r=n.className,i=n.sku;switch(e){case p.ENTITLEMENT_BRANCH:t=S;break;case p.ON_SALE:t=c(a.Fragment,{},void 0,c("div",{className:s.default.row},void 0,c(_,{sku:i}),c(v,{sku:i})),c(y,{sku:i}));break;default:t=c(_,{sku:i})}return c("div",{className:(0,o.default)(s.default.listingPrice,r)},void 0,t)},i.render=function(){var e=this.getState();if(null==e)return null;switch(this.props.type){case f.DIRECTORY_HERO:return this.renderDirectoryHero(e);case f.DIRECTORY_TILE:return this.renderGeneric(e,s.default.directoryTilePrice);case f.DIRECTORY_SEARCH:return this.renderGeneric(e,s.default.directorySearchPrice);case f.LISTING:return this.renderListing(e);case f.EMBED:return this.renderGeneric(e,s.default.embedPrice);default:throw new Error("Invalid Price Unit Type")}},r}(a.PureComponent);I.displayName="PriceUnit",I.Types=f;var T=I;t.default=T},6711:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){void 0===t&&(t=e);void 0===n&&(n="");var i=u[e];if(null!=i)return function(e,t,n){void 0===t&&(t="");void 0===n&&(n="");var r=u[e].metadata;t&&t!==e&&(r.title=t);n&&n!==r.description&&(r.description=n)}(e,t,n),i.store;var s=new(function(r){var a,i;function s(){return r.apply(this,arguments)||this}i=r,(a=s).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i;var d=s.prototype;return d.initialize=function(){this.syncWith([o.default],l)},d.getExperimentId=function(){return e},d.getMetaData=function(){var r=u[e];return r?r.metadata:{title:t,description:n}},d.getExperimentDescriptor=function(){var e=this.getExperimentId();return o.default.getOverrideExperimentDescriptor(e)||o.default.getEligibleExperiment(e)},s}(r.default.Store))(a.default);return u[e]={store:s,metadata:{title:t,description:n}},s};var r=i(n(3)),a=i(n(2)),o=i(n(225));function i(e){return e&&e.__esModule?e:{default:e}}function l(){return!0}var u={}},6744:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(3)),a=i(n(27)),o=i(n(2));n(1);function i(e){return e&&e.__esModule?e:{default:e}}var l="GuildNSFWAgreeStore",u={};var s=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.initialize=function(){u=a.default.get(l)||u},o.didAgree=function(e){return null!=e&&(u[e]||!1)},r}(r.default.Store))(o.default,{GUILD_NSFW_AGREE:function(e){var t=e.guildId;u[t]=!0,a.default.set(l,u)}});t.default=s},6745:function(e,t,n){"use strict";t.__esModule=!0,t.getSearchOptionAnswer=function(e){switch(e){case u.SearchTokenTypes.FILTER_FROM:return s.default.Messages.SEARCH_ANSWER_FROM;case u.SearchTokenTypes.FILTER_MENTIONS:return s.default.Messages.SEARCH_ANSWER_MENTIONS;case u.SearchTokenTypes.FILTER_HAS:return s.default.Messages.SEARCH_ANSWER_HAS;case u.SearchTokenTypes.FILTER_BEFORE:case u.SearchTokenTypes.FILTER_ON:case u.SearchTokenTypes.FILTER_AFTER:return s.default.Messages.SEARCH_ANSWER_DATE;case u.SearchTokenTypes.FILTER_IN:return s.default.Messages.SEARCH_ANSWER_IN;case u.SearchTokenTypes.FILTER_FILE_TYPE:return s.default.Messages.SEARCH_ANSWER_FILE_TYPE;case u.SearchTokenTypes.FILTER_FILE_NAME:return s.default.Messages.SEARCH_ANSWER_FILE_NAME}},t.getSearchQueryFromTokens=function(e){var t={};e.forEach(function(e){var n=e.type;if(!u.IS_SEARCH_FILTER_TOKEN.test(n)){switch(n){case u.SearchTokenTypes.ANSWER_BEFORE:case u.SearchTokenTypes.ANSWER_ON:case u.SearchTokenTypes.ANSWER_AFTER:var r=e.getData("start"),a=e.getData("end");return r&&(t.min_id=l.default.fromTimestamp(r)),void(a&&(t.max_id=l.default.fromTimestamp(a)))}var o=function(e){var t=i.default[e],n=t?t.queryKey:null;n||(n="content");return n}(n);null==t[o]&&(t[o]=new Set);var s=t[o];switch(n){case u.SearchTokenTypes.ANSWER_USERNAME_FROM:case u.SearchTokenTypes.ANSWER_USERNAME_MENTIONS:s.add(e.getData("userId"));break;case u.SearchTokenTypes.ANSWER_FILE_TYPE:case u.SearchTokenTypes.ANSWER_FILE_NAME:s.add(e.getMatch(1));break;case u.SearchTokenTypes.ANSWER_IN:s.add(e.getData("channel").id);break;case u.SearchTokenTypes.ANSWER_HAS:s.add(e.getData("has"));break;default:s.add(e.getFullMatch().trim())}}});for(var n=0,r=Object.entries(t);n<r.length;n++){var a=r[n],o=a[0],s=a[1];s instanceof Set&&(t[o]=Array.from(s))}t.content&&(t.content=t.content.join(" ").trim(),t.content||delete t.content);return t},t.getNonTokenQuery=function(e){return e.map(function(e){return e.type===o.default.NON_TOKEN_TYPE?e.getFullMatch():""}).join(" ").trim()},t.getSelectionScope=function(e,t,n){var r,a,o=e.find(function(o,i){return t>=o.start&&t<=o.end&&n>=o.start&&n<=o.end?(e[i+1]&&(a=e[i+1]),!0):(r=o,!1)});if(!o)return null;return{previousToken:r,currentToken:o,nextToken:a,focusOffset:t,anchorOffset:n}},t.getAutocompleteMode=function(e,t){var n,r=e=e||{},a=r.currentToken,i=r.nextToken,l=r.previousToken;if(0===t.length)return{type:u.SearchPopoutModes.EMPTY,filter:null,token:null};if(!a)return{type:u.SearchPopoutModes.FILTER_ALL,filter:null,token:null};if(u.IS_SEARCH_FILTER_TOKEN.test(a.type)){if(!i||i.type===o.default.NON_TOKEN_TYPE)return{type:u.SearchPopoutModes.FILTER,filter:a.type,token:i};if(i&&!u.IS_SEARCH_ANSWER_TOKEN.test(i.type))return{type:u.SearchPopoutModes.FILTER,filter:a.type,token:null}}if(a.type===o.default.NON_TOKEN_TYPE&&l&&u.IS_SEARCH_FILTER_TOKEN.test(l.type))return{type:u.SearchPopoutModes.FILTER,filter:l.type,token:a};a.type===o.default.NON_TOKEN_TYPE&&(n=a);return{type:u.SearchPopoutModes.FILTER_ALL,filter:null,token:n}},t.getFlattenedStringArray=function(e,t){var n=[];return(0,a.default)(e).forEach(function(e){if(e&&e.results.length){var r=e.group;n=n.concat(e.results.map(function(e){var n=e.text;if(t===u.SearchPopoutModes.FILTER_ALL){r=e.group||r;var a=i.default[r];a&&a.key&&(n=a.key+" "+n)}return n}))}}),n.filter(function(e){return e})},t.getTotalResults=function(e){return e.reduce(function(e,t){return t?t.results.length+e:e},0)},t.getQueryFromTokens=function(e){if(!e)return"";return e.map(function(e){return e.getFullMatch()}).join("")},t.tokenizeQuery=function(e){return p.tokenize(e)},t.clearTokenCache=function(){return p.clearCache()},t.showDatePicker=function(e){return f[e]},t.filterHasAnswer=function(e,t){var n=u.IS_SEARCH_FILTER_TOKEN.test(e.type);if(!t&&n||t&&n&&!u.IS_SEARCH_ANSWER_TOKEN.test(t.type))return!1;return!0},t.refreshSearchTokens=function(){(0,i.refreshSearchTokens)(),p.reset(),(0,a.default)(i.default).forOwn(function(e,t){return p.addRule(c({type:t},e))})},t.ShowDatePicker=void 0;var r,a=d(n(6)),o=d(n(6861)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(6746)),l=d(n(144)),u=n(1),s=d(n(4));function d(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=((r={})[u.SearchTokenTypes.FILTER_BEFORE]=!0,r[u.SearchTokenTypes.FILTER_AFTER]=!0,r[u.SearchTokenTypes.FILTER_ON]=!0,r);t.ShowDatePicker=f;var p=new o.default},6746:function(e,t,n){"use strict";t.__esModule=!0,t.getRandomDateShortcut=function(){return o.default.sample(w())},t.refreshSearchTokens=function(){Object.assign(V,(t=[y.default.Messages.SEARCH_ANSWER_HAS_LINK,y.default.Messages.SEARCH_ANSWER_HAS_EMBED,y.default.Messages.SEARCH_ANSWER_HAS_ATTACHMENT,y.default.Messages.SEARCH_ANSWER_HAS_VIDEO,y.default.Messages.SEARCH_ANSWER_HAS_IMAGE,y.default.Messages.SEARCH_ANSWER_HAS_SOUND],(e={})[v.SearchTokenTypes.FILTER_FROM]={regex:b(y.default.Messages.SEARCH_FILTER_FROM),componentType:B.FILTER,key:M(y.default.Messages.SEARCH_FILTER_FROM),validator:j,getAutocompletions:G},e[v.SearchTokenTypes.ANSWER_USERNAME_FROM]={follows:[v.SearchTokenTypes.FILTER_FROM],regex:x,validator:R,mutable:!0,componentType:B.ANSWER,queryKey:"author_id"},e[v.SearchTokenTypes.FILTER_MENTIONS]={regex:b(y.default.Messages.SEARCH_FILTER_MENTIONS),componentType:B.FILTER,key:M(y.default.Messages.SEARCH_FILTER_MENTIONS),validator:j,getAutocompletions:G},e[v.SearchTokenTypes.ANSWER_USERNAME_MENTIONS]={follows:[v.SearchTokenTypes.FILTER_MENTIONS],regex:x,validator:R,mutable:!0,componentType:B.ANSWER,queryKey:"mentions"},e[v.SearchTokenTypes.FILTER_HAS]={regex:b(y.default.Messages.SEARCH_FILTER_HAS),componentType:B.FILTER,key:M(y.default.Messages.SEARCH_FILTER_HAS),getAutocompletions:function(e,n,r){return k(e,r,t)}},e[v.SearchTokenTypes.ANSWER_HAS]={regex:new RegExp("(?:\\s*-?("+t.map(function(e){return m.default.escape(e)}).join("|")+"))","i"),follows:[v.SearchTokenTypes.FILTER_HAS],validator:L,componentType:B.ANSWER,queryKey:"has"},e[v.SearchTokenTypes.FILTER_FILE_TYPE]={regex:b(y.default.Messages.SEARCH_FILTER_FILE_TYPE),key:M(y.default.Messages.SEARCH_FILTER_FILE_TYPE),componentType:B.FILTER},e[v.SearchTokenTypes.ANSWER_FILE_TYPE]={regex:/(?:\s*([^\s]+))/,follows:[v.SearchTokenTypes.FILTER_FILE_TYPE],mutable:!0,componentType:B.ANSWER,queryKey:"attachment_extensions"},e[v.SearchTokenTypes.FILTER_FILE_NAME]={regex:b(y.default.Messages.SEARCH_FILTER_FILE_NAME),key:M(y.default.Messages.SEARCH_FILTER_FILE_NAME),componentType:B.FILTER},e[v.SearchTokenTypes.ANSWER_FILE_NAME]={regex:/(?:\s*([^\s]+)(?=\s))/,follows:[v.SearchTokenTypes.FILTER_FILE_NAME],mutable:!0,componentType:B.ANSWER,queryKey:"attachment_filename"},e[v.SearchTokenTypes.FILTER_BEFORE]={regex:b(y.default.Messages.SEARCH_FILTER_BEFORE),componentType:B.FILTER,key:M(y.default.Messages.SEARCH_FILTER_BEFORE),getAutocompletions:function(e,t,n){return U(e,n,v.SearchTokenTypes.FILTER_BEFORE)}},e[v.SearchTokenTypes.FILTER_ON]={regex:b("("+y.default.Messages.SEARCH_FILTER_ON+"|"+y.default.Messages.SEARCH_FILTER_DURING+")"),componentType:B.FILTER,key:M(y.default.Messages.SEARCH_FILTER_DURING),getAutocompletions:function(e,t,n){return U(e,n,v.SearchTokenTypes.FILTER_ON)}},e[v.SearchTokenTypes.FILTER_AFTER]={regex:b(y.default.Messages.SEARCH_FILTER_AFTER),componentType:B.FILTER,key:M(y.default.Messages.SEARCH_FILTER_AFTER),getAutocompletions:function(e,t,n){return U(e,n,v.SearchTokenTypes.FILTER_AFTER)}},e[v.SearchTokenTypes.ANSWER_BEFORE]={regex:C,follows:[v.SearchTokenTypes.FILTER_BEFORE],componentType:B.ANSWER,mutable:!0,validator:function(e){return P(e,"before")}},e[v.SearchTokenTypes.ANSWER_ON]={regex:C,follows:[v.SearchTokenTypes.FILTER_ON],componentType:B.ANSWER,mutable:!0,validator:function(e){return P(e,"on")}},e[v.SearchTokenTypes.ANSWER_AFTER]={regex:C,follows:[v.SearchTokenTypes.FILTER_AFTER],componentType:B.ANSWER,mutable:!0,validator:function(e){return P(e,"after")}},e[v.SearchTokenTypes.FILTER_IN]={regex:b(y.default.Messages.SEARCH_FILTER_IN),componentType:B.FILTER,key:M(y.default.Messages.SEARCH_FILTER_IN),validator:F,getAutocompletions:function(e,t,n){"#"===e[0]&&(e=e.substring(1));var r=h.default.queryChannels(e,t,1/0).map(function(e){return e.channel});if(!e.trim()){var a=d.default.getChannelId(t),i=r.find(function(e){return e.id===a});i&&(r.splice(r.indexOf(i),1),r.unshift(i))}var u=l.default.getTextChannelNameDisambiguations(t);return(0,o.default)(r).take(n).map(function(e){return{text:""+u[e.id].name,channel:e}}).value()}},e[v.SearchTokenTypes.ANSWER_IN]={regex:/(?:\s*#?([^ ]+))/i,mutable:!0,follows:[v.SearchTokenTypes.FILTER_IN],componentType:B.ANSWER,validator:D,queryKey:"channel_id"},e));var e,t},t.getFilterAutocompletions=function(e,t){void 0===t&&(t=Object.keys(V).length);return(0,o.default)(Object.keys(V)).filter(function(e){return v.IS_SEARCH_FILTER_TOKEN.test(e)}).filter(function(e){return V[e].key}).map(function(e){return{token:e,text:V[e].key}}).filter(function(t){var n=t.text;return(0,r.default)(e.toLowerCase(),n)}).take(t).value()},t.default=t.ComponentTypes=void 0;var r=_(n(471)),a=_(n(82)),o=_(n(6)),i=_(n(5)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(87)),u=_(n(51)),s=_(n(6636)),d=_(n(39)),c=_(n(153)),f=_(n(97)),p=_(n(11)),h=_(n(904)),m=_(n(166)),v=n(1),y=_(n(4));function _(e){return e&&e.__esModule?e:{default:e}}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(){return new Set(i.default.months().map(function(e){return e.toLowerCase()}))}function S(){return new Set(i.default.weekdays().map(function(e){return e.toLowerCase()}))}function I(){var e=(new Date).getFullYear();return new Set(o.default.range(2015,e+1).map(function(e){return e.toString()}))}function T(e,t){return[e,e.clone().add(1,t)]}function O(e,t){return void 0===t&&(t=0),T((0,i.default)().startOf(e).add(t,e),e)}function A(e,t,n){return T((0,i.default)(e,t).local(),n)}function N(){var e;return(e={})[y.default.Messages.SEARCH_SHORTCUT_TODAY]=function(){return O("day")},e[y.default.Messages.SEARCH_SHORTCUT_YESTERDAY]=function(){return O("day",-1)},e[y.default.Messages.SEARCH_SHORTCUT_WEEK]=function(){return O("week")},e[y.default.Messages.SEARCH_SHORTCUT_MONTH]=function(){return O("month")},e[y.default.Messages.SEARCH_SHORTCUT_YEAR]=function(){return O("year")},e}var C=new RegExp("(?:\\s*(([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})|([0-9]{4})-([0-9]{1,2})|\\d{4}|([a-z]+)))","i");function M(e){return e+":"}function b(e){return new RegExp(M(e),"i")}function R(e){var t,n=e.getMatch(1),r=function(e){return null!=e?e.id:null};return!!(t=H.test(n)?n:n===v.ME?r(p.default.getCurrentUser()):r(p.default.findByTag(e.getMatch(2),e.getMatch(3))))&&(e.setData("userId",t),!0)}function P(e,t){var n,r,a=e.getFullMatch().trim().toLowerCase(),o=N()[a];if(null!=o){var i=o();n=i[0],r=i[1]}else if(E().has(a)){var l=A(a,"MMMM","month");n=l[0],r=l[1]}else if(S().has(a)){var u=A(a,"dddd","day");n=u[0],r=u[1]}else if(I().has(a)){var s=A(a,"YYYY","year");n=s[0],r=s[1]}else{var d=A(a,v.SEARCH_DATE_FORMAT,"day");n=d[0],r=d[1]}return!(!n.isValid()||!r.isValid())&&("before"===t?(r=n,n=null):"after"===t&&(n=r,r=null),e.setData("start",n),e.setData("end",r),!0)}function D(e){var t=e.getMatch(1),n=c.default.getGuildId(),r=l.default.getChannels(n)[l.GUILD_SELECTABLE_CHANNELS_KEY],a=l.default.getTextChannelNameDisambiguations(n),i=o.default.chain(r).map(function(e){return e.channel}).find(function(e){return t===a[e.id].name}).value();return!!i&&(e.setData("channel",i),!0)}function L(e){var t,n=(t={},t[y.default.Messages.SEARCH_ANSWER_HAS_LINK]="link",t[y.default.Messages.SEARCH_ANSWER_HAS_EMBED]="embed",t[y.default.Messages.SEARCH_ANSWER_HAS_ATTACHMENT]="file",t[y.default.Messages.SEARCH_ANSWER_HAS_VIDEO]="video",t[y.default.Messages.SEARCH_ANSWER_HAS_IMAGE]="image",t[y.default.Messages.SEARCH_ANSWER_HAS_SOUND]="sound",t)[e.getMatch(1)];return!!n&&(e.setData("has",n),!0)}function w(){return[].concat(Array.from(E()),Array.from(S()),Array.from(I()),Object.keys(N()))}function U(e,t,n){return k(e,t,w()).map(function(e){return g({},e,{group:n,key:n+"-"+e.text})})}function k(e,t,n){return(0,o.default)(n).filter(function(t){return(0,r.default)(e.toLocaleLowerCase(),t.toLowerCase())}).take(t).map(function(e){return{text:e}}).value()}function G(e,t,n,r){void 0===n&&(n=10),void 0===r&&(r=!1);var a,o=s.default.getSearchType(t);switch(e=e.split("#")[0],o){case v.SearchTypes.GUILD:a=h.default.queryGuildUsers;break;case v.SearchTypes.CHANNEL:a=h.default.queryChannelUsers;break;default:return[]}return a(t,e,n,r).filter(function(e){var t=e.user;return!u.default.isBlocked(t.id)}).map(function(e){var t=e.user;return{text:t.tag,user:t}})}function F(){return s.default.getSearchType()===v.SearchTypes.GUILD}function j(){return!f.default.hidePersonalInformation}var H=/^\d{17,20}$/,x=/^(?:\s*(\d{17,20}|@me|([^@#:]+)#([0-9]{4})))/i,B=(0,a.default)({FILTER:null,ANSWER:null});t.ComponentTypes=B;var V={};var K=V;t.default=K},6747:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=K(n(0)),o=V(n(8)),i=V(n(471)),l=V(n(6)),u=V(n(41)),s=V(n(3)),d=V(n(6736)),c=V(n(8411)),f=V(n(30)),p=V(n(6748)),h=V(n(120)),m=n(881),v=V(n(14)),y=V(n(6749)),_=V(n(87)),g=V(n(19)),E=V(n(7679)),S=V(n(64)),I=V(n(160)),T=V(n(97)),O=V(n(25)),A=V(n(7680)),N=V(n(8412)),C=V(n(58)),M=V(n(24)),b=V(n(182)),R=n(857),P=V(n(15)),D=V(n(904)),L=n(80),w=V(n(166)),U=n(8421),k=K(n(8426)),G=V(n(7062)),F=V(n(8436)),j=V(n(8441)),H=n(1),x=V(n(4)),B=V(n(6238));function V(e){return e&&e.__esModule?e:{default:e}}function K(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var q="@",$="#",J=":",Q="+",X="/",Z="COMMAND";function ee(e){switch(e.title){case H.ChannelTextAreaIntegrations.GIPHY.title:case H.ChannelTextAreaIntegrations.TENOR.title:return x.default.Messages.COMMAND_GIPHY_DESCRIPTION;default:return""}}var te=[].concat((0,l.default)(H.ChannelTextAreaIntegrations).values().map(function(e){return Y({},e,{isIntegration:!0,horizontal:e.type===H.ChannelTextAreaIntegrationTypes.GIF,description:ee(e)})}).value(),[{command:"tts",description:x.default.Messages.COMMAND_TTS_DESCRIPTION,predicate:function(e){return O.default.enableTTSCommand&&(e.isPrivate()||S.default.can(H.Permissions.SEND_TSS_MESSAGES,e))}},{command:"me",description:x.default.Messages.COMMAND_ME_DESCRIPTION},{command:"tableflip",description:x.default.Messages.COMMAND_TABLEFLIP_DESCRIPTION},{command:"unflip",description:x.default.Messages.COMMAND_TABLEUNFLIP_DESCRIPTION},{command:"shrug",description:x.default.Messages.COMMAND_SHRUG_DESCRIPTION},{command:"spoiler",description:x.default.Messages.COMMAND_SPOILER_DESCRIPTION},{command:"nick",description:x.default.Messages.COMMAND_NICK_DESCRIPTION,predicate:function(e){return!e.isPrivate()&&(S.default.can(H.Permissions.CHANGE_NICKNAME,e)||S.default.can(H.Permissions.MANAGE_NICKNAMES,e))}}]),ne=new RegExp("^("+te.filter(function(e){return e.isIntegration}).map(function(e){return e.command}).join("|")+")\\s(.+)","i");function re(e,t,n,r){var a=n.length>0?e.format({prefix:r(n)}):t;return z(A.default.Title,{title:a},"autocomplete-title-"+a)}function ae(e,t,n,r,o,i,l,u,s,d){if(null==n||0===n.length)return null;var c=n.map(function(e,n){return a.createElement(u,Y({onClick:o,onHover:r,selected:t===n,index:n},s(e,n)))});return[re(i,l,e,d),c]}re.displayName="renderHeader";var oe=z(A.default.Divider,{},"autocomplete-divider-1"),ie=z(A.default.Divider,{},"autocomplete-divider-2");function le(e,t,n,r,a){var s;return(s={MENTIONS:{matches:function(e,t){return D.default.matchSentinel(e,t,q)},queryResults:function(t){return D.default.queryMentionResults(t,e,a)},renderResults:function(e,n,r,a,o){var i=o.users,l=o.globals,u=o.roles;if(null==i||null==l||null==u||0===i.length&&0===l.length&&0===u.length)return null;var s=i.map(function(e,o){return z(A.default.User,{onClick:a,onHover:r,selected:n===o,index:o,user:e.user,nick:e.nick,status:e.status,hidePersonalInformation:t},e.user.id)}),d=l.map(function(e,t){return z(A.default.Generic,{onClick:a,onHover:r,selected:n===t+i.length,index:i.length+t,text:e.text,description:e.description},e.text)}),c=u.map(function(e,t){return z(A.default.Role,{onClick:a,onHover:r,selected:n===t+i.length+l.length,index:i.length+l.length+t,role:e},e.id)});return[re(x.default.Messages.MEMBERS_MATCHING,x.default.Messages.MEMBERS,e,function(e){return""+q+e}),s,i.length>0&&l.length>0?oe:null,d,i.length>0&&u.length>0||l.length>0&&u.length>0?ie:null,c]},getPlainText:function(e,n){var r=n.users,a=n.globals,o=n.roles;if(null==r||null==a||null==o)return"";var i=r[e],l=a[e-r.length],u=o[e-r.length-a.length];return null!=i?t?""+q+i.user.username:""+q+i.user.tag:null!=l?l.text:null!=u?""+q+u.name:""},getRawText:function(e,t){var n=t.users,r=t.globals,a=t.roles;if(null==n||null==r||null==a)return"";var o=n[e],i=r[e-n.length],l=a[e-n.length-r.length];return null!=o?"<@!"+o.user.id+">":null!=i?i.text:null!=l?"<@&"+l.id+">":""}},CHANNELS:{matches:function(t,n){return!e.isPrivate()&&D.default.matchSentinel(t,n,$)},queryResults:function(t){return D.default.queryChannelResults(t,e)},renderResults:function(e,t,n,r,a){return ae(e,t,a.channels,n,r,x.default.Messages.TEXT_CHANNELS_MATCHING,x.default.Messages.TEXT_CHANNELS,A.default.Channel,function(e){return{channel:e,key:e.id,category:v.default.getChannel(e.parent_id)}},function(e){return""+$+e})},getPlainText:function(e,t){var n=t.channels;if(null==n)return"";var r=n[e];if(null==r)return"";var a=_.default.getTextChannelNameDisambiguations(r.guild_id)[r.id];return"#"+(null!=a?a.name:r.name)},getRawText:function(e,t){var n=t.channels;if(null==n)return"";var r=n[e];return null==r?"":"<#"+r.id+">"}},EMOJIS:{matches:function(e,t){return t.length>1&&e===J},queryResults:function(t){return D.default.queryEmojiResults(t,e)},renderResults:function(e,t,n,r,a){return ae(e,t,a.emojis,n,r,x.default.Messages.EMOJI_MATCHING,x.default.Messages.EMOJI,A.default.Emoji,function(e){return{emoji:e,key:e.id||e.uniqueName||e.name,sentinel:J,guild:null!=e.guildId?g.default.getGuild(e.guildId):null}},function(e){return""+J+e})},getPlainText:function(e,t){var n=t.emojis;return null==n||null==n[e]?"":""+J+n[e].name+J},getRawText:function(e,t){var n=t.emojis;if(null==n||null==n[e])return"";var r=n[e],a=r.animated?"a":"";return r.managed||null==r.id?""+J+r.name+J:"<"+a+":"+(r.originalName||r.name)+":"+r.id+">"}},REACTIONS:{matches:function(e,t,n){return n&&e===Q&&t.startsWith(J)},queryResults:function(t){return D.default.queryEmojiResults(t.substring(1),e)},renderResults:function(e,t,n,r,a){return ae(e,t,a.emojis,n,r,x.default.Messages.REACTIONS_MATCHING,x.default.Messages.EMOJI,A.default.Emoji,function(e){return{emoji:e,key:e.id||e.uniqueName||e.name,sentinel:J}},function(e){return""+Q+e})},getPlainText:function(e,t){var n=t.emojis;return null==n||null==n[e]?"":""+Q+J+n[e].name+J},getRawText:function(){return this.getPlainText.apply(this,arguments)}}})[Z]={matches:function(e,t,n){return n&&(e===X||null!=t.match(ne))},queryResults:function(t){var n=t.match(ne);if(n){var r=n[1],a=l.default.findKey(H.ChannelTextAreaIntegrations,function(e){return e.command===r});return c.default.search(a,n[2]),{integrationQuery:n[2],integration:a}}var o=new RegExp("^"+w.default.escape(t),"i"),u=[],s=[];(0,l.default)(te).forEach(function(n){(null==n.predicate||n.predicate(e))&&(o.test(n.command)?u.push(n):(0,i.default)(t,n.command.toLowerCase())&&s.push(n))});var d=[],f=function(e){var t=e,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var a;if(n){if(r>=t.length)break;a=t[r++]}else{if((r=t.next()).done)break;a=r.value}var o=a;if(!(d.length<H.MAX_AUTOCOMPLETE_RESULTS))break;d.push(o)}};return f(u),f(s),{commands:d}},renderResults:function(e,t,a,i,l){if(null!=l&&null!=l.commands)return ae(e,t,l.commands,a,i,x.default.Messages.COMMANDS_MATCHING,x.default.Messages.COMMANDS,A.default.Command,function(e){return{command:e.command,description:e.description,key:e.command}},function(e){return""+X+e});if(r)return z(b.default,{className:B.default.spinner,type:b.default.Type.SPINNING_CIRCLE});if(null!=n&&null!=n.integrations){var s,d=e.match(ne);if(null==d||null==n.integrations)return null;var c=!1,f=n.integrations.map(function(e,n){switch(e.type){case H.ChannelTextAreaIntegrationTypes.GIF:return c=!0,z(A.default.GIFIntegration,{className:B.default.horizontalAutocomplete,onClick:i,onHover:a,selected:t===n,index:n,width:e.meta.width,height:e.meta.height,src:e.meta.src,url:e.meta.url},""+e.meta.url+e.meta.src)}}),p=te.find(function(e){return e.command===d[1]}),h=e.length>0&&null!=p&&null!=p.title?x.default.Messages.CONTENT_MATCHING.format({query:d[2],command:p.title}):null!=p&&null!=p.title?p.title:d[1];return[z(A.default.Title,{title:h},"autocomplete-title-"+h),c?z(M.default,{className:(0,o.default)((s={},s[B.default.horizontalAutocompletes]="Firefox"!==u.default.name,s))},"autocomplete-horizontal-completes",f):f]}},getPlainText:function(e,t){var n=t.commands,r=t.integrations;return null!=n&&null!=n[e]?""+X+n[e].command:null!=r&&null!=r[e]?r[e].meta.url:""},getRawText:function(){return this.getPlainText.apply(this,arguments)},onSelect:function(e,t,n){var r=n.commands,a=n.integrations;if(null==r&&null!=a){var o=e.match(ne);if(null==o)return;var i=o[1];h.default.trackWithMetadata(H.AnalyticEvents.SLASH_COMMAND_USED,{command:i}),"giphy"!==i&&"tenor"!==i||h.default.trackWithMetadata(H.AnalyticEvents.SEARCH_RESULT_SELECTED,{search_type:H.SearchTypes.GIF,index_num:t,source_object:"/"+i})}}},s}var ue=function(e){var t,n;function r(t){var n;(n=e.call(this,t)||this)._gifPickerRef=a.createRef(),n.handleFavorite=function(){n.setState({justFavorited:!0}),clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.setState({justFavorited:!1})},1500)},n.handleToggleEmojiPicker=function(){n.setState(function(e){return{isEmojiPickerActive:!e.isEmojiPickerActive}})},n.toggleGIFPicker=function(){n.setState(function(e){return{isGIFPickerActive:!e.isGIFPickerActive}})},n.handleCloseGIFPicker=function(){return n.setState({isGIFPickerActive:!1})},n.closeGIFPicker=function(e){if(n.state.isGIFPickerActive){for(var t=e.target;t instanceof Element;){if(t===n._gifPickerRef.current)return;if(t===n.getGIFPickerButton())return;t=t.parentNode}n.setState({isGIFPickerActive:!1}),null!=document.activeElement&&"BODY"!==document.activeElement.tagName||n.focus()}},n.handlePremiumGiftClick=function(e){var t=n.props.channel;(0,m.openPremiumSubscriptionNewPlanModal)({planId:H.SubscriptionPlans.PREMIUM_MONTH_TIER_2,isGift:!0,analyticsLocation:{page:t.isPrivate()?H.AnalyticsPages.DM_CHANNEL:H.AnalyticsPages.GUILD_CHANNEL,section:H.AnalyticsSections.CHANNEL_TEXT_AREA,object:H.AnalyticsObjects.BUTTON_ICON,objectType:H.AnalyticsObjectTypes.GIFT}})},n.renderEmojiPickerPopout=function(e){var t=e.closePopout,r=n.props.channel;return z(C.default,{onClick:function(e){return e.stopPropagation()}},void 0,z(G.default,{closePopout:t,channel:r,onSelectEmoji:n.handleSelectEmoji}))},n.renderGIFPreview=function(){return a.createElement(F.default,{onSelectGIF:n.handleSelectGIF,ref:n._gifPickerRef})},n.handleSelectGIF=function(e){n.setState({isGIFPickerActive:!1});var t=W(n)._ref;null!=t&&t.handleSelectGIF(e)},n.handleGIFPickerToggle=function(e){e.stopPropagation(),e.preventDefault(),n.toggleGIFPicker()},n.handleSelectEmoji=function(e,t){n._ref&&n._ref.insertEmoji(e,t),n.focus()},n.renderEmoji=function(e){return z(k.Emoji,{emoji:e,channel:n.props.channel})},n.renderCustomEmoji=function(e){return z(k.CustomEmoji,{emoji:e,channel:n.props.channel})},n.renderTextMention=function(e){return z(k.TextMention,{text:e,channel:n.props.channel})},n.renderUserMention=function(e){return z(k.UserMention,{id:e,channel:n.props.channel})},n.renderRoleMention=function(e){return z(k.RoleMention,{id:e,channel:n.props.channel})},n.renderChannelMention=function(e){return z(k.ChannelMention,{id:e,channel:n.props.channel})},n.renderers={renderEmoji:n.renderEmoji,renderCustomEmoji:n.renderCustomEmoji,renderTextMention:n.renderTextMention,renderUserMention:n.renderUserMention,renderRoleMention:n.renderRoleMention,renderChannelMention:n.renderChannelMention},l.default.bindAll(W(n),["handleSetRef","handleSaveCurrentText","handleFileUpload","handleInviteToPlay","handleInviteToSpectate","handleInviteToListen","handleInviteToWatch","handleAutocompleteQuery"]);var r={};return n.state={integration:null,integrationQuery:null,autocompleteOptions:le(t.channel,t.hidePersonalInformation,r,!1,t.canMentionEveryone),autocompletes:r,isAutocompletesLoading:!1,isGIFPickerActive:!1,justFavorited:!1,isEmojiPickerActive:!1},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.props.focused&&this.focus(),L.ComponentDispatch.subscribe(H.ComponentActions.FAVORITE_GIF,this.handleFavorite),L.ComponentDispatch.subscribe(H.ComponentActions.TOGGLE_EMOJI_POPOUT,this.handleToggleEmojiPicker)},o.componentDidUpdate=function(e,t){var n=this;this.grabIntegrationResults(e,t,function(){return n.grabAutocompleteOptions(e,t)}),this.fixFocus(e),!t.isGIFPickerActive&&this.state.isGIFPickerActive?this.setupGIFPickerHandlers():t.isGIFPickerActive&&!this.state.isGIFPickerActive&&this.cleanupGIFPickerHandlers()},o.componentWillUnmount=function(){this.cleanupGIFPickerHandlers(),L.ComponentDispatch.unsubscribe(H.ComponentActions.FAVORITE_GIF,this.handleFavorite),L.ComponentDispatch.unsubscribe(H.ComponentActions.TOGGLE_EMOJI_POPOUT,this.handleToggleEmojiPicker),clearTimeout(this._timeout)},o.fixFocus=function(e){e.focused&&!this.props.focused?this.blur():!e.focused&&this.props.focused&&this.focus()},o.focus=function(){this._ref&&this._ref.focus()},o.blur=function(){this._ref&&this._ref.blur()},o.setupGIFPickerHandlers=function(){document.addEventListener("click",this.closeGIFPicker,!0),document.addEventListener("contextmenu",this.closeGIFPicker,!0),L.ComponentDispatch.subscribe(H.ComponentActions.CLOSE_GIF_PICKER,this.handleCloseGIFPicker)},o.cleanupGIFPickerHandlers=function(){document.removeEventListener("click",this.closeGIFPicker,!0),document.removeEventListener("contextmenu",this.closeGIFPicker,!0),L.ComponentDispatch.unsubscribe(H.ComponentActions.CLOSE_GIF_PICKER,this.handleCloseGIFPicker)},o.getGIFPickerButton=function(){var e=this._ref;return null!=e?e.getGIFPickerButton():null},o.grabIntegrationResults=function(e,t,n){var r=this.state,a=r.integration,o=r.integrationQuery,i=r.autocompletes,l=E.default.getResults(a,o);null==l||null!=i&&i.integrations===l.results?n():this.setState({autocompletes:{integrations:l.results},isAutocompletesLoading:l.loading},n)},o.grabAutocompleteOptions=function(e,t){var n=this.props,r=n.channel,a=n.hidePersonalInformation,o=n.canMentionEveryone,i=this.state,l=i.autocompletes,u=i.isAutocompletesLoading;if(r!==e.channel||a!==e.hidePersonalInformation||!(null!=l&&null!=t.autocompletes||null==l&&null!=t.autocompletes||null!=l&&null!=t.autocompletes&&l.integrations!==t.autocompletes.integrations)||u!==t.isAutocompletesLoading||o!==e.canMentionEveryone){var s=le(r,a,l,u,o);this.setState({autocompleteOptions:s})}},o.getPlaceholder=function(){var e=this.props,t=e.disabled,n=e.placeholder;return t?x.default.Messages.NO_SEND_MESSAGES_PERMISSION_PLACEHOLDER:n},o.render=function(){var e=this,t=this.props,n=t.value,r=t.className,o=t.disabled,i=t.channel,l=t.type,u=t.canAttachFiles,s=t.canSendInvites,d=t.canPasteFiles,c=t.disableGIFPicker,f=t.shouldRenderPremiumGiftButton,p=t.activities,h=t.onChange,m=t.onResize,v=t.onKeyDown,y=t.onKeyUp,_=t.onBlur,g=t.onFocus,E=t.onSubmit,S=t.shouldShowTooltipOnFavorite,I=this.state,T=I.autocompletes,O=I.autocompleteOptions,A=I.isEmojiPickerActive,C=I.isGIFPickerActive,b=I.justFavorited;return z(R.BackgroundOpacityContext.Consumer,{},void 0,function(t){return z(M.default,{direction:M.default.Direction.VERTICAL},void 0,a.createElement(N.default,{ref:e.handleSetRef,value:n,className:r,backgroundOpacity:t.backgroundOpacity,disabled:o,placeholder:e.getPlaceholder(),channel:i,type:l,canAttachFiles:u,canSendInvites:s,canPasteFiles:d,activities:p,autocompleteOptions:O,autocompletes:T,renderCustomAutocomplete:C?e.renderGIFPreview:null,renderEmojiPickerPopout:e.renderEmojiPickerPopout,shouldRenderPremiumGiftButton:f,onChange:h,onResize:m,onKeyDown:v,onKeyUp:y,onSaveCurrentText:e.handleSaveCurrentText,onFileUpload:e.handleFileUpload,onInviteToPlay:e.handleInviteToPlay,onInviteToSpectate:e.handleInviteToSpectate,onInviteToListen:e.handleInviteToListen,onInviteToWatch:e.handleInviteToWatch,onOpenAttachPopout:e.handleOpenAttachPopout,onGIFPickerToggle:c?null:e.handleGIFPickerToggle,onEmojiPickerToggle:e.handleToggleEmojiPicker,isGIFPickerActive:C,isEmojiPickerActive:A,justFavorited:b,shouldShowTooltipOnFavorite:S,onPremiumGiftClick:e.handlePremiumGiftClick,onBlur:_,onFocus:g,onAutocompleteQuery:e.handleAutocompleteQuery,onSubmit:E,renderers:e.renderers}))})},o.handleSetRef=function(e){this._ref=e},o.handleSaveCurrentText=function(e){d.default.saveDraft(e,this.props.value)},o.handleFileUpload=function(e){(0,U.promptToUpload)(e,this.props.channel)},o.handleStartFileUpload=function(){this._ref&&this._ref.handleStartFileUpload()},o.handleInviteToPlay=function(e){var t=this.props.channel;P.default.track(H.AnalyticEvents.OPEN_MODAL,{type:"Send Join Invite",application_id:e.application_id,location:H.AnalyticsSections.CHANNEL_TEXT_AREA}),f.default.push(function(){return z(j.default,{activity:e,channel:t,activityActionType:H.ActivityActionTypes.JOIN})})},o.handleInviteToSpectate=function(e){var t=this.props.channel;P.default.track(H.AnalyticEvents.OPEN_MODAL,{type:"Send Spectate Invite",application_id:e.application_id,location:H.AnalyticsSections.CHANNEL_TEXT_AREA}),f.default.push(function(){return z(j.default,{activity:e,channel:t,activityActionType:H.ActivityActionTypes.SPECTATE})})},o.handleInviteToListen=function(e){var t=this.props.channel;P.default.track(H.AnalyticEvents.OPEN_MODAL,{type:"Send Listen Invite",location:H.AnalyticsSections.CHANNEL_TEXT_AREA}),f.default.push(function(){return z(j.default,{activity:e,channel:t,activityActionType:H.ActivityActionTypes.LISTEN})})},o.handleInviteToWatch=function(e){var t=this.props.channel;P.default.track(H.AnalyticEvents.OPEN_MODAL,{type:"Send Watch Invite",location:H.AnalyticsSections.CHANNEL_TEXT_AREA}),f.default.push(function(){return z(j.default,{activity:e,channel:t,activityActionType:H.ActivityActionTypes.WATCH})})},o.handleInsertText=function(e){var t=e.content;this._ref&&this._ref.appendText(t),this.focus()},o.handleOpenAttachPopout=function(){P.default.track(H.AnalyticEvents.OPEN_POPOUT,{type:"Send Attachment"})},o.handleAutocompleteQuery=function(e,t,n){var r=e.queryResults(t);n===Z&&null==r.commands?this.setState({autocompletes:null,integrationQuery:r.integrationQuery,integration:r.integration}):this.setState({autocompletes:r,integrationQuery:null})},r}(a.PureComponent);ue.displayName="ChannelTextAreaContainer",ue.defaultProps={type:H.TextareaTypes.NORMAL,disableGIFPicker:!0,disableActivity:!1,disableAttachments:!1,disableImagePaste:!1,disableInvites:!1,focused:!1,shouldRenderPremiumGiftButton:!1};var se=(0,p.default)(function(e,t){var n;return(n={})[H.ComponentActions.UPLOAD_FILE]=t.handleStartFileUpload.bind(t),n[H.ComponentActions.INSERT_TEXT]=t.handleInsertText.bind(t),n[H.ComponentActions.TOGGLE_GIF_PICKER]=t.toggleGIFPicker,n})(ue),de=s.default.connectStores([E.default,S.default,I.default,T.default,y.default],function(e){var t=e.channel,n=e.disableAttachments,r=e.disableImagePaste,a=e.disableActivity,o=e.disableInvites,i=e.type,l=t.isPrivate(),u=l||S.default.can(H.Permissions.ATTACH_FILES,t),s=l||S.default.can(H.Permissions.EMBED_LINKS,t);return{query:E.default.getQuery(),canAttachFiles:!n&&u,canPasteFiles:!r&&u,canSendInvites:!o&&s,disabled:!l&&!S.default.can(H.Permissions.SEND_MESSAGES,t),canMentionEveryone:l||S.default.can(H.Permissions.MENTION_EVERYONE,t),activities:a?null:I.default.getActivities(),hidePersonalInformation:T.default.hidePersonalInformation,disableGIFPicker:null!=i&&i!==H.TextareaTypes.NORMAL,shouldShowTooltipOnFavorite:y.default.shouldShowTooltipOnFavorite()}},{forwardRef:!0})(se);t.default=de},6748:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return function(t){var n,i;return i=n=function(n){var i,l;function u(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r))||this)._subscriptions=null,e.handleSetRef=function(t){e._ref=t},e}l=n,(i=u).prototype=Object.create(l.prototype),i.prototype.constructor=i,i.__proto__=l;var s=u.prototype;return s.componentDidMount=function(){for(var t in this._subscriptions=e(this.props,this._ref),this._subscriptions)null!=this._subscriptions&&this._subscriptions.hasOwnProperty(t)&&a.ComponentDispatch.subscribe(t,this._subscriptions[t])},s.componentWillUnmount=function(){for(var e in this._subscriptions)null!=this._subscriptions&&this._subscriptions.hasOwnProperty(e)&&a.ComponentDispatch.unsubscribe(e,this._subscriptions[e])},s.render=function(){return r.createElement(t,o({ref:this.handleSetRef},this.props))},u}(r.Component),n.displayName="componentDispatchSubscriber("+(t.displayName||t.name||"Component")+")",i}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),a=n(80);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},6749:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(6)),a=i(n(3)),o=i(n(2));n(1);function i(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u={},s={favorites:[],timesFavorited:0};var d=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.initialize=function(e){null!=e&&(s=e).favorites.forEach(function(e){u[e.url]=e})},o.getState=function(){return s},o.getFavorites=function(){return s.favorites},o.shouldShowTooltipOnFavorite=function(){return s.timesFavorited<=2},o.getIsFavorite=function(e){return null!=u[e]},o.getRandomFavorite=function(){return r.default.sample(s.favorites)},a}(a.default.PersistedStore);d.persistKey="GIFFavoritesStore",d.migrations=[function(e){return null==e?{favorites:[],timesFavorited:0}:Array.isArray(e)?{favorites:e,timesFavorited:0}:e},function(e){return Array.isArray(e.favorites)?e:{favorites:[],timesFavorited:0}}];var c=new d(o.default,{GIF_FAVORITE_ADD:function(e){var t=e.gif;if(null!=u[t.url])return!1;s=l({},s,{favorites:[t].concat(s.favorites)}),u[t.url]=t,s.timesFavorited+=1},GIF_FAVORITE_REMOVE:function(e){var t=e.url;if(!delete u[t])return!1;var n=s.favorites,r=n.findIndex(function(e){var n=e.url;return t===n});if(null==r)return!1;s.favorites=n.slice(0,r).concat(n.slice(r+1,n.length))}});t.default=c},6750:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(2))&&r.__esModule?r:{default:r},o=n(1);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=i({},n(8422).default,{cancel:function(e){a.default.dispatch({type:o.ActionTypes.UPLOAD_CANCEL_REQUEST,file:e})}});t.default=l},6751:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(3)),a=o(n(2));n(1);function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l={matureAgree:!1,muted:!0};var u=new(function(e){var t,n,r,a,o;function u(){return e.apply(this,arguments)||this}return n=e,(t=u).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r=u,(a=[{key:"didMatureAgree",get:function(){return l.matureAgree}},{key:"isDirectoryMuted",get:function(){return l.muted}}])&&i(r.prototype,a),o&&i(r,o),u}(r.default.Store))(a.default,{APPLICATION_STORE_MATURE_AGREE:function(e){l.matureAgree=!0},APPLICATION_STORE_DIRECTORY_MUTE:function(e){l.muted=!0},APPLICATION_STORE_DIRECTORY_UNMUTE:function(e){l.muted=!1}});t.default=u},6848:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=f(n(3)),a=f(n(2)),o=f(n(355)),i=f(n(273)),l=f(n(884)),u=f(n(6608)),s=f(n(6609)),d=f(n(11)),c=n(1);function f(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h,m,v=function(){return{name:"",icon:null,region:u.default.getOptimalRegionId()}},y=!1,_=c.FormStates.CLOSED,g={},E=v(),S=c.CreateGuildModalScreens.Choose,I=!1;function T(){E=v(),h=null,_=c.FormStates.CLOSED,S=c.CreateGuildModalScreens.Choose}var O=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(l.default,d.default,i.default,o.default,u.default,s.default)},a.isOpen=function(){return!s.default.hasAction()&&(y&&_!==c.FormStates.CLOSED)},a.getProps=function(){return{submitting:_===c.FormStates.SUBMITTING,errors:g,code:h,guild:E,screen:S,optimalRegionId:m,nuf:I}},r}(r.default.Store))(a.default,{DISPLAYED_INVITE_SHOW:function(e){T()},CREATE_GUILD_MODAL_OPEN:function(e){_=c.FormStates.OPEN,I=e.nuf||!1,S=e.screen||c.CreateGuildModalScreens.Choose,E=v(),g={}},CREATE_GUILD_MODAL_SET_SCREEN:function(e){S=e.screen},CREATE_GUILD_MODAL_UPDATE:function(e){null!=h&&(h=null),E=p({},E,e.guild)},CREATE_GUILD_MODAL_SUBMIT:function(e){_=c.FormStates.SUBMITTING},CREATE_GUILD_MODAL_SUBMIT_FAILURE:function(e){_=c.FormStates.OPEN,g=e.errors},CREATE_GUILD_MODAL_CLOSE:function(e){return T()},LOAD_REGIONS:function(e){if(null==E||null!=e.guildId)return!1;m=E.region||u.default.getOptimalRegionId(),E=p({},E,{region:m})},CONNECTION_OPEN:function(e){y=!0},LOGOUT:function(e){y=!1},USER_REQUIRED_ACTION_UPDATE:function(e){return!0}});t.default=O},6849:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.JUMP_TO_GUILD=void 0;var r=u(n(39)),a=u(n(153)),o=u(n(340)),i=u(n(36)),l=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var s={binds:function(){for(var e=[],t=1;t<10;t++)e.push("mod+"+t);return e}(),global:!0,action:function(e,t){var n,u=parseInt(t.split("+")[1],10);if((0===u&&(u=10),u)&&(n=1===u?l.ME:o.default.getFlattenedGuildIds()[u-2])){var s=r.default.getChannelId(n);return n===l.ME&&null==a.default.getGuildId()&&(s=null),i.default.transitionTo(l.Routes.CHANNEL(n,s)),!1}}};t.JUMP_TO_GUILD=s;var d={JUMP_TO_GUILD:s};t.default=d},6850:function(e,t,n){"use strict";t.__esModule=!0,t.AutocompleterResultTypes=t.FindResultDirections=t.HeaderRecord=void 0;var r,a=(r=n(82))&&r.__esModule?r:{default:r};t.HeaderRecord=function(e){this.id=e,this.text=e};var o=(0,a.default)({UP:null,DOWN:null});t.FindResultDirections=o;var i=(0,a.default)({GUILD:null,TEXT_CHANNEL:null,GROUP_DM:null,VOICE_CHANNEL:null,USER:null,HEADER:null,APPLICATION:null});t.AutocompleterResultTypes=i},6851:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=A(n(6)),a=A(n(27)),o=A(n(2)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(6556)),l=A(n(137)),u=n(67),s=A(n(10)),d=A(n(14)),c=A(n(6852)),f=A(n(87)),p=A(n(19)),h=A(n(222)),m=A(n(39)),v=A(n(153)),y=A(n(188)),_=A(n(11)),g=A(n(904)),E=A(n(53)),S=A(n(25)),I=A(n(6853)),T=n(1),O=A(n(4));function A(e){return e&&e.__esModule?e:{default:e}}var N,C="seenQSTutorial",M=5,b=100,R=0,P=!1,D=!1,L=null,w=[],U=null;function k(e){var t,n,r=d.default.getChannel(e);if(null==r)return null;switch(r.type){case T.ChannelTypes.DM:if(null!=L&&L!==i.AutocompleterResultTypes.USER)return null;if(n=i.AutocompleterResultTypes.USER,t=(0,l.default)(r),null==(r=_.default.getUser(r.getRecipientId())))return null;break;case T.ChannelTypes.GROUP_DM:if(null!=L&&L!==i.AutocompleterResultTypes.GROUP_DM)return null;n=i.AutocompleterResultTypes.GROUP_DM,t=(0,l.default)(r);break;default:if(null!=L&&L!==i.AutocompleterResultTypes.TEXT_CHANNEL)return null;n=i.AutocompleterResultTypes.TEXT_CHANNEL,t=(0,l.default)(r)}return(0,i.createAutocompleterResult)(n,r,0,t)}function G(){var e=v.default.getGuildId()||void 0,t=m.default.getChannelId()||void 0,n=m.default.getLastSelectedChannelId()||void 0;switch(L){case i.AutocompleterResultTypes.USER:var a=s.default.getId();return g.default.getRecentlyTalked(t,100).filter(function(e){return e.user.id!==a}).map(function(e){var t=e.user,n=e.comparator,r=e.score;return(0,i.createAutocompleterResult)(i.AutocompleterResultTypes.USER,t,r,n)});case i.AutocompleterResultTypes.APPLICATION:return g.default.queryApplications("",100,!0).map(function(e){var t=e.application,n=e.score,r=e.comparator;return(0,i.createAutocompleterResult)(i.AutocompleterResultTypes.APPLICATION,t,n,r)});case i.AutocompleterResultTypes.GUILD:return g.default.queryGuilds("",100,!0).map(function(e){var t=e.guild,n=e.score,r=e.comparator;return(0,i.createAutocompleterResult)(i.AutocompleterResultTypes.GUILD,t,n,r)});case i.AutocompleterResultTypes.TEXT_CHANNEL:return g.default.queryChannels("",v.default.getGuildId(),100,!0).map(function(e){var t=e.channel,n=e.score,r=e.comparator;return(0,i.createAutocompleterResult)(i.AutocompleterResultTypes.TEXT_CHANNEL,t,n,r)});case i.AutocompleterResultTypes.VOICE_CHANNEL:return g.default.queryChannels("",v.default.getGuildId(),100,!0,function(){return!0},T.ChannelTypes.GUILD_VOICE).map(function(e){var t=e.channel,n=e.score,r=e.comparator;return(0,i.createAutocompleterResult)(i.AutocompleterResultTypes.TEXT_CHANNEL,t,n,r)})}var o=[];if(n){var l=k(n);l&&o.push((0,i.createHeaderResult)(O.default.Messages.QUICKSWITCHER_LAST_CHANNEL),l)}var u,p=function(e){var t=[];return c.default.getRecentlyEditedDrafts().forEach(function(n){var r=n.channelId;if(!e(r)){var a=k(r);null!=a&&t.push(a)}}),t}(function(e){return e===t||e===n});p.length>0&&(u=o).push.apply(u,[(0,i.createHeaderResult)(O.default.Messages.QUICKSWITCHER_DRAFTS)].concat(p));var _=(0,r.default)(d.default.getChannels()).values().filter(function(e){var r=e.id;return r!==t&&r!==n&&h.default.getMentionCount(r)>0}).map(function(e){return k(e.id)}).filter(function(e){return!!e}).value();if(_.length&&(o.push((0,i.createHeaderResult)(O.default.Messages.QUICKSWITCHER_MENTIONS)),o=o.concat(_)),null!=e){var E=f.default.getSelectableChannelIds(e).filter(function(e){var r=d.default.getChannel(e);return null!=r&&e!==t&&e!==n&&!y.default.isChannelMuted(r.guild_id,e)&&h.default.hasUnread(e)}).map(function(e){return k(e)}).filter(function(e){return e});E.length&&(o.push((0,i.createHeaderResult)(O.default.Messages.QUICKSWITCHER_UNREAD_CHANNELS)),o=o.concat(E))}return(0,r.default)(o).uniqBy(function(e){return e.record.id}).value()}function F(e,t){if(e.length>0)switch(L){case i.AutocompleterResultTypes.USER:var n=p.default.getGuild(v.default.getGuildId());w=[(0,i.createHeaderResult)(null!=n?O.default.Messages.QUICKSWITCHER_QUERYMODE_USERS_IN_GUILD.format({name:n.name}):O.default.Messages.QUICKSWITCHER_QUERYMODE_USERS)].concat(e);break;case i.AutocompleterResultTypes.TEXT_CHANNEL:w=[(0,i.createHeaderResult)(O.default.Messages.QUICKSWITCHER_QUERYMODE_TEXT_CHANNELS)].concat(e);break;case i.AutocompleterResultTypes.VOICE_CHANNEL:w=[(0,i.createHeaderResult)(O.default.Messages.QUICKSWITCHER_QUERYMODE_VOICE_CHANNELS)].concat(e);break;case i.AutocompleterResultTypes.GUILD:w=[(0,i.createHeaderResult)(O.default.Messages.QUICKSWITCHER_QUERYMODE_GUILDS)].concat(e);break;case i.AutocompleterResultTypes.APPLICATION:w=[(0,i.createHeaderResult)(O.default.Messages.QUICKSWITCHER_QUERYMODE_APPLICATIONS)].concat(e);break;default:w=e}else w=e;if(t!==U)U=t,R=(0,i.findNextSelectedResult)(i.FindResultDirections.DOWN,-1,w);else{var r=w[R];null!=r&&r.type===i.AutocompleterResultTypes.HEADER&&(R=(0,i.findNextSelectedResult)(i.FindResultDirections.DOWN,R,w))}x.emitChange()}function j(e){var t=e.query,n=e.queryMode,r=v.default.getGuildId()||void 0,a=m.default.getChannelId()||void 0,o=new Set(["user:"+s.default.getId()]);null!=a&&o.add("channel:"+a),null!=r&&o.add("guild:"+r),N=N||new i.default(function(e,t){return F(""===t.trim()?G():e,t)},null,null!=n?b:M,{frecencyBoosters:!0,blacklist:o}),U=null,L=n,N.search(t)}function H(){U=null,null!=N&&(N.destroy(),N=null)}var x=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.initialize=function(){this.waitFor(E.default),this.syncWith([S.default],function(){return!0}),P=a.default.get(C)||!1},o.isOpen=function(){return null!=N},o.getResultTotals=function(e){return null==N?0:null==e?N.results.reduce(function(e,t){return t.type!==i.AutocompleterResultTypes.HEADER?e+1:e},0):N.results.reduce(function(t,n){return n.type===e?t+1:t},0)},o.channelNoticePredicate=function(e,t,n){var r=Date.now()-n>=T.CHANNEL_NOTICE_SHOW_DELAY;return D&&e&&r},o.getFrequentGuilds=function(){return null!=N?N.queryGuilds("",100):null},o.getProps=function(){return{theme:S.default.theme,query:null!=N?N.query:"",queryMode:L,results:w,selectedIndex:R,seenTutorial:P}},r}(I.default))(o.default,{CONNECTION_OPEN:function(e){var t=e.guilds,n=e.channels;D=t.length>=3||n.filter(function(e){var t=e.type;return(0,u.isPrivate)(t)}).length>=20},QUICKSWITCHER_SHOW:j,SHOW_ACTION_SHEET_QUICK_SWITCHER:j,QUICKSWITCHER_HIDE:function(e){return H()},OVERLAY_SET_INPUT_LOCKED:function(e){return H()},HIDE_ACTION_SHEET_QUICK_SWITCHER:function(e){return H()},QUICKSWITCHER_SEARCH:function(e){var t=e.query,n=e.queryMode;if(null==N)return!1;var r=v.default.getGuildId()||null;if(L!==n){N.setResultTypes(null!=n?[n]:null),N.setLimit(null!=n?b:M);var a=v.default.getGuildId()||void 0;n===i.AutocompleterResultTypes.USER&&null!=a?N.setOptions({userFilters:{guild:a,friends:!0}},!0):n===i.AutocompleterResultTypes.VOICE_CHANNEL?N.setOptions({voiceChannelGuildFilter:null},!0):N.setOptions({userFilters:null,voiceChannelGuildFilter:void 0},!0)}L=n,N.search(t,L===i.AutocompleterResultTypes.USER?r:void 0)},QUICKSWITCHER_SELECT:function(e){R=e.selectedIndex},QUICKSWITCHER_SWITCH_TO:function(e){return function(){if(P)return!1;P=!0,a.default.set(C,!0)}()}}),B=x;t.default=B},6852:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(6)),a=u(n(3)),o=u(n(2)),i=u(n(14)),l=u(n(273));n(1);function u(e){return e&&e.__esModule?e:{default:e}}var s=2500,d={};function c(e){return e.length>s&&(e=e.substr(0,s)),e}function f(e){var t=e.channelId,n=e.draft;return n?d[t]={timestamp:Date.now(),draft:c(n)}:delete d[t],!1}function p(){if(!(l.default.totalUnavailableGuilds>0))for(var e in d)null==i.default.getChannel(e)&&delete d[e]}var h=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.initialize=function(e){d=e||{},this.waitFor(i.default,l.default)},o.getState=function(){return d},o.getRecentlyEditedDrafts=function(){return(0,r.default)(d).toPairs().map(function(e){var t=e[0],n=e[1];return{channelId:t,timestamp:n.timestamp,draft:n.draft}}).sortBy(function(e){return-e.timestamp}).value()},o.getDraft=function(e){var t=d[e];return null==t?"":t.draft},a}(a.default.PersistedStore);h.persistKey="DraftStore";var m=new h(o.default,{CONNECTION_OPEN:function(e){return p(),!1},GUILD_DELETE:function(e){return p(),!1},CHANNEL_DELETE:function(e){var t=e.channel.id;return null!=d[t]&&delete d[t],!1},DRAFT_SAVE:function(e){f(e)},DRAFT_CHANGE:f});t.default=m},6853:function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=void 0;var a=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.channelNoticePredicate=function(e,t,n){return!1},r}(((r=n(3))&&r.__esModule?r:{default:r}).default.Store);t.default=a},6855:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(2))&&r.__esModule?r:{default:r},o=n(1);var i={setEnabled:function(e){this.update({enabled:e})},update:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];a.default.dispatch({type:o.ActionTypes.STREAMER_MODE_UPDATE,key:r,value:e[r]})}}};t.default=i},6861:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.__esModule=!0,t.default=t.Token=t.QueryTokenizer=t.NON_TOKEN_TYPE=void 0;var a=/.+/g;function o(e,t,n){if(!t)return null;for(var r=0;r<t.length;r++){var a=t[r],o=i(e.match(a.regex),n),l=void 0;if(o){var s=a.cache;if(s&&(l=s.get(o[0]))&&((l=new u(l)).start=o.index),!l){if(l=new u(o,a.type),a.validator&&!a.validator(l))continue;s&&!s.has(o[0])&&s.set(o[0],l)}return l}}return null}function i(e,t){if(!e)return null;var n=[].concat(e);return n.index=t,n}t.NON_TOKEN_TYPE="NON_TOKEN";var l=function(){function e(e,t){var n=this;void 0===e&&(e=[]),this.reset(e,t),e.forEach(function(e){return n.addRule(e)})}var t=e.prototype;return t.reset=function(e){this._rules=[],this._followers={},this._nonTokenType=e||"NON_TOKEN"},t.addRule=function(e){var t,n=this,r=e.type,a=e.follows,o=e.validator,i=e.regex;"^"!==i.source.charAt(0)&&(i=new RegExp("^"+i.source,i.flags)),o&&(t=new Map),a?a.forEach(function(e){n._followers[e]||(n._followers[e]=[]),n._followers[e].push({regex:i,type:r,validator:o,cache:t})}):this._rules.push({regex:i,type:r,validator:o,cache:t})},t.tokenize=function(e){for(var t,n=e,r="",o=0,l=[];n.length;){var s=this._getMatch(n,t,o+r.length);s?(r&&l.push(new u(i(r.match(a),o),this._nonTokenType)),t=s,l.push(s),o+=t.length+r.length,n=n.substring(t.length),r=""):(r+=n[0],n=n.substring(1))}return r&&l.push(new u(i(r.match(a),o),this._nonTokenType)),l},t.clearCache=function(){for(var e in this._rules.forEach(function(e){return e.cache&&e.cache.clear()}),this._followers){this._followers[e].forEach(function(e){return e.cache&&e.cache.clear()})}},t._getMatch=function(e,t,n){var r,a=t?t.type:null;return t&&t.end===n&&(r=o(e,this._followers[a],n)),r||(r=o(e,this._rules,n)),r},e}();t.QueryTokenizer=l;var u=function(){function e(t,n){t instanceof e?(this.match=[].concat(t.match),this.start=t.start,this.type=t.type,t._data&&(this._data=t._data)):(this.match=[].concat(t),this.start=t.index||0,this.type=n)}var t,n,a,o=e.prototype;return o.valueOf=function(){return this.match[0]},o.getFullMatch=function(){return this.match[0]},o.getMatch=function(e){return void 0===e&&(e=0),this.match[e]},o.setData=function(e,t){this._data||(this._data=new Map),this._data.set(e,t)},o.getData=function(e){if(this._data)return this._data.get(e)},t=e,(n=[{key:"end",get:function(){return this.start+this.length}},{key:"length",get:function(){return this.match[0].length}}])&&r(t.prototype,n),a&&r(t,a),e}();t.Token=u,l.NON_TOKEN_TYPE="NON_TOKEN",l.Token=u;var s=l;t.default=s},6862:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(3)),a=u(n(27)),o=u(n(2)),i=u(n(6636)),l=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var s="ChannelSectionStore",d=null,c=null;function f(){var e;if(i.default.isActive()&&(e=l.ChannelSections.SEARCH),c===e)return!1;c=e}var p=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.initialize=function(){d=a.default.get(s)||l.ChannelSections.MEMBERS},o.getSection=function(){return c||d},r}(r.default.Store))(o.default,{CHANNEL_TOGGLE_SECTION:function(e){var t=e.section;d===t?null==c&&(d=l.ChannelSections.NONE):d=t,c=null,a.default.set(s,d)},SEARCH_START:function(e){return f()},SEARCH_INDEXING:function(e){return f()},SEARCH_FINISH:function(e){return f()},SEARCH_EDITOR_STATE_CLEAR:function(e){return f()},SEARCH_EDITOR_STATE_CHANGE:function(e){return f()},CHANNEL_SELECT:function(e){return f()}});t.default=p},6863:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(12)),a=s(n(2)),o=s(n(142)),i=s(n(7674)),l=n(1),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var d={pinMessage:function(e,t){var n=e.id,a=e.name;r.default.put({url:l.Endpoints.PIN(n,t)}).catch(function(){var t;t=e.isPrivate()?u.default.Messages.PIN_MESSAGE_TOO_MANY_BODY_PRIVATE_CHANNEL.format({maxPins:l.MAX_PINS_PER_CHANNEL}):u.default.Messages.PIN_MESSAGE_TOO_MANY_BODY.format({maxPins:l.MAX_PINS_PER_CHANNEL,channelName:a}),o.default.show({title:u.default.Messages.PIN_MESSAGE_TOO_MANY_TITLE,body:t,confirmText:u.default.Messages.OKAY})})},unpinMessage:function(e,t){r.default.delete({url:l.Endpoints.PIN(e.id,t)}).catch(function(){return o.default.show({title:u.default.Messages.UNPIN_MESSAGE_FAILED_TITLE,body:u.default.Messages.UNPIN_MESSAGE_FAILED_BODY,confirmText:u.default.Messages.TRY_AGAIN,cancelText:u.default.Messages.CANCEL,onConfirm:d.unpinMessage.bind(d,e,t)})})},ackPins:function(e){a.default.dirtyDispatch({type:l.ActionTypes.CHANNEL_PINS_ACK,channelId:e})},fetchPins:function(e){var t=i.default.getPinnedMessages(e);t&&(t.loaded||t.loading)||(a.default.dirtyDispatch({type:l.ActionTypes.LOAD_PINNED_MESSAGES,channelId:e}),r.default.get({url:l.Endpoints.PINS(e),retries:2}).then(function(t){a.default.dispatch({type:l.ActionTypes.LOAD_PINNED_MESSAGES_SUCCESS,messages:t.body,channelId:e})},function(){a.default.dispatch({type:l.ActionTypes.LOAD_PINNED_MESSAGES_FAILURE,channelId:e})}))}},c=d;t.default=c},6865:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=null!=e.webhookId?a.default.parseAllowLinks:a.default.parse,r={channelId:e.channel_id,mentionChannels:e.mentionChannels},o=!1,l=n(e.content,!0,r,function(e,n){return e=i(e,n),o=u(e,n),null!=t?t(e):e});return{hasSpoilerEmbeds:o,content:l}},t.renderMessageMarkupToAST=function(e,t){var n=null!=e.webhookId?a.default.parseAllowLinksToAST:a.default.parseToAST,r={channelId:e.channel_id,mentionChannels:e.mentionChannels},o=!1,l=n(e.content,!0,r,function(e,n){return e=i(e,n),o=u(e,n),null!=t?t(e):e});return{hasSpoilerEmbeds:o,content:l}};var r,a=(r=n(878))&&r.__esModule?r:{default:r};var o=27;function i(e,t){return t?l(e):("paragraph"===e[0].type&&e[0].content instanceof Array&&(e[0].content=l(e[0].content)),e)}function l(e){if(e.some(function(e){return"emoji"!==e.type&&"customEmoji"!==e.type&&("string"!=typeof e.content||""!==e.content.trim())}))return e;var t=0;return e.forEach(function(e){if("emoji"!==e.type&&"customEmoji"!==e.type||(t+=1),t>o)return!1}),t>o?e:(e.forEach(function(e){e.jumboable=!0}),e)}function u(e,t){return t?s(e):"paragraph"===e[0].type&&e[0].content instanceof Array&&s(e[0].content)}function s(e){return e.some(function(e){return"spoiler"===e.type&&Array.isArray(e.content)&&e.content.some(function(e){return"link"===e.type})})}},6866:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=m(n(8)),i=m(n(30)),l=m(n(329)),u=m(n(373)),s=m(n(58)),d=m(n(15)),c=n(1),f=m(n(4)),p=m(n(5945)),h=m(n(6223));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var y=function(){return v("div",{className:h.default.premiumPromo},void 0,v(s.default,{onClick:function(){d.default.track(c.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location_page:null,location_section:c.AnalyticsSections.FILE_UPLOAD_POPOUT}),i.default.pop(),l.default.open(c.UserSettingsSections.PREMIUM)},className:h.default.content},void 0,f.default.Messages.PREMIUM_UPLOAD_PROMO.format({maxUploadPremium:f.default.Messages.FILE_UPLOAD_LIMIT_PREMIUM_TIER_2}),v("img",{alt:"",className:h.default.navArrow,src:n(8418)})))};y.displayName="PremiumPromo";var _=v(y,{}),g=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props.promo;return v("div",{className:p.default.uploadModalIn},void 0,v("div",{className:(0,o.default)(p.default.uploadDropModal,p.default.error)},void 0,v("div",{className:p.default.inner},void 0,v("div",{className:p.default.icons},void 0,v("div",{className:p.default.wrapOne},void 0,v("div",{className:(0,o.default)(p.default.icon,p.default.one)})),v("div",{className:p.default.wrapThree},void 0,v("div",{className:(0,o.default)(p.default.icon,p.default.three)})),v("div",{className:p.default.wrapTwo},void 0,v("div",{className:(0,o.default)(p.default.icon,p.default.two)}))),v("div",{className:p.default.title},void 0,this.props.title),v("div",{className:p.default.instructions},void 0,this.props.help),e?_:null)))},r}(a.Component);g.displayName="UploadError",g.modalConfig={backdropStyle:u.default.Styles.DARK,backdropInstant:!0};var E=g;t.default=E},6867:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return{isEligible:t,subscribe:function(n,a){var o=t(n),i=new r.BatchedStoreListener(e,function(){var e=t(n);e!==o&&a(o=e)});return i.attach("FluxStoreExperimentClientFilter"),function(){return i.detach()}}}};var r=n(3)},6868:function(e,t,n){"use strict";t.__esModule=!0,t.trackSearchStart=v,t.trackSearchResultViewed=y,t.search=function(e,t,n){void 0===n&&(n=!1);""===e?E():(i.default.dispatch({type:f.ActionTypes.GIF_PICKER_QUERY,query:e}),n?_(e,t):g(e,t))},t.fetchSuggestions=function(e){if(""===e||null==e)return;o.default.get({url:f.Endpoints.GIFS_SUGGEST,query:{q:e,provider:f.GIFProviders.TENOR,limit:5,locale:u.default.locale}}).then(function(t){var n=t.body;i.default.dispatch({type:f.ActionTypes.GIF_PICKER_SUGGESTIONS_SUCCESS,query:e,items:n})})},t.resetSearch=E,t.trackSelectGIF=function(e){var t=e.type,n=e.index,r=e.offset,a=e.limit,i=e.results,u=e.totalResults,d=e.query,p=e.gifId,m=(0,c.calculateAnalyticsMetadata)(s.default.getAnalyticsID(),t,{offset:r,limit:a,results:i,totalResults:u});l.default.trackWithMetadata(f.AnalyticEvents.SEARCH_RESULT_SELECTED,h({},m,{index_num:n,source_object:"GIF Picker"})),null!=p&&o.default.post({url:f.Endpoints.GIFS_SELECT,body:{id:p,q:d}})},t.initializeSearch=function(){var e=a.default.v4().replace(m,"");l.default.trackWithMetadata(f.AnalyticEvents.SEARCH_OPENED,{search_type:f.SearchTypes.GIF,load_id:e}),i.default.dispatch({type:f.ActionTypes.GIF_PICKER_INITIALIZE,analyticsID:e})},t.fetchTrending=function(){o.default.get({url:f.Endpoints.GIFS_TRENDING,query:{provider:f.GIFProviders.TENOR,locale:u.default.locale}}).then(function(e){var t=e.body,n=t.categories,r=t.gifs;i.default.dispatch({type:f.ActionTypes.GIF_PICKER_TRENDING_FETCH_SUCCESS,trendingCategories:n,trendingGIFPreview:r[0]})})},t.fetchTrendingGIFs=function(){var e=Date.now();v(f.GIFPickerResultTypes.TRENDING_GIFS),o.default.get({url:f.Endpoints.GIFS_TRENDING_GIFS,query:{media_format:s.default.getSelectedFormat(),provider:f.GIFProviders.TENOR,locale:u.default.locale}}).then(function(t){var n=t.body;y(n,f.GIFPickerResultTypes.TRENDING_GIFS,{startTime:e}),i.default.dispatch({type:f.ActionTypes.GIF_PICKER_QUERY_SUCCESS,items:n})},function(){i.default.dispatch({type:f.ActionTypes.GIF_PICKER_QUERY_FAILURE})})},t.addFavoriteGIF=function(e){i.default.dispatch({type:f.ActionTypes.GIF_FAVORITE_ADD,gif:e}),d.default.track(f.AnalyticEvents.GIF_FAVORITED)},t.removeFavoriteGIF=function(e){i.default.dispatch({type:f.ActionTypes.GIF_FAVORITE_REMOVE,url:e}),d.default.track(f.AnalyticEvents.GIF_UNFAVORITED)};var r=p(n(6)),a=p(n(74)),o=p(n(12)),i=p(n(2)),l=p(n(120)),u=p(n(25)),s=p(n(7064)),d=p(n(15)),c=n(8437),f=n(1);function p(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=/-/g;function v(e){var t,n=null!=e?((t={})[e]=1,t):{};l.default.trackWithMetadata(f.AnalyticEvents.SEARCH_STARTED,{search_type:f.SearchTypes.GIF,load_id:s.default.getAnalyticsID(),num_modifiers:Object.keys(n).length,modifiers:n})}function y(e,t,n){void 0===n&&(n={});var r=n,a=r.startTime,o=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(r,["startTime"]),i={offset:0,limit:null,totalResults:e.length},u=(0,c.calculateAnalyticsMetadata)(s.default.getAnalyticsID(),t,h({},i,o,{results:e})),d=null==a?{}:{load_duration_ms:Date.now()-a};l.default.trackWithMetadata(f.AnalyticEvents.SEARCH_RESULT_VIEWED,h({},u,d))}function _(e,t){var n=Date.now();v(t),o.default.get({url:f.Endpoints.GIFS_SEARCH,query:{q:e,media_format:s.default.getSelectedFormat(),provider:f.GIFProviders.TENOR,locale:u.default.locale}}).then(function(r){var a=r.body;y(a,t,{startTime:n}),i.default.dispatch({type:f.ActionTypes.GIF_PICKER_QUERY_SUCCESS,query:e,items:a})},function(){return i.default.dispatch({type:f.ActionTypes.GIF_PICKER_QUERY_FAILURE,query:e})})}var g=r.default.debounce(_,250);function E(){i.default.dispatch({type:f.ActionTypes.GIF_PICKER_QUERY,query:""})}},6869:function(e,t,n){"use strict";t.__esModule=!0,t.GIFAccessoryContext=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)).createContext(function(){return null});t.GIFAccessoryContext=r},6870:function(e,t,n){"use strict";t.__esModule=!0,t.toggleGamePopout=function(e,t,n){i.default.isOpen(p)?(e.stopPropagation(),a.default.close(p)):h(e,t,n)},t.default=h;c(n(0));var r,a=d(n(192)),o=d(n(260)),i=d(n(868)),l=n(223),u=c(n(505)),s=d(n(952));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}var f=(0,o.default)(s.default),p="activity_feed_game_popout";function h(e,t,n){null!=t&&(e.stopPropagation(),u.trackGamePopoutOpened(t,"",n),(0,l.openPopout)(e.currentTarget,{position:l.Positions.TOP_LEFT,preventClickPropagation:!0,closeOnScroll:!1,render:function(e){var n=e.popoutKey;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(f,{popoutKey:n,game:t})}},p,e))}},6871:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=E(n(0)),o=n(3),i=g(n(329)),l=g(n(25)),u=g(n(11)),s=g(n(21)),d=E(n(42)),c=g(n(456)),f=g(n(257)),p=g(n(96)),h=n(156),m=n(351),v=n(1),y=g(n(4)),_=g(n(6269));function g(e){return e&&e.__esModule?e:{default:e}}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function S(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var I=function(e){var t=e.children,n=e.isVertical,r=void 0!==n&&n,a=e.tierTitle,o=e.tierLogoSrc;return S("li",{className:r?_.default.tierVertical:_.default.tierHorizontal},void 0,S("img",{alt:a,className:_.default.tierLogo,src:o}),S("ul",{className:_.default.perkList},void 0,t))};I.displayName="TierPerks";var T=function(e){var t=e.children,n=e.isAvailable,r=void 0!==n&&n;return S("li",{className:r?_.default.perkAvailable:_.default.perkUnavailable},void 0,S(d.default,{name:r?d.IconNames.CHECKMARK:d.IconNames.CLOSE,className:_.default.perkAvailabilityIcon}),t)};T.displayName="TierPerk";var O=function(e){var t=e.onOpenPremiumClick,r=(0,o.useStateFromStores)([u.default],function(){return u.default.getCurrentUser()}),d=p.default.isPremium(r,v.PremiumTypes.TIER_1),g=(0,o.useStateFromStores)([l.default],function(){return l.default.locale}),E=(0,h.formatPercent)(g,m.PREMIUM_GUILD_FOR_PREMIUM_USER_DISCOUNT_PERCENT/100);return p.default.isPremium(r,v.PremiumTypes.TIER_2)?null:S("div",{className:_.default.wrapper},void 0,S(c.default,{className:d?_.default.headingTier1:_.default.heading,size:c.default.Sizes.SIZE_24},void 0,d?y.default.Messages.GUILD_SETTINGS_PREMIUM_UPSELL_HEADING_SECONDARY_PREMIUM_USER:y.default.Messages.GUILD_SETTINGS_PREMIUM_UPSELL_HEADING_SECONDARY),d?S(f.default,{className:_.default.headingSecondary},void 0,y.default.Messages.GUILD_SETTINGS_PREMIUM_UPSELL_HEADING_TERTIARY_PREMIUM_USER.format({numFreeGuildSubscriptions:m.NUM_FREE_GUILD_SUBSCRIPTIONS_WITH_PREMIUM})):null,S("ul",{className:_.default.tiersList},void 0,d?S(I,{tierTitle:y.default.Messages.PREMIUM_TIER_2,tierLogoSrc:n(8501)},void 0,S(T,{isAvailable:!0},void 0,y.default.Messages.GUILD_SETTINGS_PREMIUM_UPSELL_BODY_PERK_GUILD_SUBSCRIPTION_DISCOUNT.format({discountPercentage:E})),S(T,{isAvailable:!0},void 0,y.default.Messages.GUILD_SETTINGS_PREMIUM_UPSELL_BODY_PERK_NUM_GUILD_SUBSCRIPTIONS.format({numFreeGuildSubscriptions:m.NUM_FREE_GUILD_SUBSCRIPTIONS_WITH_PREMIUM}))):a.createElement(a.Fragment,null,S(I,{isVertical:!0,tierTitle:y.default.Messages.PREMIUM_TIER_2,tierLogoSrc:n(8502)},void 0,S(T,{isAvailable:!0},void 0,y.default.Messages.GUILD_SETTINGS_PREMIUM_UPSELL_BODY_PERK_GUILD_SUBSCRIPTION_DISCOUNT.format({discountPercentage:E})),S(T,{isAvailable:!0},void 0,y.default.Messages.GUILD_SETTINGS_PREMIUM_UPSELL_BODY_PERK_NUM_GUILD_SUBSCRIPTIONS.format({numFreeGuildSubscriptions:m.NUM_FREE_GUILD_SUBSCRIPTIONS_WITH_PREMIUM}))),S(I,{isVertical:!0,tierTitle:y.default.Messages.PREMIUM_TIER_1,tierLogoSrc:n(8503)},void 0,S(T,{isAvailable:!0},void 0,y.default.Messages.GUILD_SETTINGS_PREMIUM_UPSELL_BODY_PERK_GUILD_SUBSCRIPTION_DISCOUNT.format({discountPercentage:E})),S(T,{},void 0,y.default.Messages.GUILD_SETTINGS_PREMIUM_UPSELL_BODY_PERK_NO_FREE_GUILD_SUBSCRIPTIONS.format({numFreeGuildSubscriptions:m.NUM_FREE_GUILD_SUBSCRIPTIONS_WITH_PREMIUM}))))),S("div",{className:_.default.action},void 0,S(s.default,{color:s.default.Colors.BRAND,look:s.default.Looks.INVERTED,onClick:function(){i.default.open(v.UserSettingsSections.PREMIUM),null!=t&&t()},size:s.default.Sizes.SMALL},void 0,y.default.Messages.GUILD_SETTINGS_PREMIUM_UPSELL_LEARN_MORE)))};O.displayName="PremiumGuildSubscriptionUpsellCTA";var A=O;t.default=A},6872:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=y(n(8)),o=n(3),i=y(n(25)),l=y(n(11)),u=y(n(336)),s=y(n(456)),d=y(n(257)),c=y(n(96)),f=n(156),p=n(351),h=n(1),m=y(n(4)),v=y(n(6270));function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var g=function(e){var t=e.className,n=(0,o.useStateFromStores)([l.default],function(){return l.default.getCurrentUser()}),r=(0,o.useStateFromStores)([i.default],function(){return i.default.locale}),y=(0,o.useStateFromStores)([u.default],function(){return u.default.getSubscription()});return _("div",{className:(0,a.default)(v.default.wrapper,t)},void 0,_(s.default,{className:v.default.heading,size:s.default.Sizes.SIZE_24},void 0,m.default.Messages.GUILD_SETTINGS_PREMIUM_UPSELL_HEADING_PRIMARY),_(d.default,{size:d.default.Sizes.SIZE_16},void 0,function(e,t,n){var r,a,o=c.default.isPremium(e);if(null==n||c.default.getInterval(n.planId)===h.SubscriptionIntervalTypes.MONTH){var i=c.default.getPrice(h.SubscriptionPlans.PREMIUM_MONTH_GUILD,o),l=c.default.getPrice(h.SubscriptionPlans.PREMIUM_MONTH_GUILD,!1);r=(0,f.formatRate)((0,f.formatPrice)(i.amount,i.currency),h.SubscriptionIntervalTypes.MONTH),a=(0,f.formatRate)((0,f.formatPrice)(l.amount,l.currency),h.SubscriptionIntervalTypes.MONTH)}else{var u=c.default.getPrice(h.SubscriptionPlans.PREMIUM_YEAR_GUILD,o),s=c.default.getPrice(h.SubscriptionPlans.PREMIUM_YEAR_GUILD,!1);r=(0,f.formatRate)((0,f.formatPrice)(u.amount,u.currency),h.SubscriptionIntervalTypes.YEAR),a=(0,f.formatRate)((0,f.formatPrice)(s.amount,s.currency),h.SubscriptionIntervalTypes.YEAR)}return c.default.isPremium(e,h.PremiumTypes.TIER_2)?m.default.Messages.GUILD_SETTINGS_PREMIUM_UPSELL_SUBHEADING_TIER_2.format({price:r,originalPrice:a,originalPriceHook:function(e,t){return _("span",{className:v.default.originalPrice},t,e)},freeSubscriptionCount:p.NUM_FREE_GUILD_SUBSCRIPTIONS_WITH_PREMIUM,discountPercent:(0,f.formatPercent)(t,p.PREMIUM_GUILD_FOR_PREMIUM_USER_DISCOUNT_PERCENT/100)}):c.default.isPremium(e,h.PremiumTypes.TIER_1)?m.default.Messages.GUILD_SETTINGS_PREMIUM_UPSELL_SUBHEADING_TIER_1.format({price:r,originalPrice:a,originalPriceHook:function(e,t){return _("span",{className:v.default.originalPrice},t,e)},discountPercent:(0,f.formatPercent)(t,p.PREMIUM_GUILD_FOR_PREMIUM_USER_DISCOUNT_PERCENT/100)}):m.default.Messages.GUILD_SETTINGS_PREMIUM_UPSELL_SUBHEADING.format({price:r})}(n,r,y)))};g.displayName="PremiumGuildSubscriptionUpsellHeading";var E=g;t.default=E},6873:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SlideIn=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=u(n(8)),i=u(n(118)),l=u(n(6273));function u(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d={friction:7,tension:60},c=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).animation=new i.default.Value(0),t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var u=a.prototype;return u.componentWillAppear=function(e){this.animateTo(1).start(e)},u.componentWillEnter=function(e){this.animateTo(1).start(e)},u.componentWillLeave=function(e){i.default.stagger(250,[this.animateTo(1.3),this.animateTo(0)]).start(e)},u.animateTo=function(e){return i.default.spring(this.animation,s({},d,{toValue:e}))},u.getAnimatedStyle=function(){return i.default.accelerate({opacity:this.animation,transform:[{translateY:this.animation.interpolate({inputRange:[0,1],outputRange:["150%","0%"]})}]})},u.render=function(){var e=this.props,t=e.className,n=e.children;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(i.default.div,{className:(0,o.default)(t,l.default.slider),style:this.getAnimatedStyle()},void 0,n)},a}(a.Component);t.SlideIn=c,c.displayName="SlideIn";var f=c;t.default=f},6874:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=s(n(8)),o=s(n(58)),i=s(n(42)),l=n(1),u=s(n(6274));function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var c=Object.freeze({DEFAULT:"",BOLD:"Bold"}),f=function(e){var t,n,r=e.closeAction,s=e.theme,f=e.variant,p=e.keybind,h=e.className;return d("div",{className:(0,a.default)(u.default.container,h)},void 0,d(o.default,{className:(0,a.default)(u.default.closeButton,(t={},t[u.default.closeButtonBold]=f===c.BOLD,t)),onClick:r},void 0,d(i.default,{name:i.default.Names.CLOSE,color:l.ThemeTypes.DARK===s?l.Colors.PRIMARY_DARK_200:l.Colors.PRIMARY_DARK_400,width:18,height:18})),d("div",{className:(0,a.default)(u.default.keybind,(n={},n[u.default.keybindBold]=f===c.BOLD,n))},void 0,p))};f.displayName="CloseIconWithKeybind",f.defaultProps={variant:c.DEFAULT},f.Variants=c;var p=f;t.default=p},6875:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(3)),a=o(n(2));n(1);function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l={},u=null,s=[],d=!1,c=null,f=null;function p(){d=!0}var h=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,o,p,h=r.prototype;return h.getSubscriptionsForGuild=function(e){return l[e]},h.getCurrentUserSubscriptions=function(){return s},h.getSubscription=function(e){return s.find(function(t){return t.id===e})},a=r,(o=[{key:"isModifyingSubscription",get:function(){return d}},{key:"subscribeError",get:function(){return c}},{key:"unsubscribeError",get:function(){return f}},{key:"cooldownEndsAt",get:function(){return u}}])&&i(a.prototype,o),p&&i(a,p),r}(r.default.Store))(a.default,{GUILD_PREMIUM_SUBSCRIPTIONS_FETCH_SUCCESS:function(e){var t=e.guildId,n=e.subscriptions;l[t]=n},GUILD_USER_PREMIUM_SUBSCRIPTIONS_FETCH_SUCCESS:function(e){var t=e.subscriptions;s=t},GUILD_PREMIUM_SUBSCRIPTIONS_COOLDOWN_FETCH_SUCCESS:function(e){var t=e.endsAt;u=t},GUILD_PREMIUM_UNSUBSCRIBE_START:function(e){return p()},GUILD_PREMIUM_SUBSCRIBE_START:function(e){return p()},GUILD_PREMIUM_SUBSCRIBE_SUCCESS:function(e){var t=e.subscriptions,n=new Set(t.map(function(e){return e.id}));s=[].concat(t,s.filter(function(e){return!n.has(e.id)})),c=null,d=!1},GUILD_PREMIUM_SUBSCRIBE_FAIL:function(e){var t=e.error;d=!1,c=t},GUILD_PREMIUM_UNSUBSCRIBE_SUCCESS:function(e){var t=e.subscriptionId;s=s.filter(function(e){return e.id!==t}),d=!1},GUILD_PREMIUM_UNSUBSCRIBE_FAIL:function(e){var t=e.error;d=!1,f=t}});t.default=h},6876:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=C(n(8)),i=C(n(3)),l=C(n(6615)),u=C(n(6863)),s=C(n(334)),d=C(n(141)),c=C(n(30)),f=C(n(137)),p=C(n(14)),h=C(n(106)),m=C(n(930)),v=C(n(182)),y=C(n(852)),_=C(n(71)),g=n(90),E=n(8515),S=C(n(6691)),I=C(n(8516)),T=C(n(155)),O=n(1),A=C(n(4)),N=C(n(6288));function C(e){return e&&e.__esModule?e:{default:e}}function M(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function b(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function P(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={report:!1},t.handleDelete=function(){var e=t.state.report,n=t.props,r=n.channel,a=n.message;e?c.default.push(I.default,{channel:r,message:a,onReport:function(){d.default.deleteMessage(r.id,a.id)}}):d.default.deleteMessage(r.id,a.id)},t.handleToggleReport=function(e){t.setState({report:e.currentTarget.checked})},t}return b(t,e),t.prototype.render=function(){var e,t,n=this.state.report,r=this.props,o=r.channel,i=r.message,l=r.showContextMenuHint,u=M(r,["channel","message","showContextMenuHint"]),s=o.type===O.ChannelTypes.GUILD_ANNOUNCEMENT&&(0,g.hasFlag)(i.flags,O.MessageFlags.CROSSPOSTED);return l&&(e=P(m.default,{className:N.default.spacingTop},void 0,A.default.Messages.DELETE_MESSAGE_CONTEXT_MENU_HINT.format())),(0,E.canReportMessage)(i)&&(t=P(y.default,{value:n,onChange:this.handleToggleReport,hideBorder:!0,className:N.default.spacingTop},void 0,A.default.Messages.DELETE_MESSAGE_REPORT)),a.createElement(T.default,R({header:s?A.default.Messages.MODIFY_FOLLOWED_NEWS_HEADER:A.default.Messages.DELETE_MESSAGE_TITLE,confirmText:A.default.Messages.DELETE,cancelText:A.default.Messages.CANCEL,onConfirm:this.handleDelete},u),P(_.default,{size:_.default.Sizes.MEDIUM,color:_.default.Colors.PRIMARY,className:N.default.spacing},void 0,s?A.default.Messages.DELETE_FOLLOWED_NEWS_BODY:A.default.Messages.DELETE_MESSAGE_BODY),P("div",{className:N.default.message},void 0,P(S.default,{channel:o,messages:[i],enableInteraction:!1})),t,e)},t}(a.PureComponent);D.displayName="DeleteModal";var L=P(v.default,{}),w=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).openSettings=function(){var e=t.props,n=e.guildId,r=e.onClose;null!=n&&null!=r&&(r(),s.default.open(n,O.GuildSettingsSections.FOLLOWER_ANALYTICS))},t}b(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.channelId;this.needsReload()&&l.default.fetchChannelFollowerStats(e)},n.needsReload=function(){var e=this.props.followerStats;return null==e||Date.now()-e.lastFetched>36e5},n.render=function(){var e=this.props,t=e.channelId,n=e.messageId,r=e.followerStats,o=M(e,["channelId","messageId","followerStats"]),i=null!=r&&r.guildsFollowing>0?a.createElement(a.Fragment,null,P(_.default,{className:N.default.spacing},void 0,A.default.Messages.PUBLISH_FOLLOWED_NEWS_BODY_REACH.format({numGuildsFollowing:r.guildsFollowing})),P(_.default,{},void 0,A.default.Messages.PUBLISH_FOLLOWED_NEWS_BODY_STATS.format({numGuildsGained:r.subscribersGainedSinceLastPost,numGuildsLost:r.subscribersLostSinceLastPost})+" ",P(h.default,{onClick:this.openSettings},void 0,A.default.Messages.PUBLISH_FOLLOWED_NEWS_BODY_SETTINGS))):A.default.Messages.PUBLISH_FOLLOWED_NEWS_BODY;return a.createElement(T.default,R({header:A.default.Messages.MODIFY_FOLLOWED_NEWS_HEADER,confirmText:A.default.Messages.CONFIRM,cancelText:A.default.Messages.CANCEL,red:!1,onConfirm:function(){return d.default.crosspostMessage(t,n)}},o),P(_.default,{size:_.default.Sizes.MEDIUM,color:_.default.Colors.PRIMARY,className:N.default.spacing},void 0,this.needsReload()?L:i))},t}(a.PureComponent);w.displayName="PublishModal";var U=i.default.connectStores([p.default],function(e){var t=e.channelId,n=p.default.getChannel(t);return{followerStats:p.default.getFollowerStatsForChannel(t),guildId:null!=n?n.guild_id:null}})(w);var k={confirmPin:function(e,t){var n=P(S.default,{channel:e,messages:[t],enableInteraction:!1});c.default.push(function(r){var o;return o=e.isPrivate()?A.default.Messages.PIN_MESSAGE_BODY_PRIVATE_CHANNEL:A.default.Messages.PIN_MESSAGE_BODY.format({channelName:(0,f.default)(e)}),a.createElement(T.default,R({red:!1,header:A.default.Messages.PIN_MESSAGE_TITLE,confirmText:A.default.Messages.PIN_CONFIRM,cancelText:A.default.Messages.CANCEL,onConfirm:function(){return u.default.pinMessage(e,t.id)}},r),P(_.default,{size:_.default.Sizes.MEDIUM,color:_.default.Colors.PRIMARY,className:N.default.spacing},void 0,o),P("div",{className:N.default.message},void 0,n))})},confirmUnpin:function(e,t){var n=P(S.default,{channel:e,messages:[t],enableInteraction:!1});c.default.push(function(r){return a.createElement(T.default,R({header:A.default.Messages.UNPIN_MESSAGE_TITLE,confirmText:A.default.Messages.UNPIN_CONFIRM,cancelText:A.default.Messages.CANCEL,onConfirm:function(){return u.default.unpinMessage(e,t.id)}},r),P(_.default,{size:_.default.Sizes.MEDIUM,color:_.default.Colors.PRIMARY,className:N.default.spacing},void 0,A.default.Messages.UNPIN_MESSAGE_BODY),P("div",{className:(0,o.default)(N.default.message,N.default.spacing)},void 0,n),P(m.default,{},void 0,A.default.Messages.UNPIN_MESSAGE_CONTEXT_MENU_HINT.format()))})},confirmDelete:function(e,t,n){void 0===n&&(n=!1),c.default.push(function(r){return a.createElement(D,R({channel:e,message:t,showContextMenuHint:n},r))})},confirmEdit:function(e,t,n){c.default.push(function(r){return a.createElement(T.default,R({header:A.default.Messages.MODIFY_FOLLOWED_NEWS_HEADER,confirmText:A.default.Messages.CONFIRM,cancelText:A.default.Messages.CANCEL,red:!1,onConfirm:function(){return d.default.editMessage(e,t,{content:n})}},r),P(_.default,{size:_.default.Sizes.MEDIUM,color:_.default.Colors.PRIMARY,className:N.default.spacing},void 0,A.default.Messages.EDIT_FOLLOWED_NEWS_BODY))})},confirmPublish:function(e,t){c.default.push(function(n){return a.createElement(U,R({channelId:e,messageId:t},n))})}};t.default=k},6955:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=p(n(0)),o=f(n(8)),i=p(n(21)),l=f(n(24)),u=n(857),s=n(1),d=f(n(455)),c=f(n(6349));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.title,n=e.description,r=e.agreement,a=e.disagreement,s=e.onAgree,f=e.onDisagree;return h(u.BackgroundOpacityContext.Consumer,{},void 0,function(e){var u=e.backgroundOpacity;return h(l.default,{className:(0,o.default)(c.default.gatedContent,c.default[u+"BackgroundOpacity"]),justify:l.default.Justify.CENTER,align:l.default.Align.CENTER,direction:l.default.Direction.VERTICAL},void 0,h("div",{className:(0,o.default)(c.default.image,d.default.marginBottom20)}),h("div",{className:(0,o.default)(c.default.title,d.default.marginBottom8)},void 0,t),h("div",{className:(0,o.default)(c.default.description,d.default.marginBottom20)},void 0,n),h("div",{className:(0,o.default)(c.default.separator,d.default.marginBottom40)}),h(l.default,{justify:l.default.Justify.CENTER,align:l.default.Align.CENTER,grow:0},void 0,h(i.default,{className:c.default.action,size:i.ButtonSizes.LARGE,look:i.ButtonLooks.OUTLINED,color:i.ButtonColors.PRIMARY,onClick:f},void 0,a),h(i.default,{className:c.default.action,color:c.default.actionRed,size:i.ButtonSizes.LARGE,onClick:s},void 0,r)))})},r}(a.PureComponent);m.displayName="GatedContent",m.defaultProps={onAgree:s.NOOP,onDisagree:s.NOOP};var v=m;t.default=v},7016:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(5)),a=u(n(3)),o=u(n(2)),i=u(n(6684)),l=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var s={},d={};var c=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.getInvite=function(e,t,n){return t!==l.InviteTargetUserTypes.STREAM?s[e]:null!=d[e]&&null!=n?d[e][n]:null},r}(a.default.Store))(o.default,{CONNECTION_OPEN:function(e){return s={},void(d={})},CHANNEL_DELETE:function(e){var t=e.channel;delete s[t.id],delete d[t.id]},INSTANT_INVITE_CREATE:function(e){},INSTANT_INVITE_CREATE_SUCCESS:function(e){var t=e.channelId,n=e.invite,a=null!=n.target_user_type?n.target_user_type:null,o=new i.default({code:n.code,temporary:n.temporary,revoked:n.revoked,maxUses:n.max_uses,maxAge:n.max_age,createdAt:(0,r.default)(n.created_at),channel:n.channel,guild:n.guild,targetUserType:a,targetUser:n.target_user});if(a===l.InviteTargetUserTypes.STREAM){var u=null!=n.target_user?n.target_user.id:null;null==d[t]&&(d[t]={}),d[t][u]=o}else s[t]=o}});t.default=c},7017:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=v(n(534)),o=v(n(3)),i=v(n(27)),l=v(n(2)),u=n(184),s=v(n(6628)),d=v(n(225)),c=v(n(19)),f=v(n(64)),p=v(n(25)),h=v(n(11)),m=n(1);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}r=n(8250);var g,E,S,I="lastChangeLog",T="shouldShowChangeLog",O="en-us",A={},N={},C={},M={},b=!1,R=!1;function P(e){return e.locale||O}if(r.replace(/\r\n/g,"\n").split("---changelog---\n").slice(1).forEach(function(e){var t=!1,n={},r=e.split("\n").filter(function(e){if("---"===e)return t=!0,!1;if(!t){var r=e.split(": "),a=r.shift(),o=r.join(": ");null!=a&&(n[a]=JSON.parse(o))}return t}).join("\n");if(null==n.date||null==n.revision)throw new Error("ChangeLogStore: A changelog does not contain a date or revision property");var a=_({},n,{date:n.date,revision:n.revision,locale:null!=n.locale?n.locale.toLowerCase():O,body:r});if(null!=n.experiment_names&&n.experiment_names.length>0)n.experiment_names.forEach(function(e){var t=N[e]||(N[e]={}),n=a.experiment_bucket||(a.experiment_bucket=u.ExperimentBuckets.CONTROL),r=t[String(n)]||(t[String(n)]={}),o=P(a);if(null!=r[o])throw new Error("ChangeLogStore: Locale ("+o+") already defined for "+e);r[o]=a});else if(n.guild_manager){var o=P(a);if(null!=M[o])throw new Error("ChangeLogStore: Locale ("+o+") already defined for GuildManager changelogs");M[o]=a}else if(n.hypesquad){var i=P(a);if(null!=C[i])throw new Error("ChangeLogStore: Locale ("+i+") already defined for HypeSquad changelogs");C[i]=a}else{var l=P(a);if(null!=A[l])throw new Error("ChangeLogStore: Locale ("+l+") already defined for default changelogs");A[l]=a}}),null==A[O])throw new Error("ChangeLogStore: No default changeLog");function D(e){if(!e)return null;var t=e.date,n=e.revision,r=e.experiment_names;return a.default.v3(JSON.stringify({date:t,revision:n,experiment_names:r}))}function L(e){void 0===e&&(e=!1);var t=null!=N?Object.keys(N):[],n=p.default.locale.toLowerCase(),r=null;if(!e&&t.length>0){var a=s.default.getFirstEligibleUserExperiment(t);if(null!=a){var o=a[0],i=a[1];if(null==o||null==N[o])throw new Error("ChangeLogStore: This changelog experiment has not been registered");var l=String(i.bucket);null!=N[o][l]&&(r=N[o][l][n]||N[o][l][O])}}if(null==r){var u=Object.values(c.default.getGuilds());if(null!=u&&u.some(function(e){return(e.hasFeature(m.GuildFeatures.VERIFIED)||e.hasFeature(m.GuildFeatures.PARTNERED))&&f.default.can(m.Permissions.MANAGE_GUILD,e)})){var d=M[n]||M[O];if(null!=d)return d}}if(null==r){var v=h.default.getCurrentUser();if(null!=v&&(v.hasFlag(m.UserFlags.HYPESQUAD)||v.hasFlag(m.UserFlags.HYPESQUAD_ONLINE_HOUSE_1)||v.hasFlag(m.UserFlags.HYPESQUAD_ONLINE_HOUSE_2)||v.hasFlag(m.UserFlags.HYPESQUAD_ONLINE_HOUSE_3))){var y=C[n]||C[O];if(null!=y)return y}}return null==r&&(r=A[n]||A[O]),r}g=L(!0);var w=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,o,l,u=r.prototype;return u.initialize=function(){E=i.default.get(I)||E,R=i.default.get(T)||R,this.waitFor(c.default,h.default,d.default,f.default,p.default)},u.isOpen=function(){return b&&R},u.lastSeenChangeLogMatches=function(e){return E===D(e)},a=r,(o=[{key:"changeLog",get:function(){return g}},{key:"changeLogSource",get:function(){return S}}])&&y(a.prototype,o),l&&y(a,l),r}(o.default.Store))(l.default,{CHANGE_LOG_OPEN:function(e){return t=e.query,S=t,R=!0,void i.default.set(T,R);var t},CHANGE_LOG_CLOSE:function(e){return R=!1,void i.default.set(T,R)},CONNECTION_OPEN:function(e){return t=D(g=L()),E!==t&&h.default.getCurrentUser().isClaimed()&&(R=null!=E,E=t,i.default.set(I,E),i.default.set(T,R)),void(b=!0);var t},CONNECTION_CLOSED:function(e){b=!1},USER_SETTINGS_UPDATE:function(e){if(null==e.settings.locale)return!1;g=L()}});t.default=w},7022:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.CALL_START=t.CALL_ACCEPT=void 0;var r=n(80),a=n(1),o={binds:["mod+return"],global:!0,action:function(){if(r.ComponentDispatch.hasSubscribers(a.ComponentActions.CALL_ACCEPT))return r.ComponentDispatch.dispatch(a.ComponentActions.CALL_ACCEPT),!1}};t.CALL_ACCEPT=o;var i={binds:["ctrl+'","ctrl+shift+'"],global:!0,action:function(e){if(r.ComponentDispatch.hasSubscribers(a.ComponentActions.CALL_START))return r.ComponentDispatch.dispatch(a.ComponentActions.CALL_START,e),!1}};t.CALL_START=i;var l={CALL_ACCEPT:o,CALL_START:i};t.default=l},7023:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TOGGLE_PREVIOUS_GUILD=t.CHANNEL_PREV=t.CHANNEL_NEXT=void 0;var r=d(n(6577)),a=d(n(39)),o=d(n(153)),i=d(n(36)),l=d(n(8253)),u=n(6687),s=n(1);function d(e){return e&&e.__esModule?e:{default:e}}var c={binds:["alt+down"],global:!0,action:function(){return(0,l.default)(),!1},keyup:function(){return r.default.flushSelection(),!1}};t.CHANNEL_NEXT=c;var f={binds:["alt+up"],global:!0,action:function(){return(0,l.default)(-1),!1},keyup:function(){return r.default.flushSelection(),!1}};t.CHANNEL_PREV=f;var p={binds:["mod+alt+right"],global:!0,action:function(){var e;if(o.default.getGuildId())e=s.ME;else{var t=o.default.getLastSelectedGuildId();t&&(e=t,(0,u.transitionToChannel)(t,a.default.getChannelId(t)))}return null!=e&&i.default.transitionTo(s.Routes.CHANNEL(e,a.default.getChannelId(e))),!1}};t.TOGGLE_PREVIOUS_GUILD=p;var h={CHANNEL_PREV:f,CHANNEL_NEXT:c,TOGGLE_PREVIOUS_GUILD:p};t.default=h},7024:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.MARK_CHANNEL_READ=void 0;var r=f(n(141)),a=n(883),o=f(n(899)),i=f(n(194)),l=f(n(222)),u=f(n(39)),s=f(n(153)),d=n(80),c=n(1);function f(e){return e&&e.__esModule?e:{default:e}}var p={binds:["esc","shift+pagedown"],global:!0,action:function(){var e=document.activeElement;if(d.ComponentDispatch.hasSubscribers(c.ComponentActions.CALL_DECLINE))return d.ComponentDispatch.dispatch(c.ComponentActions.CALL_DECLINE),!1;if(o.default.isOpen())return d.ComponentDispatch.dispatch(c.ComponentActions.CONTEXT_MENU_CLOSE),!1;if(d.ComponentDispatch.hasSubscribers(c.ComponentActions.POPOUT_CLOSE))return d.ComponentDispatch.dispatch(c.ComponentActions.POPOUT_CLOSE),!1;if(d.ComponentDispatch.hasSubscribers(c.ComponentActions.CLOSE_GIF_PICKER))return d.ComponentDispatch.dispatch(c.ComponentActions.CLOSE_GIF_PICKER),!1;if(d.ComponentDispatch.hasSubscribers(c.ComponentActions.MODAL_CLOSE)&&!function(e){if(null==e)return!1;if(e instanceof HTMLInputElement)switch(e.type){case"text":case"password":case"email":case"number":case"tel":case"url":return!0;default:return!1}return e instanceof HTMLTextAreaElement}(e))return d.ComponentDispatch.dispatch(c.ComponentActions.MODAL_CLOSE),!1;var t=s.default.getGuildId(),n=u.default.getChannelId(t);n&&(i.default.getMessages(n).hasMoreAfter&&r.default.jumpToPresent(n,c.MAX_MESSAGES_PER_CHANNEL),l.default.hasUnread(n)&&(0,a.ack)(n),(0,a.localAck)(n));return d.ComponentDispatch.dispatch(c.ComponentActions.SCROLLTO_PRESENT),!1}};t.MARK_CHANNEL_READ=p;var h={MARK_CHANNEL_READ:p};t.default=h},7025:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.MARK_SERVER_READ=void 0;var r=c(n(139)),a=c(n(141)),o=c(n(6541)),i=c(n(194)),l=c(n(39)),u=c(n(153)),s=n(80),d=n(1);function c(e){return e&&e.__esModule?e:{default:e}}var f={},p={binds:["shift+esc"],global:!0,action:function(){var e=u.default.getGuildId();if(e&&o.default.getUnreadGuildsIgnoreMuted(e)){if(!f[e]){var t=function(){return delete f[e]};r.default.markGuildAsRead(e).then(t,t)}var n=l.default.getChannelId(e);if(n)i.default.getMessages(n).hasMoreAfter?a.default.jumpToPresent(n,d.MAX_MESSAGES_PER_CHANNEL):s.ComponentDispatch.dispatch(d.ComponentActions.SCROLLTO_PRESENT)}}};t.MARK_SERVER_READ=p;var h={MARK_SERVER_READ:p};t.default=h},7026:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.JUMP_TO_FIRST_UNREAD=void 0;var r=i(n(141)),a=i(n(222)),o=i(n(39));function i(e){return e&&e.__esModule?e:{default:e}}var l={binds:["shift+pageup"],global:!0,action:function(){var e=o.default.getChannelId();if(e){var t=a.default.ackMessageId(e);t&&a.default.getOldestUnreadTimestamp(e)>0&&r.default.jumpToMessage(e,t,!1,"Keyboard Shortcut")}return!1}};t.JUMP_TO_FIRST_UNREAD=l;var u={JUMP_TO_FIRST_UNREAD:l};t.default=u},7027:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.RETURN_TO_AUDIO_CHANNEL=void 0;var r=s(n(6577)),a=s(n(6540)),o=s(n(191)),i=s(n(39)),l=n(6687),u=n(1);function s(e){return e&&e.__esModule?e:{default:e}}var d={binds:["mod+alt+left"],global:!0,action:function(){if(!o.default.isConnected())return!1;var e=o.default.getGuildId()||u.ME,t=i.default.getChannelId(e);return(0,l.transitionToChannel)(e,t),r.default.flushSelection(!0),a.default.channelListScrollTo(e,o.default.getChannelId()),!1}};t.RETURN_TO_AUDIO_CHANNEL=d;var c={RETURN_TO_AUDIO_CHANNEL:d};t.default=c},7028:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SCROLL_DOWN=t.SCROLL_UP=void 0;var r=n(80),a=n(1),o={binds:["pageup"],global:!0,action:function(){return r.ComponentDispatch.dispatchToLastSubscribed(a.ComponentActions.SCROLL_PAGE_UP),!1}};t.SCROLL_UP=o;var i={binds:["pagedown"],global:!0,action:function(){return r.ComponentDispatch.dispatchToLastSubscribed(a.ComponentActions.SCROLL_PAGE_DOWN),!1}};t.SCROLL_DOWN=i;var l={SCROLL_UP:o,SCROLL_DOWN:i};t.default=l},7029:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SEARCH_EMOJIS=void 0;var r=n(80),a=n(1),o={binds:["mod+e"],global:!0,action:function(){return r.ComponentDispatch.dispatch(a.ComponentActions.TOGGLE_EMOJI_POPOUT),!1}};t.SEARCH_EMOJIS=o;var i={SEARCH_EMOJIS:o};t.default=i},7030:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SERVER_PREV=t.SERVER_NEXT=void 0;var r=o(n(6577)),a=o(n(8260));function o(e){return e&&e.__esModule?e:{default:e}}var i={binds:["mod+alt+down","mod+shift+]","ctrl+tab"],global:!0,action:function(e){return e.preventDefault(),e.stopPropagation(),(0,a.default)(),!1},keyup:function(){return r.default.flushSelection(),!1}};t.SERVER_NEXT=i;var l={binds:["mod+alt+up","mod+shift+[","ctrl+shift+tab"],global:!0,action:function(e){return e.preventDefault(),e.stopPropagation(),(0,a.default)(-1),!1},keyup:function(){return r.default.flushSelection(),!1}};t.SERVER_PREV=l;var u={SERVER_NEXT:i,SERVER_PREV:l};t.default=u},7031:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SUBMIT=void 0;var r=n(80),a=n(1),o={binds:["return"],global:!1,action:function(){if(r.ComponentDispatch.hasSubscribers(a.ComponentActions.MODAL_SUBMIT))return r.ComponentDispatch.dispatch(a.ComponentActions.MODAL_SUBMIT),!1}};t.SUBMIT=o;var i={SUBMIT:o};t.default=i},7032:function(e,t,n){"use strict";t.__esModule=!0,t.TEXTAREA_FOCUS=void 0;var r=s(n(859)),a=s(n(40)),o=s(n(191)),i=n(80),l=n(7033),u=n(1);function s(e){return e&&e.__esModule?e:{default:e}}var d=new Set(["PageDown","PageUp","Home","End"]),c=new Set(["Meta","Alt","Control","Shift"]),f={binds:["any-character"],global:!1,keydown:function(e,t){if((0,l.isInputLikeElement)(document.activeElement))return!1;if(c.has(t))return!1;var n=null!=document.activeElement&&"BODY"===document.activeElement.tagName;return!(u.EnableAccessibility&&!n&&!/^[a-zA-Z0-9]$/.test(t))&&(!i.ComponentDispatch.hasSubscribers(u.ComponentActions.MODAL_CLOSE)&&(!r.default.hasLayers()&&("Tab"===t?(e.preventDefault(),i.ComponentDispatch.dispatch(u.ComponentActions.TEXTAREA_FOCUS),!1):!(o.default.isConnected()&&a.default.getMode()===u.InputModes.PUSH_TO_TALK&&!a.default.isSelfMute())&&void(e.metaKey||e.ctrlKey||d.has(t)||i.ComponentDispatch.dispatchToLastSubscribed(u.ComponentActions.TEXTAREA_FOCUS)))))}};t.TEXTAREA_FOCUS=f},7033:function(e,t,n){"use strict";t.__esModule=!0,t.isInputLikeElement=function(e){if(null==e)return!1;if("true"===e.getAttribute("contenteditable"))return!0;if(a.test(e.tagName))return!0;if(r.test(e.tagName)){var t=e.getAttribute("type")||"text";if("text"===t||"password"===t)return!0}return!1},t.removeNode=function(e){null!=e.parentNode&&e.parentNode.removeChild(e)},t.clickedOnVisibleImage=function(e,t,n,r){var a=n.width,o=n.height,i=r.top,l=r.left,u=r.width,s=r.height,d=Math.min(u/a,s/o,1),c=a*d,f=o*d,p=(s-f)/2+l,h=(u-c)/2+i;if(t>=p&&t<=p+f&&e>=h&&e<=h+c)return!0;return!1};var r=/input/i,a=/textarea/i},7034:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TOGGLE_DEAFEN=t.TOGGLE_MUTE=void 0;var r,a=(r=n(189))&&r.__esModule?r:{default:r};var o={binds:["mod+shift+m"],global:!0,action:function(){return a.default.toggleSelfMute(),!1}};t.TOGGLE_MUTE=o;var i={binds:["mod+shift+d"],global:!0,action:function(){return a.default.toggleSelfDeaf(),!1}};t.TOGGLE_DEAFEN=i;var l={TOGGLE_MUTE:o,TOGGLE_DEAFEN:i};t.default=l},7035:function(e,t,n){"use strict";t.__esModule=!0,t.TOGGLE_CATEGORY_COLLAPSED=void 0;var r=n(906),a=u(n(858)),o=u(n(87)),i=u(n(153)),l=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var s={binds:["mod+shift+a"],global:!0,action:function(){var e=i.default.getGuildId();return null!=e&&(o.default.getChannels(e)[l.ChannelTypes.GUILD_CATEGORY].some(function(e){var t=e.channel;return"null"!==t.id&&!a.default.isCollapsed(t.id)})?(0,r.categoryCollapseAll)(e):(0,r.categoryExpandAll)(e),!1)}};t.TOGGLE_CATEGORY_COLLAPSED=s},7036:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TOGGLE_HOTKEYS=void 0;var r=o(n(6630)),a=o(n(7037));function o(e){return e&&e.__esModule?e:{default:e}}var i={binds:["mod+/","mod+shift+/"],global:!0,action:function(){return a.default.isOpen()?r.default.hide():r.default.show(),!1}};t.TOGGLE_HOTKEYS=i;var l={TOGGLE_HOTKEYS:i};t.default=l},7037:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(3)),a=o(n(2));n(1);function o(e){return e&&e.__esModule?e:{default:e}}var i=!1,l=!1;var u=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.isOpen=function(){return i},a.getState=function(){return{ragingDemon:l}},r}(r.default.Store))(a.default,{SHOW_KEYBOARD_SHORTCUTS:function(e){i=!0},HIDE_KEYBOARD_SHORTCUTS:function(e){i=!1},ACTIVATE_RAGING_DEMON:function(e){l=!0},DEACTIVATE_RAGING_DEMON:function(e){l=!1}});t.default=u},7038:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.MENTION_PREV=t.MENTION_NEXT=t.UNREAD_PREV=t.UNREAD_NEXT=void 0;var r=c(n(6577)),a=n(67),o=c(n(14)),i=c(n(860)),l=c(n(222)),u=c(n(188)),s=c(n(8265)),d=n(1);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e,t){var n=o.default.getChannel(t);return null!=n&&((0,a.isPrivate)(n.type)?l.default.getMentionCount(t):(!u.default.isChannelMuted(e,t)||l.default.getMentionCount(t)>0)&&l.default.hasUnread(t))},p={binds:["alt+shift+down"],global:!0,action:function(){var e=i.default.getGuildId()||d.ME;return(0,s.default)(1,f,function(t){return t===e||!u.default.isMuted(t)}),!1},keyup:function(){return r.default.flushSelection(),!1}};t.UNREAD_NEXT=p;var h={binds:["alt+shift+up"],global:!0,action:function(){var e=i.default.getGuildId()||d.ME;return(0,s.default)(-1,f,function(t){return t===e||!u.default.isMuted(t)}),!1},keyup:function(){return r.default.flushSelection(),!1}};t.UNREAD_PREV=h;var m=function(e,t){return l.default.getMentionCount(t)>0},v={binds:["mod+shift+alt+down"],global:!0,action:function(){return(0,s.default)(1,m),!1},keyup:function(){return r.default.flushSelection(),!1}};t.MENTION_NEXT=v;var y={binds:["mod+shift+alt+up"],global:!0,action:function(){return(0,s.default)(-1,m),!1},keyup:function(){return r.default.flushSelection(),!1}};t.MENTION_PREV=y;var _={UNREAD_NEXT:p,UNREAD_PREV:h,MENTION_NEXT:v,MENTION_PREV:y};t.default=_},7053:function(e,t,n){"use strict";t.__esModule=!0,t.search=d,t.searchByMode=function(e,t){var n=i.default.getQuery(e),r=function(e){switch(e){case l.SearchModes.MOST_RELEVANT:return{sort_by:"relevance",sort_order:"desc"};case l.SearchModes.OLDEST:return{sort_by:"timestamp",sort_order:"asc"};case l.SearchModes.NEWEST:default:return{sort_by:"timestamp",sort_order:"desc"}}}(t);return d(e,s({},n,r,{offset:0}))},t.searchNextPage=function(e,t){void 0===t&&(t=l.SEARCH_PAGE_SIZE);return c(e,t)},t.searchPreviousPage=function(e,t){void 0===t&&(t=l.SEARCH_PAGE_SIZE);return c(e,-t)},t.clearHistory=function(e){r.default.dispatch({type:l.ActionTypes.SEARCH_CLEAR_HISTORY,searchId:e})},t.ensureSearchState=function(e){r.default.wait(function(){r.default.dispatch({type:l.ActionTypes.SEARCH_ENSURE_SEARCH_STATE,searchId:e})})},t.setSearchState=function(e,t){null!=e&&r.default.dirtyDispatch({type:l.ActionTypes.SEARCH_EDITOR_STATE_CHANGE,searchId:e,editorState:t})},t.clearSearchState=function(e){a.default.trackWithMetadata(l.AnalyticEvents.SEARCH_CLOSED,{search_id:i.default.getAnalyticsId(e)}),r.default.wait(function(){return r.default.dispatch({type:l.ActionTypes.SEARCH_EDITOR_STATE_CLEAR,searchId:e})})},t.updateAutocompleteQuery=function(e,t,n){null!=e&&r.default.dirtyDispatch({type:l.ActionTypes.SEARCH_AUTOCOMPLETE_QUERY_UPDATE,searchId:e,tokens:t,cursorScope:n})},t.setShowBlockedResults=function(e,t){r.default.dispatch({type:l.ActionTypes.SEARCH_SET_SHOW_BLOCKED_RESULTS,searchId:e,showBlocked:t})};var r=u(n(2)),a=u(n(120)),o=u(n(6744)),i=u(n(6636)),l=n(1);function u(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t,n){o.default.didAgree(e)&&(t.include_nsfw=!0);var u=Object.keys(t);a.default.trackWithMetadata(l.AnalyticEvents.SEARCH_STARTED,{search_type:i.default.getSearchType(),prev_search_id:i.default.getAnalyticsId(e),num_modifiers:u.length,modifiers:u.reduce(function(e,n){var r=t[n];return e[n]=Array.isArray(r)?r.length:1,e},{})}),r.default.dispatch({type:l.ActionTypes.SEARCH_START,query:t,searchId:e,queryString:n})}function c(e,t){var n=i.default.getOffset(e),r=i.default.getQuery(e),a=n+t,o=i.default.getTotalResults(e);if(!(a<0||a>o))return d(e,s({},r,{offset:a}))}},7054:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=V(n(3)),o=n(45),i=V(n(1016)),l=V(n(27)),u=V(n(2)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(186)),d=n(366),c=V(n(76)),f=V(n(153)),p=V(n(13)),h=V(n(96)),m=V(n(502)),v=V(n(10)),y=V(n(490)),_=V(n(7017)),g=V(n(14)),E=V(n(355)),S=V(n(8400)),I=V(n(7672)),T=V(n(1017)),O=V(n(288)),A=V(n(225)),N=V(n(22)),C=V(n(53)),M=V(n(19)),b=V(n(40)),R=V(n(8401)),P=V(n(191)),D=V(n(54)),L=V(n(235)),w=V(n(7673)),U=V(n(97)),k=V(n(8402)),G=V(n(6609)),F=V(n(11)),j=V(n(72)),H=V(n(336)),x=V(n(198)),B=n(1);function V(e){return e&&e.__esModule?e:{default:e}}function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var W=((r={})[B.NoticeTypes.DOWNLOAD_NAG]="hideNag",r[B.NoticeTypes.CONNECT_SPOTIFY]="hideConnectSpotify",r[B.NoticeTypes.PREMIUM_PROMO]="hidePremiumPromo",r[B.NoticeTypes.MFA_SMS_BACKUP]="hideMFASMSNotice",r[B.NoticeTypes.PREMIUM_SUBSCRIPTION_EXTRA_SUBSCRIPTION]="hidePremiumSubscriptionExtraSubscription",r[B.NoticeTypes.PREMIUM_XBOX_GAME_PASS_PROMOTION]="hidePremiumXboxGamePassPromotion",r[B.NoticeTypes.PREMIUM_GRANDFATHERED_ENDING]="hidePremiumGrandfatheredEnding",r[B.NoticeTypes.PREMIUM_GRANDFATHERED_ENDED]="hidePremiumGrandfatheredEnded",r[B.NoticeTypes.DETECTED_OFF_PLATFORM_PREMIUM_PERK_UPSELL]="hideDetectedOffPlatformPremiumPerkUpsell",r),z=new Set([B.NoticeTypes.NO_INPUT_DETECTED,B.NoticeTypes.STREAMER_MODE,B.NoticeTypes.VIDEO_UNSUPPORTED_BROWSER,B.NoticeTypes.SPOTIFY_AUTO_PAUSED,B.NoticeTypes.DISPATCH_ERROR,B.NoticeTypes.DISPATCH_ERROR,B.NoticeTypes.DISPATCH_INSTALL_SCRIPT_PROGRESS]),Y={},q=Object.freeze({id:null,message:null,buttonText:null,callback:null,metadata:null}),$=null;function J(e){if(null!=e){var t=W[e];null!=t&&l.default.set(t,!0),z.has(e)&&(Y[e]=!0),e===B.NoticeTypes.PREMIUM_PROMO&&(0,d.setFlag)(B.UserFlags.PREMIUM_PROMO_DISMISSED,!0)}}function Q(e){if(null==e)return!1;var t=W[e];return t?l.default.get(t):!!z.has(e)&&Y[e]}function X(){if(!E.default.isConnected())return!1;$=null;var e,t=F.default.getCurrentUser(),n=H.default.getPremiumSubscription(),r=null!=n?n.planId:null,a=j.default.getCurrentClientVoiceChannelId(null),l=g.default.getChannel(a),u=null!=l&&j.default.hasVideo(l),s=S.default.getDetectedOffPlatformPremiumPerks(),d=I.default.getLastError(),f=T.default.getLastProgress(),v=k.default.getCurrentSurvey();if(null!=m.default.getRequest())$=K({},q,{type:B.NoticeTypes.ACTIVITY_JOIN_REQUEST});else if(P.default.isDisabled())$=K({},q,{type:B.NoticeTypes.VOICE_DISABLED});else if(!1===b.default.getInputDetected())$=K({},q,{type:B.NoticeTypes.NO_INPUT_DETECTED});else if(P.default.isConnected()&&b.default.isHardwareMute()){var _=b.default.getInputDeviceId(),A=y.default.getVendor(_),C=y.default.getModel(_);null!=A&&null!=C&&($=K({},q,{type:B.NoticeTypes.HARDWARE_MUTE,metadata:{vendor:A,model:C}}))}else if(null!=d)$=K({},q,{type:B.NoticeTypes.DISPATCH_ERROR,metadata:{error:d}});else if(null!=f)$=K({},q,{type:B.NoticeTypes.DISPATCH_INSTALL_SCRIPT_PROGRESS,metadata:f});else if(L.default.wasAutoPaused())$=K({},q,{type:B.NoticeTypes.SPOTIFY_AUTO_PAUSED});else if(!Q(B.NoticeTypes.PREMIUM_XBOX_GAME_PASS_PROMOTION)&&h.default.isPremium(t,B.PremiumTypes.TIER_2))$=K({},q,{type:B.NoticeTypes.PREMIUM_XBOX_GAME_PASS_PROMOTION});else if(!Q(B.NoticeTypes.PREMIUM_SUBSCRIPTION_EXTRA_SUBSCRIPTION)&&h.default.isPremium(t,B.PremiumTypes.TIER_2))$=K({},q,{type:B.NoticeTypes.PREMIUM_SUBSCRIPTION_EXTRA_SUBSCRIPTION});else if(!Q(B.NoticeTypes.PREMIUM_GRANDFATHERED_ENDED)&&null!=r&&h.default.isGrandfathered(r)&&h.default.getDaysToGrandfatheredEnd(r)>=-14&&h.default.getDaysToGrandfatheredEnd(r)<=0)$=K({},q,{type:B.NoticeTypes.PREMIUM_GRANDFATHERED_ENDED});else if(!Q(B.NoticeTypes.PREMIUM_GRANDFATHERED_ENDING)&&null!=r&&h.default.isGrandfathered(r)&&h.default.getDaysToGrandfatheredEnd(r)>0&&h.default.getDaysToGrandfatheredEnd(r)<=h.default.GRANDFATHERED_DAYS_APPROACHING)$=K({},q,{type:B.NoticeTypes.PREMIUM_GRANDFATHERED_ENDING,metadata:{plan:r}});else if(null!=t&&null==t.email)$=K({},q,{type:B.NoticeTypes.UNCLAIMED_ACCOUNT});else if(!p.default.embedded||i.default.supported()&&!O.default.isCorruptInstallation())if(!u||b.default.supports(o.Features.VIDEO)||Q(B.NoticeTypes.VIDEO_UNSUPPORTED_BROWSER))if(s.length>0&&h.default.canRedeemPremiumPerks(t)){var M=s[0];$=K({},q,{type:B.NoticeTypes.DETECTED_OFF_PLATFORM_PREMIUM_PERK,metadata:M})}else if(!Q(B.NoticeTypes.DETECTED_OFF_PLATFORM_PREMIUM_PERK_UPSELL)&&s.length>0){var G=s[0];$=K({},q,{type:B.NoticeTypes.DETECTED_OFF_PLATFORM_PREMIUM_PERK_UPSELL,metadata:G})}else if(U.default.enabled)$=K({},q,{type:B.NoticeTypes.STREAMER_MODE});else if(p.default.embedded||Q(B.NoticeTypes.DOWNLOAD_NAG))if(e=w.default.getScheduledMaintenance())$=K({},q,{type:B.NoticeTypes.SCHEDULED_MAINTENANCE,metadata:{id:e.id,start:new Date(e.scheduled_for),end:new Date(e.scheduled_until)}});else if(null!=v)$=K({},q,{type:B.NoticeTypes.SURVEY,metadata:v});else if(null==t||t.verified)if(L.default.hasConnectedAccount()||!D.default.isObservedAppRunning(c.default.get(B.PlatformTypes.SPOTIFY).name)||Q(B.NoticeTypes.CONNECT_SPOTIFY))if(null==t||h.default.isPremium(t)||t.hasFlag(B.UserFlags.PREMIUM_PROMO_DISMISSED)||!R.default.isEligible()||Q(B.NoticeTypes.PREMIUM_PROMO))if(null==t||!t.mfaEnabled||t.hasFlag(B.UserFlags.MFA_SMS)||t.hasFlag(B.UserFlags.STAFF)||t.hasFlag(B.UserFlags.PARTNER)||Q(B.NoticeTypes.MFA_SMS_BACKUP)){if(null!=x.default.testModeApplicationId){var V=x.default.testModeApplicationId,W=N.default.getGame(V),z=null!=W?W.name:V;$=K({},q,{type:B.NoticeTypes.APPLICATION_TEST_MODE,metadata:{applicationName:z,applicationId:V}})}}else $=K({},q,{type:B.NoticeTypes.MFA_SMS_BACKUP});else $=K({},q,{type:B.NoticeTypes.PREMIUM_PROMO});else $=K({},q,{type:B.NoticeTypes.CONNECT_SPOTIFY});else $=K({},q,{type:B.NoticeTypes.UNVERIFIED_ACCOUNT});else $=K({},q,{type:B.NoticeTypes.DOWNLOAD_NAG});else $=K({},q,{type:B.NoticeTypes.VIDEO_UNSUPPORTED_BROWSER});else $=K({},q,{type:B.NoticeTypes.CORRUPT_INSTALLATION});null!=$&&Q($.type)&&($=null)}function Z(){return U.default.enabled||delete Y[B.NoticeTypes.STREAMER_MODE],X()}var ee=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.syncWith([k.default,m.default,R.default,S.default],X),this.waitFor(F.default,g.default,w.default,M.default,C.default,P.default,b.default,U.default,A.default,f.default,G.default,m.default,L.default,D.default,R.default,I.default,T.default,x.default,H.default,O.default,S.default,_.default)},a.hasNotice=function(){return null!=$&&null!=$.type},a.getNotice=function(){return null==G.default.getAction()?$:null},r}(a.default.Store))(u.default,{CONNECTION_OPEN:function(e){return function(){if(!E.default.isConnected())return!1;var e=F.default.getCurrentUser();h.default.isPremium(e)&&h.default.shouldCheckGrandfatheredPlan()&&u.default.wait(function(){return s.fetchSubscriptions()}),X()}()},CURRENT_USER_UPDATE:function(e){return X()},AUDIO_ENABLE:function(e){return X()},VOICE_CHANNEL_CLEAR:function(e){return X()},STATUS_PAGE_SCHEDULED_MAINTENANCE:function(e){return X()},STATUS_PAGE_SCHEDULED_MAINTENANCE_ACK:function(e){return X()},GUILD_CREATE:function(e){return X()},GUILD_DELETE:function(e){return X()},AUDIO_INPUT_DETECTED:function(e){return X()},AUDIO_SET_DISPLAY_SILENCE_WARNING:function(e){return X()},CERTIFIED_DEVICES_SET:function(e){return X()},AUDIO_SET_INPUT_DEVICE:function(e){return X()},AUDIO_SET_OUTPUT_DEVICE:function(e){return X()},MEDIA_ENGINE_DEVICES:function(e){return X()},RTC_CONNECTION_STATE:function(e){return X()},RPC_APP_AUTHENTICATED:function(e){return X()},RPC_APP_DISCONNECTED:function(e){return X()},USER_CONNECTIONS_UPDATE:function(e){return X()},WINDOW_FOCUS:function(e){return X()},INSTANT_INVITE_CREATE:function(e){return X()},INSTANT_INVITE_REVOKE_SUCCESS:function(e){return X()},SPOTIFY_PLAYER_PAUSE:function(e){return X()},RUNNING_GAMES_CHANGE:function(e){return X()},EXPERIMENTS_FETCH_SUCCESS:function(e){return X()},PREMIUM_PAYMENT_SUBSCRIBE_SUCCESS:function(e){return X()},DEVELOPER_TEST_MODE_AUTHORIZATION_SUCCESS:function(e){return X()},DEVELOPER_TEST_MODE_AUTHORIZATION_FAIL:function(e){return X()},DEVELOPER_TEST_MODE_RESET:function(e){return X()},BILLING_SUBSCRIPTION_FETCH_SUCCESS:function(e){return X()},DISPATCH_APPLICATION_INSTALL:function(e){return X()},CHANGE_LOG_OPEN:function(e){return X()},VOICE_STATE_UPDATE:function(e){return e.userId===v.default.getId()&&X()},STREAMER_MODE_UPDATE:function(e){return Z()},RUNNING_STREAMER_TOOLS_CHANGE:function(e){return Z()},DISPATCH_APPLICATION_ERROR:function(e){return delete Y[B.NoticeTypes.DISPATCH_ERROR],X()},DISPATCH_APPLICATION_LAUNCH_SETUP_START:function(e){return delete Y[B.NoticeTypes.DISPATCH_INSTALL_SCRIPT_PROGRESS],X()},DISPATCH_APPLICATION_INSTALL_SCRIPTS_PROGRESS_UPDATE:function(e){return X()},DISPATCH_APPLICATION_LAUNCH_SETUP_COMPLETE:function(e){return X()},NOTICE_SHOW:function(e){$=e.notice},NOTICE_DISMISS:function(e){return null!=$&&((null==e.id||e.id===$.id)&&(J($.type),X()))},NOTICE_DISABLE:function(e){return J(e.noticeType),X()},LOGOUT:function(e){return Y={},void($=null)}});t.default=ee},7055:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(12)),a=i(n(2)),o=n(1);function i(e){return e&&e.__esModule?e:{default:e}}var l=o.STATUS_PAGE_ENDPOINT+"/api/v2/scheduled-maintenances",u=o.STATUS_PAGE_ENDPOINT+"/api/v2/incidents/unresolved.json",s={checkIncidents:function(){Promise.all([r.default.get(l+"/active.json"),r.default.get(u)]).then(function(e){var t=e[0],n=e[1],r=t.body.scheduled_maintenances[0],i=n.body.incidents[0];a.default.dispatch({type:o.ActionTypes.STATUS_PAGE_INCIDENT,incident:i||r})})},checkScheduledMaintenances:function(){r.default.get(l+"/upcoming.json").then(function(e){var t=e.body.scheduled_maintenances[0];a.default.dispatch({type:o.ActionTypes.STATUS_PAGE_SCHEDULED_MAINTENANCE,maintenance:t})})},ackScheduledMaintenance:function(){a.default.dispatch({type:o.ActionTypes.STATUS_PAGE_SCHEDULED_MAINTENANCE_ACK})}};t.default=s},7057:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=f(n(0)),a=c(n(8414)),o=c(n(30)),i=c(n(109)),l=f(n(6592)),u=c(n(13)),s=c(n(6866)),d=c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e){var t=["openFile"];e.multiple&&t.push("multiSelections");var n=e.filters;i.default.fileManager.openFiles({properties:t,filters:n},e.maxSize,l.makeFile).then(function(t){null!=t&&e.onChange({stopPropagation:function(){return null},preventDefault:function(){return null},currentTarget:{files:t}})},function(t){if("ETOOLARGE"!==t.code)throw t;o.default.push(s.default,{title:d.default.Messages.UPLOAD_AREA_TOO_LARGE_TITLE,help:d.default.Messages.UPLOAD_AREA_TOO_LARGE_HELP.format({maxSize:l.sizeString(e.maxSize)})})})}var m=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this).setRef=n.setRef.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=o.prototype;return i.activateUploadDialogue=function(){if(this._ref)return this._ref.activateUploadDialogue()},i.setRef=function(e){this._ref=e},i.render=function(){return r.createElement(a.default,p({ref:this.setRef,handleNativeClick:h,embedded:u.default.isDesktop()},this.props))},o}(r.Component);m.displayName="FileInput";var v=m;t.default=v},7059:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=(0,a.default)(e,o.ActivityFlags.JOIN),n=(0,a.default)(e,o.ActivityFlags.SPECTATE);return t||n};var r,a=(r=n(477))&&r.__esModule?r:{default:r},o=n(1)},7060:function(e,t,n){"use strict";var r;t.__esModule=!0,t.getTabIndex=function(e){return o.indexOf(e)+1},t.TabIndexKeys=void 0;var a=(0,((r=n(82))&&r.__esModule?r:{default:r}).default)({CHANNEL_TEXT_AREA:null,CHANNEL_TEXT_AREA_PREMIUM_GIFT:null,CHANNEL_TEXT_AREA_GIF_PICKER:null,CHANNEL_TEXT_AREA_EMOJI:null,CHANNEL_TEXT_AREA_UPLOAD:null});t.TabIndexKeys=a;var o=[a.CHANNEL_TEXT_AREA,a.CHANNEL_TEXT_AREA_PREMIUM_GIFT,a.CHANNEL_TEXT_AREA_GIF_PICKER,a.CHANNEL_TEXT_AREA_EMOJI,a.CHANNEL_TEXT_AREA_UPLOAD]},7061:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(2))&&r.__esModule?r:{default:r},o=n(1);var i={popFirstFile:function(){a.default.dispatch({type:o.ActionTypes.UPLOAD_MODAL_POP_FILE})},pushFiles:function(e){var t=e.files,n=e.channelId;a.default.dispatch({type:o.ActionTypes.UPLOAD_MODAL_PUSH_FILES,files:t,channelId:n})},clearAll:function(){a.default.dispatch({type:o.ActionTypes.UPLOAD_MODAL_CLEAR_ALL_FILES})}};t.default=i},7062:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=x(n(0)),o=H(n(391)),i=H(n(8)),l=H(n(6)),u=H(n(5)),s=H(n(118)),d=x(n(3)),c=H(n(27)),f=H(n(7063)),p=H(n(329)),h=H(n(162)),m=n(184),v=n(330),y=H(n(333)),_=H(n(6867)),g=H(n(6544)),E=H(n(196)),S=H(n(19)),I=H(n(340)),T=H(n(25)),O=H(n(336)),A=H(n(106)),N=H(n(21)),C=H(n(58)),M=H(n(6521)),b=H(n(42)),R=H(n(257)),P=H(n(15)),D=H(n(199)),L=H(n(96)),w=H(n(468)),U=H(n(7683)),k=H(n(6576)),G=n(1),F=H(n(4)),j=H(n(6228));function H(e){return e&&e.__esModule?e:{default:e}}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function K(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var W,z=c.default.get("premiumRetentionEmojiPickerNotice"),Y=32,q=o.default.convert.fromCodePoint("1f44f"),$=22,J=125,Q=28;!function(e){e.recent="recent",e.custom="custom",e.people="people",e.nature="nature",e.food="food",e.activity="activity",e.travel="travel",e.objects="objects",e.symbols="symbols",e.flags="flags"}(W||(W={}));var X={recent:b.default.Names.EMOJI_FREQUENT_CATEGORY,custom:b.default.Names.EMOJI_CUSTOM_CATEGORY,people:b.default.Names.EMOJI_PEOPLE_CATEGORY,nature:b.default.Names.EMOJI_NATURE_CATEGORY,food:b.default.Names.EMOJI_FOOD_CATEGORY,activity:b.default.Names.EMOJI_ACTIVITY_CATEGORY,travel:b.default.Names.EMOJI_TRAVEL_CATEGORY,objects:b.default.Names.EMOJI_OBJECTS_CATEGORY,symbols:b.default.Names.EMOJI_SYMBOLS_CATEGORY,flags:b.default.Names.EMOJI_FLAGS_CATEGORY};function Z(e){var t=null!=e&&null!=e.getGuildId();P.default.track(G.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location_page:t?G.AnalyticsPages.GUILD_CHANNEL:G.AnalyticsPages.DM_CHANNEL,location_section:null!=e?G.AnalyticsSections.EMOJI_PICKER_POPOUT:G.AnalyticsSections.CUSTOM_STATUS_MODAL})}var ee=function(e){var t=e.onLearnMore,r=e.onClose,a=e.channel;return K("div",{className:j.default.premiumPromo},void 0,K(C.default,{className:j.default.premiumPromoClose,onClick:r},void 0,F.default.Messages.CLOSE),K("img",{alt:"",className:j.default.premiumPromoImage,src:n(8427),width:124,height:96}),K("div",{className:j.default.premiumPromoTitle},void 0,F.default.Messages.PREMIUM_PROMO_TITLE),K("div",{className:j.default.premiumPromoDescription},void 0,F.default.Messages.PREMIUM_PROMO_DESCRIPTION),K(N.default,{onClick:function(){Z(a),p.default.open(G.UserSettingsSections.PREMIUM),t()}},void 0,F.default.Messages.LEARN_MORE))};ee.displayName="PremiumPromo";var te=(0,v.registerUserExperiment)({id:y.default.PREMIUM_RETENTION_EMOJI_PICKER,title:"Nitro Retention: Emoji Picker",description:["Treatment 1: Users see the notice"],buckets:[m.ExperimentBuckets.CONTROL,m.ExperimentBuckets.TREATMENT_1],clientFilter:(0,_.default)([O.default],function(){var e=O.default.getPremiumSubscription();return null!=e&&e.status===G.SubscriptionStatusTypes.PAST_DUE})}),ne=function(e){var t=e.closePopout,n=e.channel,r=(0,g.default)(te),o=a.useState(!1),i=o[0],l=o[1],s=(0,d.useStateFromStores)([O.default],function(){return O.default.getPremiumSubscription()});if(r!==m.ExperimentBuckets.TREATMENT_1||null==s||s.status!==G.SubscriptionStatusTypes.PAST_DUE||i)return null;var f=(0,u.default)(s.currentPeriodStart).add(G.MAX_INVOICE_PAYMENT_DAYS,"days"),h=s.id+":"+f.toISOString();return z===h?null:K("div",{className:j.default.premiumRetentionNotice},void 0,K(b.default,{name:b.default.Names.NITRO_WHEEL,className:j.default.premiumRetentionNoticeIcon,gradient:L.default.getPremiumType(s.planId)===G.PremiumTypes.TIER_1?b.default.Gradients.PREMIUM_TIER_1:b.default.Gradients.PREMIUM_TIER_2}),K("div",{className:j.default.premiumRetentionNoticeContent},void 0,K(R.default,{size:R.default.Sizes.SIZE_12},void 0,F.default.Messages.PREMIUM_RETENTION_EMOJI_PICKER_DESCRIPTION.format({planName:L.default.getDisplayPremiumType(s.planId),endsAt:f})),K("div",{},void 0,K(A.default,{onClick:function(){Z(n),t(),p.default.open(G.UserSettingsSections.PREMIUM)}},void 0,F.default.Messages.PREMIUM_RETENTION_EMOJI_PICKER_UPDATE_PAYMENT_INFORMATION))),K(C.default,{onClick:function(){c.default.set("premiumRetentionEmojiPickerNotice",h),z=h,l(!0)}},void 0,K(b.default,{name:b.default.Names.CLOSE,className:j.default.premiumRetentionNoticeClose})))};ne.displayName="PremiumRetentionNotice";var re=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={opacity:new s.default.Value(t.props.fade?0:1)},t}V(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.fade,n=e.delay;t&&s.default.timing(this.state.opacity,{delay:n,toValue:1,duration:150}).start()},n.render=function(){var e=this.props,t=e.surrogate,n=e.onClick,r=D.default.getURL(q+t),a={opacity:this.state.opacity,backgroundImage:'url("'+r+'")'};return K(s.default.div,{onClick:function(){return n(t)},className:j.default.item,style:a})},t}(a.Component);re.displayName="DiversityIcon",re.defaultProps={delay:0,fade:!1};var ae=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={isOpen:!1,height:new s.default.Value(Q)},t.me=a.createRef(),t.handleDiversityColorChange=function(e){f.default.setDiversityColor(e),t.close()},t.handleOpen=function(){var e=t.props.onOpen;s.default.timing(t.state.height,{fromValue:Q,toValue:180,duration:J}).start(),t.setState({isOpen:!0}),document.addEventListener("click",t.close,!0),e&&e(!0)},t.close=function(e){var n=t.props.onOpen,r=t.me.current;if(null!=e&&null!=r)for(var a=e.target;null!=a;){if(a===r)return;a=a.parentNode||null}t.setState({isOpen:!1}),t.state.height.setValue(Q),n&&n(!1)},t}V(t,e);var n=t.prototype;return n.componentWillUnmount=function(){document.removeEventListener("click",this.close,!0)},n.render=function(){var e=this,t=this.props.selectedSurrogate,n=this.state,r=n.isOpen,o=n.height;if(r){var i=[""].concat(G.DIVERSITY_SURROGATES);l.default.remove(i,function(e){return e===t}),i.unshift(t);var u=i.map(function(t,n){return K(re,{fade:n>0,delay:20*n,surrogate:t,onClick:e.handleDiversityColorChange},n)});return a.createElement("div",{ref:this.me,className:j.default.diversitySelector},K(s.default.div,{className:j.default.popout,style:{height:o}},void 0,u))}var d=D.default.getURL(q+t);return K(C.default,{className:j.default.diversitySelector,onClick:this.handleOpen},void 0,K("div",{className:j.default.item,style:{backgroundImage:'url("'+d+'")'}}))},t}(a.PureComponent);ae.displayName="DiversitySelector";var oe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).categories=[],t.categoryOffsets={},t.cachedMetaDataNoSearch=null,t.spriteSheetSize=[$*G.EmojiSprites.NonDiversityPerRow+"px",$*Math.ceil(h.default.numNonDiversitySprites/G.EmojiSprites.NonDiversityPerRow)+"px"].join(" "),t.diversitySpriteSheetSize=[$*G.EmojiSprites.DiversityPerRow+"px",$*Math.ceil(h.default.numDiversitySprites/G.EmojiSprites.DiversityPerRow)+"px"].join(" "),t.searchRef=a.createRef(),t.scrollerRef=a.createRef(),t.state={premiumPromoOpen:!1,diversityPickerOpen:!1,metaData:t.computeMetaData(null),searchResults:null,currentSection:E.default.categories[0],selectedRow:-1,selectedColumn:-1,query:"",placeholder:F.default.Messages.SEARCH_FOR_EMOJI,hoveredEmoji:null},t.handleClear=function(){t.clearNow()},t.handleSelect=function(e,n,r){null!=e&&null!=n?t.selectEmoji(t.state.metaData[e].items[n].emoji,!r.shiftKey):t.selectEmoji(null)},t.handleSelectionChange=function(e,n){if(!(e<0||n<0)){var r=t.state.metaData[e].items[n],a=r.emoji,o=r.offsetTop,i=t.scrollerRef.current;t.setState({selectedRow:e,selectedColumn:n,placeholder:a.allNamesString,hoveredEmoji:a}),null!=i&&i.scrollIntoViewRect(o,o+Y,!1)}},t.handleQueryChange=function(e){if(""!==e){var n=e;":"===n[0]&&(n=n.slice(1));var r=E.default.search(t.props.channel,n);t.setState({query:e,searchResults:r,metaData:t.computeMetaData(r),selectedRow:-1,selectedColumn:-1,currentSection:null,hoveredEmoji:null})}else t.clearNow()},t.handleScroll=function(){var e=t.getCurrentSection();e!==t.state.currentSection&&t.setState({currentSection:e})},t.handleDiversityPickerToggled=function(e){t.setState({diversityPickerOpen:e})},t.renderStickyHeader=function(){var e=t.scrollerRef.current;if(""!==t.state.query)return null;if(null==e)return K("div",{className:j.default.stickyHeader},void 0,K("div",{className:j.default.category},void 0,t.categoryOffsets[E.default.categories[0]]));var n=e.getScrollerNode();if(null==n)return null;var r=n.scrollTop,a=r+Y,o=-1,i=-1;l.default.forEach(t.categories,function(e,t){var n=e.offsetTop;n<=r&&o<n&&(o=n,i=t)});var u=i+1;if(null==t.categories[i])return null;if(u<t.categories.length&&t.categories[u].offsetTop<a){var s={marginTop:t.categories[u].offsetTop-a};return K("div",{className:j.default.stickyHeader,style:s},void 0,K("div",{className:j.default.category},void 0,t.categories[i].title),K("div",{className:j.default.category},void 0,t.categories[u].title))}return K("div",{className:j.default.stickyHeader},void 0,K("div",{className:j.default.category},void 0,t.categories[i].title))},t}V(t,e);var r=t.prototype;return r.selectEmoji=function(e,t){void 0===t&&(t=!0);var n=this.props,r=n.channel,a=n.closePopout,o=n.onSelectEmoji,i=n.allowManagedEmojis;(null==e||e.available)&&(null!=e&&D.default.isEmojiDisabled(e,r,i)?this.setState({premiumPromoOpen:!0}):(o&&o(e,t),t?a():this.focusSearch()))},r.clearNow=function(e){var t={query:"",placeholder:F.default.Messages.SEARCH_FOR_EMOJI,searchResults:null,metaData:this.computeMetaData(null),selectedRow:-1,selectedColumn:-1,hoveredEmoji:null};""!==this.state.query&&(t.currentSection=E.default.categories[0]),this.focusSearch(),this.setState(t,e)},r.focusSearch=function(){var e=this.searchRef.current;null!=e&&e.focus()},r.componentDidMount=function(){P.default.track(G.AnalyticEvents.OPEN_POPOUT,{type:"Emoji Picker"}),this.focusSearch();var e=this.props.onOpen;e&&e()},r.componentWillUnmount=function(){var e=this.props.onClose;e&&e()},r.onHoverEmoji=function(e,t,n){this.setState({selectedRow:t,selectedColumn:n,placeholder:e.allNamesString,hoveredEmoji:e})},r.scrollNow=function(e){var t=this;this.clearNow(function(){var n=t.scrollerRef.current;null!=n&&n.scrollTo(t.categoryOffsets[e],!0)})},r.getCurrentSection=function(){var e=this.scrollerRef.current;if(""!==this.state.query||null==e)return null;var t=e.getScrollData();if(null==t)return null;var n=t.scrollTop+.25*t.offsetHeight;if(0===t.scrollTop)return E.default.categories[0];var r=-1,a=null;return l.default.forEach(this.categoryOffsets,function(e,t){e<=n&&e>=r&&(r=e,a=t)}),a},r.computeMetaData=function(e){var t=this,n=E.default.categories.length,r=this.props,a=r.channel,o=r.allowManagedEmojis,i=null!=a?a.getGuildId():null,u=[],s=0,d=0,c=function(){return s*Y+6},f=function(e,t){void 0===t&&(t=null);var r=[],i=l.default.partition(e,function(e){return!D.default.isEmojiDisabled(e,a,o)}),f=i[0],p=i[1];l.default.forEach([].concat(f,p),function(e){r.push({emoji:e,offsetTop:c(),row:d,column:r.length}),r.length===n&&(u.push({category:t,items:r}),r=[],d+=1,s+=1)}),r.length>0&&(u.push({category:t,items:r}),d+=1,s+=1)};if(e)f(e);else{if(this.cachedMetaDataNoSearch)return this.cachedMetaDataNoSearch;this.categoryOffsets={},this.categories=[];var p=function(e,n,r){t.categoryOffsets[e]=c(),t.categories.push({category:e,offsetTop:c(),title:n}),s+=1,f(r,e)},m=E.default.getDisambiguatedEmojiContext(i);l.default.forEach(E.default.categories,function(e){if(e===G.EMOJI_CATEGORY_CUSTOM){var t=0,n=m.getCustomEmoji(),r=l.default.groupBy(n,"guildId"),o=function(n){var o=r[n.id];if(null!=o){var i=o.filter(function(e){return!D.default.isEmojiFiltered(e,a)});0!==i.length&&p(0==t++?e:""+e+t,n.toString(),i)}},u=S.default.getGuild(i);u&&o(u),l.default.each(I.default.getFlattenedGuilds(),function(e){e.id!==i&&o(e)})}else{var s=(e===G.EMOJI_CATEGORY_RECENT?m.getFrequentlyUsedEmojis().filter(function(e){return!D.default.isEmojiFiltered(e,a)}):h.default.getByCategory(e))||[];p(e,function(e){return{recent:F.default.Messages.EMOJI_CATEGORY_RECENT,custom:F.default.Messages.EMOJI_CATEGORY_CUSTOM,activity:F.default.Messages.EMOJI_CATEGORY_ACTIVITY,flags:F.default.Messages.EMOJI_CATEGORY_FLAGS,food:F.default.Messages.EMOJI_CATEGORY_FOOD,nature:F.default.Messages.EMOJI_CATEGORY_NATURE,objects:F.default.Messages.EMOJI_CATEGORY_OBJECTS,people:F.default.Messages.EMOJI_CATEGORY_PEOPLE,symbols:F.default.Messages.EMOJI_CATEGORY_SYMBOLS,travel:F.default.Messages.EMOJI_CATEGORY_TRAVEL}[e]}(e),s)}}),this.cachedMetaDataNoSearch=u}return u},r.render=function(){var e,t,r=this,u=this.props,s=u.channel,d=u.diversitySurrogate,c=u.closePopout,f=u.allowManagedEmojis,p=u.theme,h=this.state,m=h.metaData,v=h.selectedRow,y=h.selectedColumn,_=h.currentSection,g=h.placeholder,I=h.query,T=h.premiumPromoOpen,O=h.hoveredEmoji,A=[],N=null,P=null;if(0===m.length)P=K(U.default,{message:F.default.Messages.NO_EMOJI_SEARCH_RESULTS,className:j.default.noSearchResultsContainer});else{var L=""!==d?o.default.convert.toCodePoint(d):"";l.default.forEach(m,function(e){var t=e.category,o=e.items;if(null!=t&&t!==N){N=t;var u=l.default.find(r.categories,function(e){return e.category===t});null!=u&&A.push(K("div",{className:j.default.category},t,u.title))}var d=l.default.map(o,function(e){var t,o=e.emoji,l=e.row,u=e.column,d=null,c=l===v&&u===y,p=null!=o.index?o.index:0,h={key:o.name+"-"+l+"-"+u,className:(0,i.default)(j.default.emojiItem,(t={},t[j.default.selected]=c,t[j.default.disabled]=D.default.isEmojiDisabled(o,s,f),t)),onClick:function(e){return r.selectEmoji(o,!e.shiftKey)},onMouseOver:function(){return r.onHoverEmoji(o,l,u)}};if(!o.useSpriteSheet)return a.createElement("div",B({},h,{style:{backgroundImage:"url('"+o.url+"')"}}));if(o.hasDiversity){var m=-p%G.EmojiSprites.DiversityPerRow*$,_=-Math.floor(p/G.EmojiSprites.DiversityPerRow)*$;d={backgroundImage:"url('"+n(8428)("./spritesheet-"+L+".png")+"')",backgroundPosition:m+"px "+_+"px",backgroundSize:r.diversitySpriteSheetSize}}else{var g=-p%G.EmojiSprites.NonDiversityPerRow*$,E=-Math.floor(p/G.EmojiSprites.NonDiversityPerRow)*$;d={backgroundImage:"url('"+n(7684)+"')",backgroundPosition:g+"px "+E+"px",backgroundSize:r.spriteSheetSize}}return a.createElement("div",h,K("div",{className:j.default.spriteItem,style:d}))});A.push(K("div",{className:j.default.row},A.length,d))}),P=a.createElement(w.default,{ref:this.scrollerRef,outerClassName:j.default.scrollerWrap,className:j.default.scroller,onScroll:this.handleScroll,elementHeight:Y,fade:!0,theme:p,renderStickyHeader:function(){return r.renderStickyHeader()}},A)}var H,x=l.default.map(E.default.categories,function(e){var t;return K(C.default,{"aria-label":e,className:(0,i.default)(j.default.item,(t={},t[j.default.selected]=null!=_&&0===_.indexOf(e),t)),onClick:function(){return r.scrollNow(e)}},e,K(b.default,{name:X[e],className:j.default.categoryIcon,width:$,height:$}))});T&&(H=K(ee,{onLearnMore:c,onClose:function(){return r.setState({premiumPromoOpen:!1})},channel:s}));var V=null!==(e=O)&&void 0!==e?e:null===(t=m[0])||void 0===t?void 0:t.items[0].emoji,W=null!=V?S.default.getGuild(V.guildId):null,z=K("div",{className:j.default.infoBar},void 0,null!=V&&K("div",{className:j.default.infoBarEmoji,style:{backgroundImage:"url('"+V.url+"')"}}),K("div",{className:j.default.infoBarTextWrapper},void 0,K(R.default,{className:j.default.infoBarEmojiName,size:R.default.Sizes.SIZE_16},void 0,null==V?void 0:V.allNamesString),null!=W&&K(R.default,{className:j.default.infoBarGuildName,size:R.default.Sizes.SIZE_12},void 0,F.default.Messages.EMOJI_FROM_GUILD.format({guildName:W.name}))),null!=W&&K(M.default,{guild:W,size:M.default.Sizes.SMALLER}));return K("div",{className:j.default.emojiPicker},void 0,K("div",{className:j.default.header},void 0,a.createElement(k.default,{query:I,ref:this.searchRef,size:k.default.Sizes.MEDIUM,placeholder:g,gridResults:!0,selectedRow:v,selectedColumn:y,sections:m.map(function(e){return e.items.length}),onClear:this.handleClear,onSelect:this.handleSelect,onSelectionChange:this.handleSelectionChange,onQueryChange:this.handleQueryChange,className:j.default.searchBar}),K(ae,{onOpen:this.handleDiversityPickerToggled,selectedSurrogate:d})),K(ne,{channel:s,closePopout:c}),P,z,K("div",{className:j.default.categories},void 0,x),H)},t}(a.PureComponent);oe.displayName="EmojiPicker",oe.defaultProps={allowManagedEmojis:!0};var ie=d.default.connectStores([E.default,T.default],function(){return{diversitySurrogate:E.default.diversitySurrogate,theme:T.default.theme}})(oe);t.default=ie},7063:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(12)),a=i(n(2)),o=n(1);function i(e){return e&&e.__esModule?e:{default:e}}var l={setDiversityColor:function(e){a.default.dispatch({type:o.ActionTypes.EMOJI_DIVERSITY_COLOR_CHANGE,color:e})},fetchEmoji:function(e){a.default.maybeDispatch({type:o.ActionTypes.EMOJI_FETCH,guildId:e}),r.default.get({url:o.Endpoints.GUILD_EMOJIS(e)}).then(function(t){return a.default.dispatch({type:o.ActionTypes.EMOJI_FETCH_SUCCESS,guildId:e,emojis:t.body})},function(){return a.default.dispatch({type:o.ActionTypes.EMOJI_FETCH_FAILURE,guildId:e})})},uploadEmoji:function(e,t,n){return a.default.dispatch({type:o.ActionTypes.EMOJI_UPLOAD_START,guildId:e}),r.default.post({url:o.Endpoints.GUILD_EMOJIS(e),body:{image:t,name:n}}).then(function(){return a.default.dispatch({type:o.ActionTypes.EMOJI_UPLOAD_STOP,guildId:e})},function(t){return a.default.dispatch({type:o.ActionTypes.EMOJI_UPLOAD_STOP,guildId:e}),Promise.reject(t)})},deleteEmoji:function(e,t){a.default.dispatch({type:o.ActionTypes.EMOJI_DELETE,guildId:e,emojiId:t}),r.default.delete({url:o.Endpoints.GUILD_EMOJI(e,t)})},updateEmoji:function(e,t,n){r.default.patch({url:o.Endpoints.GUILD_EMOJI(e,t),body:{name:n}})}};t.default=l},7064:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(3)),a=s(n(2)),o=s(n(473)),i=s(n(13)),l=n(1),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=i.default.isOSX()?l.TenorFormats.MEDIUMGIF:l.TenorFormats.MP4,f=null,p="",h="",m=[],v=[],y=c,_=[];function g(e){switch(e){case l.GIPHYFormats.FIXED_HEIGHT_MP4:case l.GIPHYFormats.FIXED_HEIGHT_SMALL_MP4:case l.GIPHYFormats.FIXED_WIDTH_MP4:case l.GIPHYFormats.FIXED_WIDTH_SMALL_MP4:case l.GIPHYFormats.DOWNSIZED_SMALL_MP4:case l.GIPHYFormats.ORIGINAL_MP4:case l.TenorFormats.MP4:case l.TenorFormats.TINYMP4:case l.TenorFormats.NANOMP4:case l.TenorFormats.WEBM:case l.TenorFormats.TINYWEBM:case l.TenorFormats.NANOWEBM:return!0;default:return!1}}var E=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getAnalyticsID=function(){return f},a.getQuery=function(){return p},a.getResultQuery=function(){return h},a.getResultItems=function(){return m},a.getTrendingCategories=function(){return v},a.getSelectedFormat=function(){return y},a.getSuggestions=function(){return _},r}(r.default.Store))(a.default,{GIF_PICKER_INITIALIZE:function(e){f=e.analyticsID},GIF_PICKER_QUERY:function(e){""===(p=e.query)&&(h="",m=[],_=[])},GIF_PICKER_QUERY_SUCCESS:function(e){if(null!=e.query&&p===h)return!1;null!=e.query&&(h=e.query),m=e.items.map(function(e){return{width:e.width,height:e.height,src:e.src,url:e.url,id:e.id,format:g(y)?l.GIFResultFormat.VIDEO:l.GIFResultFormat.IMAGE}})},GIF_PICKER_QUERY_FAILURE:function(e){var t=e.query;if(null==t)return!1;h=t,m=[]},GIF_PICKER_TRENDING_FETCH_SUCCESS:function(e){var t=e.trendingCategories;v=[{type:l.GIFPickerResultTypes.TRENDING_GIFS,icon:o.default.TRENDING_UP,name:u.default.Messages.GIF_PICKER_RESULT_TYPE_TRENDING_GIFS,src:e.trendingGIFPreview.src,format:l.GIFResultFormat.IMAGE}].concat(t.map(function(e){return d({},e,{type:l.GIFPickerResultTypes.TRENDING_CATEGORY,format:l.GIFResultFormat.IMAGE})}))},GIF_PICKER_SUGGESTIONS_SUCCESS:function(e){var t=e.items;_=t}});t.default=E},7065:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=d(n(6692)),i=d(n(7693)),l=n(6592),u=n(1),s=d(n(4));function d(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=function(e){var t,n;function d(){return e.apply(this,arguments)||this}return n=e,(t=d).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,d.prototype.render=function(){var e=this.props,t=e.src,n=e.fileSize,d=e.className,f=e.mediaPlayerClassName,p=e.poster,h=e.fileName,m=e.naturalWidth,v=e.naturalHeight,y=e.playable,_=e.volume,g=e.autoPlay,E=e.autoMute,S=e.onPlay,I=e.onEnded,T=e.onVolumeChange,O=e.onMute,A=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["src","fileSize","className","mediaPlayerClassName","poster","fileName","naturalWidth","naturalHeight","playable","volume","autoPlay","autoMute","onPlay","onEnded","onVolumeChange","onMute"]);return a.createElement(o.default,c({alt:s.default.Messages.VIDEO,className:d,src:p},A,{minWidth:i.default.minWidth,minHeight:i.default.minHeight,shouldLink:!1,shouldAnimate:!1}),function(e){var a=e.src,o=e.size,s=o.width,d=o.height,c=!(m<=u.MAX_VIDEO_WIDTH&&v<=u.MAX_VIDEO_HEIGHT||m<=u.MAX_VIDEO_HEIGHT&&v<=u.MAX_VIDEO_WIDTH);return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(i.default,{className:f,forceExternal:c,src:t,poster:a,width:s,height:d,volume:_,autoPlay:g||!1,autoMute:E||!1,type:i.default.Types.VIDEO,fileName:h,fileSize:null==n?void 0:(0,l.sizeString)(n),playable:y,onPlay:S,onEnded:I,onVolumeChange:T,onMute:O})})},d}(a.Component);t.default=f,f.displayName="LazyVideo"},7066:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.AttachmentUpload=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=p(n(8)),o=p(n(7058)),i=n(6592),l=p(n(106)),u=p(n(58)),s=p(n(42)),d=p(n(959)),c=p(n(4)),f=p(n(6245));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=function(e){var t=e.filename,r=(0,i.classifyFileName)(t),a=n(8455)("./icon-file-small-"+r+".svg");return h("img",{className:f.default.icon,src:a,alt:c.default.Messages.IMG_ALT_ATTACHMENT_FILE_TYPE.format({fileType:r}),title:r})};m.displayName="AttachmentIcon";var v=function(e){var t=e.className,n=e.filename,r=e.size,i=e.progress,l=e.onCancelUpload,p=e.onClick,v=e.onContextMenu,y=100===i,_=!y&&r>0;return h("div",{className:(0,a.default)(f.default.attachment,t)},void 0,h(m,{filename:n}),h("div",{className:f.default.attachmentInner},void 0,h("div",{className:f.default.filenameWrapper},void 0,h(u.default,{className:f.default.filename,onClick:p,onContextMenu:v},void 0,n),_?h("div",{className:f.default.size},void 0," "+o.default.filesize(r)):null),h("div",{className:f.default.progressContainer},void 0,y?c.default.Messages.ATTACHMENT_PROCESSING:h(d.default,{className:f.default.progress,percent:i}))),y?null:h(u.default,{onClick:l},void 0,h(s.default,{name:s.default.Names.CLOSE,className:f.default.cancelButton,width:24,height:24})))};t.AttachmentUpload=v,v.displayName="AttachmentUpload";var y=function(e){var t=e.className,n=e.url,r=e.filename,i=e.size,u=e.onClick,d=e.onContextMenu;return h("div",{className:(0,a.default)(f.default.attachment,t)},void 0,h(m,{filename:r}),h("div",{className:f.default.attachmentInner},void 0,h("div",{className:f.default.filenameLinkWrapper},void 0,h(l.default,{className:f.default.fileNameLink,href:n,onClick:u,onContextMenu:d},void 0,r)),h("div",{className:f.default.metadata},void 0,o.default.filesize(i))),h(l.default,{href:n,target:"_blank",rel:"noreferrer noopener"},void 0,h(s.default,{name:s.default.Names.DOWNLOAD,className:f.default.downloadButton,width:24,height:24})))};y.displayName="Attachment";var _=y;t.default=_},7067:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=u(n(6)),i=u(n(118)),l=u(n(185));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=Object.freeze({ABOVE:0,VISIBLE:1,BELOW:2});function f(e){return{toValue:e,duration:300,easing:i.default.Easing.inOut(i.default.Easing.back())}}var p=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={prevValue:null,currValue:t.value,nextValue:null},n.prevAnimate=new i.default.Value(c.ABOVE),n.currAnimate=new i.default.Value(c.VISIBLE),o.default.bindAll(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),["animateNext"]),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e,t){var n=t.prevValue,r=t.currValue,a=t.nextValue;return null==n&&r!==e.value?{prevValue:l.default.isFocused()?r:null,currValue:e.value}:null!=a&&a!==e.value?{nextValue:e.value}:void 0};var u=r.prototype;return u.componentDidUpdate=function(e,t){var n=this.state,r=n.prevValue,a=n.currValue;r!==t.prevValue&&null!=r&&this.animateBetween(r,a)},u.animateBetween=function(e,t){var n,r=this.props.forcePosition;this.prevAnimate.setValue(c.VISIBLE),null!=r?r===c.ABOVE?(this.currAnimate.setValue(c.ABOVE),n=c.BELOW):r===c.BELOW&&(this.currAnimate.setValue(c.BELOW),n=c.ABOVE):e>t?(this.currAnimate.setValue(c.ABOVE),n=c.BELOW):(this.currAnimate.setValue(c.BELOW),n=c.ABOVE),i.default.parallel([i.default.timing(this.prevAnimate,f(n)),i.default.timing(this.currAnimate,f(c.VISIBLE))]).start(this.animateNext)},u.animateNext=function(){var e=this.state,t=e.currValue,n=e.nextValue;null!=n?this.setState({prevValue:l.default.isFocused()?t:null,currValue:n,nextValue:null}):this.setState({prevValue:null})},u.getAnimatedStyle=function(e){return{transform:[{translateY:e.interpolate({inputRange:[0,1,2],outputRange:["-100%","0%","100%"]})}],position:"absolute",top:0,left:0,right:0,bottom:0}},u.getMinWidth=function(e){var t=this.props,n=t.digitWidth,r=t.padStartLength;if(null!=n){var a=Math.ceil(Math.log10(e+1));return r?Math.min(a,r)*n:a*n}},u.padValue=function(e){var t=this.props.padStartLength;return null!=t?String(e).padStart(t,"0"):e},u.render=function(){var e=this.state,t=e.prevValue,n=e.currValue,r=o.default.omit(this.props,["value","digitWidth","padStartLength","forcePosition"]);if(null==t)return a.createElement("div",d({},r,{style:{minWidth:this.getMinWidth(n)}}),this.padValue(n));var l=Math.max(t,n);return a.createElement("div",d({},r,{style:{position:"relative",overflow:"hidden"}}),s("div",{style:{visibility:"hidden",minWidth:this.getMinWidth(l)}},void 0,this.padValue(l)),s(i.default.div,{style:this.getAnimatedStyle(this.prevAnimate)},void 0,this.padValue(t)),s(i.default.div,{style:this.getAnimatedStyle(this.currAnimate)},void 0,this.padValue(n)))},r}(a.PureComponent);t.default=p,p.displayName="AnimatedCounter",p.Positions=c},7068:function(e,t,n){e.exports=n.p+"b09888a1a6c74c8bb9af76ee61eb70e7.svg"},7069:function(e,t,n){"use strict";t.__esModule=!0,t.ResponsiveLoadingEmbedTile=t.ResponsiveEmbedTile=t.HORIZONTAL_EMBED_BREAKPOINT=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=u(n(8)),i=u(n(7698)),l=u(n(6256));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.HORIZONTAL_EMBED_BREAKPOINT=660;var c=function(e){var t;return a.createElement(i.default,d({},e,{className:(0,o.default)(e.className,(t={},t[l.default.embedVertical]=!e.isHorizontal,t[l.default.embedHorizontal]=e.isHorizontal,t))}))};t.ResponsiveEmbedTile=c,c.displayName="ResponsiveEmbedTile";var f=function(e){var t=e.isHorizontal;return a.createElement(c,d({},e,{media:function(){var e;return s("div",{className:(0,o.default)(l.default.loadingDescription)},void 0,s("div",{className:(0,o.default)(l.default.loadingBackgroundWrapper,(e={},e[l.default.loadingBackgroundWrapperHorizontal]=t,e))},void 0,s("div",{className:l.default.loadingBackground})))},title:function(){var e;return s("div",{className:(0,o.default)(l.default.loadingImage,(e={},e[l.default.loadingImageHorizontal]=t,e))})}}))};t.ResponsiveLoadingEmbedTile=f,f.displayName="ResponsiveLoadingEmbedTile"},7070:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=l(n(8)),o=l(n(4)),i=l(n(6257));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var s=function(e){var t=e.className;return u("div",{className:(0,a.default)(i.default.tag,t)},void 0,u("span",{className:i.default.text},void 0,o.default.Messages.APPLICATION_STORE_FIRST_ON_DISCORD))};s.displayName="FirstOnDiscordTag";var d=s;t.default=d},7071:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=l(n(8)),o=l(n(4)),i=l(n(6258));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var s=function(e){var t=e.className;return u("div",{className:(0,a.default)(i.default.tag,t)},void 0,u("span",{className:i.default.text},void 0,o.default.Messages.APPLICATION_STORE_THE_GAME_AWARDS_WINNER))};s.displayName="TheGameAwardsTag";var d=s;t.default=d},7072:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),a=n(29);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=function(e){var t,n;function i(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).timer=new a.Interval,t.state={hovered:!1},t.handlePause=function(){t.state.hovered||t.setState({hovered:!0})},t.handleResume=function(){t.setState({hovered:!1})},t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.getDerivedStateFromProps=function(e){return e.disable?{hovered:!1}:null};var l=i.prototype;return l.componentDidMount=function(){var e=this.props,t=e.pauseOnHover,n=e.disable,r=this.state.hovered&&t;n||r||this.startTimer()},l.componentWillUnmount=function(){this.stopTimer()},l.componentDidUpdate=function(e,t){var n=this.props,r=function(e,t){return!(e.disable||t.hovered&&e.pauseOnHover)},a=r(n,this.state),o=r(e,t);a&&!o||e.interval!==n.interval?this.startTimer():!a&&o&&this.stopTimer()},l.startTimer=function(){var e=this.props,t=e.interval,n=e.onInterval;e.disable||this.timer.start(t,function(){n()})},l.stopTimer=function(){this.timer.stop()},l.render=function(){var e=this.props,t=e.children,n=e.className,a=e.disable?null:{onMouseEnter:this.handlePause,onFocus:this.handlePause,onMouseLeave:this.handleResume,onBlur:this.handleResume};return r.createElement("div",o({},a,{className:n}),t)},i}(r.Component);i.displayName="IntervalWrapper",i.defaultProps={disable:!1,pauseOnHover:!1};var l=i;t.default=l},7073:function(e,t,n){"use strict";t.__esModule=!0,t.default=v,t.OperatingSystemSection=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),i=f(n(8)),l=f(n(42)),u=f(n(65)),s=n(1),d=f(n(4)),c=f(n(6260));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=((r={})[s.OperatingSystems.WINDOWS]={iconName:l.default.Names.OS_WINDOWS,label:d.default.Messages.WINDOWS},r[s.OperatingSystems.MACOS]={iconName:l.default.Names.OS_MAC,label:d.default.Messages.MACOS},r[s.OperatingSystems.LINUX]={iconName:l.default.Names.OS_LINUX,label:d.default.Messages.LINUX},r);function v(e){var t=e.operatingSystem,n=e.className,r=m[t];if(null==r)throw new Error("Unexpected operating system: "+t);return p(u.default,{text:r.label},void 0,function(e){return o.createElement(l.default,h({name:r.iconName},e,{className:n}))})}v.displayName="OperatingSystemIcon";var y=function(e){var t=e.systems,n=e.className,r=e.iconClassName;return p("div",{className:(0,i.default)(c.default.OSSection,n)},void 0,t.map(function(e){return p(v,{operatingSystem:e,className:(0,i.default)(c.default.purchaseUnitOperatingSystem,r)},e)}))};t.OperatingSystemSection=y,y.displayName="OperatingSystemSection"},7074:function(e,t,n){e.exports=n.p+"b8029fe196b8f1382e90bbe81dab50dc.svg"},7075:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(541),a=p(n(10)),o=p(n(14)),i=p(n(19)),l=p(n(11)),u=p(n(281)),s=n(6534),d=p(n(144)),c=n(1),f=p(n(4));function p(e){return e&&e.__esModule?e:{default:e}}var h={"234395307759108106":"https://groovy.bot/commands","365975655608745985":"https://www.pokecord.com/getting-started",512412940897484800:"http://jameslantz.net/smilebot"},m=function(){return[f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_01,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_02,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_03,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_04,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_05,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_06,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_07,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_08,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_09,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_10,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_11,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_12,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_13,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_14,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_15,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_16,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_17,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_18,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_19,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_20,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_21,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_22,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_23,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_24,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_25,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_26,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_27,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_28,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_29,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_30,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_31,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_32,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_33,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_34,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_35,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_36,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_37,f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_JOIN_38]};function v(e){var t=m();return t[d.default.extractTimestamp(e)%t.length]}function y(e){return(0,r.astToString)(f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED.format({username:e,usernameOnClick:c.NOOP},!1))}function _(e,t,n){var a=o.default.getChannel(t);if(null==a)return y(e);var l=i.default.getGuild(a.getGuildId());return null==l?y(e):(0,r.astToString)(f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED.format({username:e,usernameOnClick:c.NOOP,guildName:l.name,newTierName:(0,s.getTierName)(n)},!1))}var g={stringify:function(e){var t=e.mentions[0]&&l.default.getUser(e.mentions[0].id),n=e.channel_id,o=u.default.getName(null,n,e.author);switch(e.type){case c.MessageTypes.RECIPIENT_ADD:if(!t)return;return(0,r.astToString)(f.default.Messages.SYSTEM_MESSAGE_RECIPIENT_ADD.format({username:o,usernameOnClick:c.NOOP,otherUsername:u.default.getName(null,n,t),otherUsernameOnClick:c.NOOP},!1));case c.MessageTypes.RECIPIENT_REMOVE:if(!t)return;return e.author.id===t.id?(0,r.astToString)(f.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE_SELF.format({username:o,usernameOnClick:c.NOOP},!1)):(0,r.astToString)(f.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE.format({username:o,usernameOnClick:c.NOOP,otherUsername:u.default.getName(null,n,t),otherUsernameOnClick:c.NOOP},!1));case c.MessageTypes.CALL:var i=e.call;return i&&-1===i.participants.indexOf(a.default.getId())?(0,r.astToString)(f.default.Messages.SYSTEM_MESSAGE_CALL_STARTED.format({username:o,usernameOnClick:c.NOOP},!1)):void 0;case c.MessageTypes.CHANNEL_NAME_CHANGE:return(0,r.astToString)(f.default.Messages.SYSTEM_MESSAGE_CHANNEL_NAME_CHANGE.format({username:o,usernameOnClick:c.NOOP,channelName:e.content},!1));case c.MessageTypes.CHANNEL_ICON_CHANGE:return(0,r.astToString)(f.default.Messages.SYSTEM_MESSAGE_CHANNEL_ICON_CHANGE.format({username:o,usernameOnClick:c.NOOP},!1));case c.MessageTypes.CHANNEL_PINNED_MESSAGE:return(0,r.astToString)(f.default.Messages.SYSTEM_MESSAGE_PINNED_MESSAGE_NO_CTA.format({username:o,usernameOnClick:c.NOOP},!1));case c.MessageTypes.USER_JOIN:return(0,r.astToString)(v(e.id).format({username:o,usernameOnClick:c.NOOP},!1));case c.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION:return y(o);case c.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_1:return _(o,n,c.PremiumGuildTiers.TIER_1);case c.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_2:return _(o,n,c.PremiumGuildTiers.TIER_2);case c.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_3:return _(o,n,c.PremiumGuildTiers.TIER_3);default:return e.content}},getSystemMessageUserJoin:v,getSystemMessageBotJoin:function(e){return null==h[e]?null:f.default.Messages.SYSTEM_MESSAGE_GUILD_BOT_JOIN.format({learnOnClick:{onClick:function(){return window.open(h[e])}}})}};t.default=g},7076:function(e,t,n){"use strict";t.__esModule=!0,t.normalizeIndex=h,t.default=t.CarouselWithPreview=t.Alignment=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=s(n(8)),i=s(n(118)),l=s(n(861)),u=s(n(6271));function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f={tension:7,friction:5,overshootClamping:!0},p={LEFT:"left",CENTER:"center",RIGHT:"right"};function h(e,t){return(e%t+t)%t}t.Alignment=p;var m=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).animatedIndex=new i.default.Value(t.props.currentIndex),t.animatedAlignmentOffset=new i.default.Value(t.getAlignmentOffset(t.props.align)),t.animatedOpacity=new i.default.Value(1),t.getItemStyle=function(){var e=t.props.itemSize,n=e.width;return{flexBasis:n,marginRight:e.margin,height:e.height,width:n,maxWidth:n}},t.interpolateValueForItem=function(e){return t.animatedIndex.interpolate({inputRange:[e-1,e,e+1],outputRange:[0,1,0],extrapolate:"clamp"})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){this.animatedIndex.setValue(this.props.currentIndex)},a.componentDidUpdate=function(e){var t=this.props,n=t.align,r=t.animate,a=t.currentIndex,o=t.items,l=t.width,u=h(a,o.length),s=h(e.currentIndex,o.length);u===s&&o.length===e.items.length||this.updateAnimatedIndex(u,s),l!==e.width?this.animatedAlignmentOffset.setValue(this.getAlignmentOffset(n)):!r||n===e.align&&u===s||i.default.spring(this.animatedAlignmentOffset,c({},f,{toValue:this.getAlignmentOffset(n)})).start()},a.getAlignmentOffset=function(e){var t=this.props,n=t.width,r=t.itemSize,a=t.currentIndex,o=t.gutter,i=o*h(a,t.items.length)*2;return e===p.CENTER?(n-r.width)/2+i:e===p.RIGHT?n-r.width-o+i:o+i},a.getCarouselTranslate=function(){var e=this.props,t=e.itemSize;return e.edgeItems*(t.width+t.margin)},a.animateToIndex=function(e,t){var n=this.animatedIndex,r=this.props,a=r.items;r.edgeItems>0&&(0===e&&t===a.length-1?n.setValue(-1):0===t&&e===a.length-1&&a.length>2&&n.setValue(a.length)),i.default.spring(n,c({},f,{toValue:e})).start()},a.updateAnimatedIndex=function(e,t){var n=this.animatedIndex,r=this.animatedOpacity;this.props.animate?this.animateToIndex(e,t):i.default.timing(r,{fromValue:1,toValue:0,duration:100}).start(function(){n.setValue(e),i.default.timing(r,{fromValue:0,toValue:1,duration:100}).start()})},a.renderSingleItem=function(){var e=this.props,t=e.renderItem,n=e.items,r=e.itemSize,a=e.className;return d("div",{className:(0,o.default)(u.default.singleItemWrapper,u.default.viewport,a)},void 0,d("div",{className:u.default.singleItem,style:{width:r.width,height:r.height}},void 0,t(n[0],0)))},a.renderCarouselItems=function(){var e=this,t=this.animatedIndex,n=this.animatedAlignmentOffset,r=this.animatedOpacity,a=this.props,o=a.renderItem,l=a.items,s=a.itemSize,c=a.edgeItems,f=a.gutter,p=s.margin,h=s.width,m=this.getCarouselTranslate(),v=this.getItemStyle(),y=(c>0?[].concat(l.slice(-c),l,l.slice(0,c)):l).map(function(t,n){return d("div",{style:v,className:u.default.item},n,o(t,n-c,e.interpolateValueForItem(n-c)))});return d(i.default.div,{className:u.default.carousel,style:{opacity:r,left:i.default.add(t.interpolate({inputRange:[0,1],outputRange:[-m,-p-h-m-f*(l.length-1)]}),n)}},void 0,y)},a.render=function(){var e,t=this.props,n=t.items,r=t.className,a=t.hideOverflow;if(n.length<=0)throw new Error("Carousel has no items");return 1===n.length?this.renderSingleItem():d("div",{className:(0,o.default)((e={},e[u.default.viewport]=a,e),r)},void 0,this.renderCarouselItems())},r}(a.Component);t.CarouselWithPreview=m,m.displayName="CarouselWithPreview",m.defaultProps={animate:!0,edgeItems:2,align:p.CENTER,gutter:0,hideOverflow:!0};var v=(0,l.default)(m);t.default=v},7077:function(e,t,n){"use strict";t.__esModule=!0,t.getPerkIcon=function(e,t){if(t)return{name:r.default.Names.CHECKMARK,className:o.default.unlocked};switch(e){case a.PerkIcons.EMOJI:return{name:r.default.Names.EMOJI_SMILE,className:o.default.emoji};case a.PerkIcons.AUDIO:return{name:r.default.Names.HEADPHONES,className:o.default.audio};case a.PerkIcons.ANIMATED:return{name:r.default.Names.INVERTED_GIF_LABEL,className:o.default.animated};case a.PerkIcons.CUSTOMIZATION:return{name:r.default.Names.PICTURES,className:o.default.customization};case a.PerkIcons.UPLOAD:return{name:r.default.Names.UPLOAD_2,className:o.default.upload};case a.PerkIcons.VANITY:return{name:r.default.Names.STAR,className:o.default.vanity};case a.PerkIcons.STREAM:return{name:r.default.Names.STREAM,className:o.default.stream}}throw new Error("Unexpected perk icon "+e)};var r=i(n(42)),a=n(6534),o=i(n(6275));function i(e){return e&&e.__esModule?e:{default:e}}},7079:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.Steps=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=M(n(471)),i=M(n(16)),l=M(n(3)),u=n(6563),s=n(7704),d=M(n(19)),c=M(n(6875)),f=M(n(340)),p=M(n(25)),h=M(n(6694)),m=M(n(58)),v=M(n(24)),y=M(n(6521)),_=M(n(6593)),g=n(220),E=M(n(456)),S=M(n(257)),I=M(n(15)),T=M(n(882)),O=M(n(8508)),A=n(1),N=M(n(4)),C=M(n(6283));function M(e){return e&&e.__esModule?e:{default:e}}function b(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function R(e,t,n,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function P(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){R(o,r,a,i,l,"next",e)}function l(e){R(o,r,a,i,l,"throw",e)}i(void 0)})}}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=Object.freeze({GUILD_SELECT:"GUILD_SELECT",CONFIRM:"CONFIRM",SUCCESS:"SUCCESS"});t.Steps=L;var w=[L.GUILD_SELECT,L.CONFIRM,L.SUCCESS],U=function(e){var t,r;function a(){for(var t,r,a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];return(r=e.call.apply(e,[this].concat(l))||this).state={query:"",step:r.props.initialStep||L.GUILD_SELECT,selectedGuild:r.props.selectedGuild||null,showError:!1},r.loadSuccessAnimation=function(){return(r.props.theme===A.ThemeTypes.DARK?n.e(320).then(n.t.bind(null,9564,3)):n.e(321).then(n.t.bind(null,9565,3))).then(function(e){return e.default})},r.handleClose=function(){r.props.onClose(r.state.step===L.SUCCESS),I.default.track(A.AnalyticEvents.MODAL_DISMISSED,{type:A.AnalyticsSections.PREMIUM_GUILD_SUBSCRIBE_MODAL,location_section:r.props.locationSection})},r.handleGoToGuildSelect=function(){r.setState({step:L.GUILD_SELECT})},r.handleQueryChange=function(e){r.setState({query:e})},r.handleQueryClear=function(){r.handleQueryChange("")},r.handleSelectGuild=function(e){r.setState({selectedGuild:e,step:L.CONFIRM})},r.handleDismissError=function(){r.setState({showError:!1})},r.handleSubmit=P(regeneratorRuntime.mark(function e(){var t,n,a,o,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props,n=t.userPremiumGuildSubscriptionSlotId,a=t.userPremiumGuildSubscriptionSlot,null!=(o=r.state.selectedGuild)){e.next=4;break}return e.abrupt("return");case 4:if(l=null!=a?a.premiumGuildSubscription:null,(0,i.default)(null==n||null!=a&&(null==a.cooldownEndsAt||new Date(a.cooldownEndsAt)<Date.now()),"Cannot use a premium guild subscription slot while on cooldown"),e.prev=6,null==l){e.next=10;break}return e.next=10,(0,u.unsubscribeFromGuild)(l.guildId,l.id);case 10:return e.next=12,(0,u.subscribeToGuild)(o.id,null!=a?[a.id]:null);case 12:r.setState({step:L.SUCCESS}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),r.setState({showError:!0});case 18:case"end":return e.stop()}},e,null,[[6,15]])})),r.stepRenderer=((t={})[L.GUILD_SELECT]={header:function(){return b(g.ModalHeader,{direction:v.default.Direction.VERTICAL,align:v.default.Align.START},void 0,b(E.default,{className:C.default.selectHeader,size:E.default.Sizes.SIZE_16},void 0,r.isTransfer?N.default.Messages.PREMIUM_GUILD_SUBSCRIBE_SELECT_GUILD_TRANSFER_HEADER:N.default.Messages.PREMIUM_GUILD_SUBSCRIBE_SELECT_GUILD_HEADER),b(_.default,{size:_.default.Sizes.MEDIUM,placeholder:N.default.Messages.PREMIUM_GUILD_SUBSCRIBE_SEARCH_GUILD_PLACEHOLDER,className:C.default.selectSearch,query:r.state.query,onChange:r.handleQueryChange,onClear:r.handleQueryClear}))},bodyClass:C.default.selectContent,body:function(){var e=r.state.query,t=r.props,n=t.guilds,a=t.userPremiumGuildSubscriptionGuild;return n.filter(function(t){return(!(e.length>0)||(0,o.default)(e.toLowerCase(),t.name.toLowerCase()))&&(null==a||t.id!==a.id)}).map(function(e){return b(m.default,{className:C.default.selectGuild,onClick:function(){return r.handleSelectGuild(e)}},e.id,b(y.default,{guild:e,size:y.default.Sizes.SMALL}),b(S.default,{className:C.default.selectGuildName,size:S.default.Sizes.SIZE_16},void 0,e.name))})}},t[L.CONFIRM]={body:function(){var e=r.props,t=e.error,n=e.userPremiumGuildSubscriptionGuild,a=e.userPremiumGuildSubscriptionSlot,o=r.state,i=o.selectedGuild,l=o.showError;if(null==i)return null;var u=null!=a&&a.canceled;return r.isTransfer&&null!=n?b(O.default.TransferBody,{fromGuild:n,toGuild:i,blurb:N.default.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_TRANSFER_BLURB,imageClass:C.default.transferConfirmImage,error:l?t:null,onDismissError:r.handleDismissError,isCanceled:u}):b(O.default.SubscribeBody,{guild:i,blurb:N.default.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_BLURB,warning:N.default.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_COOLDOWN_WARNING.format({days:A.PREMIUM_GUILD_SUBSCRIBE_COOLDOWN_DAYS}),imageClass:C.default.confirmImage,error:l?t:null,onDismissError:r.handleDismissError,isCanceled:u})},footer:function(){var e=r.props,t=e.initialStep,n=e.isModifyingSubscription;return b(O.default.Footer,{confirmation:r.isTransfer?N.default.Messages.PREMIUM_GUILD_SUBSCRIBE_TRANSFER_CONFIRM_CONFIRMATION:N.default.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_CONFIRMATION,confirmationLabel:r.isTransfer?N.default.Messages.PREMIUM_GUILD_SUBSCRIBE_TRANSFER_CONFIRM_CONFIRMATION_LABEL:N.default.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_CONFIRMATION_LABEL,onConfirm:r.handleSubmit,onCancel:t===L.CONFIRM?r.handleClose:r.handleGoToGuildSelect,isModifyingSubscription:n})}},t[L.SUCCESS]={body:function(){var e=r.state.selectedGuild;return(0,i.default)(null!=e,"Cannot transfer subscription to null guild"),b(s.PremiumGuildSubscriptionConfirmation,{guild:e,guildSubscriptionQuantity:1,isTransfer:!0,onClose:r.handleClose})}},t),r}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var l,d,c,f=a.prototype;return f.componentDidMount=function(){I.default.track(A.AnalyticEvents.OPEN_MODAL,{type:A.AnalyticsSections.PREMIUM_GUILD_SUBSCRIBE_MODAL,location_section:this.props.locationSection})},f.render=function(){var e=this.state.step,t=this.stepRenderer[e];return b(g.ModalRoot,{transitionState:this.props.transitionState,className:C.default.modal,size:g.ModalSize.SMALL},void 0,null!=t.header&&t.header(),b(g.ModalContent,{className:t.bodyClass},void 0,b(T.default,{step:e,steps:w},void 0,t.body())),null!=t.footer&&t.footer())},l=a,(d=[{key:"isTransfer",get:function(){var e=this.props.userPremiumGuildSubscriptionSlot;return null!=e&&null!=e.premiumGuildSubscription}}])&&D(l.prototype,d),c&&D(l,c),a}(a.PureComponent);U.displayName="PremiumGuildSubscribeModal";var k=l.default.connectStores([f.default,d.default,c.default,p.default,h.default],function(e){var t=e.userPremiumGuildSubscriptionSlotId,n=null!=t?h.default.getSlot(t):null;return{guilds:f.default.getFlattenedGuilds(),isModifyingSubscription:c.default.isModifyingSubscription,error:c.default.subscribeError,theme:p.default.theme,userPremiumGuildSubscriptionSlot:n,userPremiumGuildSubscriptionGuild:null!=n&&null!=n.premiumGuildSubscription?d.default.getGuild(n.premiumGuildSubscription.guildId):null}})(U);t.default=k},7497:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(3)),a=o(n(2));n(1);function o(e){return e&&e.__esModule?e:{default:e}}var i=[],l=[];var u=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getUserAffinities=function(){return i},a.getUserAffinitiesUserIds=function(){var e=new Set;return i.forEach(function(t){e.add(t.user_id)}),e},a.getInverseUserAffinities=function(){return l},a.getInverseUserAffinitiesUserIds=function(){var e=new Set;return l.forEach(function(t){e.add(t.user_id)}),e},r}(r.default.Store))(a.default,{LOAD_USER_AFFINITIES_SUCCESS:function(e){var t=e.affinities;return i=t.user_affinities,l=t.inverse_user_affinities,!1},LOAD_USER_AFFINITIES_FAILURE:function(e){return i=[],l=[],!1}});t.default=u},7498:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(3)),a=o(n(2));n(1);function o(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=null;var u=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getCurrentPath=function(){return null!=l?l.pathname:null},a.getCurrentRoute=function(){return function(e){var t=null!=e&&null!=e.search?e.search:"";return null!=e?""+e.pathname+t:null}(l)},a.reset=function(){throw new Error("Should not reset the store this way outside of a test environment")},r}(r.default.Store))(a.default,{APPLICATION_STORE_LOCATION_CHANGE:function(e){var t=e.location;l=i({},t)},APPLICATION_STORE_RESET_NAVIGATION:function(e){l=null}});t.default=u},7499:function(e,t,n){"use strict";t.__esModule=!0,t.QUICKSWITCHER_SHOW=void 0;var r=n(6610),a=i(n(10)),o=i(n(859));function i(e){return e&&e.__esModule?e:{default:e}}var l={binds:["mod+k","mod+t"],global:!0,action:function(){return!a.default.isGuest()&&(o.default.hasLayers()||(0,r.show)(),!1)}};t.QUICKSWITCHER_SHOW=l},7500:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(3)),a=c(n(27)),o=c(n(2)),i=c(n(1022)),l=c(n(14)),u=c(n(19)),s=c(n(39)),d=c(n(153));n(1);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=new i.default(function(){return 100},function(e){var t=0;return 0===e?t=100:e>=1&&e<2?t=70:e>=2&&e<4?t=50:e>=4&&e<7?t=30:e>=7&&(t=10),t},function(e){return u.default.getGuild(e)||l.default.getChannel(e)||l.default.getChannel(l.default.getDMFromUserId(e))},function(e){__OVERLAY__||a.default.set("selectedChannelGuildFrecency",e)},100,10),h=null,m=null;function v(e){var t=e.guildId,n=e.channelId;return n!==h&&(h=n||null,null!=n&&p.track(n)),null!=t&&t!==m&&(m=t,p.track(t)),!1}function y(){return p.markDirty(),!1}var _=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o,i,u,c=r.prototype;return c.initialize=function(){this.waitFor(d.default,s.default);var e=a.default.get("selectedChannelGuildFrecency",null);null!=e&&p.overwriteHistory(e)},c.getFrequently=function(){return p.frequently},c.getScore=function(e){return p.getFrecency(e)||0},c.getScoreForDM=function(e){var t=l.default.getDMFromUserId(e);return null!=t?this.getScore(t):0},c.getMaxScore=function(){return 1e3},c.getBonusScore=function(){return 100},o=r,(i=[{key:"frecency",get:function(){return p}}])&&f(o.prototype,i),u&&f(o,u),r}(r.default.Store))(o.default,{CONNECTION_OPEN:function(e){return y()},OVERLAY_INITIALIZE:function(e){return y()},VOICE_CHANNEL_SELECT:v,CHANNEL_SELECT:v});t.default=_},7501:function(e,t,n){"use strict";t.__esModule=!0,t.createHeaderResult=function(e){return s(l.AutocompleterResultTypes.HEADER,new l.HeaderRecord(e),0)},t.default=s;var r=u(n(208)),a=u(n(67)),o=u(n(341)),i=u(n(122)),l=n(6850);function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,u){switch(void 0===n&&(n=0),e){case l.AutocompleterResultTypes.GUILD:if(!(t instanceof o.default))throw new Error("Invalid");return{type:l.AutocompleterResultTypes.GUILD,record:t,score:n,comparator:u};case l.AutocompleterResultTypes.USER:if(!(t instanceof i.default))throw new Error("Invalid");return{type:l.AutocompleterResultTypes.USER,record:t,score:n,comparator:u};case l.AutocompleterResultTypes.HEADER:if(!(t instanceof l.HeaderRecord))throw new Error("Invalid");return{type:l.AutocompleterResultTypes.HEADER,record:t,score:n,comparator:u};case l.AutocompleterResultTypes.TEXT_CHANNEL:if(!(t instanceof a.default))throw new Error("Invalid");return{type:l.AutocompleterResultTypes.TEXT_CHANNEL,record:t,score:n,comparator:u};case l.AutocompleterResultTypes.VOICE_CHANNEL:if(!(t instanceof a.default))throw new Error("Invalid");return{type:l.AutocompleterResultTypes.VOICE_CHANNEL,record:t,score:n,comparator:u};case l.AutocompleterResultTypes.GROUP_DM:if(!(t instanceof a.default))throw new Error("Invalid");return{type:l.AutocompleterResultTypes.GROUP_DM,record:t,score:n,comparator:u};case l.AutocompleterResultTypes.APPLICATION:if(!(t instanceof r.default))throw new Error("Invalid");return{type:l.AutocompleterResultTypes.APPLICATION,record:t,score:n,comparator:u}}throw new Error("Invalid type")}},7502:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(2))&&r.__esModule?r:{default:r},o=n(1);var i={toggleSection:function(e){a.default.dispatch({type:o.ActionTypes.CHANNEL_TOGGLE_SECTION,section:e})}};t.default=i},7503:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.ZOOM_RESET=t.ZOOM_OUT=t.ZOOM_IN=void 0;var r,a=n(962),o=(r=n(856))&&r.__esModule?r:{default:r},i=n(1);function l(e){return i.Accessibility.ZOOM_SCALES[Math.max(0,Math.min(i.Accessibility.ZOOM_SCALES.indexOf(o.default.zoom)+e,i.Accessibility.ZOOM_SCALES.length-1))]}var u={binds:["mod+plus"],global:!0,action:function(){return(0,a.setZoom)(l(1)),!1}};t.ZOOM_IN=u;var s={binds:["mod+minus"],global:!0,action:function(){return(0,a.setZoom)(l(-1)),!1}};t.ZOOM_OUT=s;var d={binds:["mod+0"],global:!0,action:function(){return(0,a.setZoom)(i.Accessibility.ZOOM_DEFAULT),!1}};t.ZOOM_RESET=d;var c={ZOOM_IN:u,ZOOM_OUT:s,ZOOM_RESET:d};t.default=c},7543:function(e,t,n){"use strict";t.__esModule=!0,t.createEntity=m,t.getCollapsedSelection=function(e,t,n){var r=t.getCurrentContent().getFirstBlock();n=(n=(n=n||t.getSelection()).set("focusKey",r.getKey())).set("anchorKey",r.getKey());var a=Math.min(n.getStartOffset(),n.getEndOffset())+e.length;return n=(n=n.set("anchorOffset",a)).set("focusOffset",a)},t.updateContent=v,t.deleteContent=function(e,t){switch(e){case"delete":return(0,f.default)(t);case"delete-word":return(0,u.default)(t);case"backspace":return(0,c.default)(t);case"backspace-word":return(0,l.default)(t);case"backspace-to-start-of-line":return(0,i.default)(t);default:return t}},t.miscCommand=function(e,t){switch(e){case"transpose-characters":return(0,p.default)(t);case"move-selection-to-start-of-block":return(0,d.default)(t);case"move-selection-to-end-of-block":return(0,s.default)(t);default:return t}},t.adaptSelection=function(e,t){var n=(e=(e=e.set("focusKey",t.getKey())).set("anchorKey",t.getKey())).getEndOffset();return e=(e=e.set("anchorOffset",n)).set("focusOffset",n)},t.getFirstTextBlock=y,t.applyTokensAsEntities=function(e,t,n){void 0===n&&(n={});var r=t.getCurrentContent(),a=r.getFirstBlock(),o=a.getText(),i=[];return a.findEntityRanges(function(e){return null!==e.getEntity()},function(e,t){var n=r.getEntity(a.getEntityAt(e)).getType(),l=o.substring(e,t);i.push({processed:!1,type:n,start:e,end:t,text:l})}),e.forEach(function(e){var r=!1;if(i.forEach(function(n){var a=e.type,o=e.start,i=e.end,l=e.getFullMatch();n.processed||(n.type===a&&n.start===o&&n.text===l?(n.processed=!0,r=!0):(o>=n.start&&o<n.end||i>n.start&&i<=n.end)&&(n.processed=!0,t=m(null,n.start,n.end,t)))}),!r){var a=n[e.type];t=m([e.type,a&&a.mutable?"MUTABLE":"IMMUTABLE",{token:e}],e.start,e.end,t)}}),i.forEach(function(e){e.processed||(t=m(null,e.start,e.end,t))}),t},t.getSelectionScope=function(e,t){var n,r,a=t.getSelection(),o=a.focusOffset,i=a.anchorOffset,l=e.find(function(t,a){return o>=t.start&&o<=t.end&&i>=t.start&&i<=t.end?(e[a+1]&&(r=e[a+1]),!0):(n=t,!1)});if(!l)return null;return{previousToken:n,currentToken:l,nextToken:r}},t.createEmptyEditorState=function(e){return r.EditorState.createEmpty(new r.CompositeDecorator(e))},t.clearContent=function(e){return r.EditorState.push(e,r.ContentState.createFromText(""))},t.replaceAllContent=function(e,t){var n=y(t);return v(e,t,0,n.length)},t.appendSpace=function(e){var t=y(e);return v(" ",e,t.length)},t.setCollapsedSelection=_,t.setCollapsedEndSelection=function(e){return _(e.getCurrentContent().getFirstBlock().getText().length,e)},t.setCollapsedStartSelection=function(e){return _(0,e)},t.setToStartSelection=function(e){var t=e.getSelection();return t=(t=t.set("focusOffset",0)).set("isBackward",!0),r.EditorState.forceSelection(e,t)},t.setToEndSelection=function(e){var t=y(e),n=e.getSelection();return n=(n=n.set("focusOffset",t.length)).set("isBackward",!1),r.EditorState.forceSelection(e,n)},t.truncateContent=function(e,t){void 0===t&&(t=512);var n=y(e);if(n.length>t){var a=e.getSelection();e=v("",e,t,n.length),a.getAnchorOffset()>t&&(a=a.set("anchorOffset",t)),a.getFocusOffset()>t&&(a=a.set("focusOffset",t)),e=r.EditorState.forceSelection(e,a)}return e},t.scrollCursorIntoView=function(e){var t=window.getSelection();if(!t||"Caret"!==t.type||!e)return;var n=t.getRangeAt(0);if(!function(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}(n.commonAncestorContainer,e))return;var r=n.getClientRects()[0],a=e.getClientRects()[0];if(!r||!a)return;var o=r.left-a.left+e.scrollLeft;o<e.scrollLeft?e.scrollLeft=o-10:o>e.scrollLeft+e.offsetWidth&&(e.scrollLeft=o-e.offsetWidth+3)},t.isEmpty=function(e){return 0===y(e).length};var r=n(7509),a=h(n(7052));t.getDefaultKeyBinding=a.default;var o=h(n(6859)),i=h(n(7527)),l=h(n(7530)),u=h(n(7532)),s=h(n(7534)),d=h(n(7535)),c=h(n(7536)),f=h(n(7537)),p=h(n(7538));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,a){var o,i=a.getCurrentContent(),l=null;null!=e&&(l=(i=(o=i).createEntity.apply(o,e)).getLastCreatedEntityKey());var u=i.getFirstBlock(),s=new r.SelectionState({anchorKey:u.getKey(),anchorOffset:t,focusKey:u.getKey(),focusOffset:n});return i=r.Modifier.applyEntity(i,s,l),r.EditorState.set(a,{currentContent:i})}function v(e,t,n,a){var i,l=t.getCurrentContent(),u=l.getFirstBlock(),s=u.getText();"number"==typeof n?(n>s.length&&(n=s.length),a>s.length&&(a=s.length),i=new r.SelectionState({anchorKey:u.getKey(),anchorOffset:n,focusKey:u.getKey(),focusOffset:a||n})):i=t.getSelection();var d,c=t.getCurrentInlineStyle(),f=(0,o.default)(l,i);return i.isCollapsed()?(l=r.Modifier.insertText(l,i,e,c,f),d="insert-characters"):(l=r.Modifier.replaceText(l,i,e,c,f),d="replace-characters"),r.EditorState.push(t,l,d)}function y(e){return e.getCurrentContent().getFirstBlock().getText()}function _(e,t){var n=t.getSelection();return n=(n=n.set("focusOffset",e)).set("anchorOffset",e),r.EditorState.forceSelection(t,n)}},7671:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EmptyStateBottom=t.EmptyStateCenter=t.Header=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=k(n(8)),i=k(n(16)),l=k(n(6)),u=k(n(3)),s=k(n(142)),d=k(n(269)),c=k(n(141)),f=k(n(137)),p=k(n(14)),h=k(n(6744)),m=k(n(19)),v=k(n(194)),y=k(n(7054)),_=k(n(64)),g=k(n(39)),E=k(n(25)),S=k(n(185)),I=k(n(21)),T=k(n(58)),O=k(n(930)),A=k(n(152)),N=k(n(182)),C=k(n(223)),M=k(n(15)),b=n(80),R=k(n(36)),P=k(n(6691)),D=n(1),L=k(n(4)),w=k(n(5943)),U=k(n(6290));function k(e){return e&&e.__esModule?e:{default:e}}function G(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function F(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var j=function(e){var t=e.title,n=e.children,r=e.className;return F("div",{className:(0,o.default)(U.default.header,w.default.header,r)},void 0,F("div",{className:(0,o.default)(U.default.title,w.default.title)},void 0,t),n)};t.Header=j,j.displayName="Header";var H=function(e){var t=e.msg,n=e.image;return F("div",{className:U.default.emptyPlaceholder},void 0,F("div",{className:U.default.image,style:{backgroundImage:"url("+n+")"}}),F("div",{className:U.default.body},void 0,t))};t.EmptyStateCenter=H,H.displayName="EmptyStateCenter";var x=function(e){var t=e.msg,n=e.image;return F("div",{className:(0,o.default)(U.default.emptyPlaceholder,U.default.bottom)},void 0,F("div",{className:U.default.body},void 0,t),F("div",{className:U.default.image,style:{backgroundImage:"url("+n+")"}}))};t.EmptyStateBottom=x,x.displayName="EmptyStateBottom";var B=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleClickJump=function(e){var n=t.props;(0,n.jumpTo)(n.message,e)},t.handleClickClose=function(e){var n=t.props,r=n.onCloseMessage,a=n.message;null!=r&&r(a,e)},t}G(t,e);var n=t.prototype;return n.renderJumpButton=function(){var e,t=this.props.jumping;return F(T.default,{className:U.default.jumpButton,onClick:this.handleClickJump},void 0,F("div",{className:(0,o.default)(U.default.text,{hidden:t})},void 0,L.default.Messages.JUMP),F(N.default,{type:N.default.Type.PULSING_ELLIPSIS,className:(0,o.default)(U.default.loading,(e={},e[U.default.visible]=t,e))}))},n.renderCloseButton=function(){var e=this.props,t=e.onCloseMessage,n=e.canCloseAllMessages,r=e.canManageMessages,a=e.channel;return null==t?null:n||a.isPrivate()||r?F(I.default,{look:I.default.Looks.BLANK,size:I.default.Sizes.NONE,onClick:this.handleClickClose},void 0,F("div",{className:U.default.closeButton})):null},n.render=function(){return F("div",{className:U.default.actionButtons},void 0,this.renderJumpButton(),this.renderCloseButton())},t}(a.PureComponent);B.displayName="ControlButtons";var V=u.default.connectStores([_.default],function(e){var t=e.channel;return{canManageMessages:_.default.can(D.Permissions.MANAGE_MESSAGES,t)}})(B),K=F(N.default,{}),W=F(N.default,{}),z=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).scroller=null,t.getScroller=function(){return(0,i.default)(null!=t.scroller,"Scroller called before being mounted."),t.scroller},t.scrollPageUp=function(){t.getScroller().scrollPageUp(!0)},t.scrollPageDown=function(){t.getScroller().scrollPageDown(!0)},t.jumpTo=function(e,n){var r=e.id,a=e.blocked,o=e.author,i=e.channel_id,l=t.props,u=l.jumping,d=l.onJump,f=l.analyticsName;if(a)s.default.show({title:L.default.Messages.UNBLOCK_TO_JUMP_TITLE,body:L.default.Messages.UNBLOCK_TO_JUMP_BODY.format({name:o.username}),confirmText:L.default.Messages.OKAY});else if(!u){var h=p.default.getChannel(i);h&&(c.default.trackJump(i,r,f),R.default.transitionTo(D.Routes.CHANNEL(h.getGuildId(),i,r))),null!=d&&d(n)}},t.handleScroll=function(){var e=t.getScroller().getScrollData();e.scrollHeight===e.scrollTop+e.offsetHeight&&t.props.hasMore&&!t.props.loading&&t.props.loadMore()},t.selectChannel=function(e,n){var r=t.props.onJump;e!==g.default.getChannelId()&&d.default.transitionToInviteChannelSync(e),null!=r&&r(n)},t.setScrollerRef=function(e){t.scroller=e},t.renderControlButtons=function(e){var n=e.channel,r=e.messages[0],a=t.props,o=a.canCloseAllMessages,i=a.onCloseMessage,l=a.jumping;return F(V,{channel:n,message:r,jumping:l,canCloseAllMessages:o,jumpTo:t.jumpTo,onCloseMessage:i})},t.renderMessage=function(e,n){var r=t.props,a=r.renderEmbeds,o=r.inlineEmbedMedia,i=r.inlineAttachmentMedia,l=r.developerMode,u=[],s=n;if(t.props.showChannels&&(null==s||s.id!==e.channel_id)){if(null==(s=p.default.getChannel(e.channel_id)))return null;var d=m.default.getGuild(s.getGuildId());u.push(F("div",{className:U.default.channelSeparator},""+e.id+s.id,F(T.default,{tag:"span",className:U.default.channelName,onClick:t.selectChannel.bind(null,s.id)},void 0,s?(0,f.default)(s,!0):"???"),t.props.showGuildNames&&F("span",{className:U.default.guildName},void 0,d?d.toString():"")))}if(null==s)return null;var c=s.isNSFW()?h.default.didAgree(s.getGuildId()):null;return null==e?null:(u.push(F("div",{className:U.default.messageGroupWrapper},e.id,F("div",{className:U.default.messageGroupWrapperOffsetCorrection},void 0,F(P.default,{cozyClassName:U.default.messageGroupCozy,messages:[e],channel:s,inlineAttachmentMedia:i&&null!=c?c:i,inlineEmbedMedia:o&&null!=c?c:o,renderEmbeds:a&&null!=c?c:a,renderEmbedsSmall:!0,compact:!1,developerMode:l,hasDivider:!1,popoutPosition:C.default.Positions.LEFT,groupOption:t.renderControlButtons,onClickAnywhere:function(n){return t.jumpTo(e,n)},messageOption:!1,canEdit:!1,renderMentioned:t.props.renderMentioned,disableInteractionLabel:L.default.Messages.JUMP,accessoriesClassName:U.default.accessories})))),u)},t}G(t,e);var n=t.prototype;return n.componentDidMount=function(){M.default.track(D.AnalyticEvents.OPEN_POPOUT,{type:this.props.analyticsName}),this.props.onFetch(this.props.channel),b.ComponentDispatch.subscribe(D.ComponentActions.SCROLL_PAGE_DOWN,this.scrollPageDown),b.ComponentDispatch.subscribe(D.ComponentActions.SCROLL_PAGE_UP,this.scrollPageUp)},n.componentWillUnmount=function(){b.ComponentDispatch.unsubscribe(D.ComponentActions.SCROLL_PAGE_DOWN,this.scrollPageDown),b.ComponentDispatch.unsubscribe(D.ComponentActions.SCROLL_PAGE_UP,this.scrollPageUp)},n.render=function(){var e=this,t=[],n=!0,r=this.props,i=r.messages,u=r.size,s=r.loading,d=r.channel,c=r.className,f=r.isNoticeOpen;if(null==i)t=[F("div",{className:(0,o.default)(U.default.emptyPlaceholder,U.default.loadingPlaceholder)},"spinner",K)];else if(0===i.length)t.push(this.props.renderEmptyState(E.default.theme));else{n=!1,t=[];var p=this.props.showChannels?null:d;l.default.each(i,function(n){t.push(e.renderMessage(n,p))})}var h=null;i&&i.length>0&&this.props.loadMore&&(h=s?F("div",{className:U.default.loadingMore},"loading-more-after",W):this.props.hasMore?F("div",{className:U.default.hasMore},"has-more-after",F("button",{type:"button",onClick:this.props.loadMore,className:U.default.hasMoreButton},void 0,L.default.Messages.LOAD_MORE_MESSAGES)):F("div",{className:U.default.scrollingFooterWrap},void 0,this.props.renderEmptyState(E.default.theme)));var m=this.props.getProTip&&this.props.getProTip(),v=n&&m?F("div",{className:(0,o.default)(w.default.footer,U.default.footer)},void 0,F(O.default,{style:{width:"100%",paddingTop:10}},void 0,m)):null,y={maxHeight:u.height-43-25};f&&(y.maxHeight-=40);var _=this.props.loadMore&&this.props.hasMore;return F("div",{className:(0,o.default)(U.default.messagesPopoutWrap,w.default.themedPopout,c),style:y},void 0,this.props.renderHeader(),a.createElement(A.default,{className:U.default.messagesPopout,ref:this.setScrollerRef,onScroll:_?this.handleScroll:void 0,backgroundColor:E.default.theme===D.ThemeTypes.LIGHT?D.Colors.WHITE:D.Colors.PRIMARY_DARK_630},t,h),v)},t}(a.PureComponent);z.displayName="MessagesPopout",z.defaultProps={showChannels:!1,showGuildNames:!1,renderMentioned:!0,canCloseAllMessages:!1};var Y=u.default.connectStores([y.default,E.default,v.default,S.default],function(e){var t=e.channel,n=y.default.hasNotice(),r=E.default.inlineAttachmentMedia,a=E.default.inlineEmbedMedia,o=E.default.renderEmbeds,i=E.default.developerMode,l=E.default.messageDisplayCompact,u=null!=t?v.default.getMessages(t.id):null,s=!1;return null!=u&&null!=u.jumpTargetId&&(s=u.loadingMore&&!u.get(u.jumpTargetId)),{inlineAttachmentMedia:r,inlineEmbedMedia:a,renderEmbeds:o,developerMode:i,messageDisplayCompact:l,isNoticeOpen:n,size:S.default.windowSize(),jumping:s}})(z);t.default=Y},7672:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(3)),a=i(n(2)),o=n(1);function i(e){return e&&e.__esModule?e:{default:e}}var l=null,u=[o.DispatchErrorCodes.REDISTRIBUTABLE_INSTALL_FAILED,o.DispatchErrorCodes.POST_INSTALL_FAILED,o.DispatchErrorCodes.POST_INSTALL_CANCELLED],s=[o.DispatchErrorCodes.APPLICATION_NOT_FOUND,o.DispatchErrorCodes.APPLICATION_LOAD_FAILED,o.DispatchErrorCodes.INTERRUPTED,o.DispatchErrorCodes.DESERIALIZATION_FAILED];var d=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.getLastError=function(){return l},r}(r.default.Store))(a.default,{DISPATCH_APPLICATION_LAUNCH_SETUP_START:function(e){null!=l&&u.includes(l.code)&&(l=null)},DISPATCH_APPLICATION_ERROR:function(e){var t=e.error;l=s.includes(t.code)?null:t}});t.default=d},7673:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(3)),a=l(n(27)),o=l(n(2)),i=l(n(7055));n(1);function l(e){return e&&e.__esModule?e:{default:e}}var u="MaintenanceStore",s=null,d=null,c=null;var f=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.initialize=function(){c=a.default.get(u)},o.getIncident=function(){return s},o.getScheduledMaintenance=function(){return null!=d&&d.id!==c?d:null},r}(r.default.Store))(o.default,{CONNECTION_OPEN:function(e){return s=null,void i.default.checkScheduledMaintenances()},STATUS_PAGE_INCIDENT:function(e){s=e.incident},STATUS_PAGE_SCHEDULED_MAINTENANCE:function(e){d=e.maintenance},STATUS_PAGE_SCHEDULED_MAINTENANCE_ACK:function(e){return function(){if(null==d)return!1;c=d.id,a.default.set(u,c)}()}});t.default=f},7674:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=h(n(6)),a=h(n(3)),o=h(n(2)),i=h(n(358)),l=h(n(14)),u=h(n(53)),s=h(n(19)),d=h(n(194)),c=h(n(51)),f=h(n(25)),p=h(n(11));n(1);function h(e){return e&&e.__esModule?e:{default:e}}var m={};function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===r&&(r=!1);var a=l.default.getChannel(e),o=null!=a?a.getGuildId():null;return{id:e,messages:t.map(function(e){return i.default.create(e)}),guildId:o,loaded:n,loading:r}}function y(){r.default.forEach(m,function(e){r.default.forEach(e.messages,function(e){e.timestamp.locale(f.default.locale)})})}function _(){r.default.forEach(m,function(e){e.messages=e.messages.map(function(e){return e.set("blocked",c.default.isBlocked(e.author.id))})})}var g=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(l.default,s.default,u.default,d.default,p.default,f.default)},a.getPinnedMessages=function(e){return m[e]&&m[e]||null},a.loaded=function(e){return null!=m[e]&&m[e].loaded},r}(a.default.Store))(o.default,{CONNECTION_OPEN:function(e){m={}},GUILD_DELETE:function(e){var t=e.guild;m=(0,r.default)(m).filter(function(e){return e.guildId!==t.id}).keyBy("id").value()},MESSAGE_UPDATE:function(e){var t=e.message.id,n=e.message.channel_id;if(null!=n){var a=m[n];if(null!=e.message.author)if(e.message.pinned){if(!a)return a=v(n,[e.message],!1),void(m[n]=a);a.messages=a.messages.slice();var o=r.default.findIndex(a.messages,function(e){return e.id===t});-1===o?a.messages.unshift(i.default.create(e.message)):a.messages[o]=a.messages[o].updateMessage(e.message),m[n]=a}else{if(!a)return;var l=r.default.findIndex(a.messages,function(e){return e.id===t});if(-1===l)return;a.messages=a.messages.slice(),a.messages.splice(l,1),m[n]=a}else if(a){var u=r.default.findIndex(a.messages,function(e){return e.id===t});if(u>=0){var s=a.messages[u],d=s.updateMessage(e.message);if(d!==s){var c=a.messages.slice();c[u]=d,m[n].messages=c}}}}},MESSAGE_DELETE:function(e){var t=e.id,n=e.channelId,a=m[n];a&&0!==r.default.remove(a.messages,function(e){return e.id===t}).length&&(a.messages=a.messages.slice(),m[n]=a)},MESSAGE_DELETE_BULK:function(e){var t=e.ids,n=e.channelId,r=m[n];r&&(r.messages=r.messages.filter(function(e){return-1===t.indexOf(e.id)}))},LOAD_PINNED_MESSAGES:function(e){var t=e.channelId;m[t]=v(t,[],!1,!0)},LOAD_PINNED_MESSAGES_SUCCESS:function(e){var t=e.channelId,n=e.messages;m[t]=v(t,n,!0)},LOAD_PINNED_MESSAGES_FAILURE:function(e){var t=e.channelId;delete m[t]},USER_SETTINGS_UPDATE:function(e){return y()},I18N_LOAD_SUCCESS:function(e){return y()},CHANNEL_DELETE:function(e){var t=e.channel;delete m[t.id]},RELATIONSHIP_ADD:function(e){return _()},RELATIONSHIP_REMOVE:function(e){return _()}});t.default=g},7675:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=m(n(3)),i=m(n(139)),l=m(n(107)),u=m(n(10)),s=m(n(53)),d=m(n(8403)),c=n(875),f=n(8404),p=m(n(8405)),h=n(1);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isLoadingGuild:!1},t.handleView=function(){var e=t.props,n=e.guildId,r=e.channelId,a=e.messageId;if(e.isMember)i.default.selectGuild(n),l.default.selectChannel(n,r,a);else{var o={page:h.AnalyticsPages.GUILD_CHANNEL,section:h.AnalyticsSections.GUILD_POPOUT,object:h.AnalyticsObjects.CARD};(0,c.startLurking)(n,o)}t.setState({isLoadingGuild:!0})},t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.componentDidMount=function(){var e=this.props,t=e.guildId;null==e.guild&&null!=t&&(0,f.fetchGuildForPopout)(t)},o.render=function(){var e=this.props,t=e.loading,n=e.unavailable,a=e.guild,o=e.guildId,i=this.state.isLoadingGuild;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(d.default,{loading:t,unavailable:n,name:null!=a?a.name:null,icon:null!=a?a.icon:null,guildId:o,isVerified:null!=a&&null!=a.features&&a.features.has(h.GuildFeatures.VERIFIED),presenceCount:null!=a?a.presenceCount:null,memberCount:null!=a?a.memberCount:null,onView:this.handleView,submitting:i})},a}(a.Component);v.displayName="ConnectedGuildPopout";var y=o.default.connectStores([u.default,p.default,s.default],function(e){var t=e.messageReference,n=t.channel_id,r=t.guild_id,a=t.message_id,o=null!=r&&p.default.isFetchingGuild(r),i=null!=r&&p.default.getGuild(r);return{loading:o,unavailable:null==r||!o&&null==i,guild:i,guildId:r,channelId:n,messageId:a,isMember:s.default.isMember(r,u.default.getId())}})(v);t.default=y},7676:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(3)),a=l(n(2)),o=l(n(278)),i=l(n(194));n(1);function l(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s,d=Object.freeze({editingChannelId:null,editingMessageId:null,editingContent:null});function c(){if(null==s)return!1;s=null}var f=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getState=function(){return s||d},a.isEditing=function(e,t){var n=this.getState();return e===n.editingChannelId&&t===n.editingMessageId},a.getEditingContent=function(){return this.getState().editingContent},a.getEditingMessageId=function(){return this.getState().editingMessageId},a.getEditingMessage=function(){var e=this.getState();return null!=e.editingChannelId&&null!=e.editingMessageId?i.default.getMessage(e.editingChannelId,e.editingMessageId):null},r}(r.default.Store))(a.default,{MESSAGE_START_EDIT:function(e){var t=e.channelId,n=e.messageId,r=e.content;s={editingChannelId:t,editingMessageId:n,editingContent:o.default.unparse(r,t)}},MESSAGE_UPDATE_EDIT:function(e){var t=e.content;if(null==s)return!1;s=u({},s,{editingContent:t})},MESSAGE_END_EDIT:function(e){return c()},CHANNEL_SELECT:function(e){return c()}});t.default=f},7677:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=p(n(8)),i=n(462),l=p(n(65)),u=n(857),s=n(1),d=p(n(4)),c=p(n(940)),f=p(n(6217));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v=function(e){var t=e.timestamp;return h(l.default,{text:null!=t?(0,i.dateFormat)(t,"LLLL"):null},void 0,function(e){return a.createElement("time",m({dateTime:t.toISOString(),className:f.default.edited,role:"note"},e),"(",d.default.Messages.MESSAGE_EDITED,")")})};v.displayName="SuffixEdited";var y=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).onContextMenu=function(e){var n=t.props,r=n.onContextMenu,a=n.message,o=n.channel,i=e.currentTarget;r(e,{message:a,channel:o,target:e.target||i})},t.getContent=function(){var e=t.props,n=e.message,r=e.content;return n.hasFlag(s.MessageFlags.SOURCE_MESSAGE_DELETED)?d.default.Messages.SOURCE_MESSAGE_DELETED:r},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e,t=this,n=this.props,r=n.className,a=n.message,i=n.channel,l=n.renderButtons,d=n.renderPrefix,p=n.children,m=n.disableButtons,y=n.disableMentionStyles,_=n.isCompact,g=a.isEdited(),E=a.state===s.MessageStates.SEND_FAILED,S=a.state===s.MessageStates.SENDING,I=a.type!==s.MessageTypes.DEFAULT,T=a.mentioned&&!I,O=(0,o.default)(r,((e={})[f.default.isMentionedCompact]=T&&!y&&_,e[f.default.isMentionedCozy]=T&&!y&&!_,e[f.default.isSending]=S,e[f.default.containerCompact]=_,e[f.default.containerCozy]=!_,e));return h(u.BackgroundOpacityContext.Consumer,{},void 0,function(e){var n;return h("div",{className:(0,o.default)(O,f.default[e.backgroundOpacity+"BackgroundOpacity"],c.default[e.backgroundOpacity+"BackgroundOpacity"]),onContextMenu:t.onContextMenu},void 0,!m&&l&&h("div",{className:f.default.buttonContainer},void 0,l({message:a,channel:i})),p||h("div",{className:(0,o.default)(f.default.markup,c.default.markup,(n={},n[f.default.isFailed]=E,n[f.default.isCompact]=_,n))},void 0,null!=d&&d({message:a,channel:i}),t.getContent(),g&&null!=a.editedTimestamp&&h(v,{timestamp:a.editedTimestamp})))})},r}(a.PureComponent);t.default=y,y.displayName="MessageContent",y.defaultProps={disableButtons:!1,disableMentionStyles:!1,disablePromoteButton:!0}},7678:function(e,t,n){"use strict";t.__esModule=!0,t.openUserContextMenu=function(e,t,n){var r={user:t,channelId:n.id};n.isGroupDM()?r.type=l.ContextMenuTypes.USER_GROUP_DM:n.isDM()?(r.selected=!0,r.type=l.ContextMenuTypes.USER_PRIVATE_CHANNELS_MESSAGE):(r.type=l.ContextMenuTypes.USER_CHANNEL_MESSAGE,r.guildId=n.getGuildId());(0,o.openContextMenu)(e,function(e){return a.createElement(i.default,u({},e,r))})};var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(35),i=(r=n(459))&&r.__esModule?r:{default:r},l=n(1);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},7679:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(3)),a=i(n(2)),o=n(1);function i(e){return e&&e.__esModule?e:{default:e}}var l={},u={integration:"",query:""};var s=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getResults=function(e,t){if(null==e||null==t)return null;var n=l[e];return null!=n&&null!=n[t]?n[t]:null},a.getQuery=function(){return u},r}(r.default.Store))(a.default,{INTEGRATION_QUERY:function(e){var t=e.integration,n=e.query;l[t]=l[t]||{},l[t][n]={loading:!0,results:[]}},INTEGRATION_QUERY_SUCCESS:function(e){var t=e.integration,n=e.query,r=e.results;l[t][n].loading=!1,l[t][n].results=r.map(function(e){return{type:o.ChannelTextAreaIntegrations[t].type,meta:e}}),u={query:n,integration:t}},INTEGRATION_QUERY_FAILURE:function(e){var t=e.integration,n=e.query;delete l[t][n]}});t.default=s},7680:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=m(n(8)),i=m(n(137)),l=n(99),u=m(n(58)),s=m(n(24)),d=m(n(42)),c=m(n(71)),f=m(n(328)),p=m(n(4)),h=m(n(6222));function m(e){return e&&e.__esModule?e:{default:e}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function _(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).selectable=!0,t.orientation="Vertical",t.handleMouseEnter=function(){var e=t.props,n=e.onHover,r=e.index;n&&null!=r&&n(r)},t.handleClick=function(){var e=t.props,n=e.onClick,r=e.index;n&&null!=r&&n(r)},t}_(t,e);var n=t.prototype;return n.getSelectedMode=function(){return this.selectable&&this.props.selected?"Selected":""},n.renderContent=function(){throw new Error("AutocompleteRow: renderContent must be extended")},n.render=function(){var e;return y(u.default,{className:(0,o.default)(this.props.className,(0,l.getClass)(h.default,"autocompleteRow",this.orientation)),onMouseEnter:this.selectable?this.handleMouseEnter:null,onClick:this.selectable?this.handleClick:null},void 0,y("div",{className:(0,o.default)((0,l.getClass)(h.default,"selector",this.getSelectedMode()),(e={},e[h.default.selectable]=this.selectable,e))},void 0,this.renderContent()))},t}(a.PureComponent);g.displayName="AutocompleteRow";var E=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.text,n=e.description;return y(s.default,{className:h.default.content},void 0,y(s.default.Child,{grow:1},void 0,t),y(s.default.Child,{grow:0},void 0,y(c.default,{className:h.default.description},void 0,n)))},t}(g),S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).selectable=!1,t}return _(t,e),t.prototype.renderContent=function(){var e=this.props.title;return y(c.default,{className:h.default.contentTitle,weight:c.default.Weights.SEMIBOLD,size:c.default.Sizes.SMALL},void 0,e)},t}(g),I=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).selectable=!1,t}return _(t,e),t.prototype.renderContent=function(){return y("div",{className:h.default.divider})},t}(g),T=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.user,n=e.nick,r=e.status,a=e.hidePersonalInformation;return y(s.default,{align:s.default.Align.CENTER,className:h.default.content},void 0,y(f.default,{size:f.default.Sizes.SIZE_24,src:t.getAvatarURL(),"aria-label":t.username,status:r}),y(s.default.Child,{className:h.default.marginLeft8},void 0,n||t.username),y(s.default,{grow:0,align:s.default.Align.BASELINE,className:h.default.description},void 0,y(c.default,{className:h.default.descriptionUsername},void 0,t.username),a?null:y(c.default,{className:h.default.descriptionDiscriminator},void 0,"#",t.discriminator)))},t}(g),O=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.renderContent=function(){var e=this.props.role;return y(s.default,{align:s.default.Align.CENTER,className:h.default.content},void 0,y(s.default.Child,{grow:1},void 0,y(c.default,{style:{color:e.colorString}},void 0,"@",e.name)),y(c.default,{className:h.default.description},void 0,p.default.Messages.MENTION_USERS_WITH_ROLE))},t}(g),A=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.channel,n=e.category;return y(s.default,{align:s.default.Align.CENTER,className:h.default.content},void 0,y(d.default,{name:d.default.Names.CHANNEL_TEXT,className:h.default.icon,foreground:h.default.iconForeground}),y(s.default.Child,{className:h.default.marginLeft4},void 0,(0,i.default)(t)),null!=n?y(c.default,{className:h.default.description},void 0,n.name):null)},t}(g),N=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.command,n=e.description;return y(s.default,{align:s.default.Align.CENTER,className:h.default.content},void 0,y(d.default,{name:d.default.Names.SLASH,className:h.default.icon,foreground:h.default.iconForeground}),y(s.default.Child,{grow:1,className:h.default.marginLeft4},void 0,t),y(c.default,{className:h.default.description},void 0,n))},t}(g),C=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.emoji,n=e.sentinel,r=e.guild,a=t.url?y("img",{alt:"",className:h.default.icon,src:t.url}):y("span",{className:h.default.rawEmoji},void 0,t.surrogates),o=null!=r?y(c.default,{className:h.default.description},void 0,r.name):null;return y(s.default,{align:s.default.Align.CENTER,className:h.default.content},void 0,y(s.default.Child,{grow:1},void 0,a,y("span",{className:h.default.marginLeft8},void 0,n,t.name,n)),o)},t}(g),M=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).orientation="Horizontal",t}return _(t,e),t.prototype.renderContent=function(){var e=this.props,t=e.width,n=e.height;return y("img",{alt:"",src:e.src,width:t,height:n})},t}(g),b=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=e.isCustom,i=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["children","className","isCustom"]);return 0===a.Children.count(t)?null:y("div",{className:(0,o.default)(h.default.autocomplete,n)},void 0,r?t:a.createElement("div",v({className:h.default.autocompleteInner},i),t))},t}(a.PureComponent);b.displayName="Autocomplete",b.Generic=E,b.Title=S,b.Divider=I,b.User=T,b.Role=O,b.Channel=A,b.Command=N,b.Emoji=C,b.GIFIntegration=M,b.defaultProps={isCustom:!1};var R=b;t.default=R},7681:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=f(n(8)),i=n(157),l=n(99),u=f(n(21)),s=n(1),d=f(n(4)),c=f(n(6225));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m={tension:800,friction:24},v=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={hovered:!1,emojiIndex:0},t.handleMouseEnter=function(){if(!t.state.hovered&&!t.props.active){var e=Math.floor(Math.random()*s.EmojiSprites.PickerCount);t.setState({hovered:!0,emojiIndex:e})}},t.handleMouseLeave=function(){t.setState({hovered:!1})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getSpriteStyle=function(){var e=this.state.emojiIndex;return{backgroundPosition:-e%s.EmojiSprites.PickerPerRow*22+"px "+22*-Math.floor(e/s.EmojiSprites.PickerPerRow)+"px",backgroundSize:22*s.EmojiSprites.PickerPerRow+"px "+22*Math.ceil(s.EmojiSprites.PickerCount/s.EmojiSprites.PickerPerRow)+"px"}},a.render=function(){var e=this.props,t=e.tabIndex,n=e.className,r=e.renderButtonContents,a=e.active,s=e.onClick,f=e["aria-expanded"],v=e["aria-controls"],y=this.state.hovered||a,_=(0,l.getClass)(c.default,"emojiButton",y?"Hovered":"Normal"),g=this.getSpriteStyle();return p(u.default,{look:u.default.Looks.BLANK,size:u.default.Sizes.NONE,tabIndex:t,className:(0,o.default)(_,n),onMouseEnter:this.handleMouseEnter,onMouseOver:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:s,"aria-label":d.default.Messages.SELECT_EMOJI,"aria-expanded":f,"aria-controls":v},void 0,null!=r?r():p(i.Spring,{native:!0,config:m,to:{value:y?1:0}},void 0,function(e){var t=e.value;return p(i.animated.div,{className:c.default.sprite,style:h({},g,{transform:t.interpolate([0,1],[1,1.14]).interpolate(function(e){return"scale("+e+")"}),filter:t.interpolate(function(e){return"grayscale("+(100-100*e)+"%)"})})})}))},r}(a.PureComponent);v.displayName="EmojiButton";var y=v;t.default=y},7682:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=b(n(8)),i=b(n(3)),l=b(n(6736)),u=b(n(30)),s=b(n(192)),d=b(n(6750)),c=b(n(7061)),f=b(n(14)),p=b(n(6852)),h=b(n(868)),m=b(n(933)),v=b(n(8425)),y=b(n(21)),_=b(n(461)),g=b(n(71)),E=b(n(65)),S=n(908),I=n(80),T=b(n(278)),O=b(n(6747)),A=n(1),N=b(n(4)),C=b(n(455)),M=b(n(5945));function b(e){return e&&e.__esModule?e:{default:e}}function R(e,t,n,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function P(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){R(o,r,a,i,l,"next",e)}function l(e){R(o,r,a,i,l,"throw",e)}i(void 0)})}}function D(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function L(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var w="popout-channel-text-area-shouting",U=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={imageDataURI:null,imageLoaded:!1},t.tryAbort=function(){null!=t.reader&&1===t.reader.readyState&&t.reader.abort()},t.loadImagePreview=function(e){t.tryAbort(),t.reader=new FileReader,t.reader.onload=function(e){return t.setState({imageDataURI:e.target.result,imageLoaded:!0})},t.reader.readAsDataURL(e)},t}L(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.file;null!=e&&this.loadImagePreview(e)},n.componentDidUpdate=function(){var e=this.props.file;null!=e&&this.loadImagePreview(e)},n.componentWillUnmount=function(){this.tryAbort()},n.render=function(){var e,t=this.state,n=t.imageLoaded,r=t.imageDataURI;if(null!=n&&null!=r){var a={backgroundImage:"url('"+r+"')"};return D("div",{className:(0,o.default)(M.default.icon,M.default.image),style:a})}return D("div",{className:(0,o.default)(M.default.icon,(e={},e[M.default.image]=!0,e))})},t}(a.PureComponent);U.displayName="ImageFilePreview";var k=function(e){function t(){return e.apply(this,arguments)||this}return L(t,e),t.prototype.render=function(){return this.props.upload.isImage?D(U,{file:this.props.upload.file}):D("div",{className:(0,o.default)(M.default.icon,(e={},e[M.default[this.props.upload.classification]]=!0,e))});var e},t}(a.Component);k.displayName="UploadIcon";var G=function(e){function t(t){var n;(n=e.call(this,t)||this)._transitionTimeout=null,n._channelTextAreaRef=a.createRef(),n.cancelAll=function(){c.default.clearAll(),n.props.onClose()},n.cancel=function(){n.showNextFile()},n.confirm=P(regeneratorRuntime.mark(function e(){var t,r,a,o,i,l,u,d,c,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,r=t.cooldown,a=t.upload,o=t.channel,i=n.state,l=i.transitioning,u=i.textValue,d=i.hasSpoiler,!l&&null!=a){e.next=4;break}return e.abrupt("return",{shouldClear:!1,shouldRefocus:!1});case 4:if(!(r>0)){e.next=6;break}return e.abrupt("return",{shouldClear:!1,shouldRefocus:!0});case 6:if(!h.default.isOpen(w)){e.next=10;break}return s.default.close(w),n.submitUpload(!0,u,a,o,d),e.abrupt("return",{shouldClear:!0,shouldRefocus:!0});case 10:return c=null!=n._channelTextAreaRef.current?n._channelTextAreaRef.current:null,e.next=13,(0,S.applyChatRestrictions)(c,u,o);case 13:return f=e.sent,p=f.valid,n.submitUpload(p,u,a,o,d),e.abrupt("return",{shouldClear:!1,shouldRefocus:!1});case 17:case"end":return e.stop()}},e)})),n.handleTextChange=function(e,t){n.setState({textValue:t})},n.handleSubmit=function(){return n.confirm()};var r=null!=t.upload?t.upload.channelId:null;return n.state={transitioning:!1,textValue:null!=r?p.default.getDraft(r):"",textFocused:!0,hasSpoiler:!1},n}L(t,e);var n=t.prototype;return n.componentDidMount=function(){I.ComponentDispatch.subscribe(A.ComponentActions.MODAL_SUBMIT,this.confirm),I.ComponentDispatch.subscribe(A.ComponentActions.MODAL_CLOSE,this.cancel)},n.componentWillUnmount=function(){I.ComponentDispatch.unsubscribe(A.ComponentActions.MODAL_SUBMIT,this.confirm),I.ComponentDispatch.unsubscribe(A.ComponentActions.MODAL_CLOSE,this.cancel),clearTimeout(this._transitionTimeout)},n.shouldComponentUpdate=function(e){return null!=e.upload},n.submitUpload=function(e,t,n,r,a){if(e&&null!=r){var o=T.default.parse(r,t);l.default.saveDraft(r.id,""),this.setState({textFocused:!0,textValue:""}),setTimeout(function(){return d.default.upload(r.id,n.file,o,a)},125),this.showNextFile()}},n.showNextFile=function(){var e=this;this.state.transitioning||(this.props.hasAdditionalUploads?(this.setState({transitioning:!0}),setTimeout(function(){return c.default.popFirstFile()},100),this._transitionTimeout=setTimeout(function(){return e.setState({transitioning:!1})},200)):(c.default.popFirstFile(),this.props.onClose()))},n.renderFooter=function(){var e=this,t=this.props,n=t.cooldown,r=t.hasAdditionalUploads,i=this.state.hasSpoiler,l=n>0,u=null,s=l?N.default.Messages.CHANNEL_SLOWMODE_COOLDOWN.format({seconds:Math.round((n+1e3)/1e3)}):null;r&&(u=D(y.default,{type:"button",look:y.default.Looks.LINK,color:y.default.Colors.WHITE,onClick:this.cancelAll,className:M.default.cancelAllButton},void 0,D("span",{},void 0,N.default.Messages.UPLOAD_AREA_CANCEL_ALL)));var d=D(a.Fragment,{},void 0,D(_.default,{value:i,onChange:function(t,n){return e.setState({hasSpoiler:n})},checkboxColor:A.Colors.WHITE},void 0,D(g.default,{color:g.default.Colors.WHITE},void 0,N.default.Messages.SPOILER_MARK_SELECTED)),D("div",{className:M.default.hasSpoilers},void 0,u,D(y.default,{type:"button",look:y.default.Looks.LINK,color:y.default.Colors.WHITE,onClick:this.cancel},void 0,D("span",{},void 0,N.default.Messages.CANCEL)),D(E.default,{text:s},void 0,function(t){return a.createElement("div",t,D(y.default,{disabled:l,color:y.default.Colors.BRAND,look:y.default.Looks.INVERTED,type:"submit",onClick:e.confirm},void 0,D("span",{},void 0,N.default.Messages.UPLOAD)))})));return D("div",{className:(0,o.default)(M.default.footer,M.default.hasSpoilers)},void 0,d)},n.render=function(){var e,t=this.props,n=t.upload,r=t.channel,i=this.state,l=i.transitioning,u=i.textValue,s=i.textFocused;return null==n||null==r?null:D("div",{className:(0,o.default)(M.default.uploadModal,"theme-brand",(e={},e[M.default.transitioning]=l,e))},void 0,D("div",{className:M.default.inner},void 0,D("div",{className:M.default.file},void 0,D(k,{upload:n}),D("div",{className:M.default.description},void 0,D("div",{className:M.default.filename},void 0,n.filename))),D("div",{className:M.default.comment},void 0,D("div",{className:M.default.label},void 0,D("span",{},void 0,N.default.Messages.UPLOAD_AREA_LEAVE_A_COMMENT),D("span",{className:M.default.optional},void 0,"(",N.default.Messages.UPLOAD_AREA_OPTIONAL,")")),a.createElement(O.default,{ref:this._channelTextAreaRef,className:(0,o.default)(M.default.channelTextAreaUpload,C.default.marginTop8),value:u,focused:s,channel:r,onChange:this.handleTextChange,onSubmit:this.handleSubmit,type:A.TextareaTypes.FORM}))),this.renderFooter())},t}(a.Component);G.displayName="Upload";var F=i.default.connectStores([v.default,f.default,m.default],function(){var e=v.default.getFirstUpload(),t=null!=e?e.channelId:null,n=null!=t?m.default.getSlowmodeCooldownGuess(t):0;return{upload:e,file:null!=e?e.file:null,hasAdditionalUploads:v.default.hasAdditionalUploads(),channel:null!=t?f.default.getChannel(t):null,cooldown:n}})(G),j=function(e){function t(){return e.apply(this,arguments)||this}L(t,e);var n=t.prototype;return n.close=function(){u.default.pop()},n.render=function(){return D(F,{onClose:this.close})},t}(a.Component);t.default=j,j.displayName="UploadModal",j.modalConfig={closable:!1}},7683:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=i(n(8)),o=i(n(6227));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var u=function(e){var t,n=e.message,r=e.className,i=e.forceLightTheme;return l("div",{className:(0,a.default)((t={},t[o.default.forceLightTheme]=i,t),r)},void 0,l("div",{className:o.default.wrapper},void 0,l("div",{className:o.default.sadImage}),l("div",{},void 0,n)))};u.displayName="NoSearchResults";var s=u;t.default=s},7684:function(e,t,n){e.exports=n.p+"afc96e77efee1190e1fbe3cc69f149f8.png"},7685:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=(r=n(82))&&r.__esModule?r:{default:r},i=n(1);var l=(0,o.default)({ARROW_UP:null,ARROW_DOWN:null,ARROW_LEFT:null,ARROW_RIGHT:null});var u=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={focusedColumn:null,focusedRow:null},t.handleKeyDown=function(e){var n=t.props.onSelect;switch(e.keyCode){case i.KeyboardKeys.ARROW_DOWN:case i.KeyboardKeys.ARROW_UP:case i.KeyboardKeys.ARROW_LEFT:case i.KeyboardKeys.ARROW_RIGHT:e.preventDefault(),e.stopPropagation(),t.focusNext(function(e){switch(e){case i.KeyboardKeys.ARROW_DOWN:return l.ARROW_DOWN;case i.KeyboardKeys.ARROW_UP:return l.ARROW_UP;case i.KeyboardKeys.ARROW_LEFT:return l.ARROW_LEFT;case i.KeyboardKeys.ARROW_RIGHT:return l.ARROW_RIGHT;default:return null}}(e.keyCode));break;case i.KeyboardKeys.ENTER:e.preventDefault(),e.stopPropagation();var r=t.calculateFocusedItem();null!=r&&null!=n&&n(r)}},t.wrapPosition=function(e,n,r,a){var o=e.length,i=r*o+n,l=Math.max(i+a,0)%o,u=0;return a<0&&l>n&&(u=-1),a>0&&l<n&&(u=1),{column:l,row:(t.calculateClosest(e[n][r],e[l])||r)+u}},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){document.addEventListener("keydown",this.handleKeyDown,!0)},a.componentWillUnmount=function(){document.removeEventListener("keydown",this.handleKeyDown,!0)},a.focusNext=function(e){var t=this,n=this.props,r=n.getItemGrid,a=n.onFocus,o=this.state,i=o.focusedColumn,l=o.focusedRow;if(null!=e){var u=r();if(null!=u){var s=this.getNext(u,i,l,e);this.setState({focusedColumn:s.column,focusedRow:s.row},function(){var e=t.calculateFocusedItem();null!=e&&null!=a&&a(e)})}}},a.getNext=function(e,t,n,r){var a,o,i,u;if(null==t||null==n)o=0,i=0,a={column:0,row:0};else switch(o=t,i=n,r){case l.ARROW_UP:a={column:o,row:Math.max(i-1,0)};break;case l.ARROW_DOWN:a={column:o,row:Math.min(i+1,e[o].length-1)};break;case l.ARROW_LEFT:a=this.wrapPosition(e,o,i,-1);break;case l.ARROW_RIGHT:a=this.wrapPosition(e,o,i,1)}return null!=a&&(u=e[a.column][a.row]),null!=u&&null!=a||(u=e[(a={column:o,row:i}).column][a.row]),{column:a.column,row:a.row,id:u.id}},a.calculateClosest=function(e,t){for(var n,r=Number.MAX_SAFE_INTEGER,a=0;a<t.length;a++){var o=t[a],i=Math.abs(o.coords.top-e.coords.top);if(!(i<r))break;r=i,n=a}return n},a.calculateFocusedItem=function(){var e=this.props.getItemGrid,t=this.state,n=t.focusedRow,r=t.focusedColumn,a=e();return null==a||null==r||null==n||null==a[r]||null==a[r][n]?null:a[r][n]},a.render=function(){return this.props.children},r}(a.Component);t.default=u,u.displayName="MasonryKeyboardNavigationWrapper"},7686:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),i=(r=n(152))&&r.__esModule?r:{default:r};function l(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var u=function(){function e(e){var t=e.columns,n=e.gutterSize,r=e.scrollBufferMultiplier,a=e.getItemId,o=e.getItemHeight,i=e.getFooterHeight;this._coordsMap={},this._columnHeights=[],this._columnWidth=0,this._totalHeight=0,this._itemGrid=[],this.columns=t,this.gutterSize=n,this.scrollBufferMultiplier=r,this.getItemId=a,this.getItemHeight=o,this.getFooterHeight=i}var t=e.prototype;return t.computeFullCoords=function(e,t,n,r){var a=this.columns,o=this.getItemId,i=this.getItemHeight,l=this.gutterSize,u=this.scrollBufferMultiplier,s=this.getFooterHeight,d={},c=new Array(a).fill(0),f=(r-l*(a+1))/a,p=[],h=t-u*n,m=t+n+u*n,v=[];e.forEach(function(e){var t=o(e);if(null!=t){var n=function(e){return e.reduce(function(e,t,n){return t<e[0]?[t,n]:e},[e[0],0])}(c),r=n[0],a=n[1],u=i(e,f),s=r+l,y={position:"absolute",left:f*a+l*(a+1),width:f,top:s,height:u};s>h-u&&s<m&&p.push(e),d[t]=y,c[a]=s+u,null==v[a]&&(v[a]=[]),v[a].push({coords:y,id:t})}}),this._columnWidth=f,this._coordsMap=d,this._columnHeights=c.map(function(e){return e+l}),this._itemGrid=v;var y=s(a,f,l),_=this.getTotalColumnHeight();return y>0&&(d.__footer__={position:"absolute",left:l,width:r-2*l,top:_,height:y},_+=y+l),this._totalHeight=_,p},t.computeVisibleItems=function(e,t,n){var r=this.getItemId,a=this._coordsMap,o=this.scrollBufferMultiplier,i=[],l=t-o*n,u=t+n+o*n;return e.forEach(function(e){var t=r(e);if(null!=t&&null!=a[t]){var n=a[t],o=n.top,s=n.height;o>l-s&&o<u&&i.push(e)}}),i},t.getCoords=function(e){return this._coordsMap[e]},t.getItemGrid=function(){return this._itemGrid},t.getTotalColumnHeight=function(){return this._columnHeights.reduce(function(e,t){return Math.max(e,t)},0)},e}(),s=function(e){return l("div",{style:e.style},void 0,e.children)};s.displayName="ListItem";var d=function(e){return l("div",{style:{height:e.height,visibility:"hidden"}})};d.displayName="ScrollBuffer";var c=function(e){var t,n;function r(t){var n;(n=e.call(this,t)||this).scrollIntoView=function(e,t){var r=n.state.scrollerRef.current;null!=r&&r.scrollIntoViewRect(e,t,!0)},n.computeFullCoords=function(){var e=n.props,t=e.data,r=e.width,a=e.height,o=n.getScrollTop(),i=n.state.computer.computeFullCoords(t,o,a,r);n.setState({items:i})},n.handleScroll=function(){var e=n.props,t=e.data,r=e.height,a=e.onScroll,o=n.state.items,i=n.getScrollTop(),l=n.state.computer.computeVisibleItems(t,i,r);l.length===o.length&&null==l.find(function(e,t){return e!==o[t]})||n.setState({items:l});var u=n.state.scrollerRef.current;null!=a&&null!=u&&a(u)};var r=n.props,a=r.width,i=r.height,l=r.columns,s=r.gutterSize,d=r.getItemId,c=r.getItemHeight,f=r.scrollBufferMultiplier,p=r.getFooterHeight;return n.state={width:a,height:i,items:[],_data:[],computer:new u({columns:l,gutterSize:s,scrollBufferMultiplier:f,getItemId:d,getItemHeight:c,getFooterHeight:p}),_columns:l,scrollerRef:o.createRef()},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e,t){var n=e.data,r=e.columns,a=e.width,o=e.height,i=t.computer,l=t.scrollerRef.current;if(null==l)return null;if(n!==t._data||r!==t._columns||a!==t.width){var u=l.getScrollData().scrollTop;return i.columns=r,{scrollTop:u,height:o,width:a,items:i.computeFullCoords(n,u,o,a),_data:n,_columns:r}}return null};var a=r.prototype;return a.getScrollTop=function(){var e=this.state.scrollerRef.current;return null!=e?e.getScrollData().scrollTop:0},a.scrollTo=function(e,t){void 0===t&&(t=!1);var n=this.state.scrollerRef.current;null!=n&&n.scrollTo(e,t)},a.componentDidMount=function(){this.computeFullCoords()},a.getItemGrid=function(){return this.state.computer.getItemGrid()},a.render=function(){var e=this.props,t=e.className,n=e.renderItem,r=e.getItemId,a=e.theme,u=e.track,c=e.renderFooter,f=this.state,p=f.items,h=f.computer,m=f.scrollerRef,v=h.getCoords("__footer__");return o.createElement(i.default,{className:t,ref:m,onScroll:this.handleScroll,theme:a,track:u},l(d,{height:h._totalHeight}),p.map(function(e,t){var a=r(e),o=h.getCoords(a);return null!=o?l(s,{style:o},a,n(e,o,t)):null}),null!=v?l(s,{style:v},void 0,c(h.getTotalColumnHeight(),h)):null)},r}(o.Component);c.displayName="MasonryList",c.defaultProps={columns:2,gutterSize:10,scrollBufferMultiplier:0,track:!1,theme:i.default.Themes.GHOST_HAIRLINE,getFooterHeight:function(){return 0},renderFooter:function(){return null}};var f=c;t.default=f},7687:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0));function l(e,t,n){var r=Math.max(Math.floor(e/t),1);return Math.min(r,n)}var u=(0,((r=n(861))&&r.__esModule?r:{default:r}).default)((o=a=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={columns:l(t.props.width,t.props.desiredItemWidth,t.props.maxColumns)},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e,t){var n=l(e.width,e.desiredItemWidth,e.maxColumns);return n!==t.columns?{columns:n}:null},r.prototype.render=function(){var e=this.props,t=e.width,n=e.height;return(0,e.children)(this.state.columns,t,n)},r}(i.PureComponent),a.defaultProps={desiredItemWidth:200},o));t.default=u},7688:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.GIFPickerSearchItem=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=T(n(8)),i=T(n(6)),l=T(n(8440)),u=T(n(3)),s=n(6868),d=T(n(6749)),c=T(n(21)),f=T(n(58)),p=T(n(42)),h=T(n(152)),m=T(n(7689)),v=T(n(7685)),y=T(n(7686)),_=T(n(7683)),g=T(n(7687)),E=n(1),S=T(n(4)),I=T(n(6232));function T(e){return e&&e.__esModule?e:{default:e}}function O(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function A(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var N=[E.Colors.PREMIUM_TIER_1_PURPLE,E.Colors.PREMIUM_TIER_1_BLUE,"#929AFA"],C=1220;function M(e){return e.id||e.src}function b(e){return e.height}function R(e){return e.id}function P(e){return e===E.GIFResultFormat.VIDEO}var D=function(e){var t=e.className,n=e.isFavorite,r=e.item;return A(m.default,{className:t,isFavorite:n,onClick:function(e){var t=r.width,n=r.height,a=r.src,o=r.url,i=r.format;e?(0,s.removeFavoriteGIF)(o):(0,s.addFavoriteGIF)({width:t,height:n,src:a,url:o,format:i})}})};D.displayName="ConnectedGIFFavButtonInner";var L=u.default.connectStores([d.default],function(e){var t=e.item.url;return{isFavorite:d.default.getIsFavorite(t)}})(D),w=new l.default(function(){var e=document.createElement("video");return e.className=I.default.gif,e.autoplay=!0,e.loop=!0,e.muted=!0,e.preload="auto",e.controls=!1,e},function(e){e.src="",e.oncanplay=null;var t=e.parentNode;null!=t&&t.removeChild(e)}),U=new l.default(function(){return document.createElement("img")},function(e){e.onload=null,e.src=""}),k=Array.from({length:16}).map(function(e,t){return{id:""+t,height:Math.floor(100*Math.random())+120}}),G=function(e){function t(t){var n;(n=e.call(this,t)||this).ref=null,n._video=null,n._image=null,n._mounted=!0,n.handleCanPlay=function(){n._mounted&&n.setState({loaded:!0})},n.handleClick=function(){var e=n.props,t=e.onClick,r=e.item,a=e.index;null!=t&&t(r,a)};var r=n.props,a=r.format,o=r.color;return n.state={color:null==o?i.default.sample(N):o,loaded:!1},P(a)||(n._image=U.getElement(),n._image.onload=function(){return n.setState({loaded:!0})},n._image.src=t.src),n}O(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.format,n=e.src,r=e.itemWidth,a=e.itemHeight,o=this.ref;if(t===E.GIFResultFormat.VIDEO&&null!=o){var i=w.getElement();i.oncanplay=this.handleCanPlay,i.src=n,i.width=r,i.height=a,o.appendChild(i),this._video=i}},n.componentWillUnmount=function(){this._mounted=!1;var e=this._image,t=this._video;null!=e&&(this._image=null,U.poolElement(e)),null!=t&&(this._video=null,w.poolElement(t))},n.renderGIF=function(){var e=this.props,t=e.src,n=e.itemWidth,r=e.itemHeight;return this.state.loaded?A("img",{src:t,width:n,height:r,className:I.default.gif,alt:""}):null},n.render=function(){var e,t=this,n=this.props,r=n.item,a=n.renderExtras,i=n.format,l=n.itemWidth,u=n.itemHeight,s=n.focused,d=this.state,c=d.color,p=d.loaded;return A(f.default,{innerRef:function(e){t.ref=e},className:(0,o.default)(I.default.result,(e={},e[I.default.focused]=s,e)),onClick:this.handleClick,style:{backgroundColor:p?null:c,width:l,height:u}},void 0,P(i)?null:this.renderGIF(),null!=a?a(r):null)},t}(a.PureComponent);t.GIFPickerSearchItem=G,G.displayName="GIFPickerSearchItem";var F=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._masonryRef=a.createRef(),t.prevResultQuery=null,t.state={focusedId:null},t.handleFocus=function(e){var n=t._masonryRef.current;null!=n&&n.scrollIntoView(e.coords.top-10,e.coords.top+e.coords.height+10),t.setState({focusedId:e.id})},t.handleSelect=function(e){var n,r=t.props.data,a=r.findIndex(function(t){return M(t)===e.id});-1!==a&&(n=r[a]),null!=n&&t.selectItem(n,a)},t.handleClickItem=function(e,n){t.selectItem(e,n)},t.handleScroll=function(e){var n=t.props.resultQuery,r=e.scrollerState,a=r.scrollTop;r.scrollHeight-a<=C&&(n!==t.prevResultQuery&&(0,s.fetchSuggestions)(n),t.prevResultQuery=n)},t.renderItem=function(e,n,r){var a=t.state.focusedId;return A(G,{item:e,index:r,format:e.format,src:e.src,itemWidth:n.width,itemHeight:n.height,onClick:t.handleClickItem,renderExtras:function(){return A(L,{className:I.default.favButton,item:e})},focused:M(e)===a})},t.renderLoadingItem=function(e,t,n){return A("div",{className:I.default.placeholder,style:{animationDelay:75*n+"ms"}})},t.renderFooter=function(){var e=t.props,n=e.onSelectSuggestion,r=e.suggestions;return A("div",{className:I.default.endContainer},void 0,r.length>0?A(a.Fragment,{},void 0,A("div",{className:I.default.endText},void 0,S.default.Messages.GIF_PICKER_RELATED_SEARCH),A("div",{className:I.default.searchSuggestions},void 0,r.map(function(e){return A(c.default,{look:c.default.Looks.OUTLINED,color:c.default.Colors.PRIMARY,size:c.default.Sizes.SMALL,className:I.default.searchSuggestion,onClick:function(){n(e)}},e,e)}))):null)},t}O(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.resultType,n=e.data;t===E.GIFPickerResultTypes.FAVORITES&&((0,s.trackSearchStart)(E.GIFPickerResultTypes.FAVORITES),(0,s.trackSearchResultViewed)(n,E.GIFPickerResultTypes.FAVORITES,{limit:null}))},n.componentWillUnmount=function(){w.clearPool(),U.clearPool()},n.selectItem=function(e,t){var n=this.props,r=n.onSelectGIF,a=n.resultType,o=n.data,i=n.resultQuery;null!=r&&r(e),(0,s.trackSelectGIF)({type:a,index:t,offset:this.props.searchOffset,limit:this.props.searchLimit,results:o,totalResults:this.props.searchTotalResults,query:i,gifId:e.id})},n.getItemHeight=function(e,t){var n=e.width;return t*(e.height/n)},n.renderEmptyFavorite=function(e,t){return void 0===t&&(t=!1),A("div",{className:I.default.emptyHint},void 0,null!=e?A("div",{className:I.default.emptyHintCard},void 0,t?A(p.default,{className:I.default.emptyHintFavorite,name:p.default.Names.FAVORITE_FILLED}):null,A("div",{className:I.default.emptyHintText},void 0,e)):A("div",{className:I.default.emptyHintSpacer}))},n.renderEmptyFavorites=function(){var e=this;return A(h.default,{theme:h.default.Themes.GHOST_HAIRLINE},void 0,A("div",{className:I.default.emptyHints},void 0,this.renderEmptyFavorite(S.default.Messages.NO_GIF_FAVORITES_HOW_TO_FAVORITE,!0),this.renderEmptyFavorite(S.default.Messages.NO_GIF_FAVORITES_WHERE_TO_FAVORITE),this.renderEmptyFavorite(S.default.Messages.NO_GIF_FAVORITES_GO_FAVORITE),Array.from({length:15}).map(function(t,n){return A(a.Fragment,{},n,e.renderEmptyFavorite())}),this.renderEmptyFavorite(S.default.Messages.NO_GIF_FAVORITES_FLAVOR_FAVORITE_PLEASE),Array.from({length:16}).map(function(t,n){return A(a.Fragment,{},n,e.renderEmptyFavorite())}),this.renderEmptyFavorite(S.default.Messages.NO_GIF_FAVORITES_FLAVOR_STILL_HERE)))},n.render=function(){var e=this,t=this.props,n=t.data,r=t.resultQuery,o=t.query,i=t.resultType;return 0===n.length&&r===o&&i!==E.GIFPickerResultTypes.TRENDING_GIFS?i===E.GIFPickerResultTypes.FAVORITES?this.renderEmptyFavorites():A(_.default,{message:S.default.Messages.NO_GIF_SEARCH_RESULTS,className:I.default.noResults}):A(v.default,{getItemGrid:function(){var t=e._masonryRef.current;return null!=t?t.getItemGrid():null},onFocus:this.handleFocus,onSelect:this.handleSelect},r,A(g.default,{desiredItemWidth:200,maxColumns:8},void 0,function(t,l,u){return 0!==n.length||r===o&&i!==E.GIFPickerResultTypes.TRENDING_GIFS?a.createElement(y.default,{key:r+"-"+(i||""),ref:e._masonryRef,width:l,height:u,gutterSize:12,className:I.default.results,columns:t,data:n,getItemId:M,getItemHeight:e.getItemHeight,renderItem:e.renderItem,scrollBufferMultiplier:.5,getFooterHeight:function(){return 220},renderFooter:e.renderFooter,onScroll:e.handleScroll}):A(y.default,{width:l,height:u,data:k,columns:t,gutterSize:12,getItemId:R,getItemHeight:b,renderItem:e.renderLoadingItem,scrollBufferMultiplier:.5},r)}))},t}(a.PureComponent);F.displayName="GIFPickerSearchResults";var j=F;t.default=j},7689:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=c(n(8)),i=c(n(58)),l=c(n(42)),u=c(n(65)),s=c(n(4)),d=c(n(6231));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={showPulse:!1},t.showPulse=function(){t.setState({showPulse:!0}),t._timeout=setTimeout(function(){t.setState({showPulse:!1})},500)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentWillUnmount=function(){clearTimeout(this._timeout)},a.render=function(){var e=this,t=this.props,n=t.className,r=t.size,a=t.isFavorite,c=t.onClick,p=this.state.showPulse,h=a?s.default.Messages.GIF_TOOLTIP_REMOVE_FROM_FAVORITES:s.default.Messages.GIF_TOOLTIP_ADD_TO_FAVORITES;return f(u.default,{text:h},void 0,function(t){var u,s=t.onMouseEnter,h=t.onMouseLeave;return f(i.default,{className:(0,o.default)(n,r,d.default.gifFavoriteButton,(u={},u[d.default.selected]=a,u[d.default.showPulse]=p,u)),onMouseDown:function(e){return e.preventDefault()},onClick:function(t){t.preventDefault(),t.stopPropagation(),e.showPulse(),c(a)},onDoubleClick:function(e){return e.preventDefault()},onMouseEnter:s,onMouseLeave:h},void 0,f(l.default,{className:d.default.icon,name:a?l.default.Names.FAVORITE_FILLED:l.default.Names.FAVORITE}))})},r}(a.PureComponent);p.displayName="GIFFavButton",p.defaultProps={size:d.default.size};var h=p;t.default=h},7690:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=G(n(0)),o=k(n(3)),i=k(n(100)),l=k(n(30)),u=n(299),s=G(n(379)),d=n(381),c=k(n(8442)),f=k(n(7691)),p=k(n(122)),h=k(n(161)),m=k(n(69)),v=k(n(525)),y=k(n(22)),_=k(n(53)),g=k(n(50)),E=k(n(233)),S=k(n(235)),I=k(n(11)),T=k(n(532)),O=k(n(8443)),A=n(857),N=k(n(15)),C=k(n(88)),M=n(165),b=k(n(13)),R=k(n(345)),P=k(n(8444)),D=k(n(954)),L=k(n(343)),w=k(n(331)),U=n(1);function k(e){return e&&e.__esModule?e:{default:e}}function G(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function F(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var x={spotify:"Spotify"};function B(e,t,n,r){var a=null!=r.application_id?g.default.getActiveLibraryApplication(r.application_id):null;N.default.track(U.AnalyticEvents.APPLICATION_OPENED,{type:e,source:U.AnalyticsLocations.MESSAGE_EMBED,application_id:r.application_id,party_id:null!=r.party?r.party.id:void 0,other_user_id:t,message_id:n,distributor:null!=a?a.getDistributor():null})}var V=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).renderCustomButton=function(e){var t=n.props.application;return a.createElement(D.default,j({},e,{source:U.AnalyticsLocations.MESSAGE_EMBED,application:t}))},n.renderEmbed=function(e){var t,r=n.props,a=r.activity,o=r.partyId,i=r.myPartyId,l=r.application,u=r.partyMembers,s=r.isPreview,d=r.isLaunching,c=r.activityActionType,f=r.className,p=r.channelId,h=r.message,m=r.hideParty,v=r.isSyncable,y=r.isLaunchable;if(null!=l)t=l.name;else if(null!=o){var _=o.split(":")[0];t=x[_]}return F(O.default,{activity:a,partyId:o,myPartyId:i,applicationId:null!=l?l.id:null,name:t,partyMembers:u,className:f,coverImage:n.getCoverImage(),isPreview:s,isGameLaunchable:y,isLaunching:d,activityActionType:c,isInBrowser:!b.default.embedded,isSyncable:v,channelId:p,message:h,hideParty:m,onJoin:n.handleJoin,onSpectate:n.handleSpectate,onSync:n.handleSync,onDownloadApp:n.handleDownloadApp,onOpenSpotifyTrack:n.handleOpenSpotifyTrack,onOpenSpotifyArtist:n.handleOpenSpotifyArtist,onOpenSpotifyAlbum:n.handleOpenSpotifyAlbum,renderUserPopout:n.renderUserPopout,renderSpotifyJoinButton:n.renderSpotifyJoinButton,backgroundOpacity:e.backgroundOpacity,renderCustomButton:n.shouldRenderCustomButton()?n.renderCustomButton:null})},H(n).handleJoin=n.handleJoin.bind(H(n)),H(n).handleSpectate=n.handleSpectate.bind(H(n)),H(n).handleSync=n.handleSync.bind(H(n)),H(n).handleDownloadApp=n.handleDownloadApp.bind(H(n)),H(n).renderUserPopout=n.renderUserPopout.bind(H(n)),H(n).renderSpotifyJoinButton=n.renderSpotifyJoinButton.bind(H(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getCoverImage=function(){var e=this.props,t=e.activity,n=e.connectedApplication,r=e.application,a=e.isPreview,o=e.message;if(null!=r&&(a||null!=o&&(0,f.default)(t,o,r.id))){var i=(0,c.default)(t,r.id);if(null!=i)return i}return null!=r?C.default.getApplicationIconURL({id:r.id,icon:null!=n?n.coverImage:r.coverImage,size:d.ACTIVITY_INVITE_COVER_IMAGE_SIZE}):null},o.handleJoin=function(){var e=this.props,t=e.activity,n=e.userId,r=e.message,a=e.channelId;null!=t&&null!=n&&null!=r&&null!=t.session_id&&null!=t.application_id&&(i.default.join(n,t.session_id,t.application_id,a,r.id),B(U.AnalyticsGameOpenTypes.JOIN,n,r.id,t))},o.handleSpectate=function(){var e=this.props,t=e.activity,n=e.userId,r=e.message,a=e.channelId;null!=t&&null!=n&&null!=r&&null!=t.session_id&&null!=t.application_id&&(i.default.spectate(n,t.session_id,t.application_id,a,r.id),B(U.AnalyticsGameOpenTypes.SPECTATE,n,r.id,t))},o.handleSync=function(){var e=this.props,t=e.activity,n=e.userId;null!=t&&null!=n&&s.sync(t,n)},o.handleDownloadApp=function(){l.default.push(R.default,{source:"Game Invite"})},o.handleOpenSpotifyTrack=function(e){(0,u.openTrack)(e)},o.handleOpenSpotifyArtist=function(e,t,n){(0,u.openArtist)(e,t,n)},o.handleOpenSpotifyAlbum=function(e,t){(0,u.openAlbum)(e,t)},o.renderUserPopout=function(e,t){var n=this.props,r=n.channelId,o=n.guildId;return null==r?null:a.createElement(L.default,j({},t,{userId:e.id,guildId:o,channelId:r}))},o.renderSpotifyJoinButton=function(e){var t=this.props,n=t.channelId,r=t.guildId;return a.createElement(P.default,j({guildId:r,channelId:n,source:"Invite Embed"},e))},o.shouldRenderCustomButton=function(){var e=this.props,t=e.isLaunchable,n=e.application;return null!=n&&null!=n.primarySkuId&&!t&&b.default.embedded},o.render=function(){return F(w.default,{section:w.default.Sections.APPLICATION_EMBED},void 0,F(A.BackgroundOpacityContext.Consumer,{},void 0,this.renderEmbed))},r}(a.PureComponent);V.displayName="ActivityInviteEmbedContainer",V.defaultProps={isPreview:!1};var K=o.default.connectStores([T.default,h.default,E.default,v.default,I.default,_.default,S.default,y.default,m.default,g.default],function(e){var t=e.activity,n=e.application,r=e.partyId,a=e.userId,o=e.guildId,i=(n||{}).id,l=null!=t&&null!=t.party&&t.party.id===r?v.default.getParty(t.party.id):null,u=i?E.default.getApplicationActivity(i):E.default.findActivity(function(e){return e.type===U.ActivityTypes.LISTENING}),s=!1,d=!1;null!=i&&(s=T.default.getState(i,U.ActivityActionTypes.JOIN)===U.ActivityActionStates.LOADING,d=T.default.getState(i,U.ActivityActionTypes.SPECTATE)===U.ActivityActionStates.LOADING);var c=Array.from(l||[]).map(function(e){var t=o?_.default.getMember(o,e):null,n=null!=t?t.nick:null,r=I.default.getUser(e),a=null==r;return null==r&&(r=new p.default({discriminator:"0005"})),{user:r,unknownUser:a,nick:n}}),f=null!=t&&S.default.canPlay(t),O=S.default.getSyncingWith(),A=null!=O&&null!=a&&O.userId===a,N=f&&!A;return{partyMembers:c,connectedApplication:null!=i?h.default.getApplication(i):null,myPartyId:null!=u&&null!=u.party?u.party.id:null,isLaunching:s||d,isSyncable:N,isLaunchable:null!=i&&(0,M.isLaunchable)(g.default,y.default,m.default,h.default,i)}})(V);t.default=K},7691:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){if(null==e)return!1;var r=null!=t.activity?t.activity.party_id:null,i=null!=r&&(null==e.party||e.party.id!==r),l=a.default.extractTimestamp(t.id)+o.EMBED_LIFETIME<Date.now(),u=null!=e.application_id&&e.application_id!==n;return!i&&!l&&!u};var r,a=(r=n(144))&&r.__esModule?r:{default:r},o=n(1)},7693:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.Controls=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=g(n(8)),i=g(n(6)),l=g(n(118)),u=n(472),s=g(n(106)),d=g(n(58)),c=g(n(42)),f=g(n(7694)),p=g(n(935)),h=n(857),m=g(n(869)),v=n(1),y=g(n(464)),_=g(n(6244));function g(e){return e&&e.__esModule?e:{default:e}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function T(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var O={friction:14,tension:200},A={VIDEO:"VIDEO",AUDIO:"AUDIO"},N={width:"100%",height:"100%",backgroundColor:"black"};function C(e){var t=0|e,n=t%60;return(t-n)/60+":"+String(n).padStart(2,"0")}var M=function(e){var t=e.current,n=e.duration,r=null!=t?C(t):"-:--",a=null!=n?C(n):"-:--";return r=r.padStart(a.length,"0"),T("div",{className:_.default.durationTimeWrapper},void 0,T("span",{className:_.default.durationTimeDisplay},void 0,r),T("span",{className:_.default.durationTimeSeparator},void 0,"/"),T("span",{className:_.default.durationTimeDisplay},void 0,a))};M.displayName="DurationTime";var b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={translateY:new l.default.Value(0),iconHover:!1,barHover:!1},t._isUnmounted=!1,t.setDurationRef=function(e){t.durationBar=e},t.setVolumeRef=function(e){t.volumeBar=e},t}I(t,e);var n=t.prototype;return n.componentDidMount=function(){this.state.translateY.setValue(this.props.autoPlay?1:0)},n.componentDidUpdate=function(e){var t=this.props,n=t.hide,r=t.playing;n&&!e.hide?this.animateControls(1,r):!n&&e.hide&&this.animateControls(0,r)},n.componentWillUnmount=function(){this._isUnmounted=!1},n.setStateIfMounted=function(e){this._isUnmounted||this.setState(e)},n.updateProgress=function(e,t){void 0===t&&(t=!0);var n=this.durationBar;null!=n&&n.setGrabber(e,t)},n.animateControls=function(e,t){var n=this.state.translateY;t?l.default.spring(n,S({toValue:e},O)).start():n.setValue(e)},n.getAnimatedStyle=function(){return{transform:[{translateY:this.state.translateY.interpolate({inputRange:[0,1],outputRange:["0%","100%"]})}]}},n.renderPlayIcon=function(){var e=this.props,t=e.playing,n=e.currentTime,r=e.duration,a=e.onPause,o=e.onPlay,i=e.disabled;return t?T(d.default,{onClick:a,tabIndex:i?-1:0},void 0,T(c.default,{name:c.default.Names.PAUSE,className:_.default.controlIcon},"pause")):T(d.default,{onClick:o,tabIndex:i?-1:0},void 0,null!=n&&n===r?T(c.default,{name:c.default.Names.REPLAY,className:_.default.controlIcon},"replay"):T(c.default,{name:c.default.Names.PLAY,className:_.default.controlIcon},"play"))},n.render=function(){var e=this,t=this.props,n=t.buffers,r=t.children,i=t.currentTime,u=t.duration,s=t.muted,p=t.onDrag,m=t.onDragEnd,v=t.onDragStart,g=t.onToggleMuted,E=t.width,S=t.volume,I=t.dragging,O=t.hide,N=t.type,C=t.disabled,b=this.state,R=b.barHover,P=b.iconHover,D=O||!R&&!P&&I!==f.default.Types.VOLUME,L="string"==typeof E||E>250,w=T(M,{current:i,duration:u});return T(h.BackgroundOpacityContext.Consumer,{},void 0,function(t){var i;return T(l.default.div,{className:(0,o.default)(N===A.VIDEO?_.default.videoControls:_.default.audioControls,_.default[t.backgroundOpacity+"BackgroundOpacity"]),onClick:function(e){return e.stopPropagation()},onDoubleClick:function(e){return e.stopPropagation()},style:e.getAnimatedStyle()},void 0,e.renderPlayIcon(),L?w:null,a.createElement(f.default,{buffers:n,value:u||0,onDrag:p,onDragEnd:m,onDragStart:v,type:f.default.Types.DURATION,ref:e.setDurationRef}),T("div",{className:y.default.flex,onMouseEnter:function(){clearTimeout(e._timeout),e.setState({barHover:!1,iconHover:!0})},onMouseLeave:function(){clearTimeout(e._timeout),e._timeout=setTimeout(function(){e.setStateIfMounted({iconHover:!1})},500)}},void 0,T(d.default,{onClick:g,tabIndex:C?-1:0},void 0,T(c.default,{name:s?c.default.Names.SPEAKER_OFF:c.default.Names.SPEAKER,className:(0,o.default)(_.default.controlIcon,D?void 0:_.default.opaque)}))),T("div",{className:(0,o.default)(N===A.VIDEO?_.default.videoVolumeWrapper:_.default.audioVolumeWrapper,(i={},i[_.default.hidden]=D,i)),onMouseEnter:function(){clearTimeout(e._timeout),e.setState({barHover:!0,iconHover:!1})},onMouseLeave:function(){clearTimeout(e._timeout),e._timeout=setTimeout(function(){e.setStateIfMounted({barHover:!1})},500)}},void 0,a.createElement(f.default,{value:S,onDrag:p,onDragEnd:m,onDragStart:v,type:f.default.Types.VOLUME,ref:e.setVolumeRef})),r)})},t}(a.Component);t.Controls=b,b.displayName="Controls",b.defaultProps={disabled:!1};var R=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={translateY:new l.default.Value(0)},t}I(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props.hide;t&&!e.hide?this.animateControls(1):!t&&e.hide&&this.animateControls(0)},n.animateControls=function(e){l.default.spring(this.state.translateY,S({toValue:e},O)).start()},n.getAnimatedStyle=function(){return{transform:[{translateY:this.state.translateY.interpolate({inputRange:[0,1],outputRange:["0%","-100%"]})}]}},n.renderVideoMetadata=function(){var e=this.props,t=e.fileName,n=e.fileSize,r=e.src,a=e.disabled;return T(l.default.div,{className:_.default.metadata,style:this.getAnimatedStyle()},void 0,T("div",{className:_.default.metadataContent},void 0,T("div",{className:_.default.metadataName},void 0,t),T("div",{className:_.default.metadataSize},void 0,n)),!a&&T(s.default,{href:r,target:"_blank",rel:"noreferrer noopener",className:_.default.metadataDownload},void 0,T(c.default,{name:c.default.Names.DOWNLOAD,className:_.default.metadataIcon})))},n.renderAudioMetadata=function(){var e=this.props,t=e.fileName,n=e.fileSize,r=e.src,a=e.disabled;return T(h.BackgroundOpacityContext.Consumer,{},void 0,function(e){return T("div",{className:(0,o.default)(_.default.audioMetadata,_.default[e.backgroundOpacity+"BackgroundOpacity"])},void 0,T("div",{className:_.default.metadataContent},void 0,a?t:T(s.default,{className:_.default.metadataName,href:r},void 0,t),T("div",{className:_.default.metadataSize},void 0,n)),a?t:T(s.default,{href:r,className:_.default.metadataDownload},void 0,T(c.default,{name:c.default.Names.DOWNLOAD,className:_.default.metadataIcon})))})},n.render=function(){return this.props.type===A.AUDIO?this.renderAudioMetadata():this.renderVideoMetadata()},t}(a.Component);R.displayName="Metadata";var P=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={play:!1,scale:new l.default.Value(0),opacity:new l.default.Value(0)},t.popAnimation=function(){var e=t.state,n=e.opacity,r=e.scale;r.setValue(0),n.setValue(0),l.default.parallel([l.default.sequence([l.default.timing(n,{toValue:1,duration:200}),l.default.timing(n,{toValue:0,duration:200})]),l.default.spring(r,S({toValue:1.5},O,{friction:80}))]).start()},t}I(t,e);var n=t.prototype;return n.pop=function(e){void 0===e&&(e=!1),this.setState({play:e},this.popAnimation)},n.getAnimatedStyle=function(){var e=this.state,t=e.opacity,n=e.scale;return l.default.accelerate({opacity:t.interpolate({inputRange:[0,1],outputRange:[0,.8]}),transform:[{scale:n.interpolate({inputRange:[0,1],outputRange:[1,2]})}]})},n.render=function(){var e=this.state.play;return T(l.default.div,{className:_.default.playPausePop,style:this.getAnimatedStyle()},void 0,T(c.default,{name:e?c.default.Names.PLAY:c.default.Names.PAUSE,className:_.default.playPausePopIcon}))},t}(a.Component);P.displayName="PlayPausePop";var D=function(e){function t(n){var r;(r=e.call(this,n)||this)._unmounted=!1,r._lastMove=0,r.mediaRef=a.createRef(),r.controlsRef=a.createRef(),r.playPausePopRef=a.createRef(),r.handleFullScreenExit=function(){var e=r.mediaRef.current;if(null!=e){var t=(0,u.getFullScreenNode)(e.parentNode,e);null!=t&&(0,u.isFullScreen)(t)||r.setState({fullscreen:!1})}},r.toggleFullscreen=function(){var e=!r.state.fullscreen;r.setState({fullscreen:e})},r.setMuted=function(e){r.setState({muted:e})},r.toggleMuted=function(){r.setMuted(!r.state.muted)},r.setTime=function(e,t){void 0===t&&(t=!0);var n=r.mediaRef.current;null!=n&&isFinite(n.duration)&&isFinite(n.currentTime)&&(n.currentTime=e,r.updateValue(e/n.duration,t),r.updateTime(e,n.duration))},r.handleUIUpdate=function(){if(r.state.playing&&!r._unmounted){var e=r.mediaRef.current;null!=e&&(e.duration>0&&r.updateValue(e.currentTime/e.duration),r.updateTime(e.currentTime,e.duration),r.updateControlsVisibility(),requestAnimationFrame(r.handleUIUpdate))}},r.handleDrag=function(e,t){var n=r.mediaRef.current;t===f.default.Types.DURATION?null!=n&&isFinite(n.duration)&&r.setTime(n.duration*e,!1):t===f.default.Types.VOLUME&&(0===e?r.setState({muted:!0,volume:e}):r.state.muted&&e>0?r.setState({muted:!1,volume:e}):r.setState({volume:e}))},r.handleLoaded=function(){var e=r.mediaRef.current;null!=e&&(r.updateTime(e.currentTime,e.duration),r.setState({hasLoadedMetadata:!0,currentTime:e.currentTime,duration:e.duration}))},r.handleDurationChange=function(){var e=r.mediaRef.current;null!=e&&(r.updateTime(e.currentTime,e.duration),r.setState({duration:e.duration}))},r.handleBuffer=i.default.debounce(function(){var e=r.mediaRef.current,t=[];if(e)for(var n=e.duration,a=0;a<e.buffered.length;a++){var o=e.buffered.start(a),i=e.buffered.end(a);if(!(i-o<1)){var l=(i-o)/n,u=o/n;t.push([u,l])}}r.setState({buffers:t})},400),r.handleEnded=function(e){var t=r.props.onEnded;r.setState({playing:!1,hideControls:!1}),null!=t&&t(e)},r.handleMouseMove=function(){r._lastMove=Date.now()},r.handleMouseLeave=function(){r._lastMove=0},r.handlePreload=function(){r.setState({preload:"metadata"})},r.handleVideoClick=function(){var e=E(r),t=e.state,n=t.hasClickedPlay,a=t.playing,o=e.props,i=o.autoPlay,l=o.autoMute;i&&!n&&a&&l?r.setState({muted:!1,hasClickedPlay:!0}):r.setPlay(!r.state.playing)},r.setPlay=function(e){var t=E(r),n=t.props.autoMute,a=t.state,o=a.hasClickedPlay,i=a.muted;e!==r.state.playing&&(e?r.setState({playing:e,hasClickedPlay:!0,muted:!(!o&&n)&&i}):r.setState({playing:!1,hideControls:!1}))},r.handleDragStart=function(e){r.setState({dragging:e})},r.handleDragEnd=function(){r.setState({dragging:null}),r._lastMove=Date.now()},r.handleKeyDown=function(e){var t=r.mediaRef.current;if(e.which===v.KeyboardKeys.SPACE)e.preventDefault(),r.setPlay(!r.state.playing);else if(e.which>=v.KeyboardKeys.DIGIT_0&&e.which<=v.KeyboardKeys.DIGIT_9&&null!=t){e.preventDefault();var n=(e.which-v.KeyboardKeys.DIGIT_0)/10;t.currentTime=t.duration*n,r.setPlay(!0)}};var o=r.props,l=o.autoPlay,s=o.autoMute,d=o.volume,c=o.playable,p="function"==typeof d?d():d,h="function"==typeof s?s():s;return r.state={buffers:[],currentTime:null,dragging:null,duration:null,fullscreen:!1,hasClickedPlay:!1,hasLoadedMetadata:!1,hideControls:!c,muted:h,volume:p,playing:l,preload:"none",width:t.minWidth,height:t.minHeight},r}I(t,e),t.getDerivedStateFromProps=function(e,t){return!e.playable&&t.playing?{playing:!1,hideControls:!1}:null};var n=t.prototype;return n.componentDidMount=function(){var e=this.state,t=e.playing,n=e.muted,r=e.volume,a=this.mediaRef.current,o=this.controlsRef.current;null!=a&&(n&&(a.muted=n),t&&(this.play(!0),this.handleUIUpdate()),a.volume=r,n||null==o||null==o.volumeBar||o.volumeBar.setGrabber(r,!1))},n.componentDidUpdate=function(e,t){var n=this.props,r=n.onPause,a=n.onVolumeChange,o=n.onMute,i=this.state,l=i.playing,s=i.fullscreen,d=i.muted,c=i.dragging,p=i.volume,h=this.mediaRef.current,m=this.controlsRef.current,v=this.playPausePopRef.current;if(null!=h){l&&!t.playing?(this.play(),this.handleMouseMove(),this.handleUIUpdate(),t.hasClickedPlay&&v&&v.pop(l)):!l&&t.playing&&(h.pause(),v&&v.pop(l),r&&r());var y=(0,u.getFullScreenNode)(h.parentNode,h);if(s&&!t.fullscreen&&null!=y?((0,u.requestFullScreen)(y),y.addEventListener(u.FULLSCREEN_CHANGE_EVENT,this.handleFullScreenExit)):!s&&t.fullscreen&&null!=y&&(y.removeEventListener(u.FULLSCREEN_CHANGE_EVENT,this.handleFullScreenExit),(0,u.exitFullScreen)(y)),c===f.default.Types.DURATION&&t.dragging!==f.default.Types.DURATION&&l?h.pause():c!==f.default.Types.DURATION&&t.dragging===f.default.Types.DURATION&&l&&h.play(),d!==t.muted&&(h.muted=d,o&&o(d)),p!==t.volume&&(h.volume=p,a&&a(p)),null!=m&&null!=m.volumeBar){var _=d?0:p;m.volumeBar.setGrabber(_)}}},n.componentWillUnmount=function(){this._unmounted=!0},n.play=function(e){void 0===e&&(e=!1);var t=this.props,n=t.onPlay,r=t.volume,a=t.autoMute,o=this.mediaRef.current;if(null!=o){var i={};if("function"==typeof r){var l=r();l!==this.state.volume&&(o.volume=l,i.volume=l)}if("function"==typeof a){var u=a();u!==this.state.muted&&(o.muted=u,i.muted=u)}this.setState(i),o.play(),n&&n(e)}},n.getWidth=function(){var e=this.props.width;return"100%"===e?e:Math.max(e,t.minWidth)},n.getHeight=function(){var e=this.props.height;return"100%"===e?e:Math.max(e,t.minHeight)},n.updateValue=function(e,t){void 0===t&&(t=!0);var n=this.controlsRef.current;null!=n&&n.updateProgress(e,t)},n.updateTime=function(e,t){var n=0|e,r=0|t;this.state.currentTime===n&&this.state.duration===r||this.setState({currentTime:n,duration:r})},n.updateControlsVisibility=function(){var e=this.state,t=e.dragging,n=e.fullscreen?1e3:3e3,r=Math.max(0,Date.now()-this._lastMove)>n;r!==this.state.hideControls&&null==t&&this.setState({hideControls:r})},n.renderVideo=function(){var e=this.props,t=e.src,n=e.poster,r=e.forceExternal,o=e.onError,i=this.state.playing,l=this.getWidth(),u=this.getHeight();return r?T(m.default,{className:_.default.video,controls:!1,height:u,poster:n,width:l,playsInline:!0,autoPlay:i}):a.createElement(m.default,{className:_.default.video,controls:!1,playsInline:!0,autoPlay:i,height:u,onClick:this.handleVideoClick,onEnded:this.handleEnded,onError:o,onLoadedMetadata:this.handleLoaded,onProgress:this.handleBuffer,poster:n,preload:this.state.preload,ref:this.mediaRef,width:l,src:t})},n.renderAudio=function(){return a.createElement("audio",{className:_.default.audio,controls:!1,onClick:this.handleVideoClick,onEnded:this.handleEnded,onLoadedMetadata:this.handleLoaded,onProgress:this.handleBuffer,preload:this.state.preload,ref:this.mediaRef},T("source",{src:this.props.src}))},n.renderControls=function(){var e=this,t=this.props,n=t.type,r=t.autoPlay,o=t.playable,i=void 0===o||o,l=this.state,u=l.buffers,s=l.currentTime,f=l.duration,h=l.hasClickedPlay,m=l.hideControls,v=l.muted,y=l.playing,g=l.fullscreen,E=l.volume,S=l.dragging,I=this.getWidth();return h||r||n===A.AUDIO?a.createElement(b,{buffers:u,currentTime:s,duration:f,volume:E,hide:n===A.VIDEO&&m,muted:v,autoPlay:r,onDrag:this.handleDrag,onDragEnd:this.handleDragEnd,onDragStart:this.handleDragStart,onPause:function(){return e.setPlay(!1)},onPlay:function(){return e.setPlay(!0)},onToggleMuted:this.toggleMuted,playing:y,dragging:S,type:n,ref:this.controlsRef,width:g?window.screen.width:I,disabled:!i},n===A.VIDEO?T(d.default,{onClick:this.toggleFullscreen},void 0,T(c.default,{className:_.default.controlIcon,name:c.default.Names.FULL_SCREEN,style:{marginLeft:0}})):null):T("div",{className:_.default.playCenter},void 0,T(p.default,{className:_.default.playButton,onPlay:this.handleVideoClick}))},n.renderMetadata=function(){var e=this.props,t=e.fileName,n=e.fileSize,r=e.src,a=e.type,o=e.playable,i=this.state.hideControls;return null==t||null==n?null:T(R,{fileName:t,fileSize:n,src:r,hide:a===A.VIDEO&&i,type:a,disabled:!o})},n.renderPlayPausePop=function(){return a.createElement(P,{ref:this.playPausePopRef})},n.render=function(){var e=this.props,t=e.height,n=e.type,r=e.src,a=e.forceExternal,i=e.className,l=e.playable,u=this.getWidth(),s=this.state,d=s.fullscreen,c=s.hideControls,f=s.playing,h=s.preload,m=_.default.wrapperPaused;return n===A.AUDIO?m=_.default.wrapperAudio:c?m=_.default.wrapperControlsHidden:f&&(m=_.default.wrapperPlaying),a&&n===A.VIDEO?T("div",{className:m,style:{width:u,height:t}},void 0,this.renderMetadata(),this.renderVideo(),T("div",{className:_.default.playCenter},void 0,T(p.default,{className:_.default.playButton,externalURL:r}))):T("div",{className:(0,o.default)(m,i),"data-fullscreen":d,onMouseEnter:"none"===h?this.handlePreload:null,onMouseLeave:f?this.handleMouseLeave:null,onMouseMove:f?this.handleMouseMove:null,onKeyDown:this.handleKeyDown,tabIndex:l?0:-1,style:d?N:{width:u,height:n===A.AUDIO?"auto":t}},void 0,this.renderMetadata(),n===A.AUDIO?this.renderAudio():this.renderVideo(),this.renderControls(),n===A.VIDEO?this.renderPlayPausePop():null)},t}(a.PureComponent);D.displayName="MediaPlayer",D.Types=A,D.defaultProps={width:400,height:300,forceExternal:!1,playable:!0,autoPlay:!1,autoMute:!1,volume:1},D.minWidth=150,D.minHeight=110;var L=D;t.default=L},7694:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=u(n(8)),i=u(n(118)),l=u(n(6243));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f={friction:14,tension:200},p={DURATION:"DURATION",VOLUME:"VOLUME"};function h(e){var t=0|e,n=t%60;return(t-n)/60+":"+String(n).padStart(2,"0")}var m=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={animatedProgress:new i.default.Value(0),dragging:!1,offsetLeft:0,offsetWidth:0,previewWidth:new i.default.Value(0)},t.handlePreviewChange=function(){var e=c(t),n=e.bubble,r=e.state,a=r.dragging,o=r.previewWidth,i=e.props.value;a||null==n||(n.innerHTML=h(o._value*i))},t.handleAnimatedChange=function(){var e=c(t),n=e.bubble,r=e.state,a=r.dragging,o=r.animatedProgress,i=e.props.value;a&&null!=n&&(n.innerHTML=h(o._value*i))},t.handleMouseMove=function(e){var n=t.state,r=n.dragging,a=n.previewWidth;if(!r){var o=e.clientX,i=e.clientY;a.setValue(t.calculatePercentage(o,i))}},t.handleDragMove=function(e){var n=t.props,r=n.onDrag,a=n.type,o=e.clientX,i=e.clientY;r(t.calculatePercentage(o,i),a)},t.handleDragStart=function(e){var n=t.props,r=n.onDragStart,a=n.onDrag,o=n.type,i=n.currentWindow,l=e.clientX,u=e.clientY;if(e.preventDefault(),null!=t.wrapper){var s=t.wrapper.getBoundingClientRect(),d=s.left,c=s.width;t.setState({dragging:!0,offsetLeft:d,offsetWidth:c},function(){r(o),a(t.calculatePercentage(l,u),o),i.addEventListener("mouseup",t.handleDragEnd,!1),i.addEventListener("mousemove",t.handleDragMove,!1)})}},t.handleDragEnd=function(){var e=t.props,n=e.onDragEnd,r=e.currentWindow;n(),r.removeEventListener("mouseup",t.handleDragEnd,!1),r.removeEventListener("mousemove",t.handleDragMove,!1),t.setState({dragging:!1})},t.setBubbleRef=function(e){null==e?t.bubble=null:null!=e.componentRef?t.bubble=e.componentRef:null!=e.refs&&(t.bubble=e.refs.node)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var u=r.prototype;return u.componentDidMount=function(){var e=this.state,t=e.previewWidth,n=e.animatedProgress;t.addListener(this.handlePreviewChange),n.addListener(this.handleAnimatedChange)},u.componentWillUnmount=function(){var e=this.state,t=e.previewWidth,n=e.animatedProgress;t.removeListener(this.handlePreviewChange),n.removeListener(this.handleAnimatedChange),window.removeEventListener("mouseup",this.handleDragEnd,!1),window.removeEventListener("mousemove",this.handleDragMove,!1)},u.componentDidUpdate=function(e,t){var n=this.state,r=n.dragging,a=n.previewWidth,o=n.animatedProgress;!r&&t.dragging&&a.setValue(o._value)},u.setGrabber=function(e,t){void 0===t&&(t=!0);var n=this.state.animatedProgress;t?i.default.spring(n,d({toValue:e},f)).start():n.setValue(e)},u.calculatePercentage=function(e,t){var n=this.wrapper,r=this.props.type;if(null==n)return 0;var a=n.getBoundingClientRect(),o=a.left,i=a.width,l=a.bottom,u=a.height,s=r===p.VOLUME?(l-t)/u:(e-o)/i;return Math.min(1,Math.max(0,s))},u.render=function(){var e=this,t=this.props,n=t.buffers,r=t.type,u=t.className,d=t.sliderClassName,c=this.state,f=c.dragging,h=c.previewWidth,m=c.animatedProgress,v=f?m:h;return s("div",{className:(0,o.default)(u,r===p.VOLUME?l.default.vertical:l.default.horizontal)},void 0,a.createElement("div",{className:(0,o.default)(d,f?l.default.mediaBarInteractionDragging:l.default.mediaBarInteraction,r===p.VOLUME?l.default.mediaBarInteractionVolume:null),onMouseDown:this.handleDragStart,onMouseMove:this.handleMouseMove,ref:function(t){return e.wrapper=t}},s("div",{className:(0,o.default)(l.default.mediaBarWrapper,r===p.VOLUME?l.default.mediaBarWrapperVolume:null)},void 0,null!=n?n.map(function(e,t){var n=e[0],r=e[1];return s("div",{className:l.default.buffer,style:{width:100*r+"%",left:100*n+"%"}},t)}):null,r===p.DURATION?s(i.default.div,{className:l.default.mediaBarPreview,style:{width:h.interpolate({inputRange:[0,1],outputRange:["0%","100%"]})}}):null,s(i.default.div,{className:l.default.mediaBarProgress,style:{width:m.interpolate({inputRange:[0,1],outputRange:["0%","100%"]})}},void 0,s("span",{className:l.default.mediaBarGrabber})),r===p.DURATION?a.createElement(i.default.div,{ref:this.setBubbleRef,className:l.default.bubble,style:{left:v.interpolate({inputRange:[0,1],outputRange:["0%","100%"]})}}):null)))},r}(a.Component);m.displayName="MediaBar",m.Types=p,m.defaultProps={currentWindow:window};var v=m;t.default=v},7695:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.ButtonAddReaction=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=A(n(8)),i=A(n(118)),l=n(29),u=A(n(263)),s=n(491),d=A(n(972)),c=A(n(185)),f=A(n(7067)),p=A(n(58)),h=A(n(42)),m=A(n(458)),v=A(n(65)),y=n(857),_=n(80),g=n(516),E=A(n(372)),S=A(n(7062)),I=n(1),T=A(n(4)),O=A(n(6248));function A(e){return e&&e.__esModule?e:{default:e}}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function M(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isEmojiPickerActive:!1},t._subscribed=!1,t.onAddReaction=function(e){if(null!=e){var n=t.props,r=n.channel,a=n.message;(0,s.addReaction)(r.id,a.id,(0,g.toReactionEmoji)(e))}},t.handleEmojiPickerShow=function(){t.setState({isEmojiPickerActive:!0})},t.handleEmojiPickerToggle=function(){t.setState(function(e){return{isEmojiPickerActive:!e.isEmojiPickerActive}})},t.renderReactionPopout=function(e){var n=e.closePopout,r=t.props.channel;return C(S.default,{closePopout:n,channel:r,onSelectEmoji:t.onAddReaction})},t}M(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.message;e.subscribeToGlobalOpen&&(_.ComponentDispatch.subscribe(I.ComponentActions.TOGGLE_REACTION_POPOUT(t.id),this.handleEmojiPickerShow),this._subscribed=!0)},n.componentWillUnmount=function(){var e=this.props.message;this._subscribed&&_.ComponentDispatch.unsubscribe(I.ComponentActions.TOGGLE_REACTION_POPOUT(e.id),this.handleEmojiPickerShow)},n.render=function(){var e=this,t=this.props,n=t.message,r=t.left,i=t.className,l=this.state.isEmojiPickerActive;return n.state===I.MessageStates.SENDING||n.author.isLocalBot()?null:C(m.default,{shouldShow:l,onRequestClose:this.handleEmojiPickerToggle,renderPopout:this.renderReactionPopout,position:r?m.default.Positions.LEFT:m.default.Positions.RIGHT},void 0,function(t,n){var r;return a.createElement(p.default,N({},t,{onClick:e.handleEmojiPickerToggle,className:(0,o.default)(O.default.reactionBtn,(r={},r[O.default.active]=n,r),i),"aria-label":T.default.Messages.ADD_REACTION}),C(h.default,{name:h.default.Names.NOVA_ADD_REACTION,className:O.default.icon}))})},t}(a.Component);t.ButtonAddReaction=b,b.displayName="ButtonAddReaction",b.defaultProps={left:!0,subscribeToGlobalOpen:!1};var R=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).isMouseEntered=!1,t.scale=new i.default.Value(1),t.opacity=new i.default.Value(1),t.timeout=new l.Timeout,t.clickableElementRef=a.createRef(),t.state={shouldShowTooltip:!1,tooltipText:null},t.handleClick=function(){var e=t.props,n=e.message,r=e.emoji,a=e.me,o=e.readOnly,i=n.getChannelId();a?(0,s.removeReaction)(i,n.id,r):o||(0,s.addReaction)(i,n.id,r)},t.handleReactionFocus=function(){t.isMouseEntered=!0,t.timeout.start(500,t.showTooltip,!1)},t.showTooltip=function(){t.isMouseEntered&&(t.handleStoreChange(),d.default.addChangeListener(t.handleStoreChange))},t.handleReactionBlur=function(){t.isMouseEntered=!1,t.hideTooltip(),t.setState({shouldShowTooltip:!1})},t.handleWrapperMouseEnter=function(){t.handleReactionFocus()},t.handleWrapperMouseLeave=function(){t.handleReactionBlur()},t.hideTooltip=function(){t.timeout.stop(),d.default.removeChangeListener(t.handleStoreChange)},t.handleStoreChange=function(){var e=t.props,n=e.message,r=e.emoji,a=(0,g.getReactionTooltip)(n,r);t.setState({tooltipText:a,shouldShowTooltip:null!=a&&""!==a})},t.setClickableRef=function(e){t.clickableElementRef.current=e},t}M(t,e);var n=t.prototype;return n.componentWillAppear=function(e){this.animateIn(e)},n.componentWillEnter=function(e){this.animateIn(e)},n.componentWillUnmount=function(){this.hideTooltip(),this.clickableElementRef.current=null},n.animateIn=function(e){c.default.isFocused()?(this.scale.setValue(0),this.opacity.setValue(0),i.default.parallel([i.default.timing(this.scale,{toValue:1,duration:300,easing:i.default.Easing.inOut(i.default.Easing.back())}),i.default.timing(this.opacity,{toValue:1,duration:300})]).start(e)):(this.scale.setValue(1),this.opacity.setValue(1),e())},n.render=function(){var e=this,t=this.props,n=t.count,r=t.emoji,l=t.me,u=t.readOnly,s=t.backgroundOpacity,d=this.state,c=d.shouldShowTooltip,h=d.tooltipText,m={transform:[{scale:this.scale}],opacity:this.opacity};return C(v.default,{forceOpen:c,text:h,onAnimationRest:function(t,n){n!==I.SpringTransitionPhases.LEAVE||e.isMouseEntered||e.setState({tooltipText:null})}},void 0,function(t){t.onMouseEnter,t.onMouseLeave;var d,c=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["onMouseEnter","onMouseLeave"]);return a.createElement("div",N({onMouseEnter:e.handleWrapperMouseEnter,onMouseLeave:e.handleWrapperMouseLeave},c),C(i.default.div,{className:(0,o.default)(O.default.reaction,O.default[s+"BackgroundOpacity"],(d={},d[O.default.reactionMe]=l,d[O.default.reactionReadOnly]=u,d)),style:m},void 0,C(p.default,{className:O.default.reactionInner,onClick:e.handleClick,onFocus:e.handleReactionFocus,onBlur:e.handleReactionBlur,innerRef:e.setClickableRef},void 0,C(E.default,{emojiId:r.id,emojiName:r.name,animated:r.animated}),C(f.default,{className:(0,o.default)(O.default.reactionCount,O.default[s+"BackgroundOpacity"]),value:n,digitWidth:9}))))})},t}(a.PureComponent);R.displayName="Reaction";var P=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={disableTransitionAppear:!0,reactionsCount:t.props.message.reactions.length},t}return M(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.message.reactions.length;return 0===t.reactionsCount&&n>0?{disableTransitionAppear:!1,reactionsCount:n}:t.reactionsCount!==n?{reactionsCount:n}:null},t.prototype.render=function(){var e=this.props,t=e.message,n=e.disableReactionCreates,r=e.disableReactionUpdates,o=e.channel,i=this.state.disableTransitionAppear;if(!t.reactions.length)return null;var l=C(b,{message:t,channel:o,left:!1});return C(y.BackgroundOpacityContext.Consumer,{},void 0,function(e){return C(u.default,{className:O.default.reactions,transitionAppear:!i,transitionLeave:!1},void 0,t.reactions.map(function(n){return a.createElement(R,N({key:(n.emoji.id||0)+":"+n.emoji.name,message:t,readOnly:r,backgroundOpacity:e.backgroundOpacity},n))}),!n&&l)})},t}(a.PureComponent);t.default=P,P.displayName="Reactions"},7696:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=y(n(8)),i=y(n(5)),l=n(124),u=y(n(21)),s=n(6637),d=y(n(456)),c=y(n(257)),f=y(n(7697)),p=y(n(8474)),h=y(n(6639)),m=y(n(4)),v=y(n(6252));function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var g=/steamstore-/i,E="steamcommunity.com";function S(e){var t=(0,l.parse)(e).hostname;return null==t?e:g.test(t)?E:t}var I=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={timestamp:"",formattedTimestamp:""},t.handleClick=function(e){var n=t.props,r=n.onClick,a=n.news,o=n.application;r&&r(e,a,o)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e,t){var n=e.news.timestamp;return t.timestamp!==n?{timestamp:n,formattedTimestamp:(0,i.default)(n).fromNow()}:null};var a=r.prototype;return a.componentDidMount=function(){var e=this.props.onMount;null!=e&&e()},a.renderFooter=function(){var e=this.props,t=e.news,n=t.url,r=t.footer,a=e.application,o=e.onApplicationClick,i=e.onApplicationContextMenu,l=this.state.formattedTimestamp,u=null,s=null;return null!=a?(u=a.getIconURL(128),s=a.name):null!=r&&(u=r.proxy_icon_url||r.icon_url,s=r.text),_(p.default,{hostname:null!=n?S(n):n,timestamp:l,icon:u,title:s,onIconClick:null!=o?function(e){return o(e,a)}:null,onIconContextMenu:null!=i?i:null})},a.renderContent=function(){var e=this.props.titleClassName,t=this.props.news,n=t.title,r=t.description,a=t.url;if(null==n&&null==r&&null==a)return null;var i=null!=r?r.replace(/\n/g," ").trim():r;return _("div",{className:v.default.content},void 0,null!=n?_(d.default,{size:d.default.Sizes.SIZE_16,className:(0,o.default)(v.default.title,e)},void 0,n):null,null!=i&&""!==i?_(c.default,{size:c.default.Sizes.SIZE_14,className:v.default.description},void 0,i):null)},a.render=function(){var e,t=this.props,n=t.className,r=t.hiddenSpoiler,a=t.disableCardInteractive,i=t.onClick,l=t.renderAsset;return _(h.default,{padded:!1,className:(0,o.default)(n,(e={},e[v.default.interactive]=null==a&&null!=i,e[v.default.hiddenSpoiler]=r,e),v.default.card),onClick:null!=i?this.handleClick:null},void 0,l(this.props),this.renderContent(),this.renderFooter())},r}(a.Component);I.displayName="NewsCard",I.defaultProps={renderAsset:function(e){var t=e.news,n=e.application,r=e.onShare,a=e.autoPlay,o=e.shouldAnimate,i=e.renderImageComponent,l=e.renderVideoComponent,d=e.renderLinkComponent,c=t.thumbnail,p=t.video,h=null!=c?{url:c.url,proxyURL:c.proxy_url,width:c.width,height:c.height}:null,y=null!=p?{url:p.url,width:p.width,height:p.height}:null;return null!=h?_(f.default,{url:h.proxyURL||h.url,width:h.width,height:h.height,hideImage:null!=y,autoPlay:a,shouldAnimate:o},void 0,null!=y?_(s.EmbedVideo,{href:null,className:v.default.video,thumbnail:h,video:y,maxWidth:464,maxHeight:464*y.height/y.width,allowFullScreen:!1,playable:!0,renderImageComponent:i,renderVideoComponent:l,renderLinkComponent:d}):null,null!=r?_(u.default,{wrapperClassName:v.default.shareButton,size:u.default.Sizes.SMALL,color:v.default.buttonColor,onClick:function(e){r(e,t,n),e.stopPropagation()}},void 0,m.default.Messages.SHARE):null):null}};var T=I;t.default=T},7697:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=s(n(8)),i=s(n(6692)),l=s(n(869)),u=s(n(6249));function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var c=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).videoRef=a.createRef(),t.state={videoLoaded:!1},t.handleVideoLoaded=function(){t.setState({videoLoaded:!0})},t.handleVideoError=function(){t.setState({videoLoaded:!1})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=r.prototype;return s.componentDidMount=function(){this.setPlayState(this.props.play)},s.componentDidUpdate=function(e){var t=this.props.play;t!==e.play&&this.setPlayState(t)},s.setPlayState=function(e){var t=this.videoRef.current;null!=t&&(e?t.play():t.pause())},s.render=function(){var e,t=this.props,n=t.url,r=t.width,s=t.height,c=t.children,f=t.className,p=t.videoUrl,h=t.play,m=t.hideImage,v=t.autoPlay,y=t.shouldAnimate,_=this.state.videoLoaded;return d("div",{className:(0,o.default)(u.default.wrapper,f),style:{paddingBottom:s/r*100+"%"}},void 0,d(i.default,{src:n,width:r,height:s,maxWidth:464,maxHeight:464*s/r,className:(0,o.default)(u.default.image,m?u.default.hideImage:""),imageClassName:(0,o.default)(u.default.image,m?u.default.hideImage:""),alt:"",autoPlay:v,shouldAnimate:y}),null!=p?a.createElement(l.default,{muted:!0,preload:"none",loop:!0,src:p,ref:this.videoRef,className:(0,o.default)((e={},e[u.default.video]=!0,e[u.default.showVideo]=_&&h,e)),onLoadedMetadata:this.handleVideoLoaded,onError:this.handleVideoError}):null,null!=c?d("div",{className:u.default.content},void 0,c):null)},r}(a.Component);c.displayName="CardMedia",c.defaultProps={play:!1,hideImage:!1};var f=c;t.default=f},7698:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=i(n(8)),o=i(n(6255));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var u=function(e){var t,n,r=e.renderTitle,i=e.renderTagline,u=e.renderActions,s=e.renderMedia,d=e.className,c=e.isHorizontal,f=void 0!==c&&c;return l("div",{className:(0,a.default)(o.default.tile,(t={},t[o.default.tileHorizontal]=f,t),d)},void 0,l("div",{className:(0,a.default)(o.default.media,(n={},n[o.default.mediaHorizontal]=f,n))},void 0,s&&s()),l("div",{className:o.default.description},void 0,l("h2",{className:o.default.title},void 0,r&&r()),l("div",{className:o.default.tagline},void 0,i&&i()),l("div",{className:o.default.actions},void 0,u&&u())))};u.displayName="ResponsiveTile";var s=u;t.default=s},7699:function(e,t,n){"use strict";t.__esModule=!0,t.StoreEmbedWithoutDimensions=t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(259),i=N(n(3)),l=n(465),u=N(n(260)),s=N(n(861)),d=N(n(22)),c=N(n(50)),f=N(n(6751)),p=N(n(119)),h=N(n(855)),m=N(n(21)),v=n(80),y=n(154),_=N(n(331)),g=N(n(954)),E=N(n(6693)),S=N(n(8479)),I=n(7069),T=n(1),O=N(n(4)),A=N(n(6262));function N(e){return e&&e.__esModule?e:{default:e}}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function M(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={playing:!1,muted:!0},t.handleToggleMute=function(){t.setState({muted:!t.state.muted})},t.handleMouseEnter=function(){t.setState({playing:!0})},t.handleMouseLeave=function(){t.setState({playing:!1})},t.getStoreListingLocation=function(){var e=t.props.sku;if(null==e)throw new Error("Should not be link to ApplicationDirectoryTile without SKU");return(0,y.getStoreListingLocation)(e.id,{slug:e.slug,analyticsSource:t.analyticsLocation})},t.handleActionButtonClick=function(e){return e.preventDefault()},t.handleBuyButtonClick=function(e){return e.preventDefault()},t.handleLinkClick=function(e){var n=t.props.onEmbedClick;null!=n&&n(e)},t.renderActions=function(e){var n=t.props,r=n.inLibrary,a=n.application,o=n.skuId,i=n.libraryApplication,l=n.renderCustomActions;if(null==a)return null;if(null!=l)return M("div",{className:A.default.tileActions},void 0,l());var u=null!=a&&a.primarySkuId===o,s=null!=i&&i.hasFlag(T.LibraryApplicationFlags.HIDDEN);return M("div",{className:A.default.tileActions},void 0,!u||s?t.renderViewInStoreButton():M(g.default,{application:a,customDisabledColor:m.default.Colors.GREY,size:m.default.Sizes.SMALL,className:A.default.actionButton,source:T.AnalyticsLocations.MESSAGE_EMBED,onClick:t.handleActionButtonClick}),r&&!s||e.premium?null:M(E.default,{type:E.default.Types.EMBED,sku:e,inLibrary:!1}))},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,i,u,s=r.prototype;return s.componentDidMount=function(){var e=this.props,t=e.sku,n=e.skuId,r=e.storeListing;null!=t&&null!=r||(0,l.fetchStoreListingForSku)(n),v.ComponentDispatch.dispatch(T.ComponentActions.CHAT_RESIZE)},s.renderViewInStoreButton=function(){return M(m.default.Link,{to:this.getStoreListingLocation(),className:A.default.actionButton,color:m.default.Colors.GREEN,size:m.default.Sizes.SMALL},void 0,O.default.Messages.GAME_ACTION_BUTTON_VIEW_IN_STORE)},s.render=function(){var e=this,t=this.props,n=t.sku,r=t.storeListing,a=t.inLibrary,i=t.width,l=t.fetchFailed,u=t.renderFallback,s=t.renderCustomTitle,d=t.renderCustomTagline,c=this.state,f=c.playing,p=c.muted,h=i>I.HORIZONTAL_EMBED_BREAKPOINT;return null==n||null==r?l?u():M(I.ResponsiveLoadingEmbedTile,{isHorizontal:h}):M(_.default,{section:T.AnalyticsSections.APPLICATION_EMBED},void 0,M(o.Link,{onClick:this.handleLinkClick,to:this.getStoreListingLocation(),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,M(S.default,{sku:n,storeListing:r,playing:f,muted:p,inLibrary:a,onToggleMute:this.handleToggleMute,renderCustomActions:function(){return e.renderActions(n)},renderCustomTitle:s,renderCustomTagline:d,isHorizontal:h,isEmbed:!0})))},a=r,(i=[{key:"analyticsLocation",get:function(){var e=this.props,t=e.analyticsContext.location,n=e.analyticsSection;return C({},t,{section:null!=n?n:T.AnalyticsSections.APPLICATION_EMBED,object:T.AnalyticsObjects.CARD})}}])&&b(a.prototype,i),u&&b(a,u),r}(a.Component);R.displayName="StoreEmbed",R.defaultProps={renderFallback:T.NOOP};var P=[p.default,f.default,c.default,h.default,d.default],D=function(e){var t=e.skuId,n=p.default.get(t);return{sku:n,application:null!=n?d.default.getGame(n.applicationId):null,fetchFailed:p.default.didFetchingSkuFail(t),inLibrary:null!=n&&c.default.hasApplication(n.applicationId,n.applicationId,!0),storeListing:null!=n?h.default.getForSKU(n.id):null,libraryApplication:null!=n?c.default.getLibraryApplication(n.applicationId,n.applicationId,!0):null}},L=i.default.connectStores(P,D)((0,s.default)((0,u.default)(R)));t.default=L;var w=(0,u.default)(i.default.connectStores(P,D)(R));t.StoreEmbedWithoutDimensions=w},7700:function(e,t,n){e.exports=n.p+"0c9615349350c4185381d58c69b88cbc.svg"},7701:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.ChatLayerProvider=t.ChatLayerContainer=void 0;var r=(0,n(544).createLayer)("Chat"),a=r.Layer,o=r.LayerContainer,i=r.LayerProvider,l=o;t.ChatLayerContainer=l;var u=i;t.ChatLayerProvider=u;var s=a;t.default=s},7705:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=f(n(8)),i=f(n(879)),l=f(n(6521)),u=f(n(42)),s=f(n(901)),d=n(6534),c=f(n(6281));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var m=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.render=function(){var e=this.props.tier;return p("div",{className:c.default.tierPill},void 0,p(i.default,{className:c.default.tierPillStar},void 0,p(s.default,{tier:e,className:c.default.tierPillGem})),(0,d.getTierName)(e))},t}(a.PureComponent);m.displayName="TierPill";var v=function(e){var t=e.subscriptionChange,n=e.guild;if(0===t)return null;var r=Math.max(n.premiumSubscriberCount+t,0),o=(0,d.getGuildTierFromSubscriberCount)(r),i=o-(0,d.getGuildTierFromSubscriberCount)(n.premiumSubscriberCount);return 0===i?null:a.createElement(a.Fragment,null,p(u.default,{name:u.default.Names.DOUBLE_CHEVRON_RIGHT,className:i>0?c.default.levelUpIcon:c.default.levelDownIcon}),p(m,{tier:o}))},y=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.render=function(){var e=this.props,t=e.guild,n=e.className,r=e.subscriptionChange;return p("div",{className:(0,o.default)(c.default.subscription,n)},void 0,p(l.default,{guild:t,size:l.default.Sizes.LARGE}),p("div",{className:c.default.subscriptionInfo},void 0,p("div",{className:c.default.guildName},void 0,t.name),p("div",{className:c.default.tierInfo},void 0,p(m,{tier:t.premiumTier}),p(v,{guild:t,subscriptionChange:null!=r?r:0}))))},t}(a.PureComponent);t.default=y,y.displayName="GuildSubscriptionCard"},7706:function(e,t,n){"use strict";(function(e){t.__esModule=!0,t.default=void 0;var r,a=G(n(0)),o=k(n(8)),i=k(n(16)),l=k(n(6)),u=k(n(3)),s=n(35),d=G(n(491)),c=k(n(459)),f=k(n(162)),p=k(n(14)),h=k(n(53)),m=k(n(972)),v=k(n(194)),y=k(n(25)),_=k(n(11)),g=k(n(58)),E=k(n(24)),S=k(n(42)),I=k(n(152)),T=k(n(182)),O=k(n(71)),A=k(n(65)),N=k(n(75)),C=k(n(88)),M=k(n(199)),b=k(n(73)),R=k(n(865)),P=k(n(468)),D=G(n(870)),L=n(1),w=k(n(455)),U=k(n(6289));function k(e){return e&&e.__esModule?e:{default:e}}function G(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function j(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function H(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var x=44,B=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.prototype.render=function(){var e,t=this.props,n=t.emoji,r=t.count,a=t.selected,i=t.setSelected,l=null==n.id?M.default.getURL(n.name):C.default.getEmojiURL({id:n.id,animated:n.animated});e=null==n.id?f.default.convertSurrogateToName(n.name):":"+n.name+":";var u=l?j("img",{className:U.default.emoji,src:l,alt:n.name}):j("span",{className:(0,o.default)(U.default.emoji,U.default.emojiText)},void 0,n.name);return j(A.default,{position:A.default.Positions.LEFT,text:e},void 0,function(e){var t,n=e.onMouseEnter,l=e.onMouseLeave;return j(g.default,{className:(0,o.default)((t={},t[U.default.reactionDefault]=!a,t[U.default.reactionSelected]=a,t)),onClick:i,onMouseEnter:n,onMouseLeave:l},void 0,u,j(O.default,{color:O.default.Colors.PRIMARY,className:U.default.count},void 0,r))})},t}(a.PureComponent);B.displayName="Reaction";var V=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).removeReaction=function(){var e=t.props,n=e.emoji,r=e.user,a=e.message,o=e.channel;d.removeReaction(o.id,a.id,n,r.id)},t.renderUserContextMenu=function(e){(0,s.openContextMenu)(e,function(e){return a.createElement(c.default,F({},e,{type:L.ContextMenuTypes.USER_CHANNEL_MEMBERS,user:t.props.user,guildId:t.props.guildId,channelId:t.props.channel.id}))})},t}return H(t,e),t.prototype.render=function(){var e,t=this.props,n=t.user,r=t.guildId,a=t.channel,i=t.final,l=b.default.can(L.Permissions.MANAGE_MESSAGES,_.default.getCurrentUser(),a)?j(g.default,{onClick:this.removeReaction},void 0,j(S.default,{name:S.default.Names.CLOSE,width:16,height:16,className:U.default.remove})):null,u=null!=r&&h.default.getNick(r,n.id);return j(E.default,{className:(0,o.default)((e={},e[U.default.reactorDefault]=!i,e[U.default.reactorFinal]=i,e)),onContextMenu:this.renderUserContextMenu,align:E.default.Align.CENTER},void 0,j(E.default.Child,{wrap:!0,grow:0,shrink:0,className:w.default.marginReset},void 0,j(D.default,{user:n,size:D.Sizes.SIZE_24})),j(E.default.Child,{},void 0,j(O.default,{color:O.default.Colors.PRIMARY,className:U.default.name},void 0,u&&j("span",{className:U.default.nickname},void 0,u),j(R.default,{user:n,className:u?U.default.tagFaded:null,usernameClass:U.default.username,discriminatorClass:U.default.discriminator}))),l)},t}(a.PureComponent);V.displayName="Reactor";var K=function(e){function t(t){var n;return(n=e.call(this,t)||this).scrollerRef=a.createRef(),n.handleScroll=function(){(0,i.default)(null!=n.scrollerRef.current,"Scroller being scrolled while not mounted");var e=n.scrollerRef.current.getScrollerNode();null!=e&&e.scrollTop+e.offsetHeight>=e.scrollHeight-x&&n.props.hasMore&&!n.state.loadingMore&&n.loadMore()},n.state={lastId:null,loadingMore:!1},n}H(t,e);var n=t.prototype;return n.componentDidMount=function(){this.loadMore()},n.componentDidUpdate=function(e){var t=this;l.default.isEqual(this.props.reaction,e.reaction)||this.setState({lastId:null,loadingMore:!1},function(){return t.loadMore()})},n.loadMore=function(){var e=this,t=this.props,n=t.message,r=t.reaction,a=this.state.lastId;this.setState({loadingMore:!0}),d.getReactions(n.getChannelId(),n.id,r.emoji,a).then(function(t){return e.setState({loadingMore:!1,lastId:t[t.length-1].id})})},n.render=function(){var e=this.props,t=e.message,n=e.guildId,r=e.channel,o=e.reaction,i=e.hasMore,l=e.reactors,u=l.map(function(e,a){return j(V,{message:t,emoji:o.emoji,guildId:n,channel:r,user:e,final:a===l.length-1},e.id)});return!u.length&&this.state.loadingMore?u.push(j(T.default,{className:U.default.spinner},"loadingMore")):i&&u.push(j(T.default,{className:U.default.spinnerMore},"hasMore")),a.createElement(P.default,{outerClassName:U.default.reactors,className:"scroller",fade:!0,theme:P.default.Themes.GHOST_HAIRLINE,ref:this.scrollerRef,onScroll:i?this.handleScroll:void 0,elementHeight:x,batchEndMultiplier:2},u)},t}(a.PureComponent);K.displayName="ReactorsComponent";var W=u.default.connectStores([m.default],function(e){var t=e.message,n=e.reaction,r=m.default.getReactions(t.getChannelId(),t.id,n.emoji);return{hasMore:n.count>Object.keys(r).length,reactors:Object.values(r)}})(K),z=j(T.default,{}),Y=function(t){function n(e){var n,r=(n=t.call(this,e)||this).props.reactions;return n.state={selectedReaction:r[0]},n}H(n,t);var r=n.prototype;return r.componentDidUpdate=function(t){var n=this.props,r=n.reactions,a=n.onClose;r.length!==t.reactions.length&&0===r.length&&e(a)},r.setSelectedReaction=function(e){this.setState({selectedReaction:e})},r.render=function(){var e=this,t=this.props,n=t.message,r=t.reactions,o=this.state.selectedReaction;if(!o)return z;var i=p.default.getChannel(n.getChannelId());if(null==i)throw new Error("MessageReactions.render: Message does not have a channelId");var u=null==i||i.isPrivate()?null:i.getGuildId(),s=r.map(function(e,t){return F({},e,{pos:t})}).sort(function(e,t){return e.count!==t.count?t.count-e.count:e.pos-t.pos}).map(function(t){return a.createElement(B,F({key:(t.emoji.id||"")+":"+t.emoji.name,selected:l.default.isEqual(o.emoji,t.emoji),setSelected:function(){return e.setSelectedReaction(t)}},t))});return j(N.default,{size:U.default.size,className:U.default.container},void 0,j(I.default,{outerClassName:U.default.sidebar,className:U.default.scroller,theme:I.default.Themes.GHOST_HAIRLINE,fade:!0},void 0,s),j(W,{message:n,reaction:o,guildId:u,channel:i},(o.emoji.id||"")+":"+o.emoji.name))},n}(a.PureComponent);Y.displayName="MessageReactions";var q=u.default.connectStores([v.default,y.default],function(e){var t=e.message,n=v.default.getMessage(t.getChannelId(),t.id),r=null!=n?n.reactions:[];return{theme:y.default.theme,reactions:r}},{forwardRef:!0})(Y);t.default=q}).call(this,n(43).setImmediate)},8242:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(2)),a=c(n(269)),o=n(485),i=c(n(8243)),l=c(n(68)),u=c(n(15)),s=n(1),d=c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}var f={init:function(e,t,n){var a=n.forceChannel,o=void 0!==a&&a,i=n.location,l=void 0===i?"":i,u=n.isActionSheet;r.default.dispatch({type:s.ActionTypes.CREATE_INVITE_MODAL_INIT,guildId:e,channelId:t,forceChannel:o,isActionSheet:u}),this.createInvite(l,!0)},open:function(e,t,n,a){void 0===a&&(a=!1),r.default.dispatch({type:s.ActionTypes.CREATE_INVITE_MODAL_OPEN,guildId:e,channelId:t,forceChannel:a}),this.createInvite("IOS InstantInvite Mount",!0),u.default.track(s.AnalyticEvents.OPEN_MODAL,{Type:"Instant Invite",Source:n})},openSettings:function(e,t,n,a,o){void 0===a&&(a=!1),r.default.dispatch({type:s.ActionTypes.CREATE_INVITE_MODAL_OPEN,guildId:e,channelId:t,forceChannel:a,onlySettings:!0,onClose:o}),this.createInvite("IOS InstantInvite Mount",!0),u.default.track(s.AnalyticEvents.OPEN_MODAL,{Type:"Instant Invite",Source:n})},openForStream:function(e,t){r.default.dispatch({type:s.ActionTypes.CREATE_INVITE_MODAL_OPEN,guildId:e.guildId,channelId:e.channelId,forceChannel:!0,targetUserType:s.InviteTargetUserTypes.STREAM,targetUserId:e.ownerId}),this.createInvite("IOS InstantInvite Mount",!0);var n=(0,o.getStreamerApplication)(e,l.default);u.default.track(s.AnalyticEvents.OPEN_MODAL,{type:"Send Stream Invite",location:t,other_user_id:e.ownerId,application_id:null!=n?n.id:null,application_name:null!=n?n.name:null,game_id:null!=n?n.id:null})},updateSettings:function(e){r.default.dispatch({type:s.ActionTypes.CREATE_INVITE_MODAL_UPDATE_SETTINGS,settings:e})},resetSettings:function(){r.default.dispatch({type:s.ActionTypes.CREATE_INVITE_MODAL_RESET_SETTINGS})},createInvite:function(e,t){var n=i.default.getPendingSettings();if(null!=n){r.default.dispatch({type:s.ActionTypes.CREATE_INVITE_MODAL_GENERATE_INVITE});var o=n.channelId,l=n.maxAge,u=n.maxUses,c=n.temporary,f=n.targetUserType,p=n.targetUserId,h=i.default.getInvite(),m=t&&null!=h?h.code:null;a.default.createInvite(o,{validate:m,max_age:parseInt(l,10),max_uses:parseInt(u,10),temporary:c,target_user_type:f,target_user_id:p},e).then(function(){r.default.dispatch({type:s.ActionTypes.CREATE_INVITE_MODAL_GENERATE_INVITE_SUCCESS,channelId:o})},function(e){var t=d.default.Messages.INSTANT_INVITE_FAILED_TO_GENERATE;null!=e.body&&null!=e.body.message&&(t=e.body.message),r.default.dispatch({type:s.ActionTypes.CREATE_INVITE_MODAL_GENERATE_INVITE_FAILURE,message:t})})}},close:function(){var e=i.default.onClose;r.default.dispatch({type:s.ActionTypes.CREATE_INVITE_MODAL_CLOSE}),e&&e()}};t.default=f},8243:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(16)),a=s(n(3)),o=s(n(2)),i=s(n(193)),l=s(n(7016)),u=n(1);function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f,p,h,m,v,y,_=i.default.INVITE_OPTIONS_1_DAY.value,g=i.default.INVITE_OPTIONS_UNLIMITED.value,E=u.FormStates.CLOSED,S=!1,I=!1,T=!1;function O(e,t,n){h=l.default.getInvite(e,t,n),m={channelId:e,maxAge:null!=h?h.maxAge:_,maxUses:null!=h?h.maxUses:g,temporary:null!=h&&h.temporary,targetUserType:t,targetUserId:n},v=m}function A(e){S=e.forceChannel,f=e.guildId,p=null,I=null!=e.isActionSheet&&e.isActionSheet;var t=e.targetUserType||null,n=e.targetUserId||null;O(e.channelId,t,n)}var N=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,o,i,l=r.prototype;return l.isOpen=function(){return!I&&E!==u.FormStates.CLOSED},l.isSubmitting=function(){return E===u.FormStates.SUBMITTING},l.isChannelForced=function(){return S},l.getGuildId=function(){return f},l.getError=function(){return p},l.getInvite=function(){return h},l.getInviteSettings=function(){return m},l.getPendingSettings=function(){return v},l.getProps=function(){return{onlySettings:T}},a=r,(o=[{key:"onClose",get:function(){return y}}])&&d(a.prototype,o),i&&d(a,i),r}(a.default.Store))(o.default,{CREATE_INVITE_MODAL_INIT:A,CREATE_INVITE_MODAL_OPEN:function(e){E=u.FormStates.OPEN,T=null!=e.onlySettings&&e.onlySettings,y=null!=e.onClose?e.onClose:null,A(e)},CREATE_INVITE_MODAL_UPDATE_SETTINGS:function(e){var t=e.settings;v=c({},v,t)},CREATE_INVITE_MODAL_RESET_SETTINGS:function(e){v=m},CREATE_INVITE_MODAL_GENERATE_INVITE:function(e){return E=u.FormStates.SUBMITTING,void(m=v)},CREATE_INVITE_MODAL_GENERATE_INVITE_SUCCESS:function(e){var t=e.channelId;E=u.FormStates.OPEN,p=null,(0,r.default)(null!=m,"No invite settings for generated invite"),O(t,m.targetUserType,m.targetUserId)},CREATE_INVITE_MODAL_GENERATE_INVITE_FAILURE:function(e){E=u.FormStates.OPEN,h=null,p=e.message},CREATE_INVITE_MODAL_CLOSE:function(e){return E=u.FormStates.CLOSED,I=!1,T=!1,void(y=null)}});t.default=N},8244:function(e,t,n){"use strict";t.__esModule=!0,t.loadInviteSuggestions=function(e,t,n){if(o.default.getUserExperimentBucket(i.default.USER_AFFINITY_INVITE_SUGGESTIONS)!==a.ExperimentBuckets.CONTROL){if(!(l.default.getUserAffinities().length>0))return(0,u.fetchUserAffinities)().then(function(){r.default.dispatch({type:s.ActionTypes.LOAD_INVITE_SUGGESTIONS,omitUserIds:e||new Set,guild:t,channel:n})});(0,u.fetchUserAffinities)()}return Promise.resolve().then(function(){r.default.dispatch({type:s.ActionTypes.LOAD_INVITE_SUGGESTIONS,omitUserIds:e||new Set,guild:t,channel:n})})},t.searchInviteSuggestions=function(e){r.default.dispatch({type:s.ActionTypes.INVITE_SUGGESTIONS_SEARCH,query:e})};var r=d(n(2)),a=n(184),o=d(n(280)),i=d(n(333)),l=d(n(7497)),u=n(8245),s=n(1);function d(e){return e&&e.__esModule?e:{default:e}}},8245:function(e,t,n){"use strict";t.__esModule=!0,t.fetchUserAffinities=function(){return a.default.dirtyDispatch({type:o.ActionTypes.LOAD_USER_AFFINITIES}),r.default.get({url:o.Endpoints.USER_AFFINITIES,query:{},retries:0}).then(function(e){var t=e.body;a.default.dispatch({type:o.ActionTypes.LOAD_USER_AFFINITIES_SUCCESS,affinities:t})},function(){a.default.dispatch({type:o.ActionTypes.LOAD_USER_AFFINITIES_FAILURE})})};var r=i(n(12)),a=i(n(2)),o=n(1);function i(e){return e&&e.__esModule?e:{default:e}}},8246:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(140)),a=s(n(141)),o=s(n(10)),i=s(n(14)),l=s(n(1024)),u=s(n(77));function s(e){return e&&e.__esModule?e:{default:e}}var d=1010,c=new(function(e){var t,n;function l(){return e.call(this,{defaultRetryAfter:d,logger:u.default.create("InviteQueue")})||this}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=l.prototype;return s._sendInvite=function(e,t,n,r,o){a.default.sendInvite(e.id,t,r,o).then(function(){return n(null,!0)},function(){return n(null,!1)})},s.drain=function(e,t){var n=this,a=e.code,l=e.channel,u=e.user,s=e.location,d=e.suggested;null!=l?this._sendInvite(l,a,t,s,d):null!=u?r.default.ensurePrivateChannel(o.default.getId(),u.id).then(function(e){null!=(l=i.default.getChannel(e))&&n._sendInvite(l,a,t,s,d)},function(){return t(null,!1)}):t(null,!1)},l}(l.default));t.default=c},8247:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=d(n(3)),a=d(n(2)),o=n(184),i=d(n(280)),l=d(n(333)),u=n(193),s=d(n(7497));n(1);function d(e){return e&&e.__esModule?e:{default:e}}var c,f,p,h,m=100,v=new Set,y=[],_=new Map;function g(e){var t=i.default.getUserExperimentBucket(l.default.USER_AFFINITY_INVITE_SUGGESTIONS);if(t===o.ExperimentBuckets.CONTROL)return(0,u.generateRowsForQuery)(e,v);var n=s.default.getUserAffinitiesUserIds(),r=n,a=null==h?void 0:h.id;if(t===o.ExperimentBuckets.TREATMENT_2){var d=(0,u.getMostRecentDMedUser)(v,a);d&&((r=new Set).add(d.id),n.forEach(function(e){return r.add(e)}))}return(0,u.generateRowsForQuery)(e,v,r,m,a)}function E(e){y=e,_=new Map,e.forEach(function(e,t){_.set(e,{index:t})})}var S=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getInviteSuggestionRows=function(){return y},a.getTotalSuggestionsCount=function(){return f},a.getInitialCounts=function(){return c},a.getSelectedInviteMetadata=function(e){var t=_.get(e),n=s.default.getUserAffinitiesUserIds();return null!=t?{rowNum:t.index,isAffinitySuggestion:e.isSuggested,numTotal:y.length,numAffinityConnections:n.size,isFiltered:p}:null},a.getMinFriendSuggestions=function(){return i.default.getUserExperimentBucket(l.default.USER_AFFINITY_INVITE_SUGGESTIONS)===o.ExperimentBuckets.CONTROL?25:1},r}(r.default.Store))(a.default,{LOAD_INVITE_SUGGESTIONS:function(e){var t=e.omitUserIds,n=e.guild,r=e.channel;h=null==r?n:null,v=t,p=!1;var a=g(""),o=a.rows,i=a.counts;E(o),c=i,f=y.length},INVITE_SUGGESTIONS_SEARCH:function(e){var t=e.query;p=""!==t,E(g(t).rows)}});t.default=S},8250:function(e,t){e.exports='---changelog---\ndate: "2019-11-14"\nrevision: 1\nimage: "polish-week.png"\n---\nWe spend a lot of time working on big features that users ask for. Sometimes, small quality-of-life updates dont get the love they deserve. This update, we set time aside to tackle as many of these changes as we could. The Polish Patch: changes you didnt know you needed until now.\n\nAdditions Overload {added marginTop}\n======================\n\n* **You can now sort searches by oldest.** Weve been around since 2015. Some of you have servers that are that old. We encourage you to enjoy cringing at your 4.5 year old messages.\n\n* **Added a clear all role permissions button.** Useful if you need to make a decorative role with no actual permissions granted to it fast, less useful if you really like clicking our little slider button on each individual permission.\n\n* **We now warn you when you try to click on a protocol link.** This is a link that would open an application on your computer other than your web browser. Accidentally opening Steam is no longer a jumpscare.\n\n* **Search function now lets you search by user id.** Server mods, this one was for you.\n\n* **Added a Mark Unread option for messages.** Because we know that you know that we know that you were not going to respond to that message you claimed you would remember to answer later.\n\n* **We now show YouTube streaming as your status in Streamer Mode.** All streamers are valid.\n\n* **Twemoji added!** Now access emoji we did not previously surface, including beloved classics such as :leg: and :onion:.\n\n* **Implemented natural Volume Sliders.** You know how before, you had that _one_ person. That one person with a mic that radiated so much incredible, powerful sound you had to turn them all the way down to 5% volume lest your entire house be destroyed by their mighty, booming voice? Now, turning someones mic down to 50% will properly hear their volume decrease by half. \n\n* **Added Smart Volume preferences.** Our media player will now remember your mute/volume preferences between videos. Whatever you set for the last video you watched, Discord will now carry over to the next video. \n\nAdditions Overload 2: More {progress}\n======================\n\n* **Hovering over a message timestamp** will show the full date and time. \n\n* **We now send a desktop notification when someone accepts your friend request.** The red ping of companionship <3.\n\n* **Fixed up our emoji picker.** Its now dark. On dark theme. As the theme would suggest. We also made it way easier to tell where each emoji is coming from for all you emoji addicts out there who have 5 different versions of the same cat making a sad face. :sadcat~2: :sadcat~3:\n\n* **Changing channel notification settings is now easier.** Just right click on a channel and pick between server default, all messages, mentions only, or nothing. \n\n* **Fixed up DMs and Group DMs.** We added a create Group DM button to the DM column. You can also now see how long your DM or Group DM call lasted. Its personal record setting time, baby.\n\nFixes and Fun Stuff {fixed}\n======================\n\n* **Fixed attempted @ for a user with diacritical marks in their name.** Currently, attempting to @ someone whose name includes characters like  and  by using the unmarked letter causes them to disappear from the results. Sorry to every Rene, Nol, Zo, Matho, Jos, and Mjlnir out there for the unnecessary trouble.\n\n* **Psst, Nitro subs.** You have until Jan. 6th to redeem your 3 months of Xbox Game Pass. Head to your gift [inventory](https://discordapp.com/library/inventory) to claim yours. \n\n\n\n---changelog---\ndate: "2019-09-09"\nrevision: 1\nlocale: "sv-se"\nyoutube_video_id: "BJHZxqyfrqk"\n---\nVLKOMMEN HEM {added marginTop}\n======================\n\n**Det ljusa temat har gjorts om!** Vi hrde era rster klart och tydligt. Det ljusa temat har gjorts smidigt, stilrent och mer tillgngligt, och har genomgtt en totalrenovering som kraftigt kat egendomsvrdet.\n\n* **Vissa mindre teckenstorlekar har gjorts strre**, vissa teckensnitt har gjorts fetare, merparten av all text samt ikoner har ftt kad kontrast, och vi har dammat av alla svrtkomliga hrn.\n\n* **Det malplacerade mrka sidofltet har mlats om**, eftersom mrkt inte r ljust.\n\n* **Vissa kontextmenyer har ftt en ny design**, t.ex. statusvljaren och serverns rullmeny, s att det blivit konsekvent och snyggt. Alla drrvred och all hrdvara matchar.\n\n* **Omdesignat direktmeddelanden**, medlemslistan och kanallistan, s att allting passar ihop som en mysig, genomtnkt bonsaitrdgrd.\n\n* **Ni som anvnder det mrka temat, oroa er inte.** Alla ndringar fr tillgnglighet och samstmmighet har tillmpats p er sta, mrka vn. Discord r nu ett enda stort, vackert grannskap.\n\n**Vi har rullat ut Go Live till... 100% av er!** Nu kan alla starta ett spel, klicka p en knapp och brja streama till sina vnner. Hng med dina vnner i ditt nya hus.\n\n**Vi har ven frbttrat videoupplsningen.** Skrmdelning och Go Live anpassar sig nu dynamiskt till din internetanslutning, s att vi kan skicka fina skrmdumpar ven om ditt internet r svajigt. Vad r vitsen med ett nytt hus om inte grunden r stadig?\n\nGRILLFEST P BAKSIDAN {fixed}\n======================\n\n* **tervnd till skolan med HypeSquad.** Skter du en server fr en klubb p ditt universitet eller din skola? [Anslut dig till HypeSquad-event](https://discordapp.com/hypesquad). Uppgradera din server med en frsig, personlig URL, och f en jttekartong med gratis trjor och stil varje kvartal!\n\n* **Skl p er alla!** Vi kunde inte ha gjort om det ljusa temat utan feedback frn hela Discord-communityt. Om du har en id om hur Discord kan gras bttre, skicka din feedback [hit](https://support.discordapp.com/hc/sv/community/topics)!\n\n\n---changelog---\ndate: "2019-09-09"\nrevision: 1\nlocale: "es-es"\nyoutube_video_id: "BJHZxqyfrqk"\n---\nTE DAMOS LA BIENVENIDA {added marginTop}\n======================\n\n**Hemos renovado el tema claro!** Vuestras plegarias han sido escuchadas. Elegante, con estilo y ms accesible, as es el nuevo tema claro. Le hemos dado un poco de chapa y pintura, y ahora el valor de nuestra propiedad se ha disparado.\n\n* **Hemos aumentado algunas de las fuentes ms pequeas**, ensanchado otras, incrementado los niveles de contraste de la mayora de los textos e iconos, y quitado las telaraas de los rincones ms inaccesibles.\n\n* **Hemos cambiado de color la barra lateral que no pegaba ni con cola**, porque si es oscura, no es clara.\n\n* **Hemos rediseado algunos mens contextuales**, como el seleccionador de estado y el men despegable de servidores por cuestin de coherencia y pulido. Cada pomo con su respectiva puerta.\n\n* **Hemos rediseado los MD**, la lista de miembros y la lista de canales para que todo encaje a la perfeccin, como en un jardn de bonsis hecho con mimo.\n\n* **Usuarios del tema oscuro, no temis.** Vuestro querido amigo de tez morena tambin cuenta con los ltimos cambios en accesibilidad y coherencia. Discord se ha convertido en un barrio bonito y animado.\n\n**Go Live ya est disponible... para todos vosotros!** Ahora todo el mundo puede ejecutar un juego, darle a un botn y empezar a transmitir para sus amigos. Pasa el rato con tus amigos en tu nueva casa.\n\n**Tambin hemos mejorado la resolucin del vdeo.** Ahora la pantalla compartida y la funcin Go Live se adaptan de forma dinmica a tu conexin a internet para que podamos enviar buenas imgenes aunque a esta le entre un poco de hipo. De qu vale una nueva casa sin unos buenos cimientos?\n\nBARBACOA EN EL JARDN {fixed}\n======================\n\n* **Vuelve al cole con el HypeSquad.** Llevas un servidor en tu universidad o club escolar? [nete a los eventos del HypeSquad](https://discordapp.com/hypesquad). Mejora tu servidor con una vistosa URL personalizada y llvate tambin una caja enorme de camisetas y regalos gratis cada trimestre!\n\n* **Un brindis por todos vosotros!** Sin vuestras opiniones, no habramos podido redisear el tema claro. Si tienes una idea para mejorar Discord, hznosla llegar [aqu](https://support.discordapp.com/hc/es/community/topics)!\n\n\n---changelog---\ndate: "2019-09-09"\nrevision: 1\nlocale: "ru"\nyoutube_video_id: "BJHZxqyfrqk"\n---\n   {added marginTop}\n======================\n\n**  !**     .      ,     ,   ,       .\n\n* **    **    ,     ,        .\n\n* **    ,**       .\n\n* **   ,**         ,     .         .\n\n* **  **,            ,     .\n\n* **  ,  !**         ,  . Discord    ,  .\n\n** Go Live  ...  !**     ,         .      .\n\n**    .**    Go Live        ,      ,      .      , ?\n\n    {fixed}\n======================\n\n* **    HypeSquad!**      ? [   HypeSquad](https:/discordapp.com/hypesquad).       URL,          !\n\n* **  !**           Discord.     Discord , ,    [](https://support.discordapp.com/hc/ru/community/topics)!\n\n\n---changelog---\ndate: "2019-09-09"\nrevision: 1\nlocale: "pt-br"\nyoutube_video_id: "BJHZxqyfrqk"\n---\nBEM-VINDOS AO LAR {added marginTop}\n======================\n\n**O tema "Claro" foi recauchutado!** Ouvimos os comentrios de vocs em alto e bom som. Nosso tema Claro ficou mais liso, mais estiloso e mais acessvel do que nunca. Ele agora faz 10 quilmetros por litro na estrada!\n\n* **Aumentamos algumas fontes pequetuchas**, engordamos outras que no estavam comendo direito, aumentamos o contraste da maioria dos textos e cones, e aproveitamos pra tirar o p daquele cantinho da baguna.\n\n* **Passamos uma tinta naquela barra lateral escura** que estava suuuper destoando do resto do tema.\n\n* **Redesenhamos alguns menus contextuais,** como o seletor de status e a barra de opes, para ficarem mais consistentes e polidos, que nem aqueles bolos de espelho!\n\n* **Redesenhamos as MDs**, a lista de membros e a lista de canais, para que tudo se complemente como um jardim bonsai semiquaseprofissional.\n\n* **Usurios do tema "Escuro", nada temam.** Todas as mudanas de acessibilidade e consistncia tambm foram aplicadas ao modo gtico do seu programa favorito. O Discord no julga o estilo de cada um.\n\n**O Go Live est disponvel para... todos vocs!** Agora todo mundo pode iniciar um jogo, clicar num boto e comear a transmitir para os amigos. Venha curtir com a galera na sua nova casa.\n\n**Tambm melhoramos a resoluo do vdeo.** O compartilhamento de tela e o Go Live agora se adaptam dinamicamente  sua conexo da internet, para que a gente possa mandar umas imagens maneiras mesmo se sua conexo der uma engasgada. Chamamos isso de Cyber-Heimlich!\n\nPOR BAIXO DO CAP {fixed}\n======================\n\n* **Volte s aulas com o HypeSquad.** Voc tem um servidor da sua universidade ou de um grmio escolar? [Entre para os Eventos do HypeSquad](https://discordapp.com/hypesquad). Aprimore seu servidor com um URL personalizado e receba, "de grtis", uma caixona de camisetas e outras parafernlias todo trimestre!\n\n* **Um brinde a todos vocs!** No teramos como ter turbinado o tema Claro sem o feedback da comunidade do Discord. Se voc tem alguma ideia pra deixar o Discord ainda mais irado, mande para ns [aqui](https://support.discordapp.com/hc/pt-br/community/topics)!\n\n\n---changelog---\ndate: "2019-09-09"\nrevision: 1\nlocale: "pl"\nyoutube_video_id: "BJHZxqyfrqk"\n---\nWITAJ W DOMU {added marginTop}\n======================\n\n**Jasny motyw ju po remoncie!** Wzilimy wasze opinie do serca. Jasny motyw przeszed generalny remont  jest teraz bardziej elegancki, stylowy i dostpny. To znaczco zwikszyo warto nieruchomoci.\n\n* **Zwikszylimy niektre mniejsze rozmiary czcionek**, niektre czcionki pogrubilimy, zwikszylimy poziom kontrastu wikszoci tekstu oraz ikon i odkurzylimy trudno dostpne zakamarki.\n\n* **Przemalowalimy niepasujcy ciemny pasek boczny**, bo ciemny nie jest jasny.\n\n* **Przeprojektowalimy niektre menu kontekstowe**, na przykad wybr statusu i menu rozwijalne serwera, dla spjnoci i elegancji. Teraz wszystkie klamki i sprzty do siebie pasuj.\n\n* **Przeprojektowalimy PW**, list czonkw i list kanaw, wic teraz wszystko jest spjne jak w adnym, przemylanym ogrdku bonsai.\n\n* **Uytkownicy ciemnego motywu  bez obaw.** Zastosowalimy wszystkie zmiany dotyczce dostpnoci i spjnoci do waszego uroczego, mrocznego przyjaciela. Discord jest teraz jednym wielkim, piknym osiedlem.\n\n**Wprowadzamy Go Live dla... Was wszystkich!** Kady moe teraz uruchomi gr, klikn przycisk i zacz streamowa dla znajomych. Spdzaj czas w swoim nowym domu ze swoimi znajomymi.\n\n**Poprawilimy te rozdzielczo wideo.** Teraz wspdzielenie ekranu i Go Live bd dynamicznie dostosowywa si do Twojego poczenia internetowego, ebymy mogli przesya Ci klatki, nawet gdy Twj Internet ma czkawk. Czym byby nowy dom bez porzdnych fundamentw?\n\nGRILL NA TYACH {fixed}\n======================\n\n* **Powrt do szkoy z HypeSquad.** Prowadzisz serwer dla klubu uniwersyteckiego lub szkolnego? [Docz do wydarze HypeSquad](https://discordapp.com/hypesquad). Popraw swj serwer dziki szpanerskiemu niestandardowemu adresowi URL i zdobd wielkie pudo darmowych koszulek  ale lans!\n\n* **Toast dla wszystkich!** Nie udaoby nam si przeprojektowa jasnego motywu bez informacji zwrotnych od spoecznoci Discorda. Jeli masz pomys, jak uczyni Discorda lepszym miejscem, zgo swoje opinie [tutaj](https://support.discordapp.com/hc/pl/community/topics)!\n\n\n---changelog---\ndate: "2019-09-09"\nrevision: 1\nlocale: "ko"\nyoutube_video_id: "BJHZxqyfrqk"\n---\n  {added marginTop}\n======================\n\n**  !**        .                Discord .\n\n* **     **,       ,       . ,    .\n\n* **    **    .\n\n* **    **           .     .\n\n* ** **,  ,             .\n\n* **      .**  ,      . Discord      .\n\n**  Go Live   !**          .     .\n\n**  .**   Go Live              .      ?\n\n  {fixed}\n======================\n\n* **HypeSquad    .**     ? [ HypeSquad  ](https://discordapp.com/hypesquad).    URL            Discord    !\n\n* ** !** Discord         .   Discord       [ ](https://support.discordapp.com/hc/ko/community/topics)!\n\n\n---changelog---\ndate: "2019-09-09"\nrevision: 1\nlocale: "ja"\nyoutube_video_id: "BznhaI_NBGA"\n---\n{added marginTop}\n======================\n\n****\n\n* ****\n\n ****\n\n* ****\n\n* ****\n\n* ****Discord\n\n**Go Live**1\n\n****Go Live\n\n{fixed}\n======================\n\n* **HypeSquad**[HypeSquad](https://discordapp.com/hypesquad)URLT\n\n* ****Discord[](https://support.discordapp.com/hc/ja/community/topics)\n\n\n---changelog---\ndate: "2019-09-09"\nrevision: 1\nlocale: "it"\nyoutube_video_id: "BJHZxqyfrqk"\n---\nBENVENUTI A CASA {added marginTop}\n======================\n\n**Il tema chiaro  stato rinnovato!** I vostri feedback ci sono arrivati forti e chiari. Stiloso e pi accessibile, la ristrutturazione ha aumentato a dismisura il valore della nostra propriet.\n\n* **Alcuni caratteri pi piccoli sono stati ingranditi**, altri sono aumentati di spessore, cos come  aumentato il contrasto della maggior parte di testi e icone, e abbiamo spolverato anche gli angoli pi difficili da raggiungere.\n\n* **Ridipinta la barra laterale scura** perch scuro  diverso da chiaro.\n\n* **Abbiamo ridisegnato alcuni menu di contesto** come il selettore di stato e il menu "trascina in basso" del server, per una maggiore coerenza e pulizia. Tutte le maniglie e gli infissi sono abbinati.\n\n* **Riprogettati i messaggi diretti**, la lista dei membri e la lista del canale per rendere tutto pi compatto, come un giardino di bonsai ben strutturato e molto carino.\n\n* **Amanti del tema scuro, non temete.** Tutti i cambiamenti nell\'accessibilit e nella coerenza sono stati applicati al vostro caro, imbrunito amico. Ora Discord  un unico, grande, meraviglioso quartiere.\n\n**Abbiamo lanciato Go Live al 100%!** Da oggi tutti possono aprire un gioco, premere un bottone e trasmettere in streaming. Invita gli amici e inaugura la tua nuova casa.\n\n**Abbiamo migliorato anche la risoluzione video.** La condivisione dello schermo e Go Live ora si adatteranno dinamicamente alla tua connessione internet e questo ci permette di inviare dei bei fotogrammi anche se la tua connessione traballa. Una casa nuova ha bisogno di fondamenta solide.\n\nGRIGLIATA IN GIARDINO {fixed}\n======================\n\n* **Torna a scuola con HypeSquad.** Gestisci un server per la tua universit, scuola o club? [Unisciti agli eventi HypeSquad](https://discordapp.com/hypesquad). Migliora il tuo server con un URL personalizzato all\'ultimo grido e in pi ottieni una gigantesca cassa di magliette gratuite per essere swag tutto l\'anno!\n\n* **Un brindisi a voi tutti!** Non avremmo potuto rinnovare il tema chiaro senza il feedback della community di Discord. Se hai qualsiasi idea per rendere Discord un posto migliore, invia il tuo feedback [qui](https://support.discordapp.com/hc/it/community/topics)!\n\n\n---changelog---\ndate: "2019-09-09"\nrevision: 1\nlocale: "de"\nyoutube_video_id: "BJHZxqyfrqk"\n---\nWILLKOMMEN ZU HAUSE {added marginTop}\n======================\n\n**Das helle Schema wurde renoviert!** Wir haben euer Feedback laut und deutlich vernommen und das helle Schema einmal kernsaniert. Da es jetzt schnittiger, stylisher und fr mehr von euch zugnglich ist, konnten wir unseren Immobilienwert deutlich erhhen.\n\n* **Wir haben ein paar kleinere Schriftgren ausgebaut**, bei Schriftstrken ne Schippe raufgelegt, die Kontraststufe fr die meisten Texte und Icons erhht und sogar unter jedem Teppich gekehrt.\n\n* **Wir haben der dunklen Seitenleiste einen neuen Anstrich verpasst**, damit das helle Raumkonzept auch aufgeht.\n\n* **Wir haben einige Kontextmens neu gestaltet**, wie die Statusauswahl und die Dropdown-Liste fr Server. Alle Hebel und Knufe passen jetzt zum Interieur und vermitteln einen stimmigen Gesamteindruck.\n\n* **Wir haben die Direktnachrichten neu gestaltet**, ebenso wie die Mitgliederliste und die Kanalliste. Jetzt ist alles so harmonisch wie ein gepflegter Bonsaigarten.\n\n* **Frchtet euch nicht, Freunde des dunklen Schemas.** Die gesamten nderungen der Zugriffseinstellungen und Anpassungen wurden auch fr die dunkle Seite der Nachbarschaft vorgenommen. Discord ist schlielich eine besonders schne, benutzerfreundliche Umgebung. Katzen sind erlaubt!\n\n**Du hast Go Live, du hast Go Live ALLE haben jetzt Go Live!** Ihr knnt ganz einfach ein Spiel starten und mit nur einem Klick euer Gameplay als Livestream mit all euren Freunden teilen. Viel Spa beim gemeinsamen Rtseln, Ranken und Ragen!\n\n**Wir haben auch die Videoauflsung optimiert.** Bildschirmbertragungen und Go Live passen sich jetzt dynamisch eurer Internetverbindung an. So habt ihr immer noch nette Bildraten, selbst wenn euer Internet mal wieder rumeiert. Was bringt denn schon ein neues Haus ohne solides Fundament?\n\nGRILLFEST {fixed}\n======================\n\n* **Schulbeginn mit HypeSquad.** Du betreibst einen Server fr deine AG in der Schule oder in der Uni? [Tritt HypeSquad-Events bei](https://discordapp.com/hypesquad). So erhltst du eine schicke persnliche URL und alle drei Monate ein massives Paket mit kostenlosen Shirts und Swag!\n\n* **GG an alle!** Ohne das Feedback der Discord-Community htten wir das helle Schema niemals so fein rausputzen knnen. Falls dir noch einfllt, wie man Discord weiter verbessern knnte, schick dein Feedback bitte [hier hin](https://support.discordapp.com/hc/de/community/topics)!\n\n\n---changelog---\ndate: "2019-09-09"\nrevision: 1\nlocale: "fr"\nyoutube_video_id: "BJHZxqyfrqk"\n---\nBIENVENUE CHEZ VOUS {added marginTop}\n======================\n\n**Le thme clair a eu droit  un petit ravalement de faade!** Nous avons diligemment pris en compte vos retours. pur, lgant, et bien plus accessible; nous avons amlior la faade du thme claire dans sa globalit, ce qui a permis  la valeur de la proprit de monter en flche.\n\n* **Nous avons augment la taille des plus petites polices**, paissi certaines autres, lev les niveaux de contraste de la plupart des textes et des icnes, et dpoussirs les recoins les plus difficiles  atteindre.\n\n* **L\'encadr sombre a t repeint dans des tons plus clairs**, parce ce qui est sombre est tout sauf clair, c\'est vident.\n\n* **Certains menus contextuels ont t repenss** tels que le slectionneur de statuts et le menu dfilant des serveurs pour plus de cohrence et histoire de mettre un petit coup de polish. Maintenant, toutes les poignes de porte sont assorties au reste du matos.\n\n* **Nous avons procd  une petite refonte des MP**, de la liste des membres, et de la liste des salons afin que tout soit en parfaite harmonie tel un jardin rempli de bonsas soigneusement taills.\n\n* **Partisans du thme sombre, n\'ayez crainte.** Toutes les modifications d\'accessibilit et d\'harmonisation ont t appliques  votre petit chouchou tnbreux. Discord est maintenant un quartier tout  fait charmant.\n\n**Go Live est maintenant accessible  100% d\'entre vous!** Dsormais, tout le monde peut lancer un jeu, cliquer sur un simple bouton et commencer  streamer pour ses amis. Runis tous ensemble, mais chacun chez soi!\n\n**La rsolution vido a galement t amliore.**  prsent, le partage d\'cran et la fonction Go Live s\'adaptent dynamiquement  votre connexion internet afin d\'envoyer des images nettes si votre internet fait des siennes. Que serait une nouvelle maison sans des fondations solides?\n\nBARBECUE DANS L\'ARRIRE-COUR {fixed}\n======================\n\n* **Retournez  l\'cole avec la HypeSquad.** Vous voulez crer un serveur pour un groupe scolaire ou pour la fac? [Rejoignez les vnements HypeSquad](https://discordapp.com/hypesquad). Amliorez vos serveurs avec des URL personnalises ultras styles, et recevez une grosse caisse de tee-shirts gratuits trop swag tous les trimestres!\n\n* **Nous souhaitons porter un toast en votre honneur  tous!** Nous n\'aurions jamais pu rnover le thme clair sans les retours de la communaut Discord. Si vous avez d\'autres ides pour faire de Discord un endroit encore plus agrable, vous pouvez nous les soumettre [ici](https://support.discordapp.com/hc/fr/community/topics)!\n\n\n---changelog---\ndate: "2019-09-09"\nrevision: 1\nlocale: "nl"\nyoutube_video_id: "BJHZxqyfrqk"\n---\nWELKOM THUIS {added marginTop}\n======================\n\n**Het lichte thema is opgeknapt!** We hebben jullie feedback luid en duidelijk gehoord en zijn als ware klusjesmannen aan de slag gegaan. Het resultaat mag er zijn: strak, stijlvol en toegankelijker. De waarde van dit huis is meteen flink opgekrikt!\n\n* **We hebben de wat kleinere lettertypen vergroot**, sommige lettertypen wat extra kilootjes gegeven, het contrast van veel tekst en symbolen aangescherpt en die lastig te bereiken hoekjes uitgestoft.\n\n* **We hebben die donkere, uit de toon vallende zijbalk \'n nieuw kleurtje gegeven** want donker is geen licht.\n\n* **Sommige contextmenu\'s zijn onder handen genomen voor consistentie en afwerking**, zoals de statuskeuze en het serveruitklapmenu. Alle deurknoppen en hardware komen nu overeen.\n\n* **DB\'s zijn onder handen genomen**, net als de ledenlijst en de kanaallijst. Hierdoor vormt alles n geheel, net als een goed onderhouden bonsaituintje.\n\n* **Liefhebbers van het donkere thema, wees niet bang.** Alle toegankelijkheids- en consistentieverbeteringen zijn ook doorgevoerd voor jullie lieve, donkere vriend. Discord is nu n grote, nette buurt.\n\n**We hebben Go Live uitgerold voor... jullie allemaal!** Iedereen kan nu een game opstarten en streamen naar vrienden. Neem het ervan in je nieuwe huis met je vrienden.\n\n**We hebben de videoresolutie ook verbeterd.** Schermdelen en Go Live passen zich nu dynamisch aan je internetverbinding aan, zodat we ook leuke frames door kunnen sturen als je internet wat minder stevig op z\'n pootjes staat. Want wat is een nieuw huis zonder goede fundering?\n\nTUINBARBECUE {fixed}\n======================\n\n* **Ga terug naar school met HypeSquad.** Draai jij een server voor je universiteit of schoolteam? [Sluit je dan aan bij HypeSquad-evenementen.](https://discordapp.com/hypesquad). Upgrade je server met een gelikte, unieke URL en scoor elk kwartaal een flinke doos gratis shirts en goodies!\n\n* **We brengen een toost uit op jullie allemaal!** We hadden het lichte thema niet op kunnen knappen zonder feedback van de Discord-community. Heb jij een idee over hoe we Discord nog verder kunnen verbeteren, laat je feedback dan [hier achter](https://support.discordapp.com/hc/nl/community/topics)!\n'},8253:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=h(n(6)),o=n(67),i=h(n(860)),l=h(n(470)),u=h(n(7498)),s=h(n(6686)),d=h(n(279)),c=n(226),f=n(6687),p=n(1);function h(e){return e&&e.__esModule?e:{default:e}}var m=[p.Routes.ACTIVITY,p.Routes.APPLICATION_LIBRARY,p.Routes.APPLICATION_STORE,p.Routes.FRIENDS],v=((r={})[p.Routes.ACTIVITY]=0,r[p.Routes.APPLICATION_LIBRARY]=1,r[p.Routes.APPLICATION_STORE]=2,r[p.Routes.FRIENDS]=3,r);function y(e,t){(0,f.transitionToChannel)(e,t)}function _(e){var t=i.default.getChannelId(p.ME),n=d.default.getPrivateChannelIds(),r=__OVERLAY__?n:[].concat(m,n),a=(null==t?function(e){for(var t in v)if(e.startsWith(t))return v[t];return-1}(s.default.getHomeLink()):r.indexOf(t))+e;a>=r.length?a=0:a<0&&(a=r.length-1);var o,l,c=r[a];m.includes(c)?(o=c,l=u.default.getCurrentRoute(),o===p.Routes.APPLICATION_STORE&&null!=l?(0,f.transitionToPage)(l):(0,f.transitionToPage)(o)):y(p.ME,c)}var g=a.default.throttle(function(e){void 0===e&&(e=1);var t=i.default.getGuildId();null==t?_(e):function(e,t){var n,r,a=l.default.getCategories(t),u=(0,c.getFlattenedChannelList)(a._categories,a,function(e){var t=e.channel;return(0,o.isGuildSelectableChannelType)(t.type)&&!(0,c.isChannelCollapsed)(t)}).map(function(e){return e.channel.id}),s=i.default.getChannelId(t),d=(n=u.indexOf(s)+e,r=u.length,n<0?r-1:n>=r?0:n);y(t,u[d])}(e,t)},p.NAVIGATION_THROTTLE);t.default=g},8254:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.CREATE_DM_GROUP=void 0;var r=u(n(6577)),a=u(n(153)),o=n(80),i=n(6687),l=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var s={binds:["mod+shift+t"],global:!0,action:function(){return a.default.getGuildId()&&((0,i.transitionToChannel)(l.ME),r.default.flushSelection(!0)),o.ComponentDispatch.safeDispatch(l.ComponentActions.TOGGLE_DM_CREATE),!1}};t.CREATE_DM_GROUP=s;var d={CREATE_DM_GROUP:s};t.default=d},8255:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.CREATE_GUILD=void 0;var r=l(n(6590)),a=l(n(6848)),o=n(80),i=n(1);function l(e){return e&&e.__esModule?e:{default:e}}var u={binds:["mod+shift+n"],global:!0,action:function(){a.default.isOpen()?(r.default.setScreen(i.CreateGuildModalScreens.JoinGuild),o.ComponentDispatch.dispatch(i.ComponentActions.TRANSITION_JOIN_GUILD)):r.default.open(null,"Keyboard Shortcut")}};t.CREATE_GUILD=u;var s={CREATE_GUILD:u};t.default=s},8256:function(e,t,n){"use strict";t.__esModule=!0,t.FOCUS_SEARCH=void 0;var r=n(80),a=n(1),o={binds:["mod+f"],global:!0,action:function(e){e.preventDefault(),e.stopPropagation(),r.ComponentDispatch.dispatch(a.ComponentActions.FOCUS_SEARCH,{prefillCurrentChannel:!0})}};t.FOCUS_SEARCH=o},8257:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=y(n(6)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(67)),o=y(n(341)),i=y(n(14)),l=y(n(7500)),u=y(n(51)),s=y(n(11)),d=y(n(904)),c=y(n(946)),f=n(6850),p=y(n(963)),h=y(n(7501)),m=y(n(970)),v=n(1);function y(e){return e&&e.__esModule?e:{default:e}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){return(0,r.default)(e).sort(m.default).take(t).value()}var E=100,S=1e3,I=Object.freeze({});function T(e,t){return void 0===e&&(e=0),S*e*(t||1)}function O(e,t){if(!t.frecencyBoosters)return{};var n=l.default.getFrequently(),r=n.reduce(function(e,t){var n=t.id,r=l.default.getScore(n);return r>e?r:e},0),s=[];switch(e){case f.AutocompleterResultTypes.GUILD:s=n.filter(function(e){return e instanceof o.default});break;case f.AutocompleterResultTypes.USER:s=n.filter(function(e){return e instanceof a.default&&e.type===v.ChannelTypes.DM});break;case f.AutocompleterResultTypes.GROUP_DM:s=n.filter(function(e){return e instanceof a.default&&e.isMultiUserDM()});break;case f.AutocompleterResultTypes.TEXT_CHANNEL:s=n.filter(function(e){return e instanceof a.default&&(0,a.isGuildSelectableChannelType)(e.type)});break;case f.AutocompleterResultTypes.VOICE_CHANNEL:s=n.filter(function(e){return e instanceof a.default&&e.type===v.ChannelTypes.GUILD_VOICE})}var d={};return s.forEach(function(t){var n=t.id,o=l.default.getScore(n);if(e===f.AutocompleterResultTypes.USER&&t instanceof a.default){n=t.getRecipientId();var s=u.default.isFriend(n)?.2:0,c=i.default.getDMFromUserId(n)?.1:0;d[n]=1+o/r+s+c}else d[n]=1+o/r}),d}var A=function(){function e(e,t,n,a){var o=this;void 0===n&&(n=E),void 0===a&&(a=I),this.query="",this.options=I,this.results=[],this._userResults=[],this._groupDMResults=[],this._textChannelResults=[],this._voiceChannelResults=[],this._guildResults=[],this._applicationResults=[],this._userBlacklist=null,this.mapUserResult=function(e){var t=e.user,n=e.id,r=e.score,a=e.comparator;if(null==t&&(t=s.default.getUser(n)),null==t)return null;var i=O(f.AutocompleterResultTypes.USER,o.options);return(0,h.default)(f.AutocompleterResultTypes.USER,t,T(r,i[t.id]),a)},this.parseUserResults=function(e){var t=e.results;o._include(f.AutocompleterResultTypes.USER)&&(o._userResults=t.map(o.mapUserResult).filter(function(e){return null!=e}),o._userResults.length>o._limit&&(o._userResults.length=o._limit),o.updateAllResults())},this.updateAllResults=function(){clearTimeout(o._asyncTimeout),o.results=(0,r.default)([].concat(o._userResults,o._groupDMResults,o._textChannelResults,o._voiceChannelResults,o._guildResults)).uniqBy(function(e){return e.type+"-"+e.record.id}).sort(m.default).value(),o.onResultsChange(o.results,o.query)},this.onResultsChange=e,this.setOptions(a,!0),this._limit=n,this.userSearchContext=p.default.getSearchContext(this.parseUserResults,n),this.setResultTypes(t)}var t=e.prototype;return t.setLimit=function(e){var t=this.userSearchContext;this._limit=e,null!=t&&t.setLimit(e),this._userResults.length>this._limit&&(this._userResults.length=this._limit),this._groupDMResults.length>this._limit&&(this._groupDMResults.length=this._limit),this._textChannelResults.length>this._limit&&(this._textChannelResults.length=this._limit),this._voiceChannelResults.length>this._limit&&(this._voiceChannelResults.length=this._limit),this._guildResults.length>this._limit&&(this._guildResults.length=this._limit),this._applicationResults.length>this._limit&&(this._applicationResults.length=this._limit)},t.setResultTypes=function(e){this.resultTypes=null!=e?new Set(e):null,this._userResults=this._include(f.AutocompleterResultTypes.USER)?this._userResults:[],this._groupDMResults=this._include(f.AutocompleterResultTypes.GROUP_DM)?this._groupDMResults:[],this._textChannelResults=this._include(f.AutocompleterResultTypes.TEXT_CHANNEL)?this._textChannelResults:[],this._voiceChannelResults=this._include(f.AutocompleterResultTypes.VOICE_CHANNEL)?this._voiceChannelResults:[],this._guildResults=this._include(f.AutocompleterResultTypes.GUILD)?this._guildResults:[],this._applicationResults=this._include(f.AutocompleterResultTypes.APPLICATION)?this._applicationResults:[]},t._include=function(e){return null==this.resultTypes||this.resultTypes.has(e)},t._isAsyncSearch=function(){return this._include(f.AutocompleterResultTypes.USER)},t.setOptions=function(e,t){void 0===t&&(t=!1),this.options=t?_({},this.options,e):e,this.options.blacklist?this._userBlacklist=Array.from(this.options.blacklist).map(function(e){return e.startsWith("user:")?e.replace("user:",""):""}).filter(function(e){return""!==e}):this._userBlacklist=null},t.search=function(e,t){if(this.query=e,""===e.trim())return this.clear(),void this.updateAllResults();this.queryUsers(e,t,this._limit),this._groupDMResults=this.queryGroupDMs(e,this._limit),this._textChannelResults=this.queryTextChannels(e,this._limit),this._voiceChannelResults=this.queryVoiceChannels(e,this._limit),this._guildResults=this.queryGuilds(e,this._limit),this._applicationResults=this.queryApplications(e,this._limit),this._isAsyncSearch()?(clearTimeout(this._asyncTimeout),this._asyncTimeout=setTimeout(this.updateAllResults,300)):this.updateAllResults()},t.clear=function(){var e=this.userSearchContext;null!=e&&e.clearQuery(),this.results=[],this._userResults=[],this._groupDMResults=[],this._textChannelResults=[],this._voiceChannelResults=[],this._guildResults=[],this._applicationResults=[]},t.destroy=function(){var e=this.userSearchContext;null!=e&&(e.destroy(),this.userSearchContext=null)},t.queryTextChannels=function(e,t){if(!this._include(f.AutocompleterResultTypes.TEXT_CHANNEL))return[];var n=O(f.AutocompleterResultTypes.TEXT_CHANNEL,this.options),r=this.options.blacklist,a=null!=r?function(e){return!r.has("channel:"+e.id)}:void 0;return g(d.default.queryChannels(e,null,1/0,!1,a).map(function(e){var t=e.channel,r=e.score,a=e.comparator;return(0,h.default)(f.AutocompleterResultTypes.TEXT_CHANNEL,t,T(r,n[t.id]),a)}),t)},t.queryVoiceChannels=function(e,t){if(!this._include(f.AutocompleterResultTypes.VOICE_CHANNEL))return[];var n=this.options.voiceChannelGuildFilter;if(void 0===n)return[];var r=O(f.AutocompleterResultTypes.VOICE_CHANNEL,this.options);return g(d.default.queryChannels(e,n,1/0,!1,function(){return!0},v.ChannelTypes.GUILD_VOICE).map(function(e){var t=e.channel,n=e.score,a=e.comparator;return(0,h.default)(f.AutocompleterResultTypes.VOICE_CHANNEL,t,T(n,r[t.id]),a)}),t)},t.queryGuilds=function(e,t){if(!this._include(f.AutocompleterResultTypes.GUILD))return[];var n=O(f.AutocompleterResultTypes.GUILD,this.options),r=this.options.blacklist,a=null!=r?function(e){return!r.has("guild:"+e.id)}:void 0;return g(d.default.queryGuilds(e,1/0,!0,a).map(function(e){var t=e.guild,r=e.score,a=e.comparator;return(0,h.default)(f.AutocompleterResultTypes.GUILD,t,T(r,n[t.id]),a)}),t)},t.queryUsers=function(e,t,n){var r=this.userSearchContext;if(null!=r&&this._include(f.AutocompleterResultTypes.USER)){var a=this.options.userFilters;void 0!==t&&c.default.requestMembers(t,e,100),r.setLimit(n),r.setQuery(e,a,this._userBlacklist,O(f.AutocompleterResultTypes.USER,this.options))}},t.queryGroupDMs=function(e,t){if(!this._include(f.AutocompleterResultTypes.GROUP_DM))return[];var n=this.options.blacklist,r=O(f.AutocompleterResultTypes.GROUP_DM,this.options),a=null!=n?function(e){return!n.has("channel:"+e.id)}:void 0;return g(d.default.queryGroupDMs(e,1/0,!0,a).map(function(e){var t=e.channel,n=e.score,a=e.comparator;return(0,h.default)(f.AutocompleterResultTypes.GROUP_DM,t,T(n,r[t.id]),a)}),t)},t.queryApplications=function(e,t){return this._include(f.AutocompleterResultTypes.APPLICATION)?g(d.default.queryApplications(e,1/0,!0).map(function(e){var t=e.application,n=e.score,r=e.comparator;return(0,h.default)(f.AutocompleterResultTypes.APPLICATION,t,T(n),r)}),t):[]},e}();t.default=A},8258:function(e,t,n){"use strict";t.__esModule=!0,t.default=function e(t,n,a,o){var i=a.length;var l=o;var u=n;if(0===i)return 0;if(null==l)l=u;else if(l===u)return u;u+=t===r.FindResultDirections.UP?-1:1;if(u<0||u>=i)return e(t,u<0?i:-1,a,l);var s=a[u];if(s.type===r.AutocompleterResultTypes.HEADER)return e(t,u,a,l);return u};var r=n(6850)},8259:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SEARCH_GIFS=void 0;var r=n(80),a=n(1),o={binds:["mod+g"],global:!0,action:function(){return r.ComponentDispatch.dispatchToLastSubscribed(a.ComponentActions.TOGGLE_GIF_PICKER),!1}};t.SEARCH_GIFS=o;var i={SEARCH_GIFS:o};t.default=i},8260:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=d(n(6)),a=d(n(860)),o=d(n(39)),i=d(n(340)),l=d(n(6686)),u=n(6687),s=n(1);function d(e){return e&&e.__esModule?e:{default:e}}var c=r.default.throttle(function(e){void 0===e&&(e=1);var t,n=i.default.getFlattenedGuildIds(),r=a.default.getGuildId(),s=-1;if(r&&(s=n.indexOf(r)),-2===(s+=e)&&(s=n.length-1),s>=n.length||s<0)(0,u.transitionToPage)(l.default.getHomeLink());else{t=n[s];var d=o.default.getChannelId(t);(0,u.transitionToChannel)(t,d===t?null:d,!1)}},s.NAVIGATION_THROTTLE);t.default=c},8261:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TOGGLE_CHANNEL_PINS=void 0;var r=n(80),a=n(1),o={binds:["mod+p"],global:!0,action:function(){return r.ComponentDispatch.dispatch(a.ComponentActions.TOGGLE_CHANNEL_PINS),!1}};t.TOGGLE_CHANNEL_PINS=o;var i={TOGGLE_CHANNEL_PINS:o};t.default=i},8262:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TOGGLE_HELP=void 0;var r=n(183),a={binds:["mod+shift+h","f1"],global:!0,action:function(){return window.open(r.SUPPORT_LOCATION),!1}};t.TOGGLE_HELP=a;var o={TOGGLE_HELP:a};t.default=o},8263:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TOGGLE_MENTIONS=void 0;var r=n(80),a=n(1),o={binds:["mod+i"],global:!0,action:function(){return r.ComponentDispatch.dispatch(a.ComponentActions.TOGGLE_MENTIONS),!1}};t.TOGGLE_MENTIONS=o;var i={TOGGLE_MENTIONS:o};t.default=i},8264:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TOGGLE_USERS=void 0;var r,a=(r=n(7502))&&r.__esModule?r:{default:r},o=n(1);var i={binds:["mod+u"],global:!0,action:function(){return a.default.toggleSection(o.ChannelSections.MEMBERS),!1}};t.TOGGLE_USERS=i;var l={TOGGLE_USERS:i};t.default=l},8265:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=p(n(6)),a=n(67),o=p(n(860)),i=p(n(470)),l=p(n(340)),u=p(n(279)),s=n(226),d=n(80),c=n(6687),f=n(1);function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e===f.ME)return u.default.getPrivateChannelIds();var t=i.default.getCategories(e);return(0,s.getFlattenedChannelList)(t._categories,t,function(e){var t=e.channel;return(0,a.isGuildSelectableChannelType)(t.type)&&!(0,s.isChannelCollapsed)(t)}).map(function(e){return e.channel.id})}var m=r.default.throttle(function(e,t,n){void 0===e&&(e=1),void 0===t&&(t=function(e,t){return!0}),void 0===n&&(n=function(e){return!0});for(var r,a=o.default.getGuildId()||f.ME,i=function(e,t){var n=[f.ME].concat(l.default.getFlattenedGuildIds()),r=n.indexOf(e);return t>0?n.slice(r).concat(n.slice(0,r),e):(n.splice(r,0,e),n.slice(r+1).concat(n.slice(0,r+1)))}(a,e),u=e>0?0:i.length-1,s=h(a),p=s.indexOf(o.default.getChannelId(a))+e;a;){if(r=s[p],n(a))for(;r;){if(t(a,r))return(0,c.transitionToChannel)(a,r);r=s[p+=e]}if(!(a=i[u+=e]))break;s=h(a),p=e<0?s.length-1:0}d.ComponentDispatch.dispatch(f.ComponentActions.SHAKE_APP,{duration:200,intensity:2})},f.NAVIGATION_THROTTLE);t.default=m},8266:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.UPLOAD_FILE=void 0;var r=l(n(14)),a=l(n(39)),o=n(80),i=n(1);function l(e){return e&&e.__esModule?e:{default:e}}var u={binds:["mod+shift+u"],global:!0,action:function(){var e=r.default.getChannel(a.default.getChannelId());return null==e||e.isManaged()||o.ComponentDispatch.dispatch(i.ComponentActions.UPLOAD_FILE),!1}};t.UPLOAD_FILE=u;var s={UPLOAD_FILE:u};t.default=s},8301:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=L(n(0)),o=D(n(8)),i=n(7509),l=D(n(6743)),u=D(n(3)),s=D(n(192)),d=L(n(7053)),c=D(n(6861)),f=D(n(6746)),p=D(n(120)),h=D(n(6862)),m=D(n(14)),v=D(n(87)),y=D(n(868)),_=D(n(6636)),g=D(n(39)),E=D(n(8385)),S=D(n(58)),I=D(n(223)),T=n(80),O=L(n(8386)),A=L(n(7543)),N=L(n(6745)),C=D(n(8388)),M=n(6576),b=n(1),R=D(n(4)),P=D(n(6213));function D(e){return e&&e.__esModule?e:{default:e}}function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function w(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n(6214);var U=512,k=(0,l.default)(d.search,500),G=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={focused:!1},n._searchPopoutRef=a.createRef(),n.handleSetSearchQuery=function(e){var t=e.query,r=e.anchor,a=e.focus,o=e.performSearch,i=e.replace,l=n.props.editorState,u=A.getFirstTextBlock(l);" "!==t.charAt(t.length-1)&&(t+=" "),r&&" "!==u.charAt(r-1)&&" "!==t.charAt(0)&&(t=" "+t),i?(l=A.replaceAllContent(t,l),r=0):l=A.updateContent(t,l,r,a),l=A.truncateContent(l,U),l=n.tokenize(l);var s=r+t.length;l=A.setCollapsedSelection(s,l),n.setEditorState(l),o&&n.search(A.getFirstTextBlock(l))},n.renderPopout=function(){return a.createElement(C.default,{ref:n._searchPopoutRef})},n.search=function(e){var t=n.props,r=t.searchId,a=t.isSearching;if(!e){var o=n.props.editorState;e=A.getFirstTextBlock(o)}if(r&&!a){for(var i=N.tokenizeQuery(e),l=N.getSearchQueryFromTokens(i),u=0;u<i.length;u++)N.filterHasAnswer(i[u],i[u+1])||(e=e.substring(0,i[u].start)+e.substring(i[u].end));if(!i.length||0===Object.keys(l).length)return!1;k(r,l,e),n.onBlur()}return!0},n.handleClearSearch=function(e){var t=n.props.editorState,r=n.state.focused;e.preventDefault(),e.stopPropagation(),""!==A.getFirstTextBlock(t)?(t=A.truncateContent(t,0),n.setEditorState(t),r||Promise.resolve().then(function(){return n.blurEditor()})):n.focusEditor()},n.handleFocusSearch=function(e){if(e.prefillCurrentChannel&&A.isEmpty(n.props.editorState)){var t=g.default.getChannelId(),r=m.default.getChannel(t);if(null==r||r.isPrivate())n.focusEditor();else{var a=v.default.getTextChannelNameDisambiguations(r.getGuildId())[r.id],o=null!=a?a.name:r.name;n.handleSetSearchQuery({query:f.default[b.SearchTokenTypes.FILTER_IN].key+"#"+o+" ",replace:!0})}}else n.focusEditor()},n.focusEditor=function(){var e=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)._editorRef;e&&Promise.resolve().then(function(){return e.focus()})},n.blurEditor=function(){n._editorRef&&n._editorRef.blur()},n.setEditorRef=function(e){n._editorRef=e},n.setPopoutRef=function(e){n._popoutRef=e},n.onFocus=function(){var e=n.props.searchType;p.default.trackWithMetadata(b.AnalyticEvents.SEARCH_OPENED,{search_type:e}),n.setState({focused:!0})},n.onBlur=function(){n.setState({focused:!1},function(){s.default.close(b.SEARCH_POPOUT_ID),A.isEmpty(n.props.editorState)&&n.clearSearch()})},n.onDownArrow=function(e){e.preventDefault();var t=n._searchPopoutRef.current;return null!=t&&t.focusNextOption(),!0},n.onUpArrow=function(e){e.preventDefault();var t=n._searchPopoutRef.current;return null!=t&&t.focusPreviousOption(),!0},n.onTab=function(e){if(!b.EnableAccessibility){e.preventDefault();var t=n._searchPopoutRef.current;return null!=t&&t.selectOption(),!0}},n.handleReturn=function(e){e.preventDefault();var t=n._searchPopoutRef.current;return null!=t&&t.selectOption()||n.search(),!0},n.onEscape=function(e){return e.preventDefault(),e.stopPropagation(),n.blurEditor(),!0},n.handleBeforeInput=function(e){var t=n.props.editorState,r=n.state.focused;return A.getFirstTextBlock(t).length>=U||(t=A.updateContent(e,t),t=A.truncateContent(t,U),t=n.tokenize(t),n.setEditorState(t),r||n.setState({focused:!0}),!0)},n.handleKeyCommand=function(e){var t=n.props.editorState,r=n.state.focused;switch(e){case"backspace":case"backspace-word":case"backspace-to-start-of-line":case"delete":case"delete-word":return t=A.deleteContent(e,t),t=n.tokenize(t),n.setEditorState(t),r||n.setState({focused:!0}),!0;case"transpose-characters":case"move-selection-to-start-of-block":case"move-selection-to-end-of-block":return t=A.miscCommand(e,t),t=n.tokenize(t),n.setEditorState(t),!0;case"split-block":case"underline":case"bold":case"italic":return!0}},n.handlePastedText=function(e){var t=n.props.editorState,r=n.state.focused;return e=null!=e?e.replace(/\n/g,""):"",t=A.updateContent(e,t),t=A.truncateContent(t,U),t=n.tokenize(t),r||n.setState({focused:!0}),n.setEditorState(t),!0},n.setEditorState=function(e){var t=n.props.searchId;d.setSearchState(t,e)},n.handleKeyBind=function(e){var t=e.key,r=e.metaKey,a=e.shiftKey,o=n.props.editorState;return e.stopPropagation(),"Home"===t||"ArrowLeft"===t&&r?(e.preventDefault(),o=a?A.setToStartSelection(o):A.setCollapsedStartSelection(o),n.setEditorState(o),!0):"End"===t||"ArrowRight"===t&&r?(e.preventDefault(),o=a?A.setToEndSelection(o):A.setCollapsedEndSelection(o),n.setEditorState(o),!0):A.getDefaultKeyBinding(e)},N.clearTokenCache(),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=r.prototype;return l.componentDidMount=function(){T.ComponentDispatch.subscribe(b.ComponentActions.PERFORM_SEARCH,this.search),T.ComponentDispatch.subscribe(b.ComponentActions.SET_SEARCH_QUERY,this.handleSetSearchQuery),T.ComponentDispatch.subscribe(b.ComponentActions.FOCUS_SEARCH,this.handleFocusSearch)},l.componentDidUpdate=function(e){var t=this.props,n=t.editorState,r=t.searchId;if(this.state.focused&&this.ensurePopoutIsOpen(),n!==e.editorState){var a=N.tokenizeQuery(A.getFirstTextBlock(n)),o=O.getSelectionScope(a,n);d.updateAutocompleteQuery(r,a,o),this._editorRef&&A.scrollCursorIntoView(this._editorRef.editor)}},l.componentWillUnmount=function(){T.ComponentDispatch.unsubscribe(b.ComponentActions.PERFORM_SEARCH,this.search),T.ComponentDispatch.unsubscribe(b.ComponentActions.SET_SEARCH_QUERY,this.handleSetSearchQuery),T.ComponentDispatch.unsubscribe(b.ComponentActions.FOCUS_SEARCH,this.handleFocusSearch)},l.tokenize=function(e){var t=N.tokenizeQuery(A.getFirstTextBlock(e)).filter(function(e){return e.type!==c.default.NON_TOKEN_TYPE});return A.applyTokensAsEntities(t,e,f.default)},l.clearSearch=function(){var e=this.props.searchId;e&&d.clearSearchState(e)},l.ensurePopoutIsOpen=function(){this._popoutRef&&!y.default.isOpen(b.SEARCH_POPOUT_ID)&&this._popoutRef.open()},l.handlePastedFiles=function(){return!0},l.handleDroppedFiles=function(){return!0},l.handleDrop=function(){return!0},l.renderInput=function(){var e=this.props.editorState;return a.createElement(i.Editor,{ref:this.setEditorRef,onDownArrow:this.onDownArrow,onUpArrow:this.onUpArrow,onTab:this.onTab,onEscape:this.onEscape,onBlur:this.onBlur,onFocus:this.onFocus,handleReturn:this.handleReturn,handleBeforeInput:this.handleBeforeInput,handleKeyCommand:this.handleKeyCommand,handlePastedText:this.handlePastedText,handlePastedFiles:this.handlePastedFiles,handleDroppedFiles:this.handleDroppedFiles,handleDrop:this.handleDrop,keyBindingFn:this.handleKeyBind,placeholder:R.default.Messages.SEARCH,editorState:e,onChange:this.setEditorState})},l.render=function(){var e,t=this.props,n=t.searchId,r=t.editorState,i=t.hasResults,l=t.className,u=this.state.focused,s=!!A.getFirstTextBlock(r).length;return n?a.createElement(I.default,{ref:this.setPopoutRef,uniqueId:b.SEARCH_POPOUT_ID,render:this.renderPopout,position:I.default.Positions.BOTTOM,toggleClose:!1,animationType:I.default.Animations.NONE,preventInvert:!0},w("div",{className:l},void 0,w(S.default,{className:(0,o.default)(P.default.search,(e={},e[P.default.open]=s||u,e[P.default.focused]=u,e)),onClick:this.focusEditor},void 0,w("div",{className:P.default.searchBar},n,this.renderInput(),w(M.SearchBarIcon,{onClear:this.handleClearSearch,hasContent:s||i,className:P.default.icon}))))):null},r}(a.PureComponent);G.displayName="Search";var F=u.default.connectStores([_.default,h.default,E.default],function(){var e=_.default.getCurrentSearchId();return{searchId:e,searchType:_.default.getSearchType(),isSearching:!!e&&_.default.isSearching(e),editorState:e&&_.default.getEditorState(e)||A.createEmptyEditorState(O.generateDecorators(f.default)),hasResults:_.default.hasResults(e)}})(G);t.default=F},8381:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(101)),a=i(n(12)),o=n(1);function i(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t,n){this.isCanceled=!1,this.searchId=e,this.searchType=t,this.query=n}var t=e.prototype;return t.fetch=function(e,t,n){var i=this;if(!this.isCanceled){var l=this.searchType===o.SearchTypes.GUILD?o.Endpoints.SEARCH_GUILD:o.Endpoints.SEARCH_CHANNEL;this.searchId&&a.default.get({url:l(this.searchId),query:r.default.stringify(this.query)}).then(function(r){i.isCanceled||(200===r.status?e(r):202===r.status&&(i.query.attempts=(i.query.attempts||0)+1,i.retryDelay=r.body.retry_after||5e3,i.retryLater(e,t,n),t(r)))}).catch(function(e){console.error(e),n(e)})}},t.cancel=function(){this.isCanceled=!0,null!=this.indexingPollId&&clearTimeout(this.indexingPollId)},t.retryLater=function(e,t,n){null!=this.indexingPollId&&clearTimeout(this.indexingPollId),this.indexingPollId=setTimeout(this.fetch.bind(this,e,t,n),this.retryDelay)},e}();t.default=l},8382:function(e,t,n){"use strict";t.__esModule=!0,t.analyze=c,t.shouldHighlight=f,t.highlightAST=p,t.createASTHighlighter=function(e){var t=new Set(c(e));return function(e){return p(e,t)}};var r=o(n(6)),a=o(n(8383));function o(e){return e&&e.__esModule?e:{default:e}}var i=new Set(["a","an","and","are","as","at","be","but","by","for","if","in","into","is","it","no","not","of","on","or","such","that","the","their","then","there","these","they","this","to","was","will","with"]);function l(e){return e.replace(/('|\u2019|\uFF07)(s|S)$/,"")}function u(e){return e.toLowerCase()}function s(e){return i.has(e)}function d(e){return 0===e.length}function c(e){return(0,r.default)(e.split(/\W+/)).map(l).reject(d).map(u).reject(s).map(a.default).value()}function f(e,t){return!d(e=u(l(e)))&&!s(e)&&t.has((0,a.default)(e))}function p(e,t){if(Array.isArray(e))e.forEach(function(e){return p(e,t)});else if("string"==typeof e.content&&"codeBlock"!==e.type){var n=[],r="";e.content.split(/(\W+)/g).forEach(function(e){f(e,t)?(r.length>0&&n.push({type:"text",content:r}),n.push({type:"highlight",content:e}),r=""):r+=e}),n.length>0&&(r.length>0&&n.push({type:"text",content:r}),"text"===e.type?e.content=n:e.content=[{type:"text",content:n}])}else null!=e.content&&p(e.content,t);return e}},8384:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(52)),a=o(n(358));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t,n;function r(t){var n;return(n=e.call(this)||this).message=t.message,n.hit=t.hit||!1,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.create=function(e,t){var n=e.hit,o=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["hit"]),i=a.default.create(o,function(e){return n?t(e):e});return new r({hit:n,message:i})},r}(r.default);t.default=i},8385:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=h(n(3)),a=n(45),o=h(n(2)),i=h(n(344)),l=h(n(14)),u=h(n(40)),s=h(n(39)),d=h(n(153)),c=h(n(25)),f=h(n(72)),p=n(1);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=p.ThemeTypes.DARK,y=null;function _(){v=c.default.theme}function g(){y=s.default.getChannelId(d.default.getGuildId())}function E(e){return e.channelId===y}var S=new(function(e){var t,n,r,o,h;function E(){return e.apply(this,arguments)||this}return n=e,(t=E).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,E.prototype.initialize=function(){this.waitFor(c.default,i.default,d.default,s.default,f.default),this.syncWith([c.default],_),this.syncWith([d.default,s.default,i.default],g)},r=E,(o=[{key:"theme",get:function(){if(null!=y){var e=d.default.getGuildId(),t=l.default.getChannel(y),n=f.default.isInChannel(t)&&(null!=e||f.default.hasVideo(t))&&u.default.supports(a.Features.VIDEO)?i.default.getLayout(y):null;return n===p.ChannelLayouts.NORMAL||n===p.ChannelLayouts.NO_CHAT?p.ThemeTypes.DARK:v}return v}}])&&m(r.prototype,o),h&&m(r,h),E}(r.default.Store))(o.default,{VOICE_STATE_UPDATE:E,CHANNEL_RTC_UPDATE_LAYOUT:E});t.default=S},8386:function(e,t,n){"use strict";t.__esModule=!0,t.matchColonGroup=f,t.generateDecorators=function(e){void 0===e&&(e={});var t=[];return Object.keys(e).forEach(function(n){var r=e[n];t.push({strategy:function(e,t,r){return f(r,e,t,n)},component:c[r.componentType]})}),t},t.cleanQueryTokens=function(e,t){var n=!1,r=[];if(e.forEach(function(t,a){var o=e[a];r.push(t.getFullMatch()),d.IS_SEARCH_ANSWER_TOKEN.test(t.type)&&(o&&o.type!==i.default.NON_TOKEN_TYPE||!o)&&(n=!0,r.push(" "))}),!n)return t;return(0,u.replaceAllContent)(r.join(""),t)},t.getSelectionScope=function(e,t){var n=t.getSelection(),r=n.focusOffset,a=n.anchorOffset;return(0,s.getSelectionScope)(e,r,a)},t.Components=void 0;var r,a,o=n(8387),i=(r=n(6861))&&r.__esModule?r:{default:r},l=n(6746),u=n(7543),s=n(6745),d=n(1);var c=((a={})[l.ComponentTypes.FILTER]=o.Filter,a[l.ComponentTypes.ANSWER]=o.Answer,a);function f(e,t,n,r){t.findEntityRanges(function(t){var n=t.getEntity();return null!==n&&e.getEntity(n).getType()===r},n)}t.Components=c},8387:function(e,t,n){"use strict";t.__esModule=!0,t.Answer=t.Filter=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a,o=(r=n(6207))&&r.__esModule?r:{default:r};function i(e,t){return function(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}("span",{className:t},void 0,e.children)}i.displayName="renderToken";t.Filter=function(e){return i(e,o.default.searchFilter)};t.Answer=function(e){return i(e,o.default.searchAnswer)}},8388:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SearchPopoutComponent=t.GroupData=void 0;var r,a,o=U(n(0)),i=w(n(8)),l=w(n(16)),u=w(n(6)),s=w(n(5)),d=n(3),c=n(7053),f=n(6861),p=U(n(6746)),h=w(n(137)),m=w(n(14)),v=w(n(53)),y=w(n(8389)),_=w(n(39)),g=w(n(153)),E=w(n(25)),S=w(n(106)),I=w(n(8390)),T=w(n(58)),O=w(n(42)),A=w(n(65)),N=n(6533),C=n(80),M=w(n(183)),b=U(n(6745)),R=w(n(8394)),P=n(1),D=w(n(4)),L=w(n(6212));function w(e){return e&&e.__esModule?e:{default:e}}function U(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var F=(0,s.default)("2015-05-15").local();var j=function(e,t,n){var r=n.user,a=n.text;if(null==r)return G("strong",{},void 0,a);var o=v.default.getNick(e,r.id)||r.username,i=r.avatarURL||r.getAvatarURL();return[G("img",{alt:"",className:L.default.displayAvatar,src:i},"avatar-"+t+"-"+r.id),G("span",{className:L.default.displayedNick},"display-nick-"+t+"-"+r.id,o),G("span",{className:L.default.displayUsername},"display-username-"+t+"-"+r.id,a)]},H=function(e,t,n){var r=n.channel,a=n.text;if(null==r)return G("strong",{},void 0,a);var o=m.default.getChannel(r.parent_id),i=(0,N.getIconNameForChannel)(r);return G("div",{className:L.default.resultChannel},void 0,null!=i?G(O.default,{name:i,className:L.default.searchResultChannelIcon}):null,G("strong",{},void 0,(0,h.default)(r)),null!=o?G("span",{className:L.default.searchResultChannelCategory},void 0,(0,h.default)(o)):null)};H.displayName="renderChannel";var x=function(e){var t,n,r,a=e.searchId,o=e.result,l=e.group,u=e.selected,s=e.className,d=e.onSelect,c=e.onFocus,f=e.showFilter,h=e.renderResult;return f&&(n=G("span",{className:L.default.filter},void 0,p.default[l].key||"addme:")),r=h?h(a,l,o):G("strong",{},void 0,o.text),G(T.default,{className:(0,i.default)(L.default.option,s,(t={},t[L.default.selected]=u,t)),onClick:d,onMouseOver:c,onFocus:c},void 0,n,r,G(O.default,{name:O.default.Names.PLUS_ALT,className:L.default.plusIcon}))};x.displayName="ResultComponent";var B=function(e){return o.createElement(x,k({},e,{className:L.default.user,renderResult:j}))};B.displayName="UserResultComponent";var V=function(e){return o.createElement(x,k({},e,{renderResult:H}))};function K(e){var t,n=e.selected,r=e.onSelect,a=e.onFocus,l=e.result,u="",s=o.useMemo(function(){return e=l.text,b.tokenizeQuery(e).map(function(e,t,n){return b.filterHasAnswer(e,n[t+1])?e:new f.Token(e.getFullMatch(),f.NON_TOKEN_TYPE)});var e},[l.text]).map(function(e){var t,n=e.getFullMatch();if(""===n.trim())return null;var r=P.IS_SEARCH_FILTER_TOKEN.test(e.type),a=P.IS_SEARCH_ANSWER_TOKEN.test(e.type),o=!r&&!a;return u+=n,G("span",{className:(0,i.default)((t={},t[L.default.filter]=r,t[L.default.answer]=a,t[L.default.nonText]=o,t))},e.type+n,n)});return G(T.default,{className:(0,i.default)(L.default.option,L.default.history,(t={},t[L.default.selected]=n,t)),onClick:r,onMouseOver:a,onFocus:a,"aria-label":D.default.Messages.SEARCH_FROM_SUGGESTIONS.format({suggestion:u})},void 0,s,G(O.default,{name:O.default.Names.PLUS_ALT,className:L.default.plusIcon}))}V.displayName="ChannelResultComponent",K.displayName="HistoryComponent";var W=((r={})[P.SearchTokenTypes.FILTER_FROM]={titleText:function(){return D.default.Messages.SEARCH_GROUP_HEADER_FROM},component:B},r[P.SearchTokenTypes.FILTER_MENTIONS]={titleText:function(){return D.default.Messages.SEARCH_GROUP_HEADER_MENTIONS},component:B},r[P.SearchTokenTypes.FILTER_HAS]={titleText:function(){return D.default.Messages.SEARCH_GROUP_HEADER_HAS}},r[P.SearchTokenTypes.FILTER_FILE_TYPE]={titleText:function(){return D.default.Messages.SEARCH_GROUP_HEADER_FILE_TYPE}},r[P.SearchTokenTypes.FILTER_IN]={titleText:function(){return D.default.Messages.SEARCH_GROUP_HEADER_CHANNELS},component:V},r[P.SearchAutocompleteGroups.DATES]={titleText:function(){return D.default.Messages.SEARCH_GROUP_HEADER_DATES}},r[P.SearchAutocompleteGroups.HISTORY]={titleText:function(){return D.default.Messages.SEARCH_GROUP_HEADER_HISTORY},groupTip:function(e){var t=e.searchId;return G(A.default,{text:D.default.Messages.SEARCH_CLEAR_HISTORY,position:A.default.Positions.LEFT},void 0,function(e){var n=e.onMouseEnter,r=e.onMouseLeave;return G(T.default,{onClick:function(){return(0,c.clearHistory)(t)},onMouseEnter:n,onMouseLeave:r,className:L.default.searchClearHistory,title:D.default.Messages.SEARCH_CLEAR_HISTORY,"aria-label":D.default.Messages.SEARCH_CLEAR_HISTORY},void 0,G(O.default,{name:O.default.Names.CLEAR_HISTORY}))})},component:K},r[P.SearchAutocompleteGroups.SEARCH_OPTIONS]={titleText:function(){return D.default.Messages.SEARCH_GROUP_HEADER_SEARCH_OPTIONS},groupTip:function(){return G(A.default,{text:D.default.Messages.LEARN_MORE,position:A.default.Positions.LEFT},void 0,function(e){return o.createElement("div",k({className:L.default.searchLearnMore},e),G(S.default,{href:M.default.getArticleURL(P.HelpdeskArticles.USING_SEARCH),title:D.default.Messages.LEARN_MORE},void 0,G(O.default,{name:O.default.Names.LEARN_MORE})))})},component:function(e){var t,n,r=e.result,a=e.selected,o=e.onSelect,l=e.onFocus,u=b.getSearchOptionAnswer(r.token);return G(T.default,{className:(0,i.default)(L.default.option,L.default.searchOption,(t={},t[L.default.selected]=a,t)),onClick:o,onMouseOver:l,onFocus:l},void 0,G("span",{className:L.default.filter},void 0,r.text),G("span",{className:(0,i.default)((n={},n[L.default.answer]=u,n))},void 0,u),G(O.default,{name:O.default.Names.PLUS_ALT,className:L.default.plusIcon}))}},r);t.GroupData=W;var z=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={dateHint:(0,p.getRandomDateShortcut)(),selectedIndex:-1},t.handleDateChange=function(e){t.setSearchQuery(e.format(P.SEARCH_DATE_FORMAT)+" ",!0)},t.keepCurrentOptionSelected=function(e,n){var r=t.state.selectedIndex,a=t.props,o=a.resultsState,i=a.totalResults,l=o.mode,u=o.autocompletes,s=e.resultsState;if(l.type!==s.mode.type)t.setState({selectedIndex:-1});else if(n.selectedIndex>=0&&(n.selectedIndex===r||s.autocompletes.length!==u.length)){var d=b.getFlattenedStringArray(s.autocompletes,s.mode.type)[n.selectedIndex-1],c=b.getFlattenedStringArray(u,l.type).indexOf(d);-1!==c?t.setState({selectedIndex:c}):n.selectedIndex>=i&&t.setState({selectedIndex:i-1})}},t.focusNextOption=function(){t.focusOtherOption(1)},t.focusPreviousOption=function(){t.focusOtherOption(-1)},t.focusOtherOption=function(e){var n=t.state.selectedIndex,r=t.props.resultsState;b.showDatePicker(r.mode.filter)||t.focusOption(n+e)},t.focusOption=function(e){var n=e,r=t.props.resultsState.autocompletes,a=t.shouldShowSearchQuery();n<-1||!a&&n<0?n=b.getTotalResults(r)-1:a&&n>=b.getTotalResults(r)?n=-1:!a&&n>=b.getTotalResults(r)&&(n=0),t.setState({selectedIndex:n})},t.selectOption=function(e){var n=e;if(null==n&&(n=t.state.selectedIndex),n<0)return!1;var r=t.props.resultsState,a=r.autocompletes,o=r.mode;if(!b.showDatePicker(o.filter)){var i=b.getFlattenedStringArray(a,o.type);if(n>=i.length)return!1;var l=i[n],s=function(e){var t=!0,n=e.trim();return(0,u.default)(p.default).forOwn(function(e){e.key&&n===e.key&&(t=!1)}),t}(l);return t.setSearchQuery(l,s),!0}},t.setSearchQuery=function(e,n){void 0===n&&(n=!1);var r=t.props.resultsState,a=r.mode,o=r.cursorScope,i=0;a.token?i=a.token.start:o&&o.currentToken&&(i=o.currentToken.end);var l=a.token?a.token.end:i;C.ComponentDispatch.dispatch(P.ComponentActions.SET_SEARCH_QUERY,{query:e,anchor:i,focus:l,performSearch:n}),t.setState({selectedIndex:-1})},t.shouldShowSearchQuery=function(){var e=t.props.resultsState.mode;return e.type!==P.SearchPopoutModes.FILTER&&e.type!==P.SearchPopoutModes.EMPTY&&!b.showDatePicker(e.filter)},t.renderDatePicker=function(){return G("div",{className:L.default.datePicker},void 0,G(I.default,{locale:t.props.locale,onSelect:t.handleDateChange,maxDate:(0,s.default)().local(),minDate:F}),G("div",{className:L.default.datePickerHint},void 0,G("span",{className:L.default.hint},void 0,D.default.Messages.SEARCH_DATE_PICKER_HINT,""),G(T.default,{tag:"span",className:L.default.hintValue,onClick:t.handleHintClick},void 0,t.state.dateHint)))},t.handleHintClick=function(){t.setSearchQuery(t.state.dateHint,!0)},t.performSearch=function(){C.ComponentDispatch.dispatch(P.ComponentActions.PERFORM_SEARCH)},t.renderAutocompletes=function(){var e=t.state.selectedIndex,n=t.props.searchId,r=t.props.resultsState,a=r.autocompletes,o=r.mode;if(b.showDatePicker(o.filter))return t.renderDatePicker();var i=-1;return a.map(function(r){if(!r||!r.results.length)return null;var a,l=W[r.group]||{};l.titleText&&(a=G("div",{className:L.default.header},void 0,l.titleText()));var u=l.groupTip||null;u&&(u=G(u,{searchId:n}));var s=l.component||x,d=o.type===P.SearchPopoutModes.FILTER_ALL||!1;return G("div",{className:L.default.resultsGroup},r.group,a,u,r.results.map(function(a){return a&&r?(i+=1,G(s,{searchId:n,group:a.group||r.group,result:a,showFilter:d,selected:e===i,onSelect:t.selectOption.bind(null,i),onFocus:t.focusOption.bind(null,i)},r.group+"-"+a.text+"-"+(a.key||""))):null}))})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidUpdate=function(e,t){var n=this.props,r=n.resultsState,a=n.totalResults,o=r.mode,i=e.resultsState;o.filter&&!i.mode.filter&&a?this.setState({selectedIndex:0}):o.type===P.SearchPopoutModes.FILTER_ALL&&i.mode.type!==o.type?this.setState({selectedIndex:-1}):this.keepCurrentOptionSelected(e,t)},a.render=function(){var e=this,t=this.state.selectedIndex,n=this.props,r=n.resultsState,a=n.totalResults;return G(R.default,{numResults:a,query:r.query,hideQuery:!this.shouldShowSearchQuery(),focusedIndex:t,renderCustomResults:this.renderAutocompletes,renderInitialState:this.renderAutocompletes,onHighlightQuery:function(){return e.focusOption(-1)},onSelectQuery:this.performSearch,renderNoResults:function(){return null}})},r}(o.PureComponent);t.SearchPopoutComponent=z,z.displayName="SearchPopoutComponent";var Y=o.forwardRef(function(e,t){var n=(0,d.useStateFromStoresArray)([g.default,_.default,y.default],function(){var e=g.default.getGuildId(),t=_.default.getChannelId(),n=e||t;(0,l.default)(null!=n,"SearchPopout.getStateFromStores - invalid searchId");var r=y.default.getState(n);return[n,r,b.getTotalResults(r.autocompletes)]}),r=n[0],a=n[1],i=n[2],u=(0,d.useStateFromStores)([E.default],function(){return E.default.locale});return o.createElement(z,k({},e,{searchId:r,resultsState:a,totalResults:i,locale:u,ref:t}))});t.default=Y},8389:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=v(n(3)),a=v(n(2)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(6746)),i=v(n(963)),l=v(n(904)),u=v(n(946)),s=n(6745),d=v(n(53)),c=v(n(868)),f=v(n(6636)),p=v(n(97)),h=v(n(11)),m=n(1);function v(e){return e&&e.__esModule?e:{default:e}}var y={},_={},g=10,E=3;function S(e,t,n,r,a,o){var l=_[e];return null==l&&(l={results:[],context:i.default.getSearchContext(I.bind(null,e))},_[e]=l),{query:t||"",mode:n||{type:m.SearchPopoutModes.EMPTY,filter:null,token:null},tokens:r||[],cursorScope:a||null,autocompletes:o||[]}}function I(e,t){var n=t.results,r=_[e],a=y[e];if(null!=r&&null!=a){var o=a.mode,i=o.type,l=o.filter;if(i!==m.SearchPopoutModes.EMPTY&&(i!==m.SearchPopoutModes.FILTER||l===m.SearchTokenTypes.FILTER_FROM||l===m.SearchTokenTypes.FILTER_MENTIONS)){var u=E;a.mode.type===m.SearchPopoutModes.FILTER&&(u=g),r.results=function(e,t){void 0===t&&(t=g);(e=e.reduce(function(e,t){var n=h.default.getUser(t.id);return null==n?e:(e.push({text:n.tag,user:n}),e)},[])).length>t&&(e.length=t);return e}(n,u);var s=a.query,d=a.mode,c=a.tokens,f=a.cursorScope,p=a.autocompletes;p=N(e,d),y[e]=S(e,s,d,c,f,p),R.emitChange()}}}function T(e,t,n,r){if(void 0===r&&(r=g),!e)return null;var a;if(e===m.SearchTokenTypes.FILTER_FROM||e===m.SearchTokenTypes.FILTER_MENTIONS){var i=_[n];null==i?a=null:(null!=t&&0!==t.getFullMatch().trim().length||(i.results=l.default.getRecentlyTalked(n,g).map(function(e){var t=e.user;return{user:t,text:t.tag}})),a=i.results)}else{var u=o.default[e]&&o.default[e].getAutocompletions,s=(null!=t?t.getFullMatch():"").trim();a=u?u(s,n,r):[]}return a&&a.length?{group:e,results:a}:null}function O(e){var t,n=(e?e.getFullMatch():"").trim(),r=((t={})[m.SearchTokenTypes.FILTER_FROM]=!p.default.hidePersonalInformation,t[m.SearchTokenTypes.FILTER_MENTIONS]=!p.default.hidePersonalInformation,t[m.SearchTokenTypes.FILTER_HAS]=!0,t[m.SearchTokenTypes.FILTER_BEFORE]=!0,t[m.SearchTokenTypes.FILTER_AFTER]=!0,t[m.SearchTokenTypes.FILTER_ON]=!0,t[m.SearchTokenTypes.FILTER_IN]=f.default.getSearchType()===m.SearchTypes.GUILD,t),a=(0,o.getFilterAutocompletions)(n).filter(function(e){return r[e.token]});return{group:m.SearchAutocompleteGroups.SEARCH_OPTIONS,results:a}}function A(e,t){var n=(e?e.getFullMatch():"").trim(),r=[];return n&&(function(e){var t=f.default.getSearchType(e),n=[m.SearchTokenTypes.FILTER_HAS];return p.default.hidePersonalInformation||(n.push(m.SearchTokenTypes.FILTER_FROM),n.push(m.SearchTokenTypes.FILTER_MENTIONS)),t===m.SearchTypes.GUILD&&n.push(m.SearchTokenTypes.FILTER_IN),n}(t).forEach(function(n){if(n){var a=T(n,e,t,E);a&&r.push(a)}}),r.push(function(e,t){var n=(e?e.getFullMatch():"").trim();if(n){var r=o.default[m.SearchTokenTypes.FILTER_BEFORE].getAutocompletions(n,t,1)[0],a=o.default[m.SearchTokenTypes.FILTER_ON].getAutocompletions(n,t,1)[0],i=o.default[m.SearchTokenTypes.FILTER_AFTER].getAutocompletions(n,t,1)[0];if(!r)return null;var l=[r,a,i];return{group:m.SearchAutocompleteGroups.DATES,results:l}}}(e,t))),(0,s.getTotalResults)(r)<5&&r.push(O(e)),r}function N(e,t){var n=[];return t.type===m.SearchPopoutModes.FILTER?n.push(T(t.filter,t.token,e,g)):t.type===m.SearchPopoutModes.FILTER_ALL?n=A(t.token,e):t.type===m.SearchPopoutModes.EMPTY&&(n.push(O(t.token)),n.push(function(e){if(p.default.hidePersonalInformation)return null;var t=f.default.getHistory(e);return t?{group:m.SearchAutocompleteGroups.HISTORY,results:t.map(function(e){return{text:e}})}:null}(e))),n}function C(){(0,s.clearTokenCache)()}function M(e){var t=y[e];if(t){var n=t.query,r=t.mode,a=t.tokens,o=t.cursorScope,i=t.autocompletes;y[e]=S(e,n,r,a,o,i.map(function(e){return e&&e.group===m.SearchAutocompleteGroups.HISTORY?null:e}))}}function b(){if(c.default.isOpen(m.SEARCH_POPOUT_ID)){var e=f.default.getCurrentSearchId();if(e&&y[e]){var t=y[e],n=t.query,r=t.mode,a=t.tokens,o=t.cursorScope;y[e]=S(e,n,r,a,o,N(e,r))}}}var R=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(d.default,p.default,c.default)},a.getState=function(e){return y[e]||S(e)},r}(r.default.Store))(a.default,{SEARCH_AUTOCOMPLETE_QUERY_UPDATE:function(e){var t=e.searchId,n=e.tokens,r=e.cursorScope;if(!c.default.isOpen(m.SEARCH_POPOUT_ID))return!1;var a,o=(0,s.getQueryFromTokens)(n),i=(0,s.getAutocompleteMode)(r,n),l=y[t]||{},d=_[t],f=!0;if(o!==l.query||l.mode&&l.mode.filter!==i.filter){if(i.type===m.SearchPopoutModes.EMPTY||i.type===m.SearchPopoutModes.FILTER&&i.filter!==m.SearchTokenTypes.FILTER_FROM&&i.filter!==m.SearchTokenTypes.FILTER_MENTIONS)null!=d&&(d.context.clearQuery(),d.results=[]),a=N(t,i);else if(null!=d){var p=i.token;null!=p&&p.getFullMatch().trim().length>0?(u.default.requestMembers(t,p.getFullMatch(),g),d.context.setQuery(p.getFullMatch().trim(),{guild:t}),a=l.autocompletes,f=!1):(d.context.clearQuery(),a=N(t,i))}}else a=l.autocompletes,f=!1;return y[t]=S(t,o,i,n,r,a),f},SEARCH_EDITOR_STATE_CLEAR:function(e){var t=e.searchId,n=_[t];null!=n&&(n.context.destroy(),n.results=[],delete _[t]),delete y[t]},CHANNEL_CREATE:function(e){return C()},CHANNEL_DELETE:function(e){return C()},STREAMER_MODE_UPDATE:function(e){return b()},POPOUT_OPEN:function(e){return b()},SEARCH_MODAL_OPEN:function(e){return b()},SEARCH_CLEAR_HISTORY:function(e){var t=e.searchId;null!=t?M(t):Object.keys(y).forEach(M)},LOGOUT:function(e){Object.keys(y).forEach(M)}}),P=R;t.default=P},8390:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),a=u(n(5)),o=u(n(8391));n(6208);var i,l=u(n(6209));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r){i||(i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===o)t.children=r;else if(o>1){for(var u=new Array(o),s=0;s<o;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:i,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var d=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.minDate,n=e.maxDate,r=e.onSelect,a=e.locale,i=e.value;return s("div",{className:l.default.calendarPicker},void 0,s(o.default,{fixedHeight:!0,inline:!0,selected:i,locale:a,onSelect:r,maxDate:n,minDate:t}))},r}(r.PureComponent);d.displayName="CalendarPicker",d.defaultProps={value:(0,a.default)().local()};var c=d;t.default=c},8392:function(e,t,n){var r={"./af":7544,"./af.js":7544,"./ar":7545,"./ar-dz":7546,"./ar-dz.js":7546,"./ar-kw":7547,"./ar-kw.js":7547,"./ar-ly":7548,"./ar-ly.js":7548,"./ar-ma":7549,"./ar-ma.js":7549,"./ar-sa":7550,"./ar-sa.js":7550,"./ar-tn":7551,"./ar-tn.js":7551,"./ar.js":7545,"./az":7552,"./az.js":7552,"./be":7553,"./be.js":7553,"./bg":7554,"./bg.js":7554,"./bm":7555,"./bm.js":7555,"./bn":7556,"./bn.js":7556,"./bo":7557,"./bo.js":7557,"./br":7558,"./br.js":7558,"./bs":7559,"./bs.js":7559,"./ca":7560,"./ca.js":7560,"./cs":7561,"./cs.js":7561,"./cv":7562,"./cv.js":7562,"./cy":7563,"./cy.js":7563,"./da":7564,"./da.js":7564,"./de":7565,"./de-at":7566,"./de-at.js":7566,"./de-ch":7567,"./de-ch.js":7567,"./de.js":7565,"./dv":7568,"./dv.js":7568,"./el":7569,"./el.js":7569,"./en-SG":7570,"./en-SG.js":7570,"./en-au":7571,"./en-au.js":7571,"./en-ca":7572,"./en-ca.js":7572,"./en-gb":7573,"./en-gb.js":7573,"./en-ie":7574,"./en-ie.js":7574,"./en-il":7575,"./en-il.js":7575,"./en-nz":7576,"./en-nz.js":7576,"./eo":7577,"./eo.js":7577,"./es":7578,"./es-do":7579,"./es-do.js":7579,"./es-us":7580,"./es-us.js":7580,"./es.js":7578,"./et":7581,"./et.js":7581,"./eu":7582,"./eu.js":7582,"./fa":7583,"./fa.js":7583,"./fi":7584,"./fi.js":7584,"./fo":7585,"./fo.js":7585,"./fr":7586,"./fr-ca":7587,"./fr-ca.js":7587,"./fr-ch":7588,"./fr-ch.js":7588,"./fr.js":7586,"./fy":7589,"./fy.js":7589,"./ga":7590,"./ga.js":7590,"./gd":7591,"./gd.js":7591,"./gl":7592,"./gl.js":7592,"./gom-latn":7593,"./gom-latn.js":7593,"./gu":7594,"./gu.js":7594,"./he":7595,"./he.js":7595,"./hi":7596,"./hi.js":7596,"./hr":7597,"./hr.js":7597,"./hu":7598,"./hu.js":7598,"./hy-am":7599,"./hy-am.js":7599,"./id":7600,"./id.js":7600,"./is":7601,"./is.js":7601,"./it":7602,"./it-ch":7603,"./it-ch.js":7603,"./it.js":7602,"./ja":7604,"./ja.js":7604,"./jv":7605,"./jv.js":7605,"./ka":7606,"./ka.js":7606,"./kk":7607,"./kk.js":7607,"./km":7608,"./km.js":7608,"./kn":7609,"./kn.js":7609,"./ko":7610,"./ko.js":7610,"./ku":7611,"./ku.js":7611,"./ky":7612,"./ky.js":7612,"./lb":7613,"./lb.js":7613,"./lo":7614,"./lo.js":7614,"./lt":7615,"./lt.js":7615,"./lv":7616,"./lv.js":7616,"./me":7617,"./me.js":7617,"./mi":7618,"./mi.js":7618,"./mk":7619,"./mk.js":7619,"./ml":7620,"./ml.js":7620,"./mn":7621,"./mn.js":7621,"./mr":7622,"./mr.js":7622,"./ms":7623,"./ms-my":7624,"./ms-my.js":7624,"./ms.js":7623,"./mt":7625,"./mt.js":7625,"./my":7626,"./my.js":7626,"./nb":7627,"./nb.js":7627,"./ne":7628,"./ne.js":7628,"./nl":7629,"./nl-be":7630,"./nl-be.js":7630,"./nl.js":7629,"./nn":7631,"./nn.js":7631,"./pa-in":7632,"./pa-in.js":7632,"./pl":7633,"./pl.js":7633,"./pt":7634,"./pt-br":7635,"./pt-br.js":7635,"./pt.js":7634,"./ro":7636,"./ro.js":7636,"./ru":7637,"./ru.js":7637,"./sd":7638,"./sd.js":7638,"./se":7639,"./se.js":7639,"./si":7640,"./si.js":7640,"./sk":7641,"./sk.js":7641,"./sl":7642,"./sl.js":7642,"./sq":7643,"./sq.js":7643,"./sr":7644,"./sr-cyrl":7645,"./sr-cyrl.js":7645,"./sr.js":7644,"./ss":7646,"./ss.js":7646,"./sv":7647,"./sv.js":7647,"./sw":7648,"./sw.js":7648,"./ta":7649,"./ta.js":7649,"./te":7650,"./te.js":7650,"./tet":7651,"./tet.js":7651,"./tg":7652,"./tg.js":7652,"./th":7653,"./th.js":7653,"./tl-ph":7654,"./tl-ph.js":7654,"./tlh":7655,"./tlh.js":7655,"./tr":7656,"./tr.js":7656,"./tzl":7657,"./tzl.js":7657,"./tzm":7658,"./tzm-latn":7659,"./tzm-latn.js":7659,"./tzm.js":7658,"./ug-cn":7660,"./ug-cn.js":7660,"./uk":7661,"./uk.js":7661,"./ur":7662,"./ur.js":7662,"./uz":7663,"./uz-latn":7664,"./uz-latn.js":7664,"./uz.js":7663,"./vi":7665,"./vi.js":7665,"./x-pseudo":7666,"./x-pseudo.js":7666,"./yo":7667,"./yo.js":7667,"./zh-cn":7668,"./zh-cn.js":7668,"./zh-hk":7669,"./zh-hk.js":7669,"./zh-tw":7670,"./zh-tw.js":7670};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=8392},8394:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=c(n(8)),i=c(n(58)),l=c(n(6690)),u=c(n(4)),s=c(n(5930)),d=c(n(6211));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e){e.stopPropagation(),e.preventDefault()}var h=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.renderQuery=function(e){var t,n=this.props,r=n.query,a=n.focusedIndex,c=n.onSelectQuery,p=n.onHighlightQuery,h=n.hideQuery;return e||h?null:f(i.default,{className:(0,o.default)(d.default.queryContainer,(t={},t[d.default.focused]=-1===a,t)),onMouseEnter:p,onClick:c},void 0,f("div",{className:d.default.queryText},void 0,u.default.Messages.SEARCH_FOR_VALUE.format({value:r})),f("div",{className:d.default.queryShortcut},void 0,f(l.default,{shortcut:"return",className:(0,o.default)(s.default.dim,s.default.keybindShortcutSearchPopout)})))},a.renderResults=function(e){var t=this.props,n=t.numResults,r=t.renderNoResults,a=t.renderInitialState,o=t.renderResult,i=t.renderCustomResults;if(e)return a();if(0===n)return r();if(null!=o)return Array.from({length:n}).map(function(e,t){return o(t)});if(null!=i)return i();throw new Error("SearchResultsPopout.renderResults: Flow should never allow this...")},a.render=function(){var e=this.props,t=e.query,n=e.width,r=""===t.trim();return f("div",{className:d.default.container,style:{width:n},onMouseDown:p},void 0,this.renderQuery(r),this.renderResults(r))},r}(a.PureComponent);h.displayName="SearchResultsPopout",h.defaultProps={renderInitialState:function(){return null},hideQuery:!1,width:320};var m=h;t.default=m},8395:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=u(n(106)),o=n(6557),i=n(183),l=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}t.default=function(){return s(a.default,{href:i.SUPPORT_LOCATION,target:"_blank"},void 0,s(o.Icon,{onClick:function(){},name:o.Icon.Names.NOVA_HELP,tooltip:l.default.Messages.HELP}))}},8396:function(e,t,n){"use strict";t.__esModule=!0,t.default=h;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=c(n(458)),i=n(6557),l=n(80),u=c(n(8397)),s=n(1),d=c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(){var e=a.useState(!1),t=e[0],n=e[1],r=function(){return n(function(e){return!e})};a.useEffect(function(){return l.ComponentDispatch.subscribe(s.ComponentActions.TOGGLE_MENTIONS,r),function(){l.ComponentDispatch.unsubscribe(s.ComponentActions.TOGGLE_MENTIONS,r)}},[]);var c=f(u.default,{onJump:function(e){e.shiftKey||n(!1)}});return f(o.default,{animation:o.default.Animation.NONE,position:o.default.Positions.BOTTOM,align:o.default.Align.RIGHT,autoInvert:!1,shouldShow:t,onRequestClose:function(){return n(!1)},renderPopout:function(){return c}},void 0,function(e,t){return a.createElement(i.Icon,p({},e,{onClick:r,name:i.Icon.Names.NOVA_AT,tooltip:t?null:d.default.Messages.MENTIONS,selected:t}))})}h.displayName="RecentMentionsButton"},8397:function(e,t,n){"use strict";t.__esModule=!0,t.default=D;var r,a=T(n(0)),o=I(n(8)),i=n(3),l=I(n(8398)),u=I(n(14)),s=I(n(8399)),d=I(n(39)),c=I(n(25)),f=I(n(58)),p=I(n(458)),h=T(n(6549)),m=T(n(7671)),v=I(n(187)),y=I(n(143)),_=n(1),g=I(n(4)),E=I(n(6291)),S=I(n(202));function I(e){return e&&e.__esModule?e:{default:e}}function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var N="Recent Mentions",C="Everyone",M="Roles";function b(e,t){var n=void 0===t?{}:t,r=n.guildFilter,a=n.roleFilter,o=n.everyoneFilter,i=n.messageId,u=void 0===i?null:i;r=void 0===r?s.default.guildFilter:r,a=void 0===a?s.default.roleFilter:a,o=void 0===o?s.default.everyoneFilter:o;var d=null;null!=e&&(d=r===_.RecentMentionsFilters.ALL_SERVERS?null:e.getGuildId()),l.default.fetchRecentMentions(u,_.MAX_MENTIONS_PER_FETCH,d,a,o)}function R(e){var t=e.channel,n=(0,i.useStateFromStoresObject)([s.default],function(){return{everyoneFilter:s.default.everyoneFilter,roleFilter:s.default.roleFilter}}),r=n.everyoneFilter,a=n.roleFilter;return A("div",{},void 0,A("div",{className:(0,o.default)(S.default.contextMenu,E.default.recentMentionsFilterPopout)},void 0,A(v.default,{},void 0,A(y.default,{label:g.default.Messages.RECENT_MENTIONS_FILTER_EVERYONE,action:function(){l.default.setGuildFilter({everyoneFilter:!r}),b(t,{everyoneFilter:!r})},active:r},C),A(y.default,{label:g.default.Messages.RECENT_MENTIONS_FILTER_ROLES,action:function(){l.default.setGuildFilter({roleFilter:!a}),b(t,{roleFilter:!a})},active:a},M))))}function P(e){var t=e.theme,n=e.channel,r=e.everyoneFilter,o=e.roleFilter,i=e.guildFilter,u=A(R,{channel:n});var s=g.default.Messages.RECENT_MENTIONS_FILTER_EXPLAIN_EVERYTHING;r||o?r?o||(s=g.default.Messages.RECENT_MENTIONS_EVERYONE_AND_DIRECT):s=g.default.Messages.RECENT_MENTIONS_ROLES_AND_DIRECT:s=g.default.Messages.RECENT_MENTIONS_DIRECT_ONLY;var d=t===_.ThemeTypes.LIGHT?_.Colors.PRIMARY_DARK:_.Colors.WHITE,c=null==n||n.isPrivate()?null:A(h.Item,{id:_.RecentMentionsFilters.THIS_SERVER,className:E.default.tabBarItem,color:d},void 0,g.default.Messages.THIS_SERVER),v=null==c?_.RecentMentionsFilters.ALL_SERVERS:i;return A(m.Header,{title:g.default.Messages.RECENT_MENTIONS,className:E.default.header},void 0,A("div",{className:E.default.headerTabBarWrapper},void 0,A(h.default,{selectedItem:v,onItemSelect:function(e){l.default.setGuildFilter({guildFilter:e}),b(n,{guildFilter:e})},type:h.Types.TOP,className:E.default.tabBar},void 0,A(h.Item,{id:_.RecentMentionsFilters.ALL_SERVERS,className:E.default.tabBarItem,color:d},void 0,g.default.Messages.ALL_SERVERS),c),A(p.default,{renderPopout:function(){return u},position:p.default.Positions.BOTTOM,align:p.default.Align.LEFT,autoInvert:!1,spacing:-10},void 0,function(e){return a.createElement(f.default,O({},e,{className:E.default.mentionFilter}),A("div",{className:E.default.label},void 0,g.default.Messages.RECENT_MENTIONS_FILTER_LABEL),A("div",{className:E.default.value},void 0,s))})))}function D(e){var t=e.onJump,r=(0,i.useStateFromStores)([u.default,d.default],function(){return u.default.getChannel(d.default.getChannelId())}),o=(0,i.useStateFromStores)([c.default],function(){return c.default.theme}),f=(0,i.useStateFromStoresObject)([s.default],function(){return{messages:s.default.getMentions(),hasMore:s.default.hasMore,loading:s.default.loading,guildFilter:s.default.guildFilter,roleFilter:s.default.roleFilter,everyoneFilter:s.default.everyoneFilter}}),p=f.messages,h=f.hasMore,v=f.loading,y=f.guildFilter,S=f.roleFilter,I=f.everyoneFilter;a.useEffect(function(){return function(){null!=p&&p.length>_.MAX_MENTIONS_PER_FETCH&&l.default.truncateMentions(_.MAX_MENTIONS_PER_FETCH)}},[p]);var T=A(P,{channel:r,theme:o,everyoneFilter:I,roleFilter:S,guildFilter:y});return A(m.default,{className:E.default.recentMentionsPopout,onFetch:function(e){s.default.hasLoadedEver||b(e)},onJump:t,onCloseMessage:function(e){l.default.deleteRecentMention(e.id)},channel:r,messages:p,loading:v,hasMore:h,analyticsName:N,loadMore:function(){var e=null!=p&&p.length>0?p[p.length-1].id:null;b(r,{messageId:e})},showGuildNames:y===_.RecentMentionsFilters.ALL_SERVERS,showChannels:!0,getProTip:function(){return g.default.Messages.RECENT_MENTIONS_PRO_TIP},canCloseAllMessages:!0,renderMentioned:!1,renderHeader:function(){return T},renderEmptyState:function(e){var t=g.default.Messages.NO_RECENT_MENTIONS,r=e===_.ThemeTypes.LIGHT?n(8525):n(8526);return A(m.EmptyStateBottom,{msg:t,image:r})}})}R.displayName="FilterPopout",P.displayName="RecentMentionsHeader",D.displayName="RecentMentions"},8398:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(12)),a=i(n(2)),o=n(1);function i(e){return e&&e.__esModule?e:{default:e}}var l={setGuildFilter:function(e){var t=e.guildFilter,n=e.roleFilter,r=e.everyoneFilter;a.default.dispatch({type:o.ActionTypes.SET_RECENT_MENTIONS_FILTER,guildFilter:t,roleFilter:n,everyoneFilter:r})},truncateMentions:function(e){a.default.dirtyDispatch({type:o.ActionTypes.TRUNCATE_MENTIONS,size:e})},fetchRecentMentions:function(e,t,n,i,l){void 0===t&&(t=o.MAX_MENTIONS_PER_FETCH),void 0===n&&(n=null),void 0===i&&(i=!0),void 0===l&&(l=!0),a.default.dirtyDispatch({type:o.ActionTypes.LOAD_RECENT_MENTIONS,guildId:n}),r.default.get({url:o.Endpoints.MENTIONS,query:{before:e,limit:t,guild_id:n,roles:i,everyone:l},retries:2}).then(function(t){var n=t.body;a.default.dispatch({type:o.ActionTypes.LOAD_RECENT_MENTIONS_SUCCESS,messages:n,isAfter:null!=e,hasMoreAfter:n.length>=o.MAX_MENTIONS_PER_FETCH})},function(){a.default.dispatch({type:o.ActionTypes.LOAD_RECENT_MENTIONS_FAILURE})})},deleteRecentMention:function(e){r.default.delete({url:o.Endpoints.MENTIONS_MESSAGE_ID(e),retries:2}),a.default.dispatch({type:o.ActionTypes.RECENT_MENTION_DELETE,id:e})}};t.default=l},8399:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=v(n(6)),a=v(n(3)),o=v(n(27)),i=v(n(2)),l=v(n(358)),u=v(n(10)),s=v(n(14)),d=v(n(194)),c=v(n(51)),f=v(n(153)),p=v(n(25)),h=v(n(11)),m=n(1);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g="recentMentionFilterSettings",E=[],S={},I=!1,T=!0,O=o.default.get(g,{guildFilter:m.RecentMentionsFilters.ALL_SERVERS,everyoneFilter:!0,roleFilter:!0}),A=!1,N=!1;function C(e){if(e instanceof l.default)return e;var t=d.default.getMessage(e.channel_id,e.id);return null!=t?t:l.default.create(e)}function M(e,t){if(void 0===t&&(t=null),e.type!==m.MessageTypes.DEFAULT)return null;t||(t=e.channel_id);var n=s.default.getChannel(t);if(!n||n&&n.type===m.ChannelTypes.DM)return null;if(O.guildFilter===m.RecentMentionsFilters.THIS_SERVER&&n.getGuildId()!==f.default.getGuildId())return null;var r=e.author.id,a=u.default.getId();return c.default.isBlocked(r)||r===a?null:(e=C(e)).isMentioned(a,!O.everyoneFilter,!O.roleFilter)?e:null}function b(e){if(null==S[e])return!1;delete S[e],E=r.default.filter(E,function(t){return t.id!==e})}function R(e){return b(e.id)}function P(e){var t=_({},O);O=r.default.defaults(r.default.pick(e,["guildFilter","roleFilter","everyoneFilter"]),O),o.default.set(g,O);var n=function(e,n){return t[e]!==O[e]&&O[e]===n},a=n("guildFilter",m.RecentMentionsFilters.THIS_SERVER)||n("everyoneFilter",!1)||n("roleFilter",!1);S={};var i=[];a&&E.forEach(function(e){var t=M(e);t&&(i.push(t),S[t.id]=!0)}),0===(E=i).length&&(A=!1)}function D(){r.default.forEach(E,function(e){e.timestamp.locale(p.default.locale)})}function L(){E=E.filter(function(e){return!c.default.isBlocked(e.author.id)})}var w=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,o,i,l=r.prototype;return l.initialize=function(){this.waitFor(h.default,s.default,d.default)},l.isOpen=function(){return N},l.getMentions=function(){return A||E.length?E:null},a=r,(o=[{key:"hasLoadedEver",get:function(){return A}},{key:"loading",get:function(){return I}},{key:"hasMore",get:function(){return T}},{key:"guildFilter",get:function(){return O.guildFilter}},{key:"everyoneFilter",get:function(){return O.everyoneFilter}},{key:"roleFilter",get:function(){return O.roleFilter}}])&&y(a.prototype,o),i&&y(a,i),r}(a.default.Store))(i.default,{LOAD_RECENT_MENTIONS:function(e){var t=e.guildId;I=!0,null==t&&O.guildFilter===m.RecentMentionsFilters.THIS_SERVER&&P({guildFilter:m.RecentMentionsFilters.ALL_SERVERS})},LOAD_RECENT_MENTIONS_SUCCESS:function(e){var t=e.hasMoreAfter,n=e.messages,a=e.isAfter,o=r.default.map(n,C);a?E=E.concat(o):(E=o,S={}),r.default.forEach(o,function(e){S[e.id]=!0}),I=!1,T=t,A=!0},LOAD_RECENT_MENTIONS_FAILURE:function(e){I=!1},SET_RECENT_MENTIONS_FILTER:P,TRUNCATE_MENTIONS:function(e){for(var t=e.size,n=t;n<E.length;++n)delete S[E[n].id];E=E.slice(0,t),T=!0},CHANNEL_SELECT:function(e){return function(){if(O.guildFilter!==m.RecentMentionsFilters.THIS_SERVER)return!1;A=!1}()},CONNECTION_OPEN:function(e){return E=[],S={},void(A=!1)},GUILD_DELETE:function(e){var t=e.guild;E=r.default.filter(E,function(e){var n=s.default.getChannel(e.channel_id);return!(!n||n.getGuildId()===t.id)||(delete S[e.id],!1)})},MESSAGE_CREATE:function(e){var t=e.channelId,n=M(e.message,t);if(!n)return!1;(E=E.slice()).unshift(n),S[n.id]=!0},MESSAGE_UPDATE:function(e){var t=e.message.id;if(null==S[t])return!1;var n=r.default.findIndex(E,function(e){return e.id===t}),a=(E=E.slice())[n];E[n]=a.updateMessage(e.message)},MESSAGE_DELETE:R,RECENT_MENTION_DELETE:R,MESSAGE_DELETE_BULK:function(e){var t=e.ids;r.default.forEach(t,b)},USER_SETTINGS_UPDATE:function(e){return D()},I18N_LOAD_SUCCESS:function(e){return D()},CHANNEL_DELETE:function(e){var t=e.channel;E=r.default.filter(E,function(e){return e.channel_id!==t.id||(delete S[e.id],!1)})},RELATIONSHIP_ADD:function(e){return L()},RELATIONSHIP_REMOVE:function(e){return L()},MENTION_MODAL_OPEN:function(e){N=!0},MENTION_MODAL_CLOSE:function(e){N=!1}});t.default=w},8400:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=y(n(6)),a=y(n(3)),o=y(n(27)),i=y(n(2)),l=v(n(350)),u=y(n(100)),s=v(n(159)),d=y(n(22)),c=y(n(54)),f=y(n(11)),p=y(n(346)),h=y(n(119)),m=n(1);function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}var _="DetectedOffPlatformPremiumPerksStore",g={},E={},S=[];function I(){var e=!1,t=r.default.values(E),n=Array.isArray(t),a=0;for(t=n?t:t[Symbol.iterator]();;){var o;if(n){if(a>=t.length)break;o=t[a++]}else{if((a=t.next()).done)break;o=a.value}var i=o,l=i.skuId,c=i.applicationId;if(!S.includes(l)){var m=d.default.getGame(c);if(null!=m){var v=h.default.get(l);null!=v?p.default.applicationIdsFetching.has(m.id)||p.default.isEntitledToSku(f.default.getCurrentUser(),l,m.id,m.id)||!v.available?null!=g[l]&&(delete g[l],e=!0):(g[l]={skuId:l,applicationId:c},e=!0):h.default.isFetching(l)||h.default.didFetchingSkuFail(l)||s.fetchSKU(m.id,l)}else d.default.isFetching(c)||d.default.didFetchingFail(c)||u.default.fetchApplication(c)}}return e}var T=new(function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=a.prototype;return i.initialize=function(){this.waitFor(c.default,h.default,p.default),S=o.default.get(_)||S},i.getDetectedOffPlatformPremiumPerks=function(){return r.default.values(g)},a}(a.default.Store))(i.default,{LOGOUT:function(e){return g={},void(E={})},SKU_FETCH_SUCCESS:function(e){return I()},ENTITLEMENT_FETCH_APPLICATION_SUCCESS:function(e){return I()},ENTITLEMENT_CREATE:function(e){return I()},APPLICATION_FETCH_SUCCESS:function(e){return I()},DETECTED_OFF_PLATFORM_PREMIUM_PERKS_DISMISS:function(e){var t=e.skuId;if(delete g[t],S.includes(t))return!1;S.push(t),o.default.set(_,S)},RUNNING_GAMES_CHANGE:function(e){return function(){var e=!1,t=c.default.getRunningGames(),n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var a;if(n){if(r>=t.length)break;a=t[r++]}else{if((r=t.next()).done)break;a=r.value}var o=a,i=o.id,u=o.distributor;if(null!=i&&u!==m.Distributors.DISCORD){var s=m.OFF_PLATFORM_PREMIUM_PERKS,d=Array.isArray(s),f=0;for(s=d?s:s[Symbol.iterator]();;){var h;if(d){if(f>=s.length)break;h=s[f++]}else{if((f=s.next()).done)break;h=f.value}var v=h,y=v.skuId,_=v.applicationId;_===i&&(S.includes(y)||null==E[y]&&(p.default.applicationIdsFetched.has(_)||p.default.applicationIdsFetching.has(_)||null!=p.default.getForSku(y)||l.fetchUserEntitlementsForApplication(_),E[y]={skuId:y,applicationId:_},e=!0))}}}return e&&I(),e}()}});t.default=T},8401:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(3)),a=u(n(2)),o=u(n(144)),i=u(n(10)),l=u(n(51));n(1);function u(e){return e&&e.__esModule?e:{default:e}}var s=10,d=15552e6,c=!1;var f=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(l.default,i.default)},a.isEligible=function(){return c},r}(r.default.Store))(a.default,{CONNECTION_OPEN:function(e){return c!==(c=l.default.getFriendIDs().length>=s&&o.default.extractTimestamp(i.default.getId())<Date.now()-d)}});t.default=f},8402:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=p(n(3)),a=p(n(27)),o=p(n(2)),i=n(330),l=p(n(333)),u=p(n(225)),s=p(n(25)),d=p(n(11)),c=n(1),f=p(n(4));function p(e){return e&&e.__esModule?e:{default:e}}var h="surveys",m={},v=[{id:l.default.SURVEY_KOREAN_DESKTOP,url:function(){var e=d.default.getCurrentUser();return"https://ko.surveymonkey.com/r/PCP9PW2?id="+(null!=e?e.id:"")},noticeContent:function(){return f.default.Messages.NOTICE_SURVEY_PROMPT},noticeButton:function(){return f.default.Messages.NOTICE_SURVEY_BUTTON},title:"Korean Desktop Survey",description:""},{id:l.default.SURVEY_NITRO,url:function(){var e=d.default.getCurrentUser();return"https://www.surveymonkey.com/r/8MZCZGJ?user_id="+(null!=e?e.id:"")},noticeContent:function(){return"Help improve Nitro! Take a short survey and let us know your thoughts."},noticeButton:function(){return"Take Survey"},title:"Nitro Survey",description:"Ask users their thoughts on nitro n stuff",validateDescriptor:function(){var e=d.default.getNullableCurrentUser();return null!=e&&e.premiumType===c.PremiumTypes.TIER_2}},{id:l.default.SURVEY_LIGHT_THEME,url:function(){var e=d.default.getCurrentUser();return"https://www.surveymonkey.com/r/PTYBDKW?user_id="+(null!=e?e.id:"")},noticeContent:function(){return"Help improve Light Theme! Take a short survey and let us know your thoughts."},noticeButton:function(){return"Take Survey"},title:"Light Theme Survey",description:"Ask users their thoughts on light theme",validateDescriptor:function(){return null!=d.default.getNullableCurrentUser()&&s.default.theme===c.ThemeTypes.LIGHT}},{id:l.default.HYPESQUAD_USER_SURVEY,url:function(){var e=d.default.getCurrentUser();return"https://www.surveymonkey.com/r/JBJ57HS?user_id="+(null!=e?e.id:"")},noticeContent:function(){return"Wed love to hear your thoughts on how were doing at Discord and what you wish for in the future."},noticeButton:function(){return"Take Survey"},title:"Hypesquad User Survey",description:"QPR survey for Hypesquad users",validateDescriptor:function(){var e=d.default.getNullableCurrentUser();return null!=e&&(e.hasFlag(c.UserFlags.HYPESQUAD)||e.hasFlag(c.UserFlags.HYPESQUAD_ONLINE_HOUSE_1)||e.hasFlag(c.UserFlags.HYPESQUAD_ONLINE_HOUSE_2)||e.hasFlag(c.UserFlags.HYPESQUAD_ONLINE_HOUSE_3))}},{id:l.default.NON_HYPESQUAD_USER_SURVEY,url:function(){var e=d.default.getCurrentUser();return"https://www.surveymonkey.com/r/JBRK77Z?user_id="+(null!=e?e.id:"")},noticeContent:function(){return"Wed love to hear your thoughts on how were doing at Discord and what you wish for in the future."},noticeButton:function(){return"Take Survey"},title:"Non-Hypesquad User Survey",description:"QPR survey for non-Hypesquad users",validateDescriptor:function(){var e=d.default.getNullableCurrentUser();return null!=e&&!(e.hasFlag(c.UserFlags.HYPESQUAD)||e.hasFlag(c.UserFlags.HYPESQUAD_ONLINE_HOUSE_1)||e.hasFlag(c.UserFlags.HYPESQUAD_ONLINE_HOUSE_2)||e.hasFlag(c.UserFlags.HYPESQUAD_ONLINE_HOUSE_3))}},{id:l.default.NITRO_USER_SURVEY,url:function(){var e=d.default.getCurrentUser();return"https://www.surveymonkey.com/r/9PJZJNR?user_id="+(null!=e?e.id:"")},noticeContent:function(){return"We'd love to hear your thoughts on Discord Nitro. Let us know how we're doing and what you wish for."},noticeButton:function(){return"Take Survey"},title:"Nitro User Survey",description:"Nitro survey for users",validateDescriptor:function(){var e=d.default.getNullableCurrentUser();if(null==e)return!1;var t=e.premiumType;return t===c.PremiumTypes.TIER_2||t===c.PremiumTypes.TIER_1}},{id:l.default.NPS_DESKTOP_SURVEY,url:function(){var e=d.default.getCurrentUser();return"https://www.surveymonkey.com/r/PKSGNJ8?id="+(null!=e?e.id:"")},noticeContent:function(){return"Help improve Discord by sharing your feedback in this short 60 second survey. We appreciate your input!"},noticeButton:function(){return"Take Survey"},title:"NPS Survey",description:"Couple questions that will get asked every few months"}];function y(){Object.keys(m).length>0?a.default.set(h,m):a.default.remove(h)}var _=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=r.prototype;return l.initialize=function(){this.syncWith([u.default],function(){return!0});var e=a.default.get(h)||{},t=new Set(v.map(function(e){return e.id}));v.forEach(function(n){var r=n.id;e[r]&&t.has(r)&&(m[r]=!0)}),y(),o.default.wait(function(){return(0,i.registerSurveys)(v)})},l.getCurrentSurvey=function(){return v.find(function(e){var t=e.id,n=e.validateDescriptor;if(m[t])return!1;var r=u.default.getEligibleExperiment(t);return null!=r&&(null==n||n(r,e))})},r}(r.default.Store))(o.default,{SURVEY_HIDE:function(e){var t=e.id;m[t]=!0,y()},LOGOUT:function(e){return m={},void a.default.remove(h)}});t.default=_},8403:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=y(n(341)),i=y(n(21)),l=y(n(24)),u=y(n(6559)),s=y(n(6521)),d=y(n(42)),c=y(n(65)),f=y(n(456)),p=y(n(257)),h=n(1),m=y(n(4)),v=y(n(6216));function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var g=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).generateGuildRecord=function(){var e=n.props,t=e.guildId,r=e.icon,a=e.isVerified,i=e.name;return new o.default({id:t,name:i,icon:r,features:a?[h.GuildFeatures.VERIFIED]:[]})},n.state={guildRecord:n.generateGuildRecord()},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidUpdate=function(e){e!==this.props&&this.setState({guildRecord:this.generateGuildRecord()})},a.renderLoading=function(){return _("div",{className:v.default.header},void 0,_(l.default,{align:l.default.Align.CENTER,justify:l.default.Justify.CENTER,direction:l.default.Direction.VERTICAL,className:v.default.headerTop},void 0,_("div",{className:v.default.iconWrapper},void 0,_("div",{className:v.default.iconPlaceholder})),_("div",{className:v.default.headerText},void 0,_("div",{className:v.default.namePlaceholder})),_(l.default,{className:v.default.memberInfo,align:l.default.Align.CENTER},void 0,_("div",{className:v.default.memberCount},void 0,_("div",{className:v.default.memberInfoPlaceholder})),_("div",{className:v.default.memberCount},void 0,_("div",{className:v.default.memberInfoPlaceholder}))),_("div",{className:v.default.viewButtonPlaceholder})))},a.renderUnavailable=function(){return _(l.default,{align:l.default.Align.CENTER,justify:l.default.Justify.CENTER,direction:l.default.Direction.VERTICAL,className:v.default.headerTop},void 0,_(d.default,{className:v.default.guildIconBase,name:d.default.Names.WARNING_CIRCLE,width:100,height:100}),_(f.default,{className:v.default.unavailableHeader,size:f.default.Sizes.SIZE_16},void 0,m.default.Messages.GUILD_POPOUT_UNAVAILABLE_HEADER),_(p.default,{className:v.default.unavailableFlavor},void 0,m.default.Messages.GUILD_POPOUT_UNAVAILABLE_FLAVOR))},a.renderGuild=function(){var e=this.props,t=e.name,n=e.presenceCount,r=e.memberCount,a=e.onView,o=e.submitting,d=this.state.guildRecord;return _(l.default,{align:l.default.Align.CENTER,justify:l.default.Justify.CENTER,direction:l.default.Direction.VERTICAL,className:v.default.headerTop},void 0,_(s.default,{guild:d,size:s.default.Sizes.XLARGE,animate:!0,onClick:a,className:v.default.guildIcon}),null!=t?_("div",{className:v.default.guildNameWrapper},void 0,_(u.default,{className:v.default.badge,guild:d,tooltipPosition:c.default.Positions.TOP,tooltipColor:c.default.Colors.BLACK,badgeColor:h.Colors.PRIMARY_DARK}),_("span",{className:v.default.guildName},void 0,t)):null,_(l.default,{className:v.default.memberInfo,align:l.default.Align.CENTER},void 0,null!=n?_("div",{className:v.default.memberCount},void 0,_("div",{className:v.default.dotOnline}),_("span",{className:v.default.memberText},void 0,m.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_ONLINE.format({membersOnline:n}))):null,null!=r?_("div",{className:v.default.memberCount},void 0,_("div",{className:v.default.dotOffline}),_("span",{className:v.default.memberText},void 0,m.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_TOTAL.format({count:r}))):null),_(i.default,{className:v.default.viewButton,look:i.default.Looks.FILLED,color:i.default.Colors.BRAND,size:i.default.Sizes.SMALL,onClick:a,submitting:o},void 0,m.default.Messages.GUILD_POPOUT_VIEW_SERVER_BUTTON))},a.render=function(){var e=this.props,t=e.loading,n=e.unavailable;return _("div",{className:v.default.guildPopout},void 0,n?this.renderUnavailable():t?this.renderLoading():this.renderGuild())},r}(a.Component);g.displayName="GuildPopout";var E=g;t.default=E},8404:function(e,t,n){"use strict";t.__esModule=!0,t.fetchGuildForPopout=function(e){return u.apply(this,arguments)};var r=i(n(12)),a=i(n(2)),o=n(1);function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,a)}function u(){var e;return e=regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.dirtyDispatch({type:o.ActionTypes.GUILD_POPOUT_FETCH_START,guildId:t}),e.prev=1,e.next=4,r.default.get({url:o.Endpoints.GUILD_PREVIEW(t)});case 4:n=e.sent,a.default.dispatch({type:o.ActionTypes.GUILD_POPOUT_FETCH_SUCCESS,guildId:t,guild:n.body}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.default.dispatch({type:o.ActionTypes.GUILD_POPOUT_FETCH_FAILURE,guildId:t});case 11:case"end":return e.stop()}},e,null,[[1,8]])}),(u=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){l(o,r,a,i,u,"next",e)}function u(e){l(o,r,a,i,u,"throw",e)}i(void 0)})}).apply(this,arguments)}},8405:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(3)),a=l(n(2)),o=l(n(10)),i=n(875);n(1);function l(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=Object.freeze({UNSET:"unset",FETCHING:"fetching",FAILED:"failed",SUCCEEDED:"succeeded"}),d={guilds:{}};var c=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(){this.waitFor(o.default)},a.isFetchingGuild=function(e){var t=d.guilds[e];return null!=t&&t.fetchState===s.FETCHING},a.getGuild=function(e){var t=d.guilds[e];return null!=t?t.guild:null},r}(r.default.Store))(a.default,{GUILD_POPOUT_FETCH_START:function(e){var t=e.guildId;d.guilds[t]=u({},d.guilds[t],{fetchState:s.FETCHING})},GUILD_POPOUT_FETCH_SUCCESS:function(e){var t=e.guildId,n=e.guild,r=(0,i.makeDiscoverableGuild)(n);d.guilds[t]=u({},d.guilds[t],{guild:r,fetchState:s.SUCCEEDED})},GUILD_POPOUT_FETCH_FAILURE:function(e){var t=e.guildId;d.guilds[t]=u({},d.guilds[t],{fetchState:s.FAILED})}});t.default=c},8406:function(e,t,n){"use strict";t.__esModule=!0,t.MessageTimestamp=C,t.default=t.Message=t.MessageAvatar=t.ClickOverlay=t.LocalBotMessage=t.MessageUsername=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=E(n(8)),i=E(n(121)),l=n(88),u=n(462),s=E(n(8407)),d=E(n(932)),c=E(n(58)),f=E(n(458)),p=E(n(65)),h=E(n(328)),m=E(n(7677)),v=E(n(8408)),y=n(1),_=E(n(4)),g=E(n(6219));function E(e){return e&&e.__esModule?e:{default:e}}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function T(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var O={LATIN12:g.default.latin12CompactTimeStamp,LATIN24:g.default.latin24CompactTimeStamp,ASIAN:g.default.asianCompactTimeStamp},A=5,N=/(AM|PM)$/;function C(e){var t,n=e.isCompact,r=void 0!==n&&n,i=e.timestamp,l=e.isVisibleOnlyOnHover,s=void 0!==l&&l,d=e.isMentioned,c=e.backgroundOpacity,f=r?(0,u.dateFormat)(i,"LT"):(0,u.calendarFormat)(i),h=r?function(e){return e.match(N)?O.LATIN24:e.length<=A?O.LATIN12:O.ASIAN}(f):null;return T("time",{className:(0,o.default)(h,g.default[c+"BackgroundOpacity"],(t={},t[g.default.timestampVisibleOnHover]=s,t[g.default.timestampCozy]=!r,t[g.default.timestampCompact]=r&&!d,t[g.default.timestampCompactIsMentioned]=r&&d,t)),dateTime:i},void 0,T(p.default,{text:(0,u.dateFormat)(i,"LLLL"),tooltipClassName:g.default.timestampTooltip,delay:750},void 0,function(e){return a.createElement("span",e,r&&T("i",{className:g.default.separatorLeft},void 0,"["),f,r&&T("i",{className:g.default.separatorRight},void 0,"] "))}))}C.displayName="MessageTimestamp";var M=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).onClick=function(e){var n=t.props,r=n.message;(0,n.onClick)(e,r)},t}I(t,e);var n=t.prototype;return n.onMouseDown=function(e){e.shiftKey&&(e.preventDefault(),e.stopPropagation())},n.renderSystemTag=function(){var e,t=this.props,n=t.message,r=t.isCompact,a=n.author.bot,o=null!=n.messageReference;return n.isSystemDM()?e=d.default.Types.SYSTEM_DM:o?e=d.default.Types.SERVER:a&&(e=d.default.Types.BOT),null!=e?T(d.default,{className:r?g.default.botTagCompact:g.default.botTagCozy,type:e}):null},n.render=function(){var e=this,t=this.props,n=t.message,r=t.isCompact,i=t.renderPopout,l=t.popoutPosition,u=t.onContextMenu,s=t.backgroundOpacity,d=n.colorString?{color:n.colorString}:null,p={tag:"span",className:(0,o.default)(g.default.username,g.default[s+"BackgroundOpacity"]),style:d,onMouseDown:this.onMouseDown,onClick:this.onClick};return T(f.default,{renderPopout:i,position:l},void 0,function(t){return a.createElement(c.default,S({tag:"span"},t,{onContextMenu:u}),r?e.renderSystemTag():null,a.createElement(c.default,p,n.nick||n.author.toString()),r&&T("i",{className:g.default.separatorRight},void 0,": "),r?null:e.renderSystemTag())})},t}(a.Component);t.MessageUsername=M,M.displayName="MessageUsername",M.defaultProps={isCompact:!1};var b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).onDeleteMessages=function(){var e=t.props,n=e.messages,r=e.channelId,a=e.onDeleteMessage;n.forEach(function(e){return a(r,e.id,!0)})},t}return I(t,e),t.prototype.render=function(){var e=this.props.messages.length;return T("div",{className:g.default.localBotMessage,onClick:function(e){return e.stopPropagation()}},void 0,_.default.Messages.ONLY_YOU_CAN_SEE_AND_DELETE_THESE.format({count:e,handleDelete:this.onDeleteMessages}))},t}(a.Component);t.LocalBotMessage=b,b.displayName="LocalBotMessage";var R=function(e){var t=e.onClick,n=e.label;return t&&n?T(c.default,{className:g.default.clickOverride,onClick:t,"aria-label":n}):T("div",{className:g.default.disableInteraction})};t.ClickOverlay=R;var P=function(e){var t=e.user,n=e.isAnimated,r=e.onContextMenu,o=e.renderPopout,i=(0,l.hasAnimatedAvatar)(t),u=n&&i?t.getAvatarURL("gif"):t.getAvatarURL("jpg");return T(f.default,{renderPopout:o,position:f.default.Positions.RIGHT},void 0,function(e){return a.createElement(c.default,S({},e,{className:g.default.avatar,"aria-hidden":!0}),T(h.default,{src:u,size:h.default.Sizes.SIZE_40,onContextMenu:r,"aria-hidden":!0}))})};t.MessageAvatar=P,P.displayName="MessageAvatar";var D=function(e){function t(t){var n;return(n=e.call(this,t)||this).state=S({lastParsedMessage:n.props.message},n.props.renderMessageMarkup(n.props.message)),n.setRef=function(e){var t=n.props,r=t.registerMessageDOMNode,a=t.message;n.ref=e,null!=e&&null!=r&&r(a.id,e)},n.onClick=function(e){var t=n.props,r=t.onMarkUnread,a=t.channel,o=t.message;e.altKey&&(e.preventDefault(),r(a.id,o.id))},n.onContextMenuMessage=function(e,t){var r=n.props.onContextMenuMessage,a=e.currentTarget;r(e,S({target:e.target||a},t))},n.onContextMenuUser=function(e){var t=n.props,r=t.channel,a=t.message.author;(0,t.onContextMenuUser)(e,{user:a,channel:r})},n.onClickUsername=function(e,t){var r=n.props,a=r.onClickUsername,o=r.channel;a(e,{user:t.author,channel:o})},n.onResize=function(e){var t=n.props;(0,t.onResize)({target:e,isEditing:t.isEditing})},n.renderPopoutUser=function(e){var t=n.props,r=t.renderPopoutUser,a=t.channel,o=t.message.author,i=a.getGuildId();return r(S({channelId:a.id,guildId:i,userId:o.id},e))},n.renderPopoutGuild=function(e){var t=n.props,r=t.renderPopoutGuild,a=t.message.messageReference;return null==a?null:r(S({messageReference:a},e))},n.renderCompactHeader=function(){var e=n.props,t=e.message,r=e.isHeader,o=e.isEditing,i=e.popoutPosition,l=e.backgroundOpacity,u=o||r,s=t.mentioned,d={message:t,isCompact:!0,renderPopout:n.renderPopout,popoutPosition:i,onContextMenu:n.onContextMenuUser,onClick:n.onClickUsername,backgroundOpacity:l};return T("h2",{className:g.default.headerCompact},void 0,T(C,{isVisibleOnlyOnHover:!u,isCompact:!0,timestamp:t.timestamp,isMentioned:s,backgroundOpacity:l}),a.createElement(M,d))},n.renderPopout=n.getRenderPopout(),n}I(t,e),t.getDerivedStateFromProps=function(e,t){return e.message!==t.lastParsedMessage?S({lastParsedMessage:e.message},e.renderMessageMarkup(e.message)):null};var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props,n=t.isEditing,r=t.message,a=t.onResize,o=t.registerMessageDOMNode,i=e.message.embeds!==r.embeds||e.message.attachments!==r.attachments||e.message.reactions.length!==r.reactions.length;this.ref&&i&&a({isEditing:n,target:this.ref});var l=e.isEditing!==n;this.ref&&l&&a({isEditing:!0,target:this.ref}),e.registerMessageDOMNode!==o&&o&&this.ref&&o(r.id,this.ref),e.message.messageReference!==r.messageReference&&(this.renderPopout=this.getRenderPopout())},n.getRenderPopout=function(){var e=this.props.message.messageReference;return null!=e&&null!=e.guild_id?this.renderPopoutGuild:this.renderPopoutUser},n.renderCompact=function(){var e=this.props,t=e.message,n=e.channel,r=e.renderAccessories,o=e.renderEditor,i=e.renderButtons,l=e.editingContent,u=e.isEditing,s=e.onCancelEditing,d=e.onChange,c=e.onConfirmDelete,f=e.saveMessage,p=e.validateEdit,h=e.disableButtons,y=e.disableMentionStyles,_=e.disablePromoteButton,E=e.isDisabled;return a.createElement("div",{ref:this.setRef,className:g.default.messageCompact,"aria-disabled":E,onClick:this.onClick},u&&this.renderCompactHeader(),u&&null!=l?T(v.default,{className:g.default.messageEditorCompact,channel:n,message:t,value:l,children:o,onCancel:s,onChange:d,onConfirmDelete:c,onResize:this.onResize,saveMessage:f,validateEdit:p}):T(m.default,{className:g.default.contentCompact,channel:n,message:t,isCompact:!0,onContextMenu:this.onContextMenuMessage,renderButtons:i,renderPrefix:this.renderCompactHeader,content:t.customRenderedContent||this.state.content,disableButtons:h,disableMentionStyles:y,disablePromoteButton:_}),r({message:t,hasSpoilerEmbeds:this.state.hasSpoilerEmbeds}))},n.renderCozy=function(){var e=this.props,t=e.message,n=e.channel,r=e.renderAccessories,i=e.renderEditor,l=e.renderButtons,u=e.isFocusedWindow,s=e.disableAvatarAnimation,d=e.editingContent,c=e.isEditing,f=e.isHeader,p=e.onCancelEditing,h=e.onChange,y=e.onConfirmDelete,_=e.saveMessage,E=e.validateEdit,S=e.popoutPosition,I=e.disableButtons,O=e.disableMentionStyles,A=e.disablePromoteButton,N=e.isDisabled,b=e.cozyClassName,R=e.backgroundOpacity,D={message:t,isCompact:!1,renderPopout:this.renderPopout,popoutPosition:S,onContextMenu:this.onContextMenuUser,onClick:this.onClickUsername,backgroundOpacity:R};return a.createElement("div",{ref:this.setRef,className:(0,o.default)(b,g.default.messageCozy),"aria-disabled":N,onClick:this.onClick},f?T("div",{className:g.default.headerCozy},void 0,T(P,{user:t.author,onContextMenu:this.onContextMenuUser,renderPopout:this.renderPopout,isAnimated:!s&&u}),T("h2",{className:g.default.headerCozyMeta},void 0,a.createElement(M,D),T(C,{timestamp:t.timestamp,backgroundOpacity:R}))):null,T("div",{className:g.default.contentCozy},void 0,c&&null!=d?T(v.default,{channel:n,message:t,value:d,children:i,onCancel:p,onChange:h,onConfirmDelete:y,onResize:this.onResize,saveMessage:_,validateEdit:E}):T(m.default,{channel:n,message:t,isCompact:!1,onContextMenu:this.onContextMenuMessage,renderButtons:l,renderPrefix:null,content:t.customRenderedContent||this.state.content,disableButtons:I,disableMentionStyles:O,disablePromoteButton:A}),r({message:t,hasSpoilerEmbeds:this.state.hasSpoilerEmbeds})))},n.render=function(){var e=this.props,t=e.isCompact,n=e.disableJumpFlash,r=e.jumpSequenceId,a=t?this.renderCompact():this.renderCozy();return r&&!n?T(s.default,{sequenceId:r},void 0,a):a},t}(a.Component);t.Message=D,D.displayName="Message",D.defaultProps={disableAvatarAnimation:!0,disablePromoteButton:!0,isFocusedWindow:!0};var L=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={disableAvatarAnimation:!0,isAnimatableAvatar:(0,l.hasAnimatedAvatar)(t.props.messages[0]&&t.props.messages[0].author)},t.onMouseEnter=function(){return t.setState({disableAvatarAnimation:!1})},t.onMouseLeave=function(){return t.setState({disableAvatarAnimation:!0})},t.renderButtonsMessage=function(e){var n=e.message,r=e.channel,a=t.props.renderButtonsMessage;return null==a?null:T("div",{className:g.default.buttonContainer},void 0,a({message:n,channel:r}))},t}I(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){var n=this.props.messages;if(n.length!==e.messages.length)return!0;if(!(0,i.default)(this.props,e,["messages"])||!(0,i.default)(this.state,t))return!0;for(var r=!1,a=!1,o=!1,l=0,u=n.length;l<u;l++){var s=e.messages[l];if(!r&&s.reactions.length&&(r=!0),!a&&s.embeds.length&&(a=!0),!o&&s.attachments.length&&(o=!0),n[l]!==s)return!0}var d=this.props,c=d.disableReactionReads,f=d.disableReactionCreates,p=d.disableReactionUpdates,h=d.disableAutoPlayGif,m=d.disableEmbeds,v=d.disableManageMessages,y=d.disableDeveloperMode,_=d.disablePromoteButton;return!(!r||p===e.disableReactionUpdates&&c===e.disableReactionReads)||(!(!a||h===e.disableAutoPlayGif&&m===e.disableEmbeds)||(!(!o||h===e.disableAutoPlayGif)||(f!==e.disableReactionCreates||v!==e.disableManageMessages||y!==e.disableDeveloperMode||_!==e.disablePromoteButton)))},t.getDerivedStateFromProps=function(e,t){var n=e.messages[0],r=n&&(0,l.hasAnimatedAvatar)(n.author);return r!==t.isAnimatableAvatar?{isAnimatableAvatar:r}:null},n.render=function(){var e,t=this,n=this.props,r=n.messages,i=n.channel,l=n.editingMessage,u=n.renderButtonsGroup,s=n.renderSystemMessage,d=n.renderAccessories,c=n.onClick,f=n.onDeleteMessage,p=n.disableInteraction,h=n.disableInteractionLabel,m=n.disableDivider,v=n.disablePromoteButton,_=n.editingContent,E=n.isCompact,I=n.jumpMessageId,O=n.jumpSequenceId,A=n.className,N=n.backgroundOpacity,C=(n.renderButtonsMessage,n.disableReactionReads,n.disableReactionCreates,n.disableReactionUpdates,n.disableAutoPlayGif,n.disableEmbeds,n.disableManageMessages,n.disableDeveloperMode,n.renderMessageMarkup),M=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(n,["messages","channel","editingMessage","renderButtonsGroup","renderSystemMessage","renderAccessories","onClick","onDeleteMessage","disableInteraction","disableInteractionLabel","disableDivider","disablePromoteButton","editingContent","isCompact","jumpMessageId","jumpSequenceId","className","backgroundOpacity","renderButtonsMessage","disableReactionReads","disableReactionCreates","disableReactionUpdates","disableAutoPlayGif","disableEmbeds","disableManageMessages","disableDeveloperMode","renderMessageMarkup"]),P=this.state,L=P.isAnimatableAvatar,w=P.disableAvatarAnimation,U=r[0]&&r[0].author,k=r[0]&&null!=r[0].messageReference,G=U&&U.isLocalBot(),F=null!=c||p,j=null!=l?l.id:null;return T("div",{className:(0,o.default)(A,(e={},e[g.default.isLocalBot]=G,e[g.default.containerCompactBounded]=E&&null==j,e[g.default.containerCozyBounded]=!E&&null==j,e[g.default.containerCompact]=E&&null!=j,e[g.default.containerCozy]=!E&&null!=j,e)),onMouseEnter:L?this.onMouseEnter:null,onMouseLeave:L?this.onMouseLeave:null},void 0,r.map(function(e,n){if(!e)return null;if(e.type!==y.MessageTypes.DEFAULT)return T("div",{className:g.default.content},e.id,s({message:e,channel:i,renderButtons:t.renderButtonsMessage}),T("div",{className:g.default.systemMessageAccessories},void 0,d({message:e,hasSpoilerEmbeds:!1})));var r=j===e.id,o=e.id===I,l=S({},M,{isCompact:E,isEditing:r,isDisabled:F,channel:i,message:e,editingContent:_,disableAvatarAnimation:w,disablePromoteButton:v,backgroundOpacity:N,jumpSequenceId:o?O:null,disableButtons:F||null!=u,isHeader:0===n,renderButtons:t.renderButtonsMessage,renderAccessories:d,renderMessageMarkup:C});return a.createElement(D,S({},l,{key:e.id}))}),G&&T(b,{channelId:i.id,messages:r,onDeleteMessage:f}),F&&T(R,{onClick:c,label:h}),u&&u({messages:r,channel:i}),!G&&!k&&T("hr",{"aria-hidden":!0,className:(0,o.default)(m?g.default.divider:g.default.dividerEnabled,g.default[N+"BackgroundOpacity"])}))},t}(a.Component);t.default=L,L.displayName="MessageGroup",L.defaultProps={popoutPosition:f.default.Positions.RIGHT,disableDivider:!0,disableInteraction:!1,disableReactionReads:!1,disableReactionCreates:!0,disableReactionUpdates:!0,disableAutoPlayGif:!1,disableEmbeds:!1,disableManageMessages:!0,disableDeveloperMode:!0,disablePromoteButton:!0,disableInteractionLabel:void 0}},8407:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),i=(r=n(118))&&r.__esModule?r:{default:r},l=n(231),u=n(486);var s=.2,d={toValue:0,duration:1e3,delay:1e3},c=(0,u.hexWithOpacity)(l.Colors.BRAND,0),f=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={backgroundColor:new i.default.Value},t.flashNow=function(){var e=t.props.onFlashComplete;t.state.backgroundColor.setValue(s),i.default.timing(t.state.backgroundColor,d).start(e)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.flashNow()},o.componentDidUpdate=function(e){e.sequenceId!==this.props.sequenceId&&this.flashNow()},o.render=function(){var e={backgroundColor:this.state.backgroundColor.interpolate({inputRange:[0,1],outputRange:[c,l.Colors.BRAND]}),borderRadius:2};return function(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(i.default.div,{style:e},void 0,this.props.children)},r}(o.Component);t.default=f,f.displayName="BackgroundFlash"},8408:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=s(n(278)),i=n(1),l=s(n(4)),u=s(n(6218));function s(e){return e&&e.__esModule?e:{default:e}}function d(e){e.stopPropagation()}var c=function(e){var t,n;function s(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=e.call.apply(e,[this].concat(r))||this).node=a.createRef(),t.onClickSave=function(){var e=t.props.value;t.onSubmit(e)},t.onSubmit=function(e){var n=t.props,r=n.message,a=n.channel,i=n.onConfirmDelete,l=n.onCancel,u=n.saveMessage,s=n.validateEdit;return 0===e.length?(i(a,r),l(),Promise.resolve({shouldClear:!1,shouldRefocus:!1})):s({value:e,channel:a}).then(function(n){if(!n.valid)return Promise.resolve({shouldClear:!1,shouldRefocus:!1});var r=o.default.parse(t.props.channel,e,!0);return r.content!==t.props.message.content&&u(t.props.channel.id,t.props.message.id,r),l(),Promise.resolve({shouldClear:!0,shouldRefocus:!0})})},t.onChange=function(e,n){(0,t.props.onChange)(n)},t.onKeyDown=function(e){if(e.keyCode===i.KeyboardKeys.ESCAPE&&!e.shiftKey){var n=t.props.onCancel;e.preventDefault(),n()}},t.onResize=function(){var e=t.props.onResize,n=t.node.current;e&&n instanceof HTMLElement&&e(n)},t}return n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,s.prototype.render=function(){var e=this.props,t=e.className,n=e.value,o=e.message,i=e.channel,s=e.onCancel,c=e.children;return a.createElement("div",{className:t,ref:this.node,onContextMenu:d},c({value:n,message:o,channel:i,onChange:this.onChange,onSubmit:this.onSubmit,onKeyDown:this.onKeyDown,onResize:this.onResize}),function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}("div",{className:u.default.operations},void 0,l.default.Messages.EDIT_TEXTAREA_HELP.format({onCancel:s,onSave:this.onClickSave})))},s}(a.PureComponent);t.default=c,c.displayName="MessageEditor"},8409:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.MessageOptionPopout=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=m(n(8)),i=m(n(187)),l=m(n(38)),u=m(n(42)),s=n(272),d=m(n(58)),c=m(n(458)),f=n(1),p=m(n(4)),h=m(n(6220));function m(e){return e&&e.__esModule?e:{default:e}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function _(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleCopyID=function(e){var n=t.props,r=n.message,a=n.onClose;(0,s.copy)(e.shiftKey?r.channel_id+"-"+r.id:r.id),a()},t.handleCopyLink=function(){var e=t.props,n=e.channel,r=e.message,a=e.onClose;(0,s.copy)(location.protocol+"//"+location.host+f.Routes.CHANNEL(n.guild_id,n.id,r.id)),a()},t.handleEdit=function(){var e=t.props,n=e.channel,r=e.message,a=e.onClose;(0,e.onStartEditMessage)(n.id,r.id,r.content),a()},t.handleRetry=function(){var e=t.props,n=e.channel,r=e.message,a=e.onClose;(0,e.onRetrySendMessage)(n,r.id,r.content,r.tts),a()},t.handleDelete=function(){var e=t.props,n=e.onDeleteMessage,r=e.onClose,a=e.onConfirmDelete;t.props.message.state===f.MessageStates.SEND_FAILED?n(t.props.channel.id,t.props.message.id,!0):a(t.props.channel,t.props.message),r()},t.handleReactions=function(){var e=t.props,n=e.onClose,r=e.message;(0,e.onShowReactionsModal)({message:r}),n()},t.handlePin=function(){var e=t.props,n=e.onConfirmPin,r=e.channel,a=e.message,o=e.onClose;n(r,a),o()},t.handleJoinNotifConfiguration=function(){var e=t.props,n=e.channel,r=e.onClose,a=e.onOpenGuildSettings,o=n.getGuildId();null!=o&&a(o,f.GuildSettingsSections.OVERVIEW),r()},t.handleUnpin=function(e){var n=t.props,r=n.onUnpinMessage,a=n.onConfirmUnpin,o=n.channel,i=n.onClose,l=n.message;e.shiftKey?r(o,l.id):a(o,l),i()},t.handleMarkUnread=function(){var e=t.props,n=e.onMarkUnread,r=e.onClose,a=e.channel,o=e.message;n(a.id,o.id),r()},t.renderJoinNotificationOption=function(){var e=t.props,n=e.message,r=e.channel,a=e.onCanManageGuild,o=r.getGuildId();return null==o?null:n.type===f.MessageTypes.USER_JOIN&&a({guildId:o})?y(l.default,{label:p.default.Messages.CONFIGURE,className:h.default.item,action:t.handleJoinNotifConfiguration}):null},t}return _(t,e),t.prototype.render=function(){var e,t,n,r,o,u,d,c=this.props,m=c.message,v=c.currentUserId,_=c.canEdit,g=c.canPin,E=c.developerMode,S=c.canDelete;return m.state===f.MessageStates.SEND_FAILED?e=y(l.default,{label:p.default.Messages.RETRY,className:h.default.item,action:this.handleRetry}):(_&&m.author.id===v&&(t=y(l.default,{label:p.default.Messages.EDIT,className:h.default.item,action:this.handleEdit})),g&&(n=!1===m.pinned?y(l.default,{label:p.default.Messages.PIN,className:h.default.item,action:this.handlePin}):y(l.default,{label:p.default.Messages.UNPIN,className:h.default.item,action:this.handleUnpin})),d=y(l.default,{label:p.default.Messages.MARK_UNREAD,className:h.default.item,action:this.handleMarkUnread})),s.SUPPORTS_COPY&&E&&(r=y(a.Fragment,{},void 0,y(l.default,{label:p.default.Messages.COPY_ID,className:h.default.item,action:this.handleCopyID}),y(l.default,{label:p.default.Messages.COPY_LINK,className:h.default.item,action:this.handleCopyLink}))),S&&(o=y(l.default,{label:p.default.Messages.DELETE,className:h.default.item,action:this.handleDelete})),m.reactions.length&&(u=y(l.default,{label:p.default.Messages.REACTIONS,className:h.default.item,action:this.handleReactions})),y("div",{className:h.default.container,role:"menu"},void 0,y(i.default,{},void 0,n,t,e,d,r,o,u,this.renderJoinNotificationOption()))},t}(a.PureComponent);t.MessageOptionPopout=g,g.displayName="MessageOptionPopout";var E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).renderOptionPopout=function(e){var n=e.closePopout,r=t.props,a=r.channel,o=r.message,i=r.canDelete,l=r.canEdit,u=r.canPin,s=r.developerMode,d=r.currentUserId,c=r.onStartEditMessage,f=r.onRetrySendMessage,p=r.onMarkUnread,h=r.onDeleteMessage,m=r.onConfirmPin,v=r.onOpenGuildSettings,_=r.onUnpinMessage,E=r.onConfirmUnpin,S=r.onCanManageGuild,I=r.onConfirmDelete,T=r.onShowReactionsModal;return y(g,{channel:a,message:o,developerMode:s,canEdit:l,canPin:u,canDelete:i,onClose:n,onStartEditMessage:c,onRetrySendMessage:f,onMarkUnread:p,onDeleteMessage:h,onConfirmDelete:I,onConfirmPin:m,onOpenGuildSettings:v,onUnpinMessage:_,onConfirmUnpin:E,onCanManageGuild:S,onShowReactionsModal:T,currentUserId:d})},t}return _(t,e),t.prototype.render=function(){var e=this.props,t=e.message,n=e.currentUserId,r=e.canDelete,i=e.canPin,l=e.developerMode,f=e.className;return t.author.isLocalBot()?null:t.author.id===n||r||i||s.SUPPORTS_COPY&&l?y(c.default,{renderPopout:this.renderOptionPopout,position:c.default.Positions.BOTTOM,align:c.default.Align.CENTER},void 0,function(e,t){var n;return a.createElement(d.default,v({},e,{className:(0,o.default)(h.default.button,f,(n={},n[h.default.active]=t,n)),"aria-label":p.default.Messages.MESSAGE_OPTIONS}),y(u.default,{name:u.default.Names.OVERFLOW_MENU,className:h.default.icon}))}):null},t}(a.PureComponent);t.default=E,E.displayName="MessageOptionButton"},8410:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=l(n(0)),o=l(n(21)),i=(r=n(6221))&&r.__esModule?r:{default:r};function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e){var t=e.title,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["title"]);return a.createElement(o.default,u({className:i.default.button},n,{size:o.ButtonSizes.MIN}),t)};s.displayName="MessagePromoteButton",s.Colors=o.default.Colors,s.Looks=o.default.Looks;var d=s;t.default=d},8411:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(12)),a=l(n(2)),o=l(n(7679)),i=n(1);function l(e){return e&&e.__esModule?e:{default:e}}var u={search:function(e,t){null==o.default.getResults(e,t)&&(a.default.dirtyDispatch({type:i.ActionTypes.INTEGRATION_QUERY,integration:e,query:t}),r.default.get({url:i.Endpoints.INTEGRATION_SEARCH(i.ChannelTextAreaIntegrations[e].command),query:{q:t}}).then(function(n){a.default.dispatch({type:i.ActionTypes.INTEGRATION_QUERY_SUCCESS,integration:e,query:t,results:n.body})},function(){return a.default.dispatch({type:i.ActionTypes.INTEGRATION_QUERY_FAILURE,integration:e,query:t})}))}};t.default=u},8412:function(e,t,n){"use strict";(function(e){t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=F(n(8)),i=F(n(6)),l=F(n(8413)),u=F(n(124)),s=n(200),d=n(35),c=F(n(192)),f=F(n(7057)),p=F(n(7490)),h=F(n(7059)),m=F(n(477)),v=F(n(137)),y=F(n(106)),_=F(n(58)),g=F(n(458)),E=n(6592),S=F(n(278)),I=F(n(13)),T=n(99),O=n(7060),A=F(n(7680)),N=F(n(21)),C=F(n(8419)),M=F(n(7681)),b=F(n(24)),R=F(n(42)),P=F(n(8420)),D=F(n(65)),L=F(n(223)),w=n(238),U=n(1),k=F(n(4)),G=F(n(6226));function F(e){return e&&e.__esModule?e:{default:e}}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function B(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var V="true"===e.env.ENABLE_SLATE,K=null,W=Object.freeze({UPLOAD_A_FILE:"UPLOAD_A_FILE",INVITE_TO_PLAY_GAME:"INVITE_TO_GAME",INVITE_TO_SPECTATE_GAME:"INVITE_TO_SPECTATE_GAME",INVITE_TO_LISTEN:"INVITE_TO_LISTEN",INVITE_TO_WATCH:"INVITE_TO_WATCH"}),z=function(e,t,n,r){var a=[];return e&&a.push({type:W.UPLOAD_A_FILE,icon:R.default.Names.UPLOAD,display:k.default.Messages.CHAT_ATTACH_UPLOAD_A_FILE}),t&&r.forEach(function(e){e.type===U.ActivityTypes.PLAYING&&(0,m.default)(e,U.ActivityFlags.JOIN)&&a.push({type:W.INVITE_TO_PLAY_GAME,icon:R.default.Names.GAMEPAD,display:k.default.Messages.CHAT_ATTACH_INVITE_TO_PLAY_GAME.format({channel:(0,v.default)(n,!0),game:null!=e?e.name:""}),activity:e}),e.type===U.ActivityTypes.PLAYING&&(0,m.default)(e,U.ActivityFlags.SPECTATE)&&a.push({type:W.INVITE_TO_SPECTATE_GAME,icon:R.default.Names.EYE,display:k.default.Messages.CHAT_ATTACH_INVITE_TO_SPECTATE_GAME.format({channel:(0,v.default)(n,!0),game:null!=e?e.name:""}),activity:e}),e.type===U.ActivityTypes.LISTENING&&(0,m.default)(e,U.ActivityFlags.SYNC)&&a.push({type:W.INVITE_TO_LISTEN,icon:R.default.Names.PERSON_PLAY,display:k.default.Messages.CHAT_ATTACH_INVITE_TO_LISTEN.format({channel:(0,v.default)(n,!0),name:null!=e?e.name:""}),activity:e}),e.type===U.ActivityTypes.WATCHING&&(0,m.default)(e,U.ActivityFlags.SYNC)&&a.push({type:W.INVITE_TO_WATCH,icon:R.default.Names.EYE,display:k.default.Messages.CHAT_ATTACH_INVITE_TO_WATCH.format({channel:(0,v.default)(n,!0),name:null!=e?e.name:""}),activity:e})}),a},Y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleFileUpload=function(){var e=t.props.onFileUpload;t.close(),e&&e()},t.handleInviteToPlay=function(e){var n=t.props.onInviteToPlay;t.close(),n&&n(e)},t.handleInviteToSpectate=function(e){var n=t.props.onInviteToSpectate;t.close(),n&&n(e)},t.handleInviteToListen=function(e){var n=t.props.onInviteToListen;t.close(),n&&n(e)},t.handleInviteToWatch=function(e){var n=t.props.onInviteToWatch;t.close(),n&&n(e)},t}B(t,e);var n=t.prototype;return n.getOnClick=function(e){var t=this;switch(e.type){case W.UPLOAD_A_FILE:return this.handleFileUpload;case W.INVITE_TO_PLAY_GAME:var n=e.activity;return function(){return t.handleInviteToPlay(n)};case W.INVITE_TO_SPECTATE_GAME:var r=e.activity;return function(){return t.handleInviteToSpectate(r)};case W.INVITE_TO_LISTEN:var a=e.activity;return function(){return t.handleInviteToListen(a)};case W.INVITE_TO_WATCH:var o=e.activity;return function(){return t.handleInviteToListen(o)}}},n.close=function(){c.default.close("popout-channel-text-area-attachments")},n.render=function(){var e=this,t=this.props,n=t.canAttachFiles,r=t.canSendInvites,a=t.channel,o=t.activities,i=z(n,r,a,o).map(function(t,n){return x(_.default,{onClick:e.getOnClick(t),className:G.default.attachPopoutRow},n,x(R.default,{name:t.icon,className:G.default.attachPopoutIcon,foreground:G.default.attachPopoutIconForeground}),x("div",{className:G.default.attachPopoutRowText},void 0,t.display))});return x("div",{className:G.default.attachPopout},void 0,i)},t}(a.PureComponent);function q(e){return{focused:e,selectedAutocomplete:0,autocompleteType:null,submitting:!1}}Y.displayName="ChannelTextAreaAttachPopout";var $=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._gifPickerButtonRef=a.createRef(),t._mounted=!1,t._focusBlurQueue=Promise.resolve(),t.state=j({richMode:!0,SlateChannelTextAreaComponent:K},q(!0)),t.parser={plainToRaw:function(e){return S.default.parse(t.props.channel,e,t.props.type===U.TextareaTypes.EDIT).content},rawToPlain:function(e){return S.default.unparse(e,t.props.channel.id)}},t.handlePossibleChange=function(){t.maybeShowAutocomplete(),t.maybeLoadSlateComponent()},t.focus=function(){t._focusBlurQueue.then(function(){t.setState({focused:!0},function(){var e=H(t)._editorRef;null!=e&&e.focus()})})},t.saveCurrentText=function(e){void 0===e&&(e=!0);var n=t.props,r=n.type,a=n.onSaveCurrentText,o=n.channel;r===U.TextareaTypes.NORMAL&&(e&&t.saveCurrentTextThrottled.cancel(),a&&a(o.id))},t.handleBeforeUnload=function(){return t.saveCurrentText()},t.saveCurrentTextThrottled=i.default.throttle(t.saveCurrentText.bind(H(t),!1),500),t.maybeShowAutocomplete=function(){var e=t.getAutocompletePrefix(),n=e.prefix,r=e.query,a=e.type;if(null!=n&&null!=r&&null!=a){var o=t.props,i=o.autocompleteOptions,l=o.onAutocompleteQuery,u=i[a];l&&l(u,r,a)}t.state.autocompleteType!==a?t.setState({autocompleteType:a},t.fixSelectedAutocomplete):t.fixSelectedAutocomplete()},t.fixSelectedAutocomplete=function(){var e=t.state.selectedAutocomplete;0!==e&&e>=t.getAutocompletes().length&&t.setState({selectedAutocomplete:0})},t.moveSelection=function(e){var n=t.getAutocompletePrefix().prefix,r=t.state.selectedAutocomplete,a=t.getAutocompletes().length;return 0!==a&&null!=n&&(r+e>=a?t.setState({selectedAutocomplete:0}):r+e<0?t.setState({selectedAutocomplete:a-1}):t.setState({selectedAutocomplete:r+e}),!0)},t.renderAttachPopout=function(e){var n=t.props,r=n.channel,o=n.canAttachFiles,i=n.canSendInvites,l=n.activities,u=n.onInviteToPlay,s=n.onInviteToSpectate,d=n.onInviteToListen,c=n.onInviteToWatch;return a.createElement(Y,j({},e,{canAttachFiles:o,canSendInvites:i,channel:r,activities:l,onFileUpload:t.handleStartFileUpload,onInviteToPlay:u,onInviteToSpectate:s,onInviteToListen:d,onInviteToWatch:c}))},t.toggleMode=function(){t.setState({richMode:!t.state.richMode})},t.handleSetRef=function(e){t._editorRef=e},t.handleSetFileInputRef=function(e){t._fileInputRef=e},t.handleTabOrEnter=function(){var e=t.state.selectedAutocomplete,n=t.getAutocompletes();return null!=t.getAutocompletePrefix().prefix&&0!==n.length&&(t.selectAutocompletion(e),!0)},t.handleStartFileUpload=function(){t._fileInputRef&&t._fileInputRef.activateUploadDialogue()},t.handleFileUpload=function(e){var n=t.props.onFileUpload;n&&n(e.currentTarget.files)},t.handleSubmit=function(e){var n=t.props,r=n.value,a=n.onSubmit,o=n.type,i=(null==e?r:e).trim();t.state.submitting||t.setState({submitting:!0},function(){a&&a(i).then(function(e){var n=e.shouldClear,r=e.shouldRefocus;t._mounted&&(n&&o===U.TextareaTypes.NORMAL&&t.clearValue(),t.setState({submitting:!1},r?t.focus:void 0))})})},t.handleFocus=function(e){var n=t.props.onFocus,r=t.state.focused;n&&n(e),r||t.setState({focused:!0})},t.handleBlur=function(e){var n=t.props.onBlur,r=t.state.focused;n&&n(e),r&&t.setState({focused:!1})},t.handlePasteItem=function(e,n){var r=t.props,a=r.channel,o=r.onFileUpload,i=r.canPasteFiles;if(!(r.type!==U.TextareaTypes.NORMAL||!a.isPrivate()&&!i||a.isPrivate()&&a.isManaged()))switch(n.type){case"image/png":e.preventDefault();var l=n.getAsFile();if(null==l)break;t.saveCurrentText(),2===e.clipboardData.items.length?e.clipboardData.items[0].getAsString(function(e){o&&o([(0,E.makeFile)(l,t.extractFileName(e))])}):o&&o([(0,E.makeFile)(l)])}},t.handleOuterClick=function(e){t.maybeLoadSlateComponent(!0),"SELECT"!==e.currentTarget.tagName&&t.focus()},t.handleContextMenu=function(e,n){var r=t.props.type;I.default.embedded&&(0,d.openContextMenu)(e,function(e){return a.createElement(p.default,j({},e,{type:r===U.TextareaTypes.EDIT?U.ContextMenuTypes.CHANNEL_TEXT_AREA_EDIT:U.ContextMenuTypes.CHANNEL_TEXT_AREA,value:n}))},{align:w.Align.BOTTOM})},t.handleAutocompleteClick=function(e){return t.selectAutocompletion(e)},t.handleAutocompleteHover=function(e){t.setState({selectedAutocomplete:e})},t.handleSelectGIF=function(e){t.handleSubmit(e.url),t.focus()},t.handleOnChange=function(e){var n=t.props.onChange,r=e.currentTarget.value;n&&n(e,r)},t.insertEmoji=function(e,n){void 0===n&&(n=!0);var r=H(t)._editorRef;null!=e&&null!=r&&r.insertEmoji(e,n)},t}B(t,e);var r=t.prototype;return r.componentDidMount=function(){var e=this;this._mounted=!0,Promise.resolve().then(function(){e.maybeShowAutocomplete(),window.addEventListener("beforeunload",e.handleBeforeUnload)}),this.focus(),this.maybeLoadSlateComponent()},r.componentWillUnmount=function(){this._mounted=!1,this.saveCurrentText(),window.removeEventListener("beforeunload",this.handleBeforeUnload)},r.componentDidUpdate=function(e){this.props.value!==e.value&&(this.maybeShowAutocomplete(),this.saveCurrentTextThrottled(),this.maybeLoadSlateComponent()),this.fixSelectedAutocomplete()},r.maybeLoadSlateComponent=function(e){var t=this;void 0===e&&(e=!1),V&&this.shouldLoadSlateComponent(e)&&(0,s.importWithRetry)(function(){return Promise.all([n.e(0),n.e(3),n.e(326),n.e(328)]).then(n.t.bind(null,9349,7))}).then(function(e){var n=e.default;K=n,t.setState({SlateChannelTextAreaComponent:K})})},r.shouldLoadSlateComponent=function(e){if(!this.state.richMode)return!1;if(null!=this.state.SlateChannelTextAreaComponent)return!1;if(e||this.props.value.length>0)return!0;var t=this._editorRef,n=null==t?null:t.getCurrentWord().word;return null!=n&&n.length>0},r.blur=function(){var e=this._editorRef;null!=e&&e.blur()},r.clearValue=function(){this.setState(q(!0));var e=this._editorRef;e&&e.clearValue(),this.saveCurrentText()},r.appendText=function(e){var t=this._editorRef;t&&t.insertText(e)},r.getAutocompletePrefix=function(){var e=this._editorRef;if(null==e)return{prefix:null,query:null,type:null};var t=e.getCurrentWord(),n=t.word,r=t.isAtStart;if(null==n)return{prefix:null,query:null,type:null};var a=this.props.autocompleteOptions,o=n.slice(1).toLowerCase(),l=(0,i.default)(a).keys().find(function(e){return a[e].matches(n[0],o,r)});return{prefix:null==l?null:n,query:null==l?null:o,type:l}},r.getAutocompletes=function(){var e=this.props.autocompletes,t=[];if(null!=e)for(var n in e){e[n].forEach(function(e){return t.push(e)})}return t},r.selectAutocompletion=function(e){var t=null,n=null,r=this.state.autocompleteType,a=this.props,o=a.autocompleteOptions,i=a.autocompletes;if(null!=r&&null!=o[r]&&null!=i){var l=o[r];t=l.getPlainText(e,i),n=l.getRawText(e,i);var u=l.onSelect,s=this.getAutocompletePrefix().prefix;if(null!=u&&null!=s)u(s.slice(1),e,i)}if(null!=t&&null!=n)if("REACTIONS"===r)this.handleSubmit(t);else{var d=this._editorRef;d&&d.insertAutocomplete(t,n)}},r.getEnabledMode=function(){var e=this.props,t=e.disabled,n=e.canAttachFiles,r=e.canSendInvites,a=e.channel,o=e.activities,i=this.state.submitting;return t||i?"Disabled":0===z(n,r,a,o).length?"EnabledNoAttach":""},r.getAutocompleteMode=function(){var e=this.props.renderCustomAutocomplete,t=this.state.focused;return null!=this.getAutocompletePrefix().prefix&&t||null!=e?"Autocomplete":"NoAutocomplete"},r.getTypeMode=function(){switch(this.props.type){case U.TextareaTypes.EDIT:return"Edit";case U.TextareaTypes.FORM:return"Form";default:return""}},r.renderAttachButton=function(){var e=this.props,t=e.disabled,n=e.type,r=e.canAttachFiles,a=e.canSendInvites,o=e.channel,i=e.activities,l=e.onOpenAttachPopout;if(t||n!==U.TextareaTypes.NORMAL||0===z(r,a,o,i).length)return null;var u=i.some(function(e){return(0,m.default)(e,U.ActivityFlags.SYNC)}),s=i.some(function(e){return(0,h.default)(e)})||u;return a&&s?x(b.default,{},void 0,x(L.default,{closeOnScroll:!1,render:this.renderAttachPopout,position:L.default.Positions.TOP_LEFT,shadow:!1,animationType:L.default.Animations.NONE,uniqueId:"popout-channel-text-area-attachments",onOpen:l},void 0,x(N.default,{look:N.default.Looks.BLANK,size:N.default.Sizes.NONE,tabIndex:(0,O.getTabIndex)(O.TabIndexKeys.CHANNEL_TEXT_AREA_UPLOAD),className:G.default.attachButton,innerClassName:G.default.attachButtonInner,"aria-label":k.default.Messages.CHAT_ATTACH_UPLOAD_OR_INVITE},void 0,x(R.default,{name:R.default.Names.PLUS_CIRCLE_PLAY,className:G.default.attachButtonIcon,foreground:G.default.attachButtonPlay,background:G.default.attachButtonPlus,width:24,height:24}))),x("div",{className:G.default.attachButtonDivider})):x(b.default,{className:G.default.attachWrapper},void 0,x(N.default,{look:N.default.Looks.BLANK,size:N.default.Sizes.NONE,onClick:this.handleStartFileUpload,tabIndex:(0,O.getTabIndex)(O.TabIndexKeys.CHANNEL_TEXT_AREA_UPLOAD),className:G.default.attachButton,innerClassName:G.default.attachButtonInner,"aria-label":k.default.Messages.CHAT_ATTACH_UPLOAD_A_FILE},void 0,x(R.default,{name:R.default.Names.PLUS_CIRCLE,className:G.default.attachButtonIcon,foreground:G.default.attachButtonPlus,width:24,height:24})),x("div",{className:G.default.attachButtonDivider}))},r.renderPremiumGiftButton=function(){var e=this.props,t=e.disabled,n=e.onPremiumGiftClick,r=e.shouldRenderPremiumGiftButton;return t||!r?null:x(D.default,{text:k.default.Messages.PREMIUM_GIFT_BUTTON_TOOLTIP},void 0,function(e){var t=e.onMouseEnter,r=e.onMouseLeave;return x(C.default,{className:G.default.button,tabIndex:(0,O.getTabIndex)(O.TabIndexKeys.CHANNEL_TEXT_AREA_PREMIUM_GIFT),iconName:R.default.Names.GIFT,onClick:n,onMouseEnter:t,onMouseLeave:r,isActive:!1,label:k.default.Messages.PREMIUM_GIFT_BUTTON_LABEL})})},r.getGIFPickerButton=function(){return this._gifPickerButtonRef.current},r.renderGIFPickerButton=function(){var e=this,t=this.props,n=t.disabled,r=t.isGIFPickerActive,o=t.onGIFPickerToggle,i=t.justFavorited,l=t.shouldShowTooltipOnFavorite;return n||null==o?null:x(D.default,{text:i&&l?k.default.Messages.GIF_TOOLTIP_FAVORITED_PICKER_BUTTON:null,forceOpen:!0},void 0,function(t){return a.createElement("div",j({ref:e._gifPickerButtonRef,className:G.default.buttonContainer},t),x(C.default,{className:G.default.button,tabIndex:(0,O.getTabIndex)(O.TabIndexKeys.CHANNEL_TEXT_AREA_GIF_PICKER),iconName:R.default.Names.INVERTED_GIF_LABEL,onClick:o,isActive:r,pulse:i,label:k.default.Messages.GIF_BUTTON_LABEL}))})},r.renderEmojiButton=function(){var e=this.props,t=e.channel,n=e.renderEmojiPickerPopout,r=e.isEmojiPickerActive,o=e.onEmojiPickerToggle;return e.disabled||null==n?null:x(g.default,{shouldShow:r,onRequestClose:o,renderPopout:n,animation:g.default.Animation.NONE,position:g.default.Positions.TOP,align:g.default.Align.RIGHT},void 0,function(e,n){return a.createElement(M.default,j({},e,{onClick:function(e){e.stopPropagation(),o()},className:G.default.button,channel:t,active:n,tabIndex:(0,O.getTabIndex)(O.TabIndexKeys.CHANNEL_TEXT_AREA_EMOJI)}))})},r.renderAutocomplete=function(){var e=this.props,t=e.autocompleteOptions,n=e.autocompletes,r=e.renderCustomAutocomplete,a=this.state,o=a.focused,i=a.autocompleteType,l=a.selectedAutocomplete,u=this.getAutocompletePrefix().prefix;if(null!=r)return x(A.default,{className:G.default.autocomplete,isCustom:!0,onMouseDown:this.handleAutocompleteMouseDown},void 0,r(u));if(!o||null==i||null==t[i]||null==u||null==n)return null;var s=u.slice(1).toLowerCase();return x(A.default,{className:G.default.autocomplete,onMouseDown:this.handleAutocompleteMouseDown},void 0,t[i].renderResults(s,l,this.handleAutocompleteHover,this.handleAutocompleteClick,n))},r.render=function(){var e=this.props,t=e.value,n=e.disabled,r=e.placeholder,i=e.onResize,l=e.className,u=e.backgroundOpacity,s=e.channel,d=e.renderers,c=this.state,p=c.submitting,h=c.richMode,m=n?k.default.Messages.NO_SEND_MESSAGES_PERMISSION_PLACEHOLDER:r,v=s.rateLimitPerUser<=0,_=this.getEnabledMode(),g=this.getAutocompleteMode(),S=this.getTypeMode(),I={ref:this.handleSetRef,className:(0,o.default)((0,T.getClass)(G.default,"textArea",_),(0,T.getClass)(G.default,"textArea",S)),placeholder:m,disabled:n,submitting:p,onChange:this.props.onChange,onResize:i,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp,onFocus:this.handleFocus,onBlur:this.handleBlur,onPasteItem:this.handlePasteItem,onContextMenu:this.handleContextMenu,onTabOrEnter:this.handleTabOrEnter,moveSelection:this.moveSelection,maybeShowAutocomplete:this.maybeShowAutocomplete,onSubmit:this.handleSubmit};return x("div",{className:(0,o.default)((0,T.getClass)(G.default,"channelTextArea",_),l),onClick:this.handleOuterClick},void 0,x("div",{className:(0,o.default)((0,T.getClass)(G.default,"inner",_),(0,T.getClass)(G.default,"inner",g),G.default[u+"BackgroundOpacity"])},void 0,this.renderAttachButton(),x("div",{className:G.default.uploadInput},void 0,a.createElement(f.default,{ref:this.handleSetFileInputRef,onChange:this.handleFileUpload,multiple:v,tabIndex:-1,maxSize:(0,E.maxFileSize)(s.getGuildId())})),h&&null!=K?a.createElement(K,j({},I,{key:n?"disabled":"enabled",parser:this.parser,onPossibleChange:this.handlePossibleChange,renderers:d,initialValue:n?"":t})):a.createElement(P.default,j({},I,{value:n?"":t})),x("div",{className:G.default.buttons},void 0,this.renderPremiumGiftButton(),this.renderGIFPickerButton(),this.renderEmojiButton()),this.renderAutocomplete(),V&&null!=K?x(y.default,{onClick:this.toggleMode,style:{position:"absolute",bottom:"-20px",right:"0"}},void 0,"Switch to ",this.state.richMode?"plain":"rich"):null))},r.extractFileName=function(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelector("img");if(t instanceof HTMLImageElement){var n;try{var r=u.default.parse(t.src).pathname;null!=r&&r.length>0&&(n=l.default.basename(r).split(".")[0])}catch(e){}if(null!=n&&n.length>0)return n+".png"}},r.handleAutocompleteMouseDown=function(e){e.preventDefault()},t}(a.PureComponent);$.displayName="ChannelTextArea",$.defaultProps={type:U.TextareaTypes.NORMAL,disabled:!1,shouldRenderPremiumGiftButton:!1};var J=$;t.default=J}).call(this,n(123))},8418:function(e,t,n){e.exports=n.p+"c83861b2303b7ee40c419e9590d57f11.svg"},8419:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=s(n(8)),i=s(n(21)),l=s(n(42)),u=s(n(6224));function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var c=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e,t,n,r=this.props,a=r.tabIndex,s=r.className,c=r.iconClassName,f=r.iconName,p=r.onClick,h=r.isActive,m=r.onMouseEnter,v=r.onMouseLeave,y=r.pulse,_=r.label;return d(i.default,{look:i.default.Looks.BLANK,size:i.default.Sizes.NONE,"aria-label":_,tabIndex:a,className:(0,o.default)(u.default.buttonWrapper,(e={},e[u.default.active]=h,e)),innerClassName:(0,o.default)(u.default.button,s,(t={},t[u.default.pulseButton]=y,t)),onClick:p,onMouseEnter:m,onMouseLeave:v},void 0,d(l.default,{name:f,className:(0,o.default)(u.default.icon,c,(n={},n[u.default.pulseIcon]=y,n))}))},r}(a.PureComponent);c.displayName="ChannelTextAreaButton";var f=c;t.default=f},8420:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),a=n(5953),o=s(n(13)),i=n(7060),l=s(n(545)),u=n(1);function s(e){return e&&e.__esModule?e:{default:e}}var d=/(\t|\s)/,c=function(e){var t,n;function s(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={nextSelection:-1},t.focus=function(){var e=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)._ref;null!=e&&e.focus()},t.handleSetRef=function(e){t._ref=e},t.handleKeyPress=function(e){switch(e.which){case u.KeyboardKeys.ENTER:if(!e.shiftKey&&!e.ctrlKey&&!t.hasOpenCodeBlock())return e.preventDefault(),t.props.onSubmit()}},t.handleKeyDown=function(e){switch(e.which){case u.KeyboardKeys.ARROW_DOWN:t.props.moveSelection(1)&&e.preventDefault();break;case u.KeyboardKeys.N:e.ctrlKey&&t.props.moveSelection(1)&&e.preventDefault();break;case u.KeyboardKeys.ARROW_UP:t.props.moveSelection(-1)&&e.preventDefault();break;case u.KeyboardKeys.P:e.ctrlKey&&t.props.moveSelection(-1)&&e.preventDefault();break;case u.KeyboardKeys.TAB:case u.KeyboardKeys.ENTER:t.handleTabOrEnterDown(e)}var n=t.props.onKeyDown;n&&n(e)},t.handleKeyUp=function(e){switch(e.which){case u.KeyboardKeys.ARROW_RIGHT:case u.KeyboardKeys.ARROW_LEFT:t.props.maybeShowAutocomplete()}var n=t.props.onKeyUp;n&&n(e)},t.handlePaste=function(e){if(null!=e.clipboardData&&null!=e.clipboardData.items&&0!==e.clipboardData.items.length)for(var n=0;n<e.clipboardData.items.length;n++)t.props.onPasteItem(e,e.clipboardData.items[n])},t.handleClick=function(){t.props.maybeShowAutocomplete()},t.handleContextMenu=function(e){var n=t.props.onContextMenu;o.default.embedded&&n(e,(0,a.getSelectionText)())},t.handleOnChange=function(e){var n=t.props.onChange,r=e.currentTarget.value;n&&n(e,r)},t}n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var c=s.prototype;return c.componentDidMount=function(){var e=this;Promise.resolve().then(function(){var t=e.props.value;e._ref&&e._ref.setSelection(t.length,t.length)}),this.focus()},c.componentDidUpdate=function(e,t){this.state.nextSelection!==t.nextSelection&&null!=this._ref&&this._ref.setSelection(this.state.nextSelection,this.state.nextSelection)},c.getCurrentWord=function(){var e=this._ref;if(null==e)return{word:null,isAtStart:!1};var t=this.props.value;if(0===t.trim().length)return{word:null,isAtStart:!1};if(t.startsWith("/giphy ")||t.startsWith("/tenor "))return{word:t,isAtStart:!0};for(var n=e.selectionStart,r=e.selectionEnd;n>0;){if(d.test(t[n-1]))break;n--}return{word:t.slice(n,r),isAtStart:0===n}},c.blur=function(){var e=this._ref;null!=e&&e.blur()},c.clearValue=function(){},c.insertAutocomplete=function(e,t){var n=this.getCurrentWord().word;if(null==n)this.insertText(e,!0);else{var r=this._ref;if(null==r)return;var a=r.value.slice(0,r.selectionStart-n.length),o=r.value.slice(r.selectionEnd);this._insertText(e,a,o,!0)}},c.insertText=function(e,t){void 0===t&&(t=!0);var n=this._ref;if(null!=n){var r=n.value.slice(0,n.selectionStart),a=n.value.slice(n.selectionEnd);this._insertText(e,r,a,t)}},c._insertText=function(e,t,n,r){var a=this;if(null!=this._ref){r&&(e+=" ");var o=t+e+n,i=this.props.onChange;i&&i(null,o);var l=t.length+e.length;this.setState({nextSelection:l},function(){a.props.maybeShowAutocomplete()})}},c.hasOpenCodeBlock=function(){var e=this._ref;if(null==e)return!1;var t=this.props.value.slice(0,e.selectionStart).match(/```/g);return null!=t&&t.length>0&&t.length%2!=0},c.render=function(){var e=this.props,t=e.value,n=e.disabled,a=e.placeholder,o=e.onResize,u=e.className,s=e.submitting;return r.createElement(l.default,{ref:this.handleSetRef,className:u,rows:1,fontWidthEstimate:6,placeholder:a,disabled:n||s,onChange:this.handleOnChange,onResize:o,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onPaste:this.handlePaste,onClick:this.handleClick,onContextMenu:this.handleContextMenu,value:n?"":t,tabIndex:(0,i.getTabIndex)(i.TabIndexKeys.CHANNEL_TEXT_AREA)})},c.handleTabOrEnterDown=function(e){this.props.onTabOrEnter()?(e.preventDefault(),e.stopPropagation()):e.which===u.KeyboardKeys.TAB&&this.hasOpenCodeBlock()&&(e.preventDefault(),e.stopPropagation(),this.insertText("\t",!1))},c.insertEmoji=function(e,t){this.insertText(":"+e.name+":",t)},s}(r.PureComponent);c.displayName="PlainTextArea";var f=c;t.default=f},8421:function(e,t,n){"use strict";t.__esModule=!0,t.promptToUpload=function(e,t,n,p){void 0===n&&(n=!1);void 0===p&&(p=!0);if(e.length<1)return;var h=t.getGuildId();if(d.anyFileTooLarge(e,h)){var m=s.default.getCurrentUser();r.default.push(l.default,{title:f.default.Messages.UPLOAD_AREA_TOO_LARGE_TITLE,help:f.default.Messages.UPLOAD_AREA_TOO_LARGE_HELP.format({maxSize:d.sizeString(d.maxFileSize(h))}),promo:!c.default.canUploadLargeFiles(m)})}else p?(o.default.pushFiles({files:e,channelId:t.id}),u.default.isModalOpen(i.default)||r.default.push(i.default,{backdropInstant:n})):a.default.instantBatchUpload(t.id,e)};var r=p(n(30)),a=p(n(6750)),o=p(n(7061)),i=p(n(7682)),l=p(n(6866)),u=p(n(463)),s=p(n(11)),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(6592)),c=p(n(96)),f=p(n(4));function p(e){return e&&e.__esModule?e:{default:e}}},8422:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=d(n(2)),a=d(n(6866)),o=d(n(8423)),i=d(n(141)),l=d(n(30)),u=n(1),s=d(n(4));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,d){var f="",p=!1;null!=n&&(f=n.content,p=n.tts);var h=new o.default(u.Endpoints.MESSAGES(e));h.on("start",function(t){r.default.dispatch({type:u.ActionTypes.UPLOAD_START,channelId:e,file:t,uploader:h})}),h.on("progress",function(t){r.default.dispatch({type:u.ActionTypes.UPLOAD_PROGRESS,channelId:e,file:t})}),h.on("error",function(o,d){r.default.dispatch({type:u.ActionTypes.UPLOAD_FAIL,channelId:e,file:o}),d!==u.AbortCodes.EXPLICIT_CONTENT?l.default.push(a.default,{title:s.default.Messages.UPLOAD_AREA_UPLOAD_FAILED_TITLE,help:s.default.Messages.UPLOAD_AREA_UPLOAD_FAILED_HELP.format({onClick:function(){l.default.pop(),c(e,t,n)}})}):i.default.sendClydeError(e,d)}),h.on("complete",function(t){r.default.dispatch({type:u.ActionTypes.UPLOAD_COMPLETE,channelId:e,file:t})});var m={content:f,tts:p,hasSpoiler:d};h.upload(t,m)}var f={instantBatchUpload:function(e,t){Array.prototype.forEach.call(t,function(t){c(e,t)})},upload:c};t.default=f},8423:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(16)),a=u(n(6)),o=u(n(374)),i=u(n(8424)),l=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t,n;function i(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._handleXHRProgress=function(e){t._handleProgress(e.loaded,e.total)},t}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.prototype.upload=function(t,n){var i=this;void 0===n&&(n={});var u=n,s=u.hasSpoiler,d=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(u,["hasSpoiler"]);e.prototype.upload.call(this,t,d);var c=o.default.post(this._url),f=s?l.SPOILER_ATTACHMENT_PREFIX:"";c.attach("file",t,""+f+t.name),a.default.each(d,function(e,t){c.field(t,e)}),c.then(function(e){e.ok?i._handleComplete():i._handleError(e.body&&e.body.code)},function(){return i._handleError()});var p=c.xhr;(0,r.default)(null!=p,"Unexpected null XHR"),p.upload?p.upload.onprogress=this._handleXHRProgress:p.addEventListener("progress",this._handleXHRProgress,!1),this._handleStart(function(){return c.abort()})},i}(i.default);t.default=s},8424:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(60)),a=o(n(6));function o(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e){var t,n;function r(t){var n;return(n=e.call(this)||this)._lastUpdate=0,n._loaded=0,n._aborted=!1,n._handleStart=function(e){n._cancel=e,n.emit("start",n._file)},n._handleProgress=function(e,t){var r=Date.now(),a=Math.min(Math.floor(e/t*100),100),o=Math.floor((e-n._loaded)/((r-n._lastUpdate)/1e3));n._lastUpdate=r,n._loaded=e,n._file=i({},n._file,{size:t,progress:a,rate:o}),n.emit("progress",n._file)},n._handleError=function(e){n._aborted||(n.emit("error",n._file,e),n.removeAllListeners())},n._handleComplete=function(){n.emit("complete",n._file),n.removeAllListeners()},n._url=t,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.cancel=function(){null!=this._cancel&&(this._aborted=!0,this._cancel()),this._handleComplete()},o.upload=function(e,t){if(null!=this._cancel)throw new Error("Uploader.upload(...): An upload is already in progress.");this._lastUpdate=Date.now(),this._loaded=0,this._file={id:a.default.uniqueId("Uploader"),name:e.name,size:0,progress:0,rate:0}},r}(r.default);t.default=l},8425:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.Upload=void 0;var r=l(n(6)),a=l(n(3)),o=l(n(2)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(6592));n(1);function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t){this.file=e,this.channelId=t,this.classification=i.classifyFile(e),this.isImage="image"===this.classification,this.sizeString=i.sizeString(e.size),this.filename=e.name};t.Upload=u;var s=[];var d=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getFirstUpload=function(){return s.length>0?s[0]:null},a.hasAdditionalUploads=function(){return s.length>1},r}(a.default.Store))(o.default,{UPLOAD_MODAL_POP_FILE:function(e){return s.shift(),void(s=[].concat(s))},UPLOAD_MODAL_PUSH_FILES:function(e){var t=e.files,n=e.channelId;s=[].concat(s),r.default.forEach(t,function(e){s.push(new u(e,n))})},UPLOAD_MODAL_CLEAR_ALL_FILES:function(e){s=[]}});t.default=d},8426:function(e,t,n){"use strict";t.__esModule=!0,t.Emoji=y,t.CustomEmoji=_,t.TextMention=g,t.UserMention=E,t.RoleMention=I,t.ChannelMention=function(e){var t=e.id,n=(0,o.useStateFromStores)([u.default],function(){return u.default.getChannel(t)});return null==n?T:m(f.default,{className:"mention"},void 0,"#",n.name)};var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(3),i=h(n(372)),l=h(n(1033)),u=h(n(14)),s=h(n(53)),d=h(n(19)),c=h(n(11)),f=h(n(1049)),p=h(n(65));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e){var t=e.emoji;return m(p.default,{text:t.name,delay:750,position:p.default.Positions.TOP},void 0,function(e){return a.createElement(i.default,v({src:t.src,emojiName:t.name,jumboable:t.jumboable,animated:!1},e))})}function _(e){var t=e.emoji;return m(p.default,{text:t.name,delay:750,position:p.default.Positions.TOP},void 0,function(e){return a.createElement(i.default,v({emojiId:t.emojiId,emojiName:t.name,animated:t.animated,jumboable:t.jumboable},e))})}function g(e){var t=e.text;return m(f.default,{className:"mention"},void 0,t)}function E(e){var t=e.id,n=e.channel,r=(0,o.useStateFromStores)([s.default],function(){return s.default.getNick(n.guild_id,t)}),a=(0,o.useStateFromStores)([c.default],function(){return c.default.getUser(t)}),i=null==r?null==a?null:a.username:r;return m(f.default,{className:"mention"},void 0,null==i?"<@!"+t+">":"@"+i)}y.displayName="Emoji",_.displayName="CustomEmoji",g.displayName="TextMention",E.displayName="UserMention";var S=m("span",{},void 0,"@deleted-role");function I(e){var t=e.id,n=e.channel,r=(0,o.useStateFromStores)([d.default],function(){var e=d.default.getGuild(n.guild_id);return null==e?null:e.roles[t]});return null==r?S:t===n.guild_id?m(f.default,{className:"mention"},void 0,"@",r.name):m(l.default,{className:"mention",color:r.color},void 0,"@",r.name)}I.displayName="RoleMention";var T=m("span",{},void 0,"#deleted-channel")},8427:function(e,t,n){e.exports=n.p+"9cbfe5105fc5f29ef4e659059ee01a46.svg"},8428:function(e,t,n){var r={"./spritesheet-.png":8429,"./spritesheet-1f3fb.png":8430,"./spritesheet-1f3fc.png":8431,"./spritesheet-1f3fd.png":8432,"./spritesheet-1f3fe.png":8433,"./spritesheet-1f3ff.png":8434,"./spritesheet-emoji.png":7684,"./spritesheet-picker.png":8435};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=8428},8429:function(e,t,n){e.exports=n.p+"df854ca9a022bf3b5fe42ded8725e1bc.png"},8430:function(e,t,n){e.exports=n.p+"d5576612981f35a5efc4471a0d967b54.png"},8431:function(e,t,n){e.exports=n.p+"84d40f6d9dfac3808e60b42e954579fa.png"},8432:function(e,t,n){e.exports=n.p+"7df570ef230fe1610e75daad5bc78cd9.png"},8433:function(e,t,n){e.exports=n.p+"727ef9fe7ffc6bc1cf2f4d255ed2335c.png"},8434:function(e,t,n){e.exports=n.p+"62645ad3c786ff787a0701b7269ecdc2.png"},8435:function(e,t,n){e.exports=n.p+"f307550b0e648168fc41b9ec4dc7ed5c.png"},8436:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=S(n(0)),o=E(n(3)),i=E(n(2)),l=S(n(6868)),u=E(n(6749)),s=E(n(7064)),d=E(n(58)),c=E(n(24)),f=E(n(42)),p=E(n(6593)),h=n(136),m=E(n(8438)),v=E(n(7688)),y=n(1),_=E(n(4)),g=E(n(6234));function E(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var O=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={resultType:null},t.searchBarRef=a.createRef(),t.backToFrontPage=function(e){var n=t.state.resultType;e.keyCode===y.KeyboardKeys.ESCAPE&&null!=n&&(e.stopPropagation(),e.preventDefault(),t.handleClearQuery())},t.handleChangeQuery=function(e){t.search(e,y.GIFPickerResultTypes.SEARCH)},t.handleSelectSuggestion=function(e){l.resetSearch(),t.search(e,y.GIFPickerResultTypes.SEARCH_SUGGESTION,!0)},t.handleClearQuery=function(){var e=t.searchBarRef.current;l.resetSearch(),t.setState({resultType:null}),null!=e&&e.focus()},t.handleSelectGIF=function(e){var n=t.props.onSelectGIF;null!=n&&n(e)},t.handleSelectItem=function(e,n){var r=t.searchBarRef.current;switch(e){case y.GIFPickerResultTypes.TRENDING_CATEGORY:l.search(n,y.GIFPickerResultTypes.TRENDING_CATEGORY,!0),null!=r&&r.focus();break;case y.GIFPickerResultTypes.TRENDING_GIFS:l.fetchTrendingGIFs()}t.setState({resultType:e})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){l.initializeSearch(),document.addEventListener("keydown",this.backToFrontPage)},o.componentWillUnmount=function(){i.default.wait(function(){return l.resetSearch()}),document.removeEventListener("keydown",this.backToFrontPage)},o.search=function(e,t,n){l.search(e,t,n),""===e?this.setState({resultType:null}):this.state.resultType!==y.GIFPickerResultTypes.SEARCH&&this.setState({resultType:y.GIFPickerResultTypes.SEARCH})},o.renderHeaderContent=function(){var e=this.props.query;switch(this.state.resultType){case y.GIFPickerResultTypes.FAVORITES:return T(h.FormTitle,{tag:"h5",className:g.default.searchHeader},void 0,_.default.Messages.GIF_PICKER_FAVORITES);case y.GIFPickerResultTypes.TRENDING_GIFS:return T(h.FormTitle,{tag:"h5",className:g.default.searchHeader},void 0,_.default.Messages.GIF_PICKER_RESULT_TYPE_TRENDING_GIFS);default:return a.createElement(p.default,{className:g.default.searchBar,size:p.default.Sizes.MEDIUM,query:e,onChange:this.handleChangeQuery,onClear:this.handleClearQuery,placeholder:_.default.Messages.SEARCH_TENOR,ref:this.searchBarRef,autoFocus:!0})}},o.renderHeader=function(){var e=null;return null!=this.state.resultType&&(e=T(d.default,{onClick:this.handleClearQuery,className:g.default.backButton},void 0,T(f.default,{name:f.default.Names.ARROW_LEFT,title:_.default.Messages.BACK}))),T(c.default,{align:c.default.Align.CENTER},void 0,e,this.renderHeaderContent())},o.renderContent=function(){var e=this.props,t=e.resultItems,n=e.resultQuery,r=e.query,a=e.favorites,o=e.searchOffset,i=e.searchLimit,l=e.searchTotalResults,u=e.suggestions,s=this.state.resultType;return null==s?T(m.default,{onSelectItem:this.handleSelectItem}):T(v.default,{data:s===y.GIFPickerResultTypes.FAVORITES?a:t,onSelectGIF:this.handleSelectGIF,resultType:s,resultQuery:n,query:r,searchOffset:o,searchLimit:i,searchTotalResults:l,suggestions:u,onSelectSuggestion:this.handleSelectSuggestion})},o.render=function(){var e=this.props.forwardedRef;return a.createElement("div",{className:g.default.container,onClick:function(e){return e.stopPropagation()},ref:e},T("div",{className:g.default.header},void 0,this.renderHeader()),T("div",{className:g.default.content},void 0,this.renderContent()))},r}(a.PureComponent);O.displayName="GIFPicker";var A=o.default.connectStores([s.default,u.default],function(){return{query:s.default.getQuery(),favorites:u.default.getFavorites(),resultQuery:s.default.getResultQuery(),resultItems:s.default.getResultItems(),suggestions:s.default.getSuggestions(),searchOffset:0,searchTotalResults:s.default.getResultItems().length,searchLimit:null}})(O),N=a.forwardRef(function(e,t){return a.createElement(A,I({},e,{forwardedRef:t}))});t.default=N},8437:function(e,t,n){"use strict";t.__esModule=!0,t.calculateAnalyticsMetadata=function(e,t,n){var a,o=n.offset,i=n.limit,l=n.results,u=n.totalResults,s=null!=t?((a={})[t]=1,a):{};return{search_type:r.SearchTypes.GIF,load_id:e,limit:i,offset:o,page:null!=i&&null!=o?Math.floor(o/i)+1:1,total_results:u,page_results:l?l.length:null,num_modifiers:Object.keys(s).length,modifiers:s}};var r=n(1)},8438:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=_(n(3)),i=n(6868),l=_(n(6749)),u=_(n(7064)),s=_(n(42)),d=_(n(7685)),c=_(n(7686)),f=_(n(7687)),p=n(8439),h=n(7688),m=n(1),v=_(n(4)),y=_(n(6233));function _(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var E=function(e,t){return g(p.CategoryColumn,{columns:e},t)};function S(e){return e.name}E.displayName="renderColumn";var I=function(e){var t,n;function r(){for(var t,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this)._masonryRef=a.createRef(),t.state={favoritesTile:(n=l.default.getRandomFavorite(),{type:m.GIFPickerResultTypes.FAVORITES,name:v.default.Messages.GIF_PICKER_FAVORITES,icon:s.default.Names.FAVORITE_FILLED,src:null!=n?n.src:"https://media.giphy.com/media/1TOSaJsWtnhe0/giphy.gif",format:null!=n?n.format:m.GIFResultFormat.IMAGE}),selectedIndex:{column:0,row:0},focusedId:null},t.handleFocus=function(e){var n=t._masonryRef.current;null!=n&&n.scrollIntoView(e.coords.top-10,e.coords.top+e.coords.height+10),t.setState({focusedId:e.id})},t.handleSelect=function(e){var n=t.props.onSelectItem,r=t.getData().find(function(t){return S(t)===e.id});null!=r&&null!=n&&n(r.type,r.name)},t.renderItem=function(e,n,r){var a=n.width,o=n.height,i=t.props.onSelectItem,l=t.state.focusedId;return g(h.GIFPickerSearchItem,{format:e.format,color:m.Colors.PRIMARY_DARK_800,src:e.src,item:e,index:r,itemWidth:a,itemHeight:o,onClick:function(){return i(e.type,e.name)},renderExtras:t.renderCategoryExtras,focused:S(e)===l})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){0===this.props.trendingCategories.length&&(0,i.fetchTrending)()},o.getData=function(){var e=this.props.trendingCategories;return[this.state.favoritesTile].concat(e)},o.renderCategoryExtras=function(e){var t=e.name,n=e.icon,r=e.type;return g(a.Fragment,{},void 0,g("div",{className:r===m.GIFPickerResultTypes.FAVORITES?y.default.categoryFadeBlurple:y.default.categoryFade}),g("div",{className:y.default.categoryText},void 0,null!=n?g(s.default,{name:n,className:y.default.categoryIcon}):null,g("span",{className:y.default.categoryName},void 0,t)))},o.renderContent=function(e,t,n){return 0===this.props.trendingCategories.length?g(p.ResultsLoader,{columns:e,width:t,renderColumn:E}):a.createElement(c.default,{ref:this._masonryRef,className:y.default.container,width:t,height:n,gutterSize:12,getItemId:S,columns:e,getItemHeight:function(){return 110},renderItem:this.renderItem,data:this.getData()})},o.render=function(){var e=this;return g(d.default,{getItemGrid:function(){var t=e._masonryRef.current;return null!=t?t.getItemGrid():null},onFocus:this.handleFocus,onSelect:this.handleSelect},void 0,g(f.default,{desiredItemWidth:200,maxColumns:6},void 0,function(t,n,r){return e.renderContent(t,n,r)}))},r}(a.PureComponent);I.displayName="GIFPickerFrontPage";var T=o.default.connectStores([u.default],function(){return{trendingCategories:u.default.getTrendingCategories()}})(I);t.default=T},8439:function(e,t,n){"use strict";t.__esModule=!0,t.ResultsLoader=t.CategoryColumn=t.AnimatedColumn=t.Block=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=s(n(6)),i=s(n(118)),l=n(1),u=s(n(6230));function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var f=12,p=[l.Colors.PREMIUM_TIER_1_PURPLE,l.Colors.PREMIUM_TIER_1_BLUE,"#929AFA"],h=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={backgroundColor:o.default.sample(p)},t}return c(t,e),t.prototype.render=function(){return d("div",{style:{height:this.props.height,backgroundColor:this.state.backgroundColor},className:u.default.gif})},t}(a.PureComponent);t.Block=h,h.displayName="Block";var m=function(e){function t(t){var n;(n=e.call(this,t)||this).animateSlide=function(){var e=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t=e.props.direction,r=e.state,a=r.translateY,o=r.height,l=t>0?0:-o/2+f,u=t>0?-o/2+f:0;a.setValue(l),i.default.timing(a,{toValue:u,duration:800,easing:i.default.Easing.linear}).start(n.animateSlide)};var r=new Array(10).fill(null).map(function(){return o.default.random(40,150)});return n.state={blocks:r,height:2*r.reduce(function(e,t){return e+t+f},f),translateY:new i.default.Value(0)},n}c(t,e);var n=t.prototype;return n.componentDidMount=function(){this.animateSlide()},n.getAnimatedStyle=function(){return{width:100/this.props.columns+"%",transform:[{translateY:this.state.translateY.interpolate({inputRange:[0,1],outputRange:["0px","1px"]})}]}},n.render=function(){var e=this.state.blocks;return d(i.default.div,{className:u.default.column,style:this.getAnimatedStyle()},void 0,e.map(function(e,t){return d(h,{height:e},t)}),e.map(function(e,t){return d(h,{height:e},"alt"+t)}))},t}(a.Component);t.AnimatedColumn=m,m.displayName="AnimatedColumn",m.defaultProps={direction:-1};var v=function(e){var t=e.columns;return d("div",{className:u.default.column,style:{width:100/t+"%"}},void 0,new Array(4).fill(null).map(function(e,t){return d("div",{className:u.default.categoryLoader},t)}))};t.CategoryColumn=v,v.displayName="CategoryColumn";var y=function(e){function t(){return e.apply(this,arguments)||this}return c(t,e),t.prototype.render=function(){var e=this.props,t=e.columns,n=e.renderColumn;return d("div",{className:u.default.container},void 0,new Array(t).fill(null).map(function(e,r){return n(t,r)}))},t}(a.PureComponent);t.ResultsLoader=y,y.displayName="ResultsLoader"},8441:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=N(n(3)),i=N(n(100)),l=N(n(141)),u=N(n(30)),s=N(n(192)),d=N(n(120)),c=n(365),f=N(n(22)),p=N(n(868)),h=N(n(933)),m=N(n(21)),v=N(n(65)),y=N(n(75)),_=N(n(66)),g=n(908),E=N(n(278)),S=N(n(6747)),I=N(n(7690)),T=n(1),O=N(n(4)),A=N(n(6237));function N(e){return e&&e.__esModule?e:{default:e}}function C(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).trackInvite=function(e){if(null!=e&&e.ok){var t=n.props,r=t.activity,a=t.channel,o="";switch(t.activityActionType){case T.ActivityActionTypes.JOIN:o="Invite to Join";break;case T.ActivityActionTypes.SPECTATE:o="Invite to Spectate";break;case T.ActivityActionTypes.LISTEN:o="Invite to Listen";break;case T.ActivityActionTypes.WATCH:o="Invite to Watch"}return d.default.trackWithMetadata(T.AnalyticEvents.INVITE_SENT,{location:"Channel Text Area - "+o,invite_type:r.type===T.ActivityTypes.LISTENING?T.InviteTypes.SPOTIFY:T.InviteTypes.APPLICATION,application_id:r.application_id,guild_id:a.getGuildId(),channel_id:a.id,message_id:null!=e?e.body.id:null}),Promise.resolve()}},n.state={textValue:"",textFocused:!0},M(n).handleTextChange=n.handleTextChange.bind(M(n)),M(n).handleShare=n.handleShare.bind(M(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.fetchApplication()},o.componentDidUpdate=function(e){this.props.activity.application_id!==e.activity.application_id&&this.fetchApplication()},o.fetchApplication=function(){var e=this.props,t=e.activity,n=e.application;null!=t.application_id&&null==n&&i.default.fetchApplication(t.application_id)},o.renderTitle=function(){switch(this.props.activity.type){case T.ActivityTypes.LISTENING:return O.default.Messages.INVITE_EMBED_LISTENING_INVITE;case T.ActivityTypes.PLAYING:case T.ActivityTypes.STREAMING:default:return O.default.Messages.INVITE_EMBED_GAME_INVITE}},o.render=function(){var e=this,t=this.state,n=t.textValue,r=t.textFocused,o=this.props,i=o.activity,l=o.channel,u=o.activityActionType,s=o.cooldown,d=o.application,c=s>0,f=c?O.default.Messages.CHANNEL_SLOWMODE_COOLDOWN.format({seconds:Math.round((s+1e3)/1e3)}):null;return C(y.default,{size:y.default.Sizes.SMALL},void 0,C(y.default.Header,{},void 0,C(_.default,{tag:_.default.Tags.H4},void 0,this.renderTitle())),C(y.default.Content,{},void 0,C("div",{className:A.default.subHeader},void 0,O.default.Messages.MESSAGE_PREVIEW),C(I.default,{activityActionType:u,activity:i,className:A.default.preview,application:d,partyId:null!=i.party?i.party.id:null,isPreview:!0}),C("div",{className:A.default.subHeader},void 0,O.default.Messages.ADD_A_COMMENT_OPTIONAL),a.createElement(S.default,{className:A.default.textArea,value:n,focused:r,channel:l,onChange:this.handleTextChange,onSubmit:this.handleShare,type:T.TextareaTypes.FORM,ref:function(t){e.channelTextAreaRef=t}})),C(y.default.Footer,{},void 0,C(v.default,{text:f},void 0,function(t){return a.createElement("div",t,C(m.default,{disabled:c,onClick:e.handleShare},void 0,O.default.Messages.INVITE_EMBED_SEND_INVITE))}),C(m.default,{look:m.default.Looks.LINK,onClick:this.handleCancel},void 0,O.default.Messages.CANCEL)))},o.handleCancel=function(){u.default.pop()},o.handleTextChange=function(e,t){this.setState({textValue:t})},o.handleShare=function(){var e=this,t=this.props,n=t.channel,r=t.activity,a=t.activityActionType,o=t.cooldown,i=this.state.textValue;if(o>0)return Promise.resolve({shouldClear:!1,shouldRefocus:!0});var d=E.default.parse(n,i),c={activity:r,type:a};return p.default.isOpen("popout-channel-text-area-shouting")?(s.default.close("popout-channel-text-area-shouting"),l.default.sendMessage(n.id,d,!0,c).then(function(t){return e.trackInvite(t)}),u.default.pop(),Promise.resolve({shouldClear:!0,shouldRefocus:!0})):(0,g.applyChatRestrictions)(this.channelTextAreaRef,i,n).then(function(t){return t.valid?(l.default.sendMessage(n.id,d,!0,c).then(function(t){return e.trackInvite(t)}),u.default.pop(),{shouldClear:!1,shouldRefocus:!1}):{shouldClear:!1,shouldRefocus:!1}})},r}(a.PureComponent);b.displayName="ActivityInvite";var R=o.default.connectStores([h.default,f.default],function(e){var t=e.channel,n=e.activity;return{cooldown:h.default.getSlowmodeCooldownGuess(t.id),application:null!=n.application_id?f.default.getGame(n.application_id):c.SpotifyApplication}})(b);t.default=R},8442:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(null==e||null==e.assets||null==e.assets.large_image)return null;return(0,r.getAssetImage)(t,e.assets.large_image,[a.ACTIVITY_INVITE_COVER_IMAGE_SIZE,a.ACTIVITY_INVITE_COVER_IMAGE_SIZE])};var r=n(296),a=n(381)},8443:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=A(n(8)),i=A(n(477)),l=A(n(7691)),u=A(n(236)),s=A(n(122)),d=A(n(183)),c=n(239),f=n(99),p=A(n(106)),h=A(n(21)),m=A(n(24)),v=A(n(42)),y=A(n(458)),_=A(n(1039)),g=A(n(65)),E=A(n(6613)),S=A(n(328)),I=n(1),T=A(n(4)),O=A(n(6236));function A(e){return e&&e.__esModule?e:{default:e}}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var R=function(e){function t(t){var n;return M(n=e.call(this,t)||this).renderUserPopout=n.renderUserPopout.bind(M(n)),n}b(t,e);var n=t.prototype;return n.renderUserPopout=function(e){var t=this.props,n=t.renderUserPopout,r=t.member;return r.unknownUser?null:n(r.user,e)},n.render=function(){var e=this.props,t=e.member,n=e.className;return C(y.default,{renderPopout:this.renderUserPopout,position:y.default.Positions.LEFT},void 0,function(e){return C(g.default,{text:t.unknownUser?null:t.nick||t.user.username},void 0,function(r){return a.createElement("div",N({className:t.unknownUser?O.default.partyMember:O.default.partyMemberKnown},r,e),C(S.default,{src:t.user.getAvatarURL(),size:S.default.Sizes.SIZE_24,className:(0,o.default)(O.default.partyAvatar,n),"aria-label":t.user.username}))})})},t}(a.PureComponent);R.displayName="PartyMember";var P=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleOpenSpotifyTrack=function(){var e=n.props,t=e.activity,r=e.onOpenSpotifyTrack;null!=t&&r&&r(t)},n.handleOpenSpotifyArtist=function(e){var t=n.props,r=t.activity,a=t.onOpenSpotifyArtist,o=t.message;null!=r&&null!=o&&a&&a(r,o.author.id,e)},n.handleOpenSpotifyAlbum=function(){var e=n.props,t=e.activity,r=e.onOpenSpotifyAlbum,a=e.message;null!=t&&null!=a&&r&&r(t,a.author.id)},M(n).handleJoin=n.handleJoin.bind(M(n)),M(n).handleSpectate=n.handleSpectate.bind(M(n)),M(n).handleSync=n.handleSync.bind(M(n)),M(n).handleDownloadApp=n.handleDownloadApp.bind(M(n)),M(n).renderUser=n.renderUser.bind(M(n)),n}b(t,e);var n=t.prototype;return n.isDeadInvite=function(){var e=this.props,t=e.isPreview,n=e.message,r=e.activity,a=e.applicationId;return!t&&!(null!=n&&(0,l.default)(r,n,a))},n.getPartySize=function(){var e=this.props.activity;return null==e||null==e.party||null==e.party.size||e.party.size.length<2?[-1,-1]:e.party.size},n.getActionableMode=function(){return[I.ActivityActionTypes.LISTEN,I.ActivityActionTypes].includes(this.props.activityActionType)?"Actionable":this.props.isPreview||this.canSpectate()||this.canJoin()?"Actionable":"NotActionable"},n.isInParty=function(){var e=this.props,t=e.activity,n=e.myPartyId;return!e.isPreview&&null!=t&&null!=t.party&&n===t.party.id},n.isPartyFull=function(){var e=this.getPartySize(),t=e[0],n=e[1];return t>-1&&t>=n},n.hasPartySize=function(){var e=this.getPartySize(),t=e[0],n=e[1];return t>-1&&n>-1},n.isActionType=function(e){return this.props.activityActionType===e},n.canSpectate=function(){var e=this.props,t=e.isGameLaunchable,n=e.activity,r=e.isInBrowser,a=e.isPreview,o=(0,i.default)(n,I.ActivityFlags.SPECTATE);return!(!a||!o)||!(this.isDeadInvite()||!this.isActionType(I.ActivityActionTypes.SPECTATE)||!(0,i.default)(n,I.ActivityFlags.SPECTATE))&&!(r||!t||this.isInParty())},n.canJoin=function(){var e=this.props,t=e.activity,n=e.isPreview,r=e.isGameLaunchable,a=e.isInBrowser;return!!n||!(this.isDeadInvite()||!this.isActionType(I.ActivityActionTypes.JOIN)||!(0,i.default)(t,I.ActivityFlags.JOIN))&&(!(!this.hasPartySize()||this.isPartyFull())&&!(a||!r||this.isInParty()))},n.canSync=function(){var e=this.props,t=e.activity,n=e.isPreview,r=e.isSyncable,a=e.isInBrowser;return!!n||!(!this.isActionType(I.ActivityActionTypes.LISTEN)&&!this.isActionType(I.ActivityActionTypes.WATCH))&&(!(this.isDeadInvite()||!(0,i.default)(t,I.ActivityFlags.SYNC))&&!(a||!r||this.isInParty()))},n.getHelpdeskArticleURL=function(){var e=this.props.partyId;return null!=e&&(0,c.isSpotifyParty)(e)?I.HelpdeskArticles.SPOTIFY_CONNECTION:I.HelpdeskArticles.RICH_PRESENCE_INTRODUCTION},n.handleJoin=function(){var e=this.props.onJoin;e&&e()},n.handleSpectate=function(){var e=this.props.onSpectate;e&&e()},n.handleSync=function(){var e=this.props.onSync;e&&e()},n.handleDownloadApp=function(){var e=this.props.onDownloadApp;e&&e()},n.renderHeaderText=function(){var e=this.props,t=e.activityActionType,n=e.name;switch(t){case I.ActivityActionTypes.LISTEN:return T.default.Messages.INVITE_EMBED_INVITE_TO_LISTEN.format({name:n});case I.ActivityActionTypes.WATCH:return T.default.Messages.INVITE_EMBED_INVITE_TO_WATCH.format({name:n});case I.ActivityActionTypes.SPECTATE:return T.default.Messages.INVITE_EMBED_INVITE_TO_SPECTATE;case I.ActivityActionTypes.JOIN:default:return T.default.Messages.INVITE_EMBED_INVITE_TO_JOIN_GROUP}},n.renderPartyStatus=function(){var e=this,t=this.props,n=t.activityActionType,r=t.isGameLaunchable,a=t.isSyncable,o=t.isPreview,i=t.isInBrowser,l=t.name,s=t.activity,d=this.getPartySize(),c=d[0],f=d[1];if(this.isDeadInvite())switch(n){case I.ActivityActionTypes.LISTEN:return T.default.Messages.INVITE_EMBED_LISTEN_HAS_ENDED;case I.ActivityActionTypes.WATCH:return T.default.Messages.INVITE_EMBED_WATCH_HAS_ENDED;case I.ActivityActionTypes.SPECTATE:case I.ActivityActionTypes.JOIN:default:return T.default.Messages.INVITE_EMBED_GAME_HAS_ENDED}if(i&&!o)switch(n){case I.ActivityActionTypes.SPECTATE:return T.default.Messages.INVITE_EMBED_SPECTATE_VIA_DESKTOP_APP;case I.ActivityActionTypes.JOIN:return T.default.Messages.INVITE_EMBED_JOIN_VIA_DESKTOP_APP}if(this.isActionType(I.ActivityActionTypes.LISTEN)||this.isActionType(I.ActivityActionTypes.WATCH)){if(null!=s&&null!=s.details&&null!=s.state&&(0,u.default)(s)){return[C("div",{className:O.default.details},"details",C(p.default,{className:O.default.textLink,onClick:this.handleOpenSpotifyTrack},void 0,s.details)),C("div",{className:O.default.state},"state",T.default.Messages.USER_ACTIVITY_LISTENING_ARTISTS.format({artists:s.state,artistsHook:function(t,n){return null!=s.state?C(_.default,{artists:s.state,linkClassName:O.default.textLink,canOpen:null!=s.sync_id,onOpenSpotifyArtist:e.handleOpenSpotifyArtist},n):null}}))]}return this.isActionType(I.ActivityActionTypes.LISTEN)?T.default.Messages.USER_ACTIVITY_LISTEN_ALONG:T.default.Messages.USER_ACTIVITY_WATCH_ALONG}return this.isInParty()?T.default.Messages.INVITE_EMBED_IN_GROUP:r||a||o?this.isActionType(I.ActivityActionTypes.SPECTATE)?T.default.Messages.INVITE_EMBED_SPECTATE:this.isPartyFull()?this.canSpectate()?T.default.Messages.INVITE_EMBED_FULL_GROUP_SPECTATE:T.default.Messages.INVITE_EMBED_FULL_GROUP:this.hasPartySize()?T.default.Messages.INVITE_EMBED_NUM_OPEN_SLOTS.format({number:f-c}):T.default.Messages.JOIN:T.default.Messages.USER_ACTIVITY_NOT_DETECTED.format({name:l})},n.renderActionButton=function(){var e=this,t=this.props,n=t.isInBrowser,r=t.isPreview,o=t.isGameLaunchable,i=t.partyId,l=t.activity,u=t.message,s=t.renderSpotifyJoinButton,d=t.renderCustomButton,f={className:O.default.actionButton,size:h.default.Sizes.SMALL},p=null!=d?d(f):null;if(null!=p)return p;if(!this.isDeadInvite()&&this.isActionType(I.ActivityActionTypes.LISTEN)&&null!=i&&null!=u&&(0,c.isSpotifyParty)(i))return s(N({},f,{activity:l,user:u.author}));return a.createElement(h.default,N({},f,function(){if(!r&&n&&!e.isDeadInvite())return{children:T.default.Messages.USER_ACTIVITY_ACTION_DOWNLOAD_APP,onClick:e.handleDownloadApp};var t=e.canSpectate();return e.isActionType(I.ActivityActionTypes.SPECTATE)||e.isPartyFull()&&t?t?{children:T.default.Messages.USER_ACTIVITY_ACTION_SPECTATE,onClick:e.handleSpectate}:{children:T.default.Messages.USER_ACTIVITY_ACTION_SPECTATE,disabled:!0}:e.canJoin()?{children:T.default.Messages.JOIN,onClick:e.handleJoin}:e.canSync()?{children:T.default.Messages.JOIN,onClick:e.handleSync}:{children:T.default.Messages.JOIN,disabled:!0}}(),{color:!n&&!o||this.isDeadInvite()?h.default.Colors.GREY:h.default.Colors.GREEN,submitting:this.props.isLaunching}))},n.renderUser=function(e,t,n){var r=this.props.renderUserPopout;return null!=e?C(R,{member:e,renderUserPopout:r,className:t},n):C("div",{className:(0,o.default)(O.default.partyMemberEmpty,t)},n)},n.renderMoreUsers=function(e,t,n){return C("div",{className:O.default.moreUsers},n,e)},n.renderParty=function(){var e=this.props,t=e.partyId,n=e.partyMembers,r=e.hideParty,a=this.getPartySize(),o=a[0],i=a[1],l=this.hasPartySize()||this.isActionType(I.ActivityActionTypes.LISTEN)||this.isActionType(I.ActivityActionTypes.WATCH);if(this.isActionType(I.ActivityActionTypes.SPECTATE)||null==t||this.isDeadInvite()||!l||r)return null;for(var u=[].concat(n),d=Math.min(o,6);u.length<d;)u.push({user:new s.default({discriminator:"0005"}),unknownUser:!0});for(var c=Math.min(i,106);u.length<c;)u.push(null);return C(E.default,{className:O.default.partyMembers,users:u,max:i>0?Math.min(i,6):6,renderUser:this.renderUser,renderMoreUsers:this.renderMoreUsers})},n.render=function(){var e=this,t=this.props,n=t.className,r=t.coverImage,a=t.name,i=t.activity,l=t.backgroundOpacity,s=this.isActionType(I.ActivityActionTypes.JOIN)||this.isActionType(I.ActivityActionTypes.SPECTATE),c=this.isDeadInvite(),h=null;null==r||null==i||s?!s&&c&&(h=C("div",{className:O.default.artworkSpotifySessionEnded})):h=C("img",{alt:"",src:r,className:(0,f.getClass)(O.default,"artwork",this.getActionableMode())});var y=null!=i&&null!=h&&null!=i.assets&&i.assets.large_text&&!c&&(0,u.default)(i)?i.assets.large_text:null,_=null!=y?C(g.default,{text:y},void 0,function(t){var n=t.onMouseEnter,r=t.onMouseLeave;return C(p.default,{onClick:e.handleOpenSpotifyAlbum,onMouseEnter:n,onMouseLeave:r},void 0,h)}):h;return C("div",{className:(0,o.default)(O.default.invite,n,O.default[l+"BackgroundOpacity"])},void 0,C("div",{className:O.default.coverImageWrapper},void 0,C("div",{className:(0,o.default)((0,f.getClass)(O.default,"coverImage",this.getActionableMode()),null!=h?O.default.blurred:null),style:{backgroundImage:null!=r?"url('"+r+"')":null}})),C(m.default,{className:O.default.fullHeight},void 0,C(m.default,{direction:m.default.Direction.VERTICAL},void 0,C("div",{className:O.default.header},void 0,this.renderHeaderText()),C(m.default.Child,{className:O.default.partyStatus},void 0,this.renderPartyStatus()),C(m.default,{align:m.default.Align.END},void 0,C(m.default,{align:m.default.Align.CENTER,className:O.default.actionAndParty,basis:0,style:{marginRight:0}},void 0,this.renderActionButton(),this.renderParty()),null==h&&s?C("div",{className:O.default.name},void 0,a):null)),_),C(p.default,{href:d.default.getArticleURL(this.getHelpdeskArticleURL()),className:O.default.helpIcon},void 0,C(v.default,{name:v.default.Names.QUESTION_MARK,color:I.Colors.PRIMARY_DARK_300,width:12,height:12})))},t}(a.PureComponent);P.displayName="ActivityInviteEmbed";var D=P;t.default=D},8444:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=s(n(0)),o=u(n(21)),i=u(n(65)),l=s(n(510));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=function(e){var t=e.activity,n=e.user,r=e.channelId,u=e.guildId,s=e.source,f=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["activity","user","channelId","guildId","source"]);return d(l.default,{activity:t,user:n,channelId:r,guildId:u,source:s,type:l.SpotifyActionTypes.EMBED_SYNC},void 0,function(e){var t=e.tooltip,n=void 0===t?null:t,r=e.disabled,l=e.loading,u=e.label,s=e.onClick;return d(i.default,{text:n},void 0,function(e){var t=e.onMouseEnter,n=e.onMouseLeave;return a.createElement(o.default,c({},f,{color:r?o.default.Colors.GREY:o.default.Colors.GREEN,onClick:s,onMouseEnter:t,onMouseLeave:n,disabled:!l&&r,submitting:l}),u)})})};f.displayName="SpotifyJoinButton";var p=f;t.default=p},8445:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(3),i=m(n(6615)),l=m(n(21)),u=m(n(58)),s=m(n(42)),d=m(n(456)),c=m(n(257)),f=m(n(8446)),p=m(n(4)),h=m(n(6239));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var y=function(e){var t=e.channelId,n=e.messageId,r=e.onPublishMessage,m=(0,o.useStateFromStores)([f.default],function(){return f.default.shouldShowBump(n)},[n]),y=a.useCallback(function(){i.default.dismissPublishBump(n),r(t,n)},[t,n,r]),_=a.useCallback(function(){i.default.dismissPublishBump(n)},[n]),g=a.useCallback(function(){i.default.permanentlyHidePublishBump(t)},[t]);return m?v("div",{className:h.default.container},void 0,v("div",{className:h.default.bumpBox},void 0,v(s.default,{className:h.default.icon,name:s.default.Names.MEGAPHONE}),v(d.default,{className:h.default.tagline,size:d.default.Sizes.SIZE_14},void 0,p.default.Messages.NEWS_CHANNEL_PUBLISH_BUMP),v(l.default,{color:l.default.Colors.BRAND,look:l.default.Looks.LINK,size:l.default.Sizes.MIN,className:h.default.publish,onClick:y},void 0,p.default.Messages.NEWS_CHANNEL_PUBLISH),v(u.default,{onClick:_},void 0,v(s.default,{className:h.default.closeIcon,name:s.default.Names.CLOSE_CIRCLE,width:16,height:16}))),v(c.default,{color:c.default.Colors.MUTED,className:h.default.hidePermanently},void 0,v(u.default,{onClick:g},void 0,p.default.Messages.NEWS_CHANNEL_PUBLISH_BUMP_HIDE_PERMANENTLY))):null};y.displayName="ChannelFollowingPublishBump";var _=y;t.default=_},8446:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=f(n(3)),a=f(n(27)),o=f(n(2)),i=f(n(10)),l=f(n(14)),u=f(n(64)),s=f(n(11)),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(90)),c=n(1);function f(e){return e&&e.__esModule?e:{default:e}}var p="ChannelFollowingBumpChannels",h=new Set,m=new Set;var v=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.initialize=function(){this.waitFor(i.default),h=new Set(a.default.get(p))},o.shouldShowBump=function(e){return m.has(e)},r}(r.default.Store))(o.default,{MESSAGE_CREATE:function(e){var t=e.channelId,n=e.message;if(e.optimistic)return!1;if(h.has(t))return!1;var r=l.default.getChannel(t),a=s.default.getCurrentUser();if(!(null!=r&&r.type===c.ChannelTypes.GUILD_ANNOUNCEMENT&&n.author.id===a.id&&n.type===c.MessageTypes.DEFAULT&&u.default.can(c.Permissions.MANAGE_MESSAGES,{channelId:t})&&!d.hasFlag(n.flags,c.MessageFlags.CROSSPOSTED)))return!1;m.add(n.id)},MESSAGE_UPDATE:function(e){var t=e.message;m.has(t.id)&&d.hasFlag(t.flags,c.MessageFlags.CROSSPOSTED)&&m.delete(t.id)},CHANNEL_SELECT:function(e){m.clear()},CHANNEL_FOLLOWING_PUBLISH_BUMP_DISMISSED:function(e){var t=e.messageId;m.delete(t)},CHANNEL_FOLLOWING_PUBLISH_BUMP_HIDE_PERMANENTLY:function(e){var t=e.channelId;h.add(t),a.default.set(p,h),m.clear()}});t.default=v},8447:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(6869),i=s(n(869)),l=n(1),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function f(e){var t=e.poster,n=e.src,r=e.width,o=e.height,u=e.naturalWidth,s=e.naturalHeight,d=e.play,f=void 0===d||d,p=e.className,h=a.useRef();return a.useEffect(function(){var e=h.current;null!=e&&(f?e.play():e.pause())},[f]),u<=l.MAX_VIDEO_WIDTH&&s<=l.MAX_VIDEO_HEIGHT||u<=l.MAX_VIDEO_HEIGHT&&s<=l.MAX_VIDEO_WIDTH?a.createElement(i.default,{ref:h,className:p,poster:t,src:n,width:r,height:o,muted:!0,loop:!0,autoPlay:f,preload:"none"}):c("img",{alt:"",src:t,width:r,height:o})}f.displayName="Video";t.default=function(e){var t=e.src,n=e.poster,r=e.naturalWidth,a=e.naturalHeight,i=e.autoPlay,l=e.className,s=e.playable,p=void 0===s||s,h=e.renderImageComponent,m=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["src","poster","naturalWidth","naturalHeight","autoPlay","className","playable","renderImageComponent"]);return c(o.GIFAccessoryContext.Consumer,{},void 0,function(e){return h(d({},m,{alt:u.default.Messages.GIF,src:n,className:l,autoPlay:i,animated:p,renderAccessory:e,tabIndex:p?0:-1,children:function(e){var n=e.src,o=e.size,i=e.animating;return c(f,{className:l,poster:n,src:t,width:o.width,height:o.height,naturalWidth:r,naturalHeight:a,play:p&&i})}}))})}},8450:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),a=i(n(8)),o=i(n(6240));function i(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.default=function(e){var t=e.className,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["className"]);return r.createElement("div",l({className:(0,a.default)(o.default.gifTag,t)},n))}},8451:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.ImageReadyStates=void 0;var r,a=f(n(0)),o=c(n(8)),i=c(n(82)),l=n(6612),u=c(n(106)),s=f(n(182)),d=c(n(6241));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=(0,i.default)({LOADING:null,ERROR:null,READY:null});t.ImageReadyStates=m;var v=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e,t=this.props,n=t.className,r=t.imageClassName,i=t.readyState,c=t.src,f=t.alt,v=t.width,y=t.height,_=t.maxWidth,g=void 0===_?v:_,E=t.maxHeight,S=void 0===E?y:E,I=t.minWidth,T=t.minHeight,O=t.accessory,A=t.zoomable,N=t.original,C=t.children,M=t.renderItem,b=t.renderAccessory,R=t.backgroundOpacity,P=t.tabIndex,D=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["className","imageClassName","readyState","src","alt","width","height","maxWidth","maxHeight","minWidth","minHeight","accessory","zoomable","original","children","renderItem","renderAccessory","backgroundOpacity","tabIndex"]);if(1===v&&1===y)return null;var L,w=(0,l.fit)(v,y,g,S,I,T),U={},k="div";null!=N&&(k=u.default,U.href=N,U.tabIndex=P),L=null!=c&&i===m.READY&&"function"==typeof C?null!=M?M():C({src:c,size:w,alt:f,className:r}):i===m.LOADING?h("div",{className:d.default.imageWrapperInner},void 0,c?h("img",{alt:f,className:d.default.imagePlaceholder,src:c,style:w}):null,c?h("div",{className:d.default.imagePlaceholderOverlay}):null,h(s.default,{type:s.SpinnerTypes.WANDERING_CUBES})):h("div",{className:d.default.imageWrapperInner},void 0,h("div",{className:d.default.imageError}));var G=null!=b?b():null;return G=G||O,a.createElement(k,p({className:(0,o.default)(d.default.imageWrapper,(e={},e[d.default.imageZoom]=A,e[d.default.imageWrapperBackground]=i!==m.READY,e[d.default.clickable]=null!=D.onClick,e),d.default[(R||"")+"BackgroundOpacity"],n),style:null!=M?null:w},U,D),G?h("div",{className:d.default.imageAccessory},void 0,G):null,L)},r}(a.PureComponent);t.default=v,v.displayName="Image",v.defaultProps={readyState:m.READY,zoomable:!0,alt:"",children:function(e){var t=e.src,n=e.size,r=e.alt;return h("img",{className:e.className||void 0,alt:r,src:t,style:n})},minWidth:0,minHeight:0}},8452:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),i=n(29),l=n(6638),u=(r=n(13))&&r.__esModule?r:{default:r};function s(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=200,f=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).timeout=new i.Timeout,t.state={pointerEvents:!1},t.onMouseOver=function(){t.timeout.start(c,function(){return t.setState({pointerEvents:!0})})},t.onMouseOut=function(){t.timeout.start(c,function(){return t.setState({pointerEvents:!1})})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){r.visibilityObserver.observe(this)},a.componentWillUnmount=function(){r.visibilityObserver.unobserve(this),this.timeout.stop()},a.render=function(){var e,t=this.props,n=t.src,a=t.className,o=t.style,i={pointerEvents:this.state.pointerEvents?"auto":"none"};return r.visibilityObserver.isVisible(this)&&(e=u.default.embedded&&!window.DiscordNative?s("webview",{src:n,style:d({width:"100%",height:"100%"},i)}):s("iframe",{src:n,style:d({},o,i),frameBorder:0})),s("div",{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,className:a,style:o},void 0,e)},r}(o.PureComponent);t.default=f,f.displayName="UnloadingWebview",f.visibilityObserver=new l.VisibilityObserver({rootMargin:"-50px 0px 0px 0px",threshold:0})},8453:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),i=n(6592),l=(r=n(7693))&&r.__esModule?r:{default:r};var u=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.src,n=e.fileSize,r=e.fileName,o=e.className,u=e.playable,s=e.volume,d=e.onVolumeChange,c=e.autoMute,f=e.onMute;return function(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(l.default,{src:t,fileName:r,fileSize:(0,i.sizeString)(n),type:l.default.Types.AUDIO,className:o,playable:u,volume:s,onMute:f,autoMute:c,onVolumeChange:d})},r}(o.PureComponent);t.default=u,u.displayName="LazyAudio"},8454:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=c(n(8)),i=c(n(7066)),l=c(n(914)),u=n(6869),s=n(1),d=c(n(6246));function c(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h=/\.(mp4|webm|mov)$/i,m=/\.(mp3|ogg|wav|flac)$/i,v=function(e){var t=e.attachment,n=e.inlineMedia,r=e.autoPlayGif,a=e.onClick,o=e.onContextMenu,l=e.renderImageComponent,d=e.renderVideoComponent,c=e.renderAudioComponent,f=e.className,v=e.focusable,y=t.filename,_=t.width,g=t.height;if(n&&null!=_&&_>0&&null!=g&&g>0){if(s.IMAGE_RE.test(y))return p(u.GIFAccessoryContext.Consumer,{},void 0,function(e){return l({alt:"",src:t.proxy_url||t.url,original:t.url,width:_,height:g,autoPlay:r,onClick:a,onContextMenu:o,renderAccessory:e,className:f,shouldLink:v})});if(h.test(y)&&null!=t.proxy_url)return d({poster:t.proxy_url+"?format=jpeg",fileSize:t.size,fileName:t.filename,src:t.url,width:_,height:g,onClick:a,onContextMenu:o,naturalWidth:_,naturalHeight:g,className:f,playable:v})}else if(null!=n&&m.test(y)&&null!=t.url)return c({fileSize:t.size,fileName:t.filename,src:t.url,className:f,playable:v});return p(i.default,{url:t.url,filename:t.filename,size:t.size,onClick:a,onContextMenu:o,className:f})};v.displayName="AttachmentContent";var y=function(e){var t=e.className,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["className"]),r=n.attachment,i=r.width,u=r.height,s=r.spoiler,c=null!=i&&i<200||null!=u&&u<50,h=function(e){var r;return a.createElement(v,f({},n,{className:(0,o.default)(t,(r={},r[d.default.spoiler]=s&&!c,r[d.default.hiddenSpoilers]=s&&e,r[d.default.inline]=s&&c,r)),focusable:!e}))};return s?p(l.default,{type:l.default.Types.ATTACHMENT,inline:c},void 0,function(e){return h(e)}):h()};t.default=y},8455:function(e,t,n){var r={"./icon-file-small-acrobat.svg":8456,"./icon-file-small-ae.svg":8457,"./icon-file-small-ai.svg":8458,"./icon-file-small-archive.svg":8459,"./icon-file-small-audio.svg":8460,"./icon-file-small-code.svg":8461,"./icon-file-small-document.svg":8462,"./icon-file-small-ps.svg":8463,"./icon-file-small-sketch.svg":8464,"./icon-file-small-spreadsheet.svg":8465,"./icon-file-small-unknown.svg":8466,"./icon-file-small-video.svg":8467,"./icon-file-small-webcode.svg":8468};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=8455},8456:function(e,t,n){e.exports=n.p+"f167b4196f02faf2dc2e7eb266a24275.svg"},8457:function(e,t,n){e.exports=n.p+"982bd8aedd89b0607f492d1175b3b3a5.svg"},8458:function(e,t,n){e.exports=n.p+"03ad68e1f4d47f2671d629cfeac048ef.svg"},8459:function(e,t,n){e.exports=n.p+"73d212e3701483c36a4660b28ac15b62.svg"},8460:function(e,t,n){e.exports=n.p+"5b0da31dc2b00717c1e35fb1f84f9b9b.svg"},8461:function(e,t,n){e.exports=n.p+"481aa700fab464f2332ca9b5f4eb6ba4.svg"},8462:function(e,t,n){e.exports=n.p+"9f358f466473586417baee7bacfba5ca.svg"},8463:function(e,t,n){e.exports=n.p+"a236ab3be009cf5fbbbae4d7a7437804.svg"},8464:function(e,t,n){e.exports=n.p+"f812168e543235a62b9f6deb2b094948.svg"},8465:function(e,t,n){e.exports=n.p+"85f7a4063578f6e0e2c73f60bca0fcce.svg"},8466:function(e,t,n){e.exports=n.p+"985ea67d2edab4424c62009886f12e44.svg"},8467:function(e,t,n){e.exports=n.p+"83a157e8720aa50957c4338e10d01c80.svg"},8468:function(e,t,n){e.exports=n.p+"a11e895b46cde503a094dd31641060a6.svg"},8469:function(e,t,n){"use strict";t.__esModule=!0,t.getVolume=i,t.setVolume=function(e){a.default.set(o,{volume:e,muted:l()})},t.getMuted=l,t.setMuted=function(e){a.default.set(o,{volume:i(),muted:e})};var r,a=(r=n(27))&&r.__esModule?r:{default:r};var o="MediaPlayerVolume";function i(){var e=(a.default.get(o)||{}).volume;return"number"!=typeof e&&(e=1),e=Math.min(1,Math.max(0,e))}function l(){var e=(a.default.get(o)||{}).muted;return"boolean"!=typeof e&&(e=!1),e}},8470:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=C(n(8)),i=C(n(16)),l=C(n(3)),u=C(n(269)),s=C(n(927)),d=C(n(67)),c=C(n(341)),f=C(n(98)),p=C(n(10)),h=C(n(14)),m=C(n(19)),v=C(n(884)),y=C(n(39)),_=C(n(153)),g=C(n(97)),E=C(n(11)),S=C(n(8471)),I=n(857),T=n(80),O=n(1),A=C(n(4)),N=C(n(5957));function C(e){return e&&e.__esModule?e:{default:e}}function M(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var b=M(S.default.Body,{resolving:!0}),R=M(S.default.Icon,{expired:!0}),P=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleAcceptInstantInvite=function(e){var n=t.props,r=n.code,a=n.getAcceptInviteContext;u.default.acceptInvite(r,a("Invite Button Embed"),function(){t.handleTransitionToInviteChannel(e)})},t.handleTransitionToInviteChannel=function(e){var n=t.props.invite;null!=n.channel&&u.default.transitionToInviteSync(n)},t.handleMentionInviter=function(){var e=t.props,n=e.author,r=e.selectedChannelId,a=n.username,o=n.discriminator,i="@"+a;g.default.hidePersonalInformation||(i+="#"+o),T.ComponentDispatch.dispatchToLastSubscribed(O.ComponentActions.INSERT_TEXT,{content:i}),null!=r&&s.default.startTyping(r)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.renderResolving=function(){return M(S.default,{},void 0,M(S.default.Header,{text:A.default.Messages.INVITE_BUTTON_RESOLVING}),b)},a.renderInvalid=function(e){var t,n,r,a=this.props,o=a.currentUserId,i=a.author;return o===i.id?(t=A.default.Messages.INVITE_BUTTON_INVALID_OWNER,r=A.default.Messages.INVITE_BUTTON_TITLE_INVITER_INVALID):(r=A.default.Messages.INVITE_BUTTON_TITLE_INVITED_INVALID,e?t=A.default.Messages.INSTANT_INVITE_BANNED_INFO:i&&i.username?(t=A.default.Messages.INSTANT_INVITE_ASK_USER_FOR_NEW_INVITE.format({username:i.username}),n=M(S.default.Button,{onClick:this.handleMentionInviter},void 0,A.default.Messages.MENTION)):t=A.default.Messages.INSTANT_INVITE_ASK_FOR_NEW_INVITE),M(S.default,{},void 0,M(S.default.Header,{text:r}),M(S.default.Body,{},void 0,R,M(S.default.Info,{expired:!0,title:A.default.Messages.INVITE_BUTTON_INVALID},void 0,t),n))},a.renderExpired=function(){return this.renderInvalid(!1)},a.renderBanned=function(){return this.renderInvalid(!0)},a.renderStandard=function(){var e,t=this.props,n=t.invite,r=t.author,a=t.currentUserId===r.id,o=n.channel,i=n.approximate_member_count,l=n.approximate_presence_count,u=n.state===O.InviteStates.ACCEPTING,s=null!=o?new d.default(o):null,f=this.props.guild,p=null!=f;if(null==f){if(null==n.guild)return this.renderResolving();f=new c.default(n.guild)}null!=s&&s.type===O.ChannelTypes.GUILD_VOICE?e=M(S.default.Channel,{channel:s}):null!=i&&i>=5||null!=l&&l>0?e=M(S.default.Data,{members:i,membersOnline:l}):null!=s&&(e=M(S.default.Channel,{channel:s}));var h=p?this.handleTransitionToInviteChannel:this.handleAcceptInstantInvite,m=A.default.Messages.JOIN_SERVER,v=S.default.Button.Colors.GREEN;p&&(m=A.default.Messages.JOINED_SERVER,v=S.default.Button.Colors.PRIMARY);var y=A.default.Messages.INVITE_BUTTON_TITLE_INVITED;return a&&(y=A.default.Messages.INVITE_BUTTON_TITLE_INVITER),M(S.default,{},void 0,M(S.default.Header,{text:y}),M(S.default.Body,{},void 0,M(S.default.Icon,{guild:f,onClick:p?h:null}),M(S.default.Info,{title:f.name,onClick:p?h:null},void 0,e),M(S.default.Button,{onClick:h,submitting:u,checkmark:p,color:v},void 0,m)))},a.renderGroupDM=function(){var e,t=this.props,n=t.invite,r=t.author,a=t.currentUserId===r.id,o=n.state===O.InviteStates.ACCEPTING,i=this.props.channel,l=null!=i;if(null==i){if(null==n.channel)return this.renderResolving();i=new d.default(n.channel),e=null!=n.channel&&null!=n.channel.recipients?n.channel.recipients:[]}else e=i.recipients.reduce(function(e,t){var n=E.default.getUser(t);return null!=n&&e.push(n),e},[]),l&&e.push(E.default.getCurrentUser());var u=i.name;u||(u=e.length>0?e.filter(function(e){return null!=e}).map(function(e){return e.username}).join(", "):A.default.Messages.UNNAMED);var s=l?this.handleTransitionToInviteChannel:this.handleAcceptInstantInvite,c=A.default.Messages.JOIN_SERVER,f=S.default.Button.Colors.GREEN;l&&(c=A.default.Messages.JOINED_SERVER,f=S.default.Button.Colors.PRIMARY);var p=A.default.Messages.INVITE_BUTTON_TITLE_INVITED_GROUP_DM;return a&&(p=A.default.Messages.INVITE_BUTTON_TITLE_INVITER_GROUP_DM),M(S.default,{},void 0,M(S.default.Header,{text:p}),M(S.default.Body,{},void 0,M(S.default.Icon,{channel:i,onClick:l?s:null}),M(S.default.Info,{title:u,onClick:l?s:null},void 0,M(S.default.Data,{members:e.length})),M(S.default.Button,{onClick:s,submitting:o,checkmark:l,color:f},void 0,c)))},a.renderStreaming=function(){var e=this.props,t=e.invite,n=e.currentUserId,r=e.selectedGuildId,a=e.isWatching,o=e.streamActive,l=t.target_user_type,u=t.target_user;(0,i.default)(l===O.InviteTargetUserTypes.STREAM&&null!=u,"invalid streaming invite");var s=n===u.id,f=t.state===O.InviteStates.ACCEPTING,p=this.props.guild,h=null!=p;if(null==p){if(null==t.guild)return this.renderResolving();p=new c.default(t.guild)}var m,v,y,_=null!=t.channel?new d.default(t.channel):null,g=a?this.handleTransitionToInviteChannel:this.handleAcceptInstantInvite;h&&!o?(m=A.default.Messages.STREAM_ENDED_BUTTON,v=S.default.Button.Colors.PRIMARY,y=s?A.default.Messages.INVITE_BUTTON_STREAM_ENDED_STREAMER:A.default.Messages.INVITE_BUTTON_STREAM_ENDED.format({name:u.username})):(m=A.default.Messages.WATCH,v=S.default.Button.Colors.GREEN,a&&(m=A.default.Messages.INVITE_BUTTON_STREAM_WATCHING,v=S.default.Button.Colors.PRIMARY),y=s?A.default.Messages.INVITE_BUTTON_STREAMER:A.default.Messages.INVITE_BUTTON_STREAMING.format({name:u.username}));var E=r===p.id&&_?M(S.default.Channel,{channel:_}):A.default.Messages.INVITE_BUTTON_STREAMING_SUBTEXT.format({guildName:p.name});return M(S.default,{},void 0,M(S.default.Header,{text:A.default.Messages.INVITE_BUTTON_TITLE_STREAMING}),M(S.default.Body,{},void 0,M(S.default.Icon,{guild:p,onClick:h&&o?g:null}),M(S.default.Info,{title:y,onClick:h&&o?g:null},void 0,E),M(S.default.Button,{disabled:h&&!o,onClick:g,submitting:f,checkmark:a&&o,color:v},void 0,m)))},a.renderBody=function(){var e=this.props.invite;if(null==e)throw new Error("[InviteButton] Received null invite object");switch(e.state){case O.InviteStates.RESOLVING:return this.renderResolving();case O.InviteStates.EXPIRED:return this.renderExpired();case O.InviteStates.BANNED:return this.renderBanned();default:return e.target_user_type===O.InviteTargetUserTypes.STREAM?this.renderStreaming():null!=e.channel&&e.channel.type===O.ChannelTypes.GROUP_DM?this.renderGroupDM():this.renderStandard()}},a.render=function(){var e=this;return M(I.BackgroundOpacityContext.Consumer,{},void 0,function(t){var n=t.backgroundOpacity;return n?M("div",{className:(0,o.default)(N.default[n+"BackgroundOpacity"])},void 0,e.renderBody()):e.renderBody()})},r}(a.PureComponent);P.displayName="InviteButton",P.defaultProps={invite:{state:O.InviteStates.RESOLVING,code:""}};var D=l.default.connectStores([v.default,m.default,f.default],function(e){var t=e.code,n=v.default.getInvite(t),r=f.default.getActiveStream(),a=null!=n&&n.target_user_type===O.InviteTargetUserTypes.STREAM&&null!=n.target_user&&null!=r&&r.ownerId===n.target_user.id,o=null!=n&&null!=n.target_user?f.default.getStreamForUser(n.target_user.id):null,i=null!=n&&null!=o&&null!=n.channel&&null!=n.guild&&o.channelId===n.channel.id&&o.guildId===n.guild.id;return{invite:n,guild:null!=n&&null!=n.guild?m.default.getGuild(n.guild.id):null,channel:null!=n&&null!=n.channel?h.default.getChannel(n.channel.id):null,selectedGuildId:_.default.getGuildId(),selectedChannelId:y.default.getChannelId(),currentUserId:p.default.getId(),isWatching:a,streamActive:i}})(P);t.default=D},8471:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=g(n(8)),i=n(6529),l=g(n(137)),u=n(99),s=g(n(21)),d=g(n(24)),c=g(n(6521)),f=g(n(42)),p=g(n(71)),h=g(n(66)),m=g(n(328)),v=n(6533),y=g(n(4)),_=g(n(5957));function g(e){return e&&e.__esModule?e:{default:e}}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function S(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var I=function(e){var t=e.text;return S(h.default,{className:_.default.header},void 0,t)};I.displayName="InviteHeader";var T=function(e){var t=e.resolving,n=e.children;return S("div",{className:_.default.content},void 0,t?S("div",{className:_.default.resolving},void 0,S("div",{className:_.default.resolvingBackground})):n)};T.displayName="InviteBody";var O=function(e){var t=e.title,n=e.onClick,r=e.expired,a=e.children;return S(d.default,{className:_.default.guildInfo,direction:d.default.Direction.VERTICAL,justify:d.default.Justify.CENTER},void 0,S(p.default,{onClick:n,weight:p.default.Weights.SEMIBOLD,size:p.default.Sizes.MEDIUM,className:(0,u.getClass)(_.default,"guildName",r?"Expired":null!=n?"Joined":"")},void 0,t),S(p.default,{weight:p.default.Weights.SEMIBOLD,size:p.default.Sizes.SMALL,className:_.default.guildDetail},void 0,S(d.default,{grow:0,align:d.default.Align.CENTER},void 0,a)))};O.displayName="InviteInfo";var A=function(e){var t=e.checkmark,n=e.children,r=e.onClick,o=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["checkmark","children","onClick"]);return a.createElement(s.default,E({},o,{onClick:r,look:t?s.default.Looks.OUTLINED:s.default.Looks.FILLED,size:_.default.buttonSize,className:_.default.button,innerClassName:_.default.buttonInner}),S("div",{className:_.default.buttonContent},void 0,n),t?S(f.default,{name:f.default.Names.CHECKMARK,className:_.default.buttonIcon,width:18,height:18}):null)};A.displayName="InviteActionButton",A.Colors=s.default.Colors,A.Looks=s.default.Looks,A.defaultProps={checkmark:!1};var N=function(e){var t=e.children;return S("div",{className:_.default.wrapper},void 0,t)};N.displayName="InviteButton",N.Header=I,N.Body=T,N.Icon=function(e){var t=e.guild,n=e.channel,r=e.onClick,a=e.expired;if(void 0!==a&&a||null==t&&null==n)return S("div",{className:_.default.guildIconExpired});var s=null==t||null!=t.icon,d=(0,u.getClass)(_.default,"guildIcon",s?"Image":"",null!=r?"Joined":"");return null!=t?S(c.default,{onClick:r,active:!0,size:c.default.Sizes.LARGE,guild:t,className:d,animate:!0}):null!=n?S(m.default,{onClick:r,src:(0,i.getChannelIconURL)(n),size:m.default.Sizes.SIZE_80,className:(0,o.default)(d,_.default.iconSizeOverride),"aria-label":(0,l.default)(n)}):null},N.Info=O,N.Data=function(e){var t=e.membersOnline,n=e.members,r=[];return null!=t&&t>0&&r.push(S(a.Fragment,{},"onlineCount",S("i",{className:_.default.statusOnline}),S("span",{className:_.default.onlineCount},void 0,y.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_ONLINE.format({membersOnline:t})))),null!=n&&r.push(S(a.Fragment,{},"memberCount",S("i",{className:_.default.statusOffline}),S("span",{},void 0,y.default.Messages.INSTANT_INVITE_GUILD_MEMBERS_TOTAL.format({count:n})))),r},N.Channel=function(e){var t=e.channel,n=(0,v.getIconNameForChannel)(t);return null==t||null==n?null:[S(f.default,{name:n,width:16,height:16},"channel-icon"),S("span",{className:_.default.channelName},"channel-name",t.name)]},N.Button=A;var C=N;t.default=C},8472:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=c(n(3)),o=n(365),i=c(n(68)),l=n(239),u=c(n(7690)),s=n(1),d=c(n(6247));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return null!=e.application?e.application:null!=e.activity&&null!=e.activity.party_id&&(0,l.isSpotifyParty)(e.activity.party_id)?o.SpotifyApplication:void 0}var p=function(e){var t=e.channel,n=e.message,a=e.activity,o=e.hideParty;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(u.default,{className:d.default.container,activity:a,activityActionType:null!=n.activity?n.activity.type:null,partyId:null!=n.activity?n.activity.party_id:null,userId:n.author.id,application:f(n),message:n,channelId:t.id,guildId:t.getGuildId(),hideParty:o})};p.displayName="MessageActivityInvite";var h=a.default.connectStores([i.default],function(e){var t=e.message;return{activity:null!=t.application?i.default.getApplicationActivity(t.author.id,t.application.id):i.default.findActivity(t.author.id,function(e){return e.type===s.ActivityTypes.LISTENING})}})(p);t.default=h},8473:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(3),i=y(n(353)),l=y(n(22)),u=y(n(25)),s=y(n(185)),d=y(n(914)),c=y(n(7696)),f=n(80),p=n(6614),h=n(6870),m=n(1),v=y(n(6253));function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function g(){f.ComponentDispatch.dispatch(m.ComponentActions.CHAT_RESIZE)}var E=a.memo(function(e){var t=e.embed,n=e.spoiler,r=(0,o.useStateFromStores)([i.default],function(){return i.default.getByApplicationNewsId(t.referenceId||"")}),a=(0,o.useStateFromStores)([l.default],function(){return null!=r?l.default.getGame(r.game_id):null}),f=(0,o.useStateFromStores)([u.default],function(){return u.default.gifAutoPlay}),m=(0,o.useStateFromStores)([s.default],function(){return s.default.isFocused()});if(null==r)return null;var y=function(e){return void 0===e&&(e=!1),_(c.default,{className:v.default.newsCard,news:r,application:a,onApplicationClick:h.toggleGamePopout,onMount:g,onClick:function(e,t,n){e.stopPropagation();var r=t.url;null!=r&&window.open(r)},hiddenSpoiler:e,autoPlay:f,shouldAnimate:m,disableCardInteractive:!0,renderVideoComponent:p.renderVideoComponent,renderImageComponent:p.renderImageComponent,renderLinkComponent:p.renderMaskedLinkComponent})};return n?_(d.default,{type:d.default.Types.ATTACHMENT},void 0,y):y()});t.default=E},8474:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=u(n(8)),o=u(n(58)),i=u(n(257)),l=u(n(6250));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}t.default=function(e){var t,r=e.icon,u=e.timestamp,d=e.hostname,c=e.title,f=e.onIconClick,p=e.onIconContextMenu;return s("div",{className:l.default.wrapper},void 0,s(i.default,{color:i.default.Colors.MUTED,size:i.default.Sizes.SIZE_12,className:l.default.content},void 0,u," ",null!=d?s("span",{className:l.default.timestamp},void 0,d):null),s(o.default,{className:(0,a.default)(l.default.iconWrapper,(t={},t[l.default.interactive]=null!=f,t)),onClick:f,onContextMenu:p},void 0,s("img",null!=r?{src:r,className:l.default.icon,alt:c}:{src:n(7068),className:l.default.icon,alt:c})))}},8475:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),a=p(n(142)),o=n(1026),i=p(n(30)),l=p(n(1027)),u=p(n(185)),s=p(n(8476)),d=p(n(6692)),c=n(6612),f=p(n(4));function p(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=function(e){var t,n;function p(){for(var t,n=arguments.length,d=new Array(n),p=0;p<n;p++)d[p]=arguments[p];return(t=e.call.apply(e,[this].concat(d))||this)._isListeningToWindow=!1,t.state={isWindowFocused:u.default.isFocused()},t.addWindowListeners=function(){t._isListeningToWindow=!0,u.default.addChangeListener(t.onChangeWindowStore),t.onChangeWindowStore()},t.removeWindowListeners=function(){t._isListeningToWindow=!1,u.default.removeChangeListener(t.onChangeWindowStore)},t.onChangeWindowStore=function(){var e=u.default.isFocused();e!==t.state.isWindowFocused&&t.setState({isWindowFocused:e})},t.onMouseEnter=function(e,n){var r=n.preloadImage,a=t.props,o=a.width,i=a.height;r((0,c.zoomFit)(o,i))},t.onClickUntrusted=function(e){var n=e.openHref,r=t.props,i=r.original,l=r.src,u=i||l;a.default.show({title:f.default.Messages.HOLD_UP,body:f.default.Messages.MASKED_LINK_BODY.format({url:u}),cancelText:f.default.Messages.MASKED_LINK_CANCEL,confirmText:f.default.Messages.MASKED_LINK_CONFIRM,minorText:f.default.Messages.MASKED_LINK_TRUST_THIS_DOMAIN,onConfirm:n,onConfirmSecondary:function(){(0,o.trustDomain)(u),n()}})},t.onZoom=function(e,n){var a=n.placeholder;e.preventDefault();var o=t.props,u=o.src,d=o.original,c=d||u,f={src:u,original:d||u,width:o.width,height:o.height,animated:o.animated,children:o.children,placeholder:a,isTrusted:l.default.isTrustedDomain(c),onClickUntrusted:t.onClickUntrusted};e.currentTarget instanceof HTMLElement&&e.currentTarget.blur(),i.default.push(function(e){return r.createElement(s.default,h({},f,e,{shouldAnimate:t.state.isWindowFocused}))})},t}n=e,(t=p).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var m=p.prototype;return m.componentDidMount=function(){d.default.isAnimated(this.props)&&!this._isListeningToWindow&&this.addWindowListeners()},m.componentDidUpdate=function(){var e=d.default.isAnimated(this.props);e&&!this._isListeningToWindow?this.addWindowListeners():!e&&this._isListeningToWindow&&this.removeWindowListeners()},m.componentWillUnmount=function(){this._isListeningToWindow&&this.removeWindowListeners()},m.render=function(){return r.createElement(d.default,h({},this.props,{onZoom:this.onZoom,onMouseEnter:this.onMouseEnter,shouldAnimate:this.state.isWindowFocused}))},p}(r.PureComponent);t.default=m,m.displayName="LazyImageZoomable",m.defaultProps={alt:"",shouldLink:!0,autoPlay:!1,animated:!1}},8476:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(6612),i=d(n(6692)),l=d(n(8477)),u=d(n(4)),s=d(n(6254));function d(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=function(e){var t,n;function d(){return e.apply(this,arguments)||this}return n=e,(t=d).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,d.prototype.render=function(){var e=this.props,t=e.src,n=e.original,d=e.placeholder,f=e.width,p=e.height,h=e.animated,m=e.children,v=e.isTrusted,y=e.onClickUntrusted,_=(e.maxWidth,e.maxHeight,e.shouldAnimate,function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["src","original","placeholder","width","height","animated","children","isTrusted","onClickUntrusted","maxWidth","maxHeight","shouldAnimate"])),g=(0,o.zoomFit)(f,p),E=g.width,S=g.height;return a.createElement(a.Fragment,null,a.createElement(i.default,c({src:t,placeholder:d,shouldLink:!1,width:f,height:p,maxWidth:E,maxHeight:S,children:m,animated:h,autoPlay:!0},_)),null!=n&&function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(l.default,{href:n,className:s.default.downloadLink,isTrusted:v,onClickUntrusted:y},void 0,u.default.Messages.OPEN_ORIGINAL_IMAGE))},d}(a.PureComponent);t.default=f,f.displayName="ImageModal"},8477:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),a=l(n(110)),o=l(n(106)),i=l(n(13));function l(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e){var t,n;function l(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).openHref=function(){var e=t.props.href;if(i.default.embedded)window.open(e);else{var n=window.open();n.opener=null,n.location=e,n.target="_blank"}},t.onClick=function(e){var n=t.props,r=n.href,o=n.isTrusted,i=n.onClickUntrusted;null!=a.default.sanitizeUrl(r)?o||(e.preventDefault(),i({openHref:t.openHref})):e.preventDefault()},t}return n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,l.prototype.render=function(){var e=this.props,t=e.title,n=void 0===t?null:t,i=e.children,l=e.href,s=(e.onClickUntrusted,e.isTrusted,function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["title","children","href","onClickUntrusted","isTrusted"])),d=a.default.sanitizeUrl(l);return r.createElement(o.default,u({},s,{title:n,target:"_blank",rel:"noreferrer noopener",href:d,onClick:this.onClick}),i||n)},l}(r.PureComponent);t.default=s,s.displayName="MaskedLink"},8478:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=L(n(0)),o=D(n(8)),i=D(n(5)),l=n(259),u=D(n(3)),s=L(n(876)),d=D(n(329)),c=D(n(260)),f=D(n(861)),p=D(n(10)),h=D(n(6640)),m=D(n(50)),v=D(n(11)),y=D(n(221)),_=D(n(119)),g=D(n(855)),E=D(n(21)),S=D(n(58)),I=D(n(24)),T=D(n(42)),O=n(80),A=L(n(284)),N=D(n(36)),C=n(7069),M=n(7699),b=n(1),R=D(n(4)),P=D(n(6263));function D(e){return e&&e.__esModule?e:{default:e}}function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&U(e.prototype,t),n&&U(e,n),e}function G(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function F(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function j(e){var t=e.onClick,n=e.libraryApplication;return F(S.default,{className:P.default.libraryLink,onClick:t},void 0,F(T.default,{name:T.default.Names.LIBRARY,className:P.default.libraryIcon}),F("div",{},void 0,n.isHidden()?R.default.Messages.APPLICATION_STORE_PURCHASE_IN_LIBRARY_HIDDEN:R.default.Messages.APPLICATION_STORE_PURCHASE_IN_LIBRARY))}j.displayName="LibraryLink";var H=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).renderMedia=function(){var e;return F("div",{className:(0,o.default)(P.default.invalidPoop,(e={},e[P.default.invalidPoopHorizontal]=t.isHorizontal,e))})},t.renderTitle=function(){return t.props.isSelfGift?R.default.Messages.GIFT_EMBED_INVALID_TITLE_SELF:R.default.Messages.GIFT_EMBED_INVALID_TITLE_OTHER},t.renderActions=function(){return t.props.isSelfGift?F(l.Link,{to:b.Routes.APPLICATION_LIBRARY_INVENTORY},void 0,F(E.default,{size:E.default.Sizes.SMALL},void 0,R.default.Messages.GIFT_INVENTORY)):F(E.default,{disabled:!0,size:E.default.Sizes.SMALL},void 0,R.default.Messages.GIFT_EMBED_BUTTON_ACCEPT)},t.renderTagline=function(){return t.props.isSelfGift?R.default.Messages.GIFT_EMBED_INVALID_TAGLINE_SELF:R.default.Messages.GIFT_EMBED_INVALID_TAGLINE_OTHER},t}return G(t,e),t.prototype.render=function(){return F(C.ResponsiveEmbedTile,{isHorizontal:this.isHorizontal,renderTitle:this.renderTitle,renderTagline:this.renderTagline,renderMedia:this.renderMedia,renderActions:this.renderActions})},k(t,[{key:"isHorizontal",get:function(){return this.props.width>=C.HORIZONTAL_EMBED_BREAKPOINT}}]),t}(a.PureComponent);H.displayName="InvalidGift";var x=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleViewLibrary=function(e){var n=t.props.libraryApplication;e.preventDefault(),null!=n&&n.isHidden()?d.default.open(b.UserSettingsSections.GAME_LIBRARY):N.default.transitionTo(b.Routes.APPLICATION_LIBRARY,{state:{applicationId:null!=n?n.id:null}})},t.handleVerificationClick=function(e){e.preventDefault(),d.default.open(b.UserSettingsSections.ACCOUNT)},t.handleAccept=function(e){var n=t.props.channelId;e.preventDefault(),e.stopPropagation(),s.openGiftCodeAcceptModal(t.props.code,w({},t.analyticsLocation,{object:b.AnalyticsObjects.BUTTON_CTA}),n)},t.handleEmbedClick=function(e){var n=t.props.giftCode;null!=n&&n.isSubscription&&(e.preventDefault(),d.default.open(b.UserSettingsSections.PREMIUM))},t}G(t,e);var n=t.prototype;return n.componentDidMount=function(){null==this.props.giftCode&&O.ComponentDispatch.dispatch(b.ComponentActions.CHAT_RESIZE)},n.renderActions=function(e){var t=this.props.libraryApplication;return F(I.default,{justify:I.default.Justify.BETWEEN},void 0,F(I.default,{},void 0,this.renderButton(e),null==t||e.isSubscription?null:F(j,{onClick:this.handleViewLibrary,libraryApplication:t})),F(I.default,{align:I.default.Align.END,justify:I.default.Justify.END,className:P.default.metadata,direction:I.default.Direction.VERTICAL},void 0,e.hasMultipleCopies?F("div",{},void 0,this.renderGiftCodeCopiesLeft(e)):null,e.redeemed||e.isClaimed||null!=t||null==e.expiresAt?null:F("div",{},void 0,R.default.Messages.GIFT_EMBED_EXPIRATION.format({hours:e.expiresAt.diff((0,i.default)(),"h")}))))},n.renderGiftCodeCopiesLeft=function(e){return(e.isSubscription?R.default.Messages.GIFT_EMBED_SUBSCRIPTIONS_LEFT:R.default.Messages.GIFT_EMBED_COPIES_LEFT).format({remaining:e.remainingUses,total:e.maxUses})},n.renderButton=function(e){var t=this.props,n=t.libraryApplication,r=t.currentUser,o={onClick:this.handleAccept,color:E.default.Colors.GREEN},i=!e.isSubscription&&null!=n;return(e.redeemed||i||e.isClaimed||!r.verified)&&(o.color=E.default.Colors.PRIMARY,o.disabled=!0),a.createElement(E.default,w({},o,{size:E.default.Sizes.SMALL}),e.redeemed?R.default.Messages.GIFT_EMBED_BUTTON_CLAIMED:R.default.Messages.GIFT_EMBED_BUTTON_ACCEPT)},n.renderTitle=function(e){var t=this.props,n=t.isSelfGift;return null==t.sku?null:e.isSubscription?n?R.default.Messages.GIFT_EMBED_TITLE_SUBSCRIPTION_SELF:R.default.Messages.GIFT_EMBED_TITLE_SUBSCRIPTION:n?R.default.Messages.GIFT_EMBED_TITLE_SELF:R.default.Messages.GIFT_EMBED_TITLE},n.renderBody=function(e){var t=this.props,n=t.libraryApplication,r=t.isSelfGift,a=t.sku,o=t.gifter,i=t.subscriptionPlan,l=t.currentUser;if(null==a)return R.default.Messages.LOADING;var u=a.isPreorder()?R.default.Messages.PREORDER_SKU_NAME.format({name:a.name}):a.name;if(e.redeemed)return e.isSubscription?R.default.Messages.GIFT_EMBED_BODY_CLAIMED_SELF_SUBSCRIPTION:R.default.Messages.GIFT_EMBED_BODY_CLAIMED_SELF.format({skuName:u,onViewInLibrary:this.handleViewLibrary});if(!e.isSubscription&&null!=n)return R.default.Messages.GIFT_EMBED_BODY_OWNED.format({skuName:u,onViewInLibrary:this.handleViewLibrary});if(e.isClaimed)return R.default.Messages.GIFT_EMBED_BODY_CLAIMED_OTHER;if(!l.verified)return R.default.Messages.GIFT_EMBED_BODY_REQUIRES_VERIFICATION.format({onClick:this.handleVerificationClick});if(r)return R.default.Messages.GIFT_EMBED_BODY_SELF;if(e.hasMultipleCopies)return null!=o?(e.isSubscription?R.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_GIVEAWAY:R.default.Messages.GIFT_EMBED_BODY_GIVEAWAY).format({username:o.tag,totalCopies:e.maxUses,skuName:u}):(e.isSubscription?R.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_NO_USER_GIVEAWAY:R.default.Messages.GIFT_EMBED_BODY_NO_USER_GIVEAWAY).format({totalCopies:e.maxUses,skuName:u});if(e.isSubscription){if(null==i)throw new Error("How could you let this happen??");return null!=o?(i.interval===b.SubscriptionIntervalTypes.MONTH?R.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_DEFAULT_MONTHS:R.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_DEFAULT_YEARS).format({username:o.tag,skuName:u,intervalCount:i.intervalCount}):(i.interval===b.SubscriptionIntervalTypes.MONTH?R.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_NO_USER_DEFAULT_MONTHS:R.default.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_NO_USER_DEFAULT_YEARS).format({skuName:u,intervalCount:i.intervalCount})}return null!=o?R.default.Messages.GIFT_EMBED_BODY_DEFAULT.format({username:o.tag}):R.default.Messages.GIFT_EMBED_BODY_NO_USER_DEFAULT},n.render=function(){var e=this,t=this.props,n=t.giftCode,r=t.resolved,a=t.width,o=t.isSelfGift;return null==n||n.revoked?r?F(H,{isSelfGift:o,width:a}):F(C.ResponsiveLoadingEmbedTile,{isHorizontal:a>=C.HORIZONTAL_EMBED_BREAKPOINT}):F(M.StoreEmbedWithoutDimensions,{skuId:n.skuId,onEmbedClick:this.handleEmbedClick,analyticsSection:b.AnalyticsSections.GIFT_CODE_EMBED,renderCustomActions:function(){return e.renderActions(n)},renderCustomTitle:function(){return e.renderTitle(n)},renderCustomTagline:function(){return e.renderBody(n)},width:a})},k(t,[{key:"analyticsLocation",get:function(){return w({},this.props.analyticsContext.location,{section:b.AnalyticsSections.GIFT_CODE_EMBED})}}]),t}(a.Component);x.displayName="GiftCodeEmbed";var B=u.default.connectStores([p.default,_.default,v.default,g.default,h.default,m.default,y.default],function(e){var t=e.code,n=e.author,r=h.default.get(t),a=null!=r?_.default.get(r.skuId):null;return{sku:a,giftCode:r,gifter:null!=r&&null!=r.userId?v.default.getUser(r.userId):null,subscriptionPlan:null!=r&&null!=r.subscriptionPlanId?y.default.get(r.subscriptionPlanId):null,isSelfGift:null!=r?p.default.getId()===r.userId:p.default.getId()===n.id,currentUser:v.default.getCurrentUser(),resolved:h.default.getIsResolved(t),libraryApplication:null!=a&&null!=r?A.firstLibraryApplicationForGiftCode(r,a,m.default):null}})((0,f.default)((0,c.default)(x)));t.default=B},8479:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=_(n(8)),i=_(n(21)),l=_(n(7070)),u=_(n(7071)),s=_(n(6641)),d=n(154),c=n(7073),f=_(n(880)),p=_(n(6693)),h=n(7069),m=_(n(7698)),v=n(1),y=_(n(6261));function _(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var E=600,S=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),h=0;h<n;h++)r[h]=arguments[h];return(t=e.call.apply(e,[this].concat(r))||this).renderActions=function(){var e=t.props,n=e.inLibrary,r=e.sku,a=e.renderCustomActions,o=e.isMouseOver,l=(e.showBuyInline||!r.requiresPayment)&&!n,u=l&&o;return null!=a?a():g("div",{className:y.default.priceOs},void 0,g(p.default,{type:p.default.Types.DIRECTORY_TILE,sku:r,inLibrary:n,className:u?y.default.tilePriceWithVisibleBuyButton:y.default.tilePrice}),g(c.OperatingSystemSection,{systems:[v.OperatingSystems.WINDOWS],className:y.default.platform}),l?g(f.default,{skuId:r.id,applicationId:r.applicationId,size:i.default.Sizes.SMALL,shouldRenderPrice:!0,onStoreListing:!0,onClick:function(e){return e.preventDefault()},className:u?y.default.tileBuyButtonVisible:y.default.tileBuyButton}):null)},t.renderMedia=function(){var e,n,r,i=t.props,c=i.playing,f=i.muted,p=i.showMediaPlaceholder,h=i.onToggleMute,m=i.sku,v=i.isHorizontal,_=i.storeListing;return g(a.Fragment,{},void 0,g(s.default,{className:(0,o.default)(y.default.splashContainer,(e={},e[y.default.splashContainerHorizontal]=v,e)),video:null!=_.previewVideo?(0,d.getAssetURL)(m.applicationId,_.previewVideo):null,image:null!=_.thumbnail?(0,d.getAssetURL)(m.applicationId,_.thumbnail,E):null,title:m.name,playing:c,muted:f,placeholder:p,onToggleMute:h,splashClassName:y.default.splashVideo,splashPlaceholderClassName:y.default.splashPlaceholder}),m.exclusive?g(l.default,{className:(0,o.default)(y.default.exclusiveRegular,(n={},n[y.default.exclusivePlaying]=c,n))}):m.isTheGameAwardsWinner?g(u.default,{className:(0,o.default)(y.default.exclusiveRegular,(r={},r[y.default.exclusivePlaying]=c,r))}):null)},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.sku,n=e.storeListing,r=e.isHorizontal,a=e.className,o=e.renderCustomTagline,i=e.renderCustomTitle;return g(e.isEmbed?h.ResponsiveEmbedTile:m.default,{className:a,renderMedia:this.renderMedia,renderTitle:null!=i?i:function(){return t.name},renderTagline:null!=o?o:function(){return n.tagline},renderActions:this.renderActions,isHorizontal:r})},r}(a.PureComponent);S.displayName="ApplicationTile",S.defaultProps={showMediaPlaceholder:!1,isMouseOver:!1,showBuyInline:!1,isHorizontal:!1,isEmbed:!1};var I=S;t.default=I},8480:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a,o=U(n(0)),i=w(n(3)),l=w(n(107)),u=w(n(6865)),s=w(n(10)),d=w(n(362)),c=w(n(14)),f=w(n(19)),p=w(n(11)),h=w(n(72)),m=U(n(223)),v=n(871),y=w(n(7677)),_=w(n(8481)),g=w(n(8484)),E=w(n(8485)),S=w(n(8486)),I=w(n(8487)),T=w(n(8489)),O=w(n(8490)),A=w(n(8492)),N=w(n(8493)),C=n(80),M=n(7678),b=w(n(290)),R=w(n(281)),P=w(n(343)),D=w(n(6616)),L=n(1);function w(e){return e&&e.__esModule?e:{default:e}}function U(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function k(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=r;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function G(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var j=function(e,t,n){return void 0===n&&(n=!1),function(r){n&&r.stopPropagation(),(0,m.openPopout)(r.currentTarget,{closeOnScroll:!1,position:m.default.Positions.RIGHT,shadow:!1,render:function(n){var r=c.default.getChannel(t);return null==r?null:o.createElement(P.default,F({},n,{userId:e.id,guildId:r.getGuildId(),channelId:r.id}))}})}},H=function(e,t){return function(n){var r=c.default.getChannel(t);null!=r&&(0,M.openUserContextMenu)(n,e,r)}},x=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleJoinCall=function(){var e=t.props.message;l.default.selectVoiceChannel(e.getChannelId())},t}return G(t,e),t.prototype.render=function(){var e=this.props,t=e.message,n=e.missed,r=e.joinable,a=t.author,o=t.getChannelId();return k(_.default,{message:t,missed:n,joinable:r,onClickUsername:j(a,o),onContextMenuUsername:H(a,o),onClickJoinCall:this.handleJoinCall})},t}(o.PureComponent);x.displayName="Call";var B=i.default.connectStores([d.default,h.default],function(e){var t=e.message,n=s.default.getId(),r=t.getChannelId(),a=d.default.isCallActive(r,t.id),o=h.default.getVoiceState(L.ME,n);return{missed:!a&&null!=t.call&&!t.call.participants.includes(n),joinable:a&&(null==o||o.channelId!==r)}})(x),V=function(e){var t=e.message,n=t.author,r=t.getChannelId();return k(S.default,{message:t,onClickUsername:j(n,r),onContextMenuUsername:H(n,r)})};V.displayName="ChannelNameChange";var K=function(e){var t=e.message,n=t.author,r=t.getChannelId();return k(E.default,{message:t,onClickUsername:j(n,r),onContextMenuUsername:H(n,r)})};K.displayName="ChannelIconChange";var W=function(e){function t(){return e.apply(this,arguments)||this}G(t,e);var n=t.prototype;return n.handleViewPins=function(){C.ComponentDispatch.dispatch(L.ComponentActions.TOGGLE_CHANNEL_PINS)},n.render=function(){var e=this.props.message,t=e.author,n=e.getChannelId();return k(I.default,{message:e,onClickUsername:j(t,n),onContextMenuUsername:H(t,n),onClickPins:__OVERLAY__?null:this.handleViewPins})},t}(o.PureComponent);function z(e){var t=e.message,n=e.otherUser,r=t.author,a=t.getChannelId(),o=R.default.getName(null,a,n);return k(T.default,{message:t,otherUsername:o,onClickUsername:j(r,a),onContextMenuUsername:H(r,a),onClickOtherUsername:j(n,a),onContextMenuOtherUsername:H(n,a)})}W.displayName="ChannelPinnedMessage",z.displayName="RecipientAdd";var Y=i.default.connectStores([p.default],function(e){var t=e.message;return{otherUser:p.default.getUser(t.mentions[0])}})(z);function q(e){var t=e.message,n=e.otherUser,r=t.author,a=t.getChannelId(),o=j(r,a),i=H(r,a);if(null!=n&&n.id!==r.id){var l=R.default.getName(null,a,n),u=j(n,a),s=H(n,a);return k(O.default,{message:t,onClickUsername:o,onContextMenuUsername:i,otherUsername:l,onClickOtherUsername:u,onContextMenuOtherUsername:s})}return k(O.default,{message:t,onClickUsername:o,onContextMenuUsername:i})}q.displayName="RecipientRemove";var $=i.default.connectStores([p.default],function(e){var t=e.message;return{otherUser:p.default.getUser(t.mentions[0])}})(q),J=function(e){var t=e.message,n=t.author,r=t.getChannelId();return k(A.default,{message:t,onClickUsername:j(n,r),onContextMenuUsername:H(n,r)})};J.displayName="UserJoin";var Q=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleClickMessage=function(){var e=t.props.guild;null!=e&&(0,v.openFullScreenLayer)(function(t){var n=t.transitionState,r=t.closeLayer;return k(D.default,{layerTransitionState:n,close:r,guildId:e.id,locationSection:L.AnalyticsSections.CHANNEL_TEXT_AREA})})},t}return G(t,e),t.prototype.render=function(){var e=this.props,t=e.message,n=e.guild,r=t.author,a=t.getChannelId();return k(N.default,{message:t,guild:n,onClickUsername:j(r,a,!0),onContextMenuUsername:H(r,a),onClickMessage:this.handleClickMessage})},t}(o.PureComponent);Q.displayName="UserPremiumGuildSubscription";var X=i.default.connectStores([c.default,f.default],function(e){var t=e.message,n=c.default.getChannel(t.channel_id);return{guild:null!=n?f.default.getGuild(n.getGuildId()):null}})(Q),Z=function(e){function t(){return e.apply(this,arguments)||this}return G(t,e),t.prototype.render=function(){var e=this.props.message,t=e.author,n=e.getChannelId();return k(g.default,{message:e,onClickUsername:j(t,n),onContextMenuUsername:H(t,n)})},t}(o.PureComponent);Z.displayName="ChannelFollowAdd";var ee=((r={})[L.MessageTypes.RECIPIENT_ADD]=Y,r[L.MessageTypes.RECIPIENT_REMOVE]=$,r[L.MessageTypes.CALL]=B,r[L.MessageTypes.CHANNEL_NAME_CHANGE]=V,r[L.MessageTypes.CHANNEL_ICON_CHANGE]=K,r[L.MessageTypes.CHANNEL_PINNED_MESSAGE]=W,r[L.MessageTypes.USER_JOIN]=J,r[L.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION]=X,r[L.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_1]=X,r[L.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_2]=X,r[L.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_3]=X,r[L.MessageTypes.CHANNEL_FOLLOW_ADD]=Z,r),te=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).onContextMenu=function(e){var n=t.props,r=n.message,a=n.channel;(0,n.onContextMenu)(e,{message:r,channel:a,target:e.currentTarget})},t}return G(t,e),t.prototype.render=function(){var e,t=this.props,n=t.message,r=t.renderButtons,a=t.channel,o=ee[n.type];return null==o?(e=new Error("unknown message type "+n.type),b.default.captureException(e),console.error(e),null):k(y.default,{message:n,channel:a,content:(0,u.default)(n).content,isCompact:!1,onContextMenu:this.onContextMenu,renderButtons:L.MessageTypesDeletable[n.type]?r:null},void 0,k(o,{message:n}))},t}(o.PureComponent);t.default=te,te.displayName="SystemMessageWrapper"},8481:function(e,t,n){"use strict";t.__esModule=!0,t.default=u;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=i(n(6594)),o=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function u(e){var t=e.message,r=e.missed,i=e.joinable,u=e.onClickUsername,s=e.onContextMenuUsername,d=e.onClickJoinCall,c=t.getAuthorName(),f=function(e){var t=null!=e.call?e.call.duration:null;return null!=t?t.humanize():null}(t),p={onClick:u,onContextMenu:s};return r?l(a.default,{icon:n(8482),timestamp:t.timestamp},void 0,null!=f?o.default.Messages.SYSTEM_MESSAGE_CALL_MISSED_WITH_DURATION.format({username:c,usernameOnClick:p,callDuration:f}):o.default.Messages.SYSTEM_MESSAGE_CALL_MISSED.format({username:c,usernameOnClick:p})):l(a.default,{icon:n(8483),timestamp:t.timestamp},void 0,null!=f?o.default.Messages.SYSTEM_MESSAGE_CALL_STARTED_WITH_DURATION.format({username:c,usernameOnClick:p,callDuration:f}):o.default.Messages.SYSTEM_MESSAGE_CALL_STARTED.format({username:c,usernameOnClick:p}),i?l(a.default.Action,{onClick:d},void 0,o.default.Messages.SYSTEM_MESSAGE_JOIN_CALL):null)}u.displayName="Call"},8482:function(e,t,n){e.exports=n.p+"d80d1fdc43a3c42134a31a39581160ac.svg"},8483:function(e,t,n){e.exports=n.p+"c30220457097b064286a8759a9b6c4af.svg"},8484:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=d(n(7675)),i=d(n(106)),l=d(n(458)),u=d(n(6594)),s=d(n(4));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function f(e){var t=e.children,n=e.messageReference;if(null==n)return c(i.default,{},void 0,t);var r=c(o.default,{messageReference:n});return c(l.default,{position:l.default.Positions.RIGHT,renderPopout:function(){return r}},void 0,function(e){e["aria-controls"],e["aria-expanded"];var n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["aria-controls","aria-expanded"]);return a.createElement(i.default,n,t)})}f.displayName="WebhookName";var p=function(e){var t,r;function a(){return e.apply(this,arguments)||this}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a.prototype.render=function(){var e=this.props,t=e.onClickUsername,r=e.message,a=e.onContextMenuUsername,o=r.author,i=r.content,l=r.timestamp,d=r.messageReference,p=s.default.Messages.SYSTEM_MESSAGE_CHANNEL_FOLLOW_ADD.format({username:o.toString(),usernameOnClick:{onClick:t,onContextMenu:a},webhookName:i,webhookNameHook:function(e,t){return c(f,{messageReference:d},t,e)}});return c(u.default,{icon:n(7074),timestamp:l},void 0,p)},a}(a.PureComponent);t.default=p,p.displayName="ChannelFollowAdd"},8485:function(e,t,n){"use strict";t.__esModule=!0,t.default=l;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=i(n(6594)),o=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.message,i=e.onClickUsername,l=e.onContextMenuUsername;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(a.default,{icon:n(7700),timestamp:t.timestamp},void 0,o.default.Messages.SYSTEM_MESSAGE_CHANNEL_ICON_CHANGE.format({username:t.getAuthorName(),usernameOnClick:{onClick:i,onContextMenu:l}}))}l.displayName="ChannelIconChange"},8486:function(e,t,n){"use strict";t.__esModule=!0,t.default=u;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=l(n(6594)),o=l(n(4)),i=l(n(6266));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e.message,l=e.onClickUsername,u=e.onContextMenuUsername;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(a.default,{className:i.default.channelNameChange,icon:n(7700),timestamp:t.timestamp},void 0,o.default.Messages.SYSTEM_MESSAGE_CHANNEL_NAME_CHANGE.format({username:t.getAuthorName(),usernameOnClick:{onClick:l,onContextMenu:u},channelName:t.content}))}u.displayName="ChannelNameChange"},8487:function(e,t,n){"use strict";t.__esModule=!0,t.default=s;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=l(n(106)),o=l(n(6594)),i=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function s(e){var t=e.message,r=e.onClickUsername,l=e.onContextMenuUsername,s=e.onClickPins,d=t.nick,c=t.author,f=t.colorString,p=d||c.username,h=function(e,t){var n=f?{color:f}:null;return u(a.default,{onClick:r,onContextMenu:l,style:n},t,e)},m=null==s?i.default.Messages.SYSTEM_MESSAGE_PINNED_MESSAGE_NO_CTA_FORMATTED.format({usernameOnClick:h,username:p}):i.default.Messages.SYSTEM_MESSAGE_PINNED_MESSAGE.format({usernameHook:h,username:p,pinsActionOnClick:s});return u(o.default,{icon:n(8488),timestamp:t.timestamp},void 0,m)}s.displayName="ChannelPinnedMessage"},8488:function(e,t,n){e.exports=n.p+"5da4cdab01d4d89c593c48c62ae0d937.svg"},8489:function(e,t,n){"use strict";t.__esModule=!0,t.default=l;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=i(n(6594)),o=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.message,i=e.otherUsername,l=e.onClickUsername,u=e.onContextMenuUsername,s=e.onClickOtherUsername,d=e.onContextMenuOtherUsername,c=t.getAuthorName(),f=o.default.Messages.SYSTEM_MESSAGE_RECIPIENT_ADD.format({username:c,usernameOnClick:{onClick:l,onContextMenu:u},otherUsername:i,otherUsernameOnClick:{onClick:s,onContextMenu:d}});return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(a.default,{icon:n(7074),timestamp:t.timestamp},void 0,f)}l.displayName="RecipientAdd"},8490:function(e,t,n){"use strict";t.__esModule=!0,t.default=l;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=i(n(6594)),o=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t,i=e.message,l=e.onClickUsername,u=e.onContextMenuUsername,s=i.getAuthorName();if(e.otherUsername){var d=e.otherUsername,c=e.onClickOtherUsername,f=e.onContextMenuOtherUsername;t=o.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE.format({username:s,usernameOnClick:{onClick:l,onContextMenu:u},otherUsername:d,otherUsernameOnClick:{onClick:c,onContextMenu:f}})}else t=o.default.Messages.SYSTEM_MESSAGE_RECIPIENT_REMOVE_SELF.format({username:s,usernameOnClick:{onClick:l,onContextMenu:u}});return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(a.default,{icon:n(8491),timestamp:i.timestamp},void 0,t)}l.displayName="RecipientRemove"},8491:function(e,t,n){e.exports=n.p+"aff52bc375fe2da876174301a5c6d09d.svg"},8492:function(e,t,n){"use strict";t.__esModule=!0,t.default=l;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=i(n(7075)),o=i(n(6594));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.message,i=e.onClickUsername,l=e.onContextMenuUsername,u=t.id,s=t.author,d=a.default.getSystemMessageUserJoin(u).format({username:s.username,usernameOnClick:{onClick:i,onContextMenu:l}});return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(o.default,{icon:n(7074),timestamp:t.timestamp},void 0,d)}l.displayName="UserJoin"},8493:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(6534),i=h(n(58)),l=h(n(8494)),u=h(n(42)),s=h(n(7701)),d=h(n(6594)),c=n(1),f=h(n(4)),p=h(n(6268));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var y={fireCount:10,count:5,size:12,sizeSpread:7,tilt:0,tiltSpread:.5,tiltAngleIncremental:.05,angle:170,angleSpread:120,velocity:65,velocitySpread:50,colors:[c.Colors.PREMIUM_GUILD_PINK,"#FFC0FF","#FFD836","#FF9A15","#A5F7DE","#51BC9D","#AEC7FF","#3E70DD"],customSprites:[n(8495),n(8496),n(8497),n(8498),n(8499)]};var _=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={iconRef:null,confettiCannonRef:null,fireCannon:!1},t.handleIconMouseEnter=function(){t.setState({fireCannon:!0})},t.handleIconMouseLeave=function(){t.setState({fireCannon:!1})},t.handleSetIconRef=function(e){t.setState({iconRef:e})},t.handleSetConfettiCannonRef=function(e){t.setState({confettiCannonRef:e})},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var h=r.prototype;return h.renderConfetti=function(){var e=this.state,t=e.iconRef,n=e.confettiCannonRef,r=e.fireCannon;if(null==t)return null;var o=t.getBoundingClientRect(),i=0,u=0;if(null!=n){var d=n.getBoundingClientRect(),c=o.left-d.left+o.width/2,f=o.top-d.top+o.height/2;i=c/d.width*100,u=f/d.height*100}var h=v({},y,{position:{x:i,y:u},firing:r});return m(s.default,{},void 0,a.createElement("div",{className:p.default.cannonWrapper,ref:this.handleSetConfettiCannonRef},null!=n?m(l.default,{className:p.default.cannon,cannon:h,interval:1e3/60}):null))},h.render=function(){var e,t,n=this.props,r=n.message,l=n.onClickUsername,s=n.onContextMenuUsername,h=n.onClickMessage,v=n.guild,y=r.nick,_=r.author,g=function(e){switch(e.type){case c.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_1:return c.PremiumGuildTiers.TIER_1;case c.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_2:return c.PremiumGuildTiers.TIER_2;case c.MessageTypes.USER_PREMIUM_GUILD_SUBSCRIPTION_TIER_3:return c.PremiumGuildTiers.TIER_3}return null}(r),E=y||_.username,S={onClick:l,onContextMenu:s};try{e=+r.content,isNaN(e)&&(e=1)}catch(t){e=1}t=null==g||null==v?e>1?f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED_MANY.format({username:E,usernameOnClick:S,numSubscriptions:e}):f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED.format({username:E,usernameOnClick:S}):e>1?f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED_MANY_ACHIEVED_TIER.format({username:E,usernameOnClick:S,numSubscriptions:e,guildName:v.name,newTierName:(0,o.getTierName)(g)}):f.default.Messages.SYSTEM_MESSAGE_GUILD_MEMBER_SUBSCRIBED_ACHIEVED_TIER.format({username:E,usernameOnClick:S,guildName:v.name,newTierName:(0,o.getTierName)(g)});var I=a.createElement("div",{className:p.default.iconWrapper,ref:this.handleSetIconRef},m(u.default,{name:u.default.Names.PREMIUM_GUILD_SUBSCRIBER_BADGE,className:p.default.icon,onClick:h,onMouseEnter:this.handleIconMouseEnter,onMouseLeave:this.handleIconMouseLeave}));return m(d.default,{iconNode:I,timestamp:r.timestamp},void 0,m(i.default,{tag:"span",onClick:h,className:p.default.message},void 0,t),this.renderConfetti())},r}(a.PureComponent);t.default=_,_.displayName="UserPremiumGuildSubscription"},8494:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.DEFAULTS=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),a=s(n(6)),o=s(n(74)),i=n(29),l=n(486),u=s(n(6267));function s(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var p=2,h={count:100,position:{x:50,y:100},delay:0,fireCount:-1,firing:!0,angle:180,angleSpread:80,velocity:200,velocitySpread:100,size:12,sizeSpread:12,tilt:20,tiltSpread:6,tiltAngleIncremental:.06,tiltAngleIncrementalSpread:.01,gravity:9.8,dragCoefficient:.001};function m(e){return e*(Math.PI/180)}t.DEFAULTS=h;var v=function(){function e(e){var t,n=e.size,r=e.x,a=e.y,i=e.color,l=e.rotation,u=void 0===l?0:l,s=e.angle,d=void 0===s?0:s,c=e.velocity,f=void 0===c?0:c,p=e.tilt,h=void 0===p?0:p,v=e.tiltAngleIncremental,y=void 0===v?0:v,_=e.gravity,g=void 0===_?0:_,E=e.dragCoefficient,S=void 0===E?0:E;this.id=o.default.v4(),this.creationTime=Date.now(),this.currentTime=Date.now(),this.rotation=u,this.angle=d,this.velocityY=f*(t=d,Math.cos(m(t))),this.velocityX=f*function(e){return Math.sin(m(e))}(d),this.height=n,this.width=n,this.tiltAngle=0,this.tilt=0,this.tiltCoefficient=h,this.tiltAngleIncremental=y,this.position={x:r,y:a},this.color=i,this.gravity=g,this.dragCoefficient=S}var t=e.prototype;return t.update=function(){var e=Date.now(),t=(e-this.currentTime)/100,n=this.gravity*t,r=this.velocityX>0?-1:1,a=this.velocityY>0?-1:1,o=Math.min(n,this.dragCoefficient*this.velocityX*this.velocityX)*r,i=Math.min(n,this.dragCoefficient*this.velocityY*this.velocityY)*a;this.velocityY+=n+i,this.velocityX+=o,this.position.x+=this.velocityX*t,this.position.y+=this.velocityY*t,this.rotation+=this.tiltAngleIncremental*t,this.tiltAngle+=this.tiltAngleIncremental,this.tilt=Math.sin(this.tiltAngle-6)*this.tiltCoefficient,this.currentTime=e},t.getColorString=function(){return"string"==typeof this.color?this.color:"rgba("+this.color.red+","+this.color.green+","+this.color.blue+")"},t.draw=function(e,t){e.beginPath(),e.lineWidth=this.width*t,e.strokeStyle=this.getColorString(),e.rotate(this.rotation),e.moveTo(this.position.x*t,this.position.y*t),e.lineTo((this.position.x+this.tilt)*t,(this.position.y+this.tilt+this.height)*t),e.stroke()},t.shouldDestroy=function(){return this.position.y>100+this.height&&this.velocityY>0},e}(),y=function(e){function t(t){var n,r=t.sourceX,a=t.sourceY,o=t.sourceWidth,i=t.sourceHeight,l=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["sourceX","sourceY","sourceWidth","sourceHeight"]);return(n=e.call(this,l)||this).sourceX=r,n.sourceY=a,n.sourceWidth=o,n.sourceHeight=i,n}return f(t,e),t.drawSprite=function(e){var t=e.image,n=e.context,r=e.color,a=e.x,o=e.y,i=e.width,u=e.height;n.drawImage(t,a,o,i,u);for(var s=n.getImageData(a,o,i,u),d=(0,l.hexToRgb)(r),c=0;c<s.data.length;c+=4)s.data[c]=d.r,s.data[c+1]=d.g,s.data[c+2]=d.b;n.putImageData(s,a,o)},t.prototype.draw=function(e,t,n){t.save(),t.setTransform(1,this.tilt,0,1,this.position.x,this.position.y),t.rotate(this.rotation),t.drawImage(e,this.sourceX*n,this.sourceY*n,this.sourceWidth*n,this.sourceHeight*n,0,0,this.width*n,this.width*n),t.restore()},t}(v),_=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._canvas=null,t._spriteCanvas=null,t._confetti={},t._interval=new i.Interval,t._animationFrameRequestId=null,t._devicePixelRatio=window.devicePixelRatio||1,t._context=null,t._spriteContext=null,t._isUnmounted=!1,t._fireCount=0,t._sprites=[],t._cachedDevicePixelRatio=window.devicePixelRatio||0,t.setSize=function(){if(t._canvas){var e=t._canvas,n=e.getBoundingClientRect(),r=n.width,a=n.height;e.width=r*t.devicePixelRatio,e.height=a*t.devicePixelRatio}},t.setSpriteSize=function(){if(null!=t._spriteCanvas){var e=t.cannon;t._spriteCanvas.width=(e.size+e.sizeSpread+p)*(null!=e.colors?e.colors.length:0)*t.devicePixelRatio,t._spriteCanvas.height=(e.size+e.sizeSpread+p)*(null!=e.customSprites?e.customSprites.length:0)*t.devicePixelRatio}},t.fireCannon=function(){var e=t.props.cannon,n=d({},h,e),r=t._fireCount>=n.delay,a=n.firing&&(-1===n.fireCount||t._fireCount<n.fireCount+n.delay);r&&a?(t.devicePixelRatio!==t._cachedDevicePixelRatio&&(t.setSize(),t.setSpriteSize(),t.drawSprites(),t._cachedDevicePixelRatio=t.devicePixelRatio),t.addConfetti(n)):(0===Object.keys(t._confetti).length&&null!=t._animationFrameRequestId&&window.cancelAnimationFrame(t._animationFrameRequestId),t.stopCannons()),t._fireCount++},t.handleTick=function(){if(!t._isUnmounted){var e=t._context;if(null!=e){for(var n in e.clearRect(0,0,t.canvas.width,t.canvas.height),t._confetti){var r=t._confetti[n];r.update(),r instanceof y?r.draw(t.spriteCanvas,e,t.devicePixelRatio):r.draw(e,t.devicePixelRatio),t.shouldDestroy(r)&&delete t._confetti[n]}t._animationFrameRequestId=window.requestAnimationFrame(t.handleTick)}}},t.handleSetCanvas=function(e){t._canvas=e,t.setSize()},t.handleSetSpriteCanvas=function(e){t._spriteCanvas=e,t.setSpriteSize()},t}f(t,e);var n,o,l,s=t.prototype;return s.componentDidMount=function(){var e=this,t=this.props.cannon;if(this._context=this.canvas.getContext("2d"),null!=t.customSprites&&(this._spriteContext=this.spriteCanvas.getContext("2d")),null!=t.customSprites){var n=t.customSprites.map(function(e){var t=new Image;t.src=e;var n=new Promise(function(e){t.onload=function(){return e()}});return{image:t,loadPromise:n}});this._sprites=n.map(function(e){return e.image}),Promise.all(n.map(function(e){return e.loadPromise})).then(function(){return e.drawSprites()})}this.setSize(),this.addListeners(),this.startCannons()},s.componentDidUpdate=function(){this.removeListeners(),this.addListeners(),this.stopCannons(),this.startCannons()},s.componentWillUnmount=function(){this._isUnmounted=!0,this.removeListeners(),this.stopCannons()},s.addListeners=function(){this.props.active&&(window.addEventListener("resize",this.setSize),this._animationFrameRequestId=window.requestAnimationFrame(this.handleTick))},s.removeListeners=function(){window.removeEventListener("resize",this.setSize),null!=this._animationFrameRequestId&&window.cancelAnimationFrame(this._animationFrameRequestId)},s.drawSprites=function(){var e=this,t=this.cannon,n=this._spriteContext;if(null!=n){var r=t.size+t.sizeSpread;this._sprites.forEach(function(a,o){if(null==t.colors)throw new Error("Cannot render a custom image without predefined colors");t.colors.forEach(function(t,i){y.drawSprite({image:a,context:n,color:t,x:(r*i+p*i)*e.devicePixelRatio,y:(r*o+p*o)*e.devicePixelRatio,width:r*e.devicePixelRatio,height:r*e.devicePixelRatio})})})}},s.startCannons=function(){this.props.active&&(this._fireCount=0,this._interval.start(this.props.interval,this.fireCannon))},s.stopCannons=function(){this._interval.stop()},s.createConfetti=function(e){var t=e.angle,n=e.angleSpread,r=e.velocity,o=e.velocitySpread,i=e.size,l=e.tilt,u=e.tiltSpread,s=e.tiltAngleIncremental,c=e.tiltAngleIncrementalSpread,f=e.sizeSpread,h=e.gravity,m=e.dragCoefficient,_=e.colors,g=t-n/2,E=t+n/2,S=Math.max(h,r-o),I=r+o,T=Math.max(0,i-f),O=i+f,A=l-u,N=l+u,C=Math.max(0,s-c),M=s+c,b=this.canvas,R=b.width*(e.position.x/100),P=b.height*(e.position.y/100),D=a.default.random(360),L=null!=_?_[a.default.random(_.length-1)]:{red:a.default.random(30,255),green:a.default.random(30,230),blue:a.default.random(30,230)},w={size:a.default.random(T,O),x:R,y:P,color:L,rotation:D,angle:a.default.random(g,E),velocity:a.default.random(S,I)*this.devicePixelRatio,tilt:a.default.random(A,N)*this.devicePixelRatio,tiltAngleIncremental:a.default.random(C,M)*this.devicePixelRatio,gravity:h*this.devicePixelRatio,dragCoefficient:m*this.devicePixelRatio};if(this._sprites.length>0){if(null==_)throw new Error("Cannot render a custom image without predefined colors");var U=a.default.random(_.length-1),k=a.default.random(this._sprites.length-1),G=d({},w,{sourceWidth:O,sourceHeight:O,sourceX:U*O+U*p,sourceY:k*O+k*p});return new y(G)}return new v(w)},s.addConfetti=function(e){if(!this._isUnmounted)for(var t=0;t<e.count;t++){var n=this.createConfetti(e);this._confetti[n.id]=n}},s.shouldDestroy=function(e){if(e.velocityY>0&&e.position.y-e.height>this.canvas.height)return!0},s.render=function(){return r.createElement(r.Fragment,null,r.createElement("canvas",{key:"canvas",className:this.props.className,ref:this.handleSetCanvas}),null!=this.props.cannon.customSprites?r.createElement("canvas",{key:"sprite-canvas",className:u.default.spriteCanvas,ref:this.handleSetSpriteCanvas}):null)},n=t,(o=[{key:"canvas",get:function(){if(null==this._canvas)throw new Error("Unable to get canvas");return this._canvas}},{key:"spriteCanvas",get:function(){if(null==this._spriteCanvas)throw new Error("Unable to get sprite canvas, did you set colors?");return this._spriteCanvas}},{key:"devicePixelRatio",get:function(){return window.devicePixelRatio||1}},{key:"cannon",get:function(){return d({},h,this.props.cannon)}}])&&c(n.prototype,o),l&&c(n,l),t}(r.Component);_.displayName="ConfettiCannon",_.defaultProps={active:!0,interval:500};var g=_;t.default=g},8495:function(e,t,n){e.exports=n.p+"f78b68c74574f5aa4ddb092d24b9a2c0.svg"},8496:function(e,t,n){e.exports=n.p+"bb738a64264307f6a4a3e84e5f1eddb6.svg"},8497:function(e,t,n){e.exports=n.p+"e843c51c0eec3801b70cae5c45ad343f.svg"},8498:function(e,t,n){e.exports=n.p+"0700205862c1a590feed964754d34669.svg"},8499:function(e,t,n){e.exports=n.p+"6b6d88307890126be8b60125143bc2f4.svg"},8501:function(e,t,n){e.exports=n.p+"b4aa5e92cbf71d936e8ab48605ec1461.svg"},8502:function(e,t,n){e.exports=n.p+"f3e713834a05aad80371aa84fb82037a.svg"},8503:function(e,t,n){e.exports=n.p+"de8659b8a9149c4e0dcb597a09bd25d0.svg"},8504:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=h(n(8)),i=n(157),l=n(6534),u=h(n(58)),s=h(n(65)),d=h(n(901)),c=n(1),f=h(n(4)),p=h(n(6272));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){return"linear-gradient(to right, "+e+", "+t+")"}var _={tension:140,friction:30},g={tension:800,friction:20},E=v({},g,{clamp:!0}),S=[].concat(l.GuildTierSubscriptionsOrdered,[{tier:c.PremiumGuildTiers.NONE}]).reverse(),I=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={finishedInitialAnimation:0===t.props.guild.premiumSubscriberCount,tierMarkerActive:c.PremiumGuildTiers.NONE},t.getTierMarkerAnimationConfig=function(e){switch(e){case"background":return E;case"scale":default:return g}},t.handleForegroundFrame=function(e){for(var n=e.width,r=t.props.guild,a=t.state.tierMarkerActive,o=S.length-1;o>0;o--){var i=S[o],l=a===o,u=o/S.length*100;if(null!=i.amount&&n>=u&&r.premiumSubscriberCount>=i.amount)return void(l||t.setState({tierMarkerActive:i.tier}))}},t.handleFinishedInitialAnimation=function(){t.setState({finishedInitialAnimation:!0})},t.handleSelectTier=function(e){var n=t.props,r=n.canSelectTier,a=n.onSelectTier;(null==r||r(e))&&a(e)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var h=r.prototype;return h.componentDidUpdate=function(e){var t=this.props.selectedTier;e.selectedTier!==t&&this.setState({finishedInitialAnimation:!0})},h.renderTierMarker=function(e){var t,n=this,r=this.props,h=r.guild,_=r.selectedTier,g=r.canSelectTier,E=r.theme,S=this.state,I=S.tierMarkerActive,T=S.finishedInitialAnimation,O=h.premiumSubscriberCount>=c.PremiumGuildSubscriptionsRequired[e]&&h.premiumSubscriberCount>0,A=_===e,N=O&&c.PremiumGuildSubscriptionsRequired[I]>=c.PremiumGuildSubscriptionsRequired[e],C=T?A:N&&A,M=E===c.ThemeTypes.DARK?c.Colors.PRIMARY_DARK_700:c.Colors.PRIMARY_LIGHT_160,b=(0,l.getTierName)(e),R=c.PremiumGuildSubscriptionsRequired[e],P=null!=b?m(a.Fragment,{},void 0,m("div",{},void 0,b),m("div",{},void 0,f.default.Messages.PREMIUM_GUILD_PERKS_MODAL_LEVEL_SUBSCRIBER_COUNT_TOOLTIP.format({subscriberCount:Math.min(h.premiumSubscriberCount,R),numRequired:R}))):null,D={transform:"scale(1)",background:y(M,M)},L={transform:C?"scale(1.625)":"scale(1)",background:N?y(c.Colors.PREMIUM_TIER_2_PURPLE,c.Colors.PREMIUM_TIER_2_PINK):y(M,M)},w=m(s.default,{text:P,"aria-label":b||!1},void 0,function(t){return a.createElement(u.default,v({},t,{onClick:function(){return n.handleSelectTier(e)}}),m(i.Spring,{native:!0,from:D,to:L,config:n.getTierMarkerAnimationConfig},void 0,function(t){var n,r;return m(i.animated.div,{style:t,className:(0,o.default)(N?p.default.tierMarkerAccomplished:p.default.tierMarkerInProgress,(n={},n[p.default.tierMarkerSelectable]=null==g||g(e),n))},void 0,e!==c.PremiumGuildTiers.NONE?m(d.default,{tier:e,className:(0,o.default)(p.default.currentTierIcon,(r={},r[p.default.tier3Icon]=e===c.PremiumGuildTiers.TIER_3,r))}):null)}))});return m("div",{className:(0,o.default)(p.default.tierMarkerGroup,(t={},t[p.default.selectedTier]=A,t))},e,m("div",{className:p.default.tierMarkerBackground}),w,e!==c.PremiumGuildTiers.NONE?m("div",{className:p.default.tierMarkerLabel},void 0,b):null)},h.renderForeground=function(){var e=this.state.finishedInitialAnimation,t=this.props,n=t.guild,r=t.initialAnimationDelay;return m(i.Spring,{native:!0,from:{width:0},to:{width:(0,l.getProgressPercentToTopTier)(n)},config:_,delay:e?0:r,onFrame:this.handleForegroundFrame,onRest:e?null:this.handleFinishedInitialAnimation},void 0,function(e){var t=e.width;return m(i.animated.div,{className:p.default.barForeground,style:{width:t.interpolate(function(e){return e+"%"})}})})},h.render=function(){var e=this;return m("div",{className:(0,o.default)(this.props.className,p.default.progressBar)},void 0,m("div",{className:p.default.barBackground},void 0,this.renderForeground()),m("div",{className:p.default.tierMarkerContainer},void 0,S.map(function(t){return e.renderTierMarker(t.tier)})))},r}(a.Component);t.default=I,I.displayName="PremiumGuildModalProgressBar"},8505:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=A(n(0)),o=n(3),i=n(7702),l=n(881),u=O(n(336)),s=O(n(6694)),d=O(n(21)),c=O(n(6521)),f=O(n(42)),p=O(n(348)),h=O(n(65)),m=n(265),v=O(n(456)),y=O(n(257)),_=n(6534),g=n(96),E=A(n(7079)),S=n(1),I=O(n(4)),T=O(n(6284));function O(e){return e&&e.__esModule?e:{default:e}}function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function N(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var M=function(e){var t=e.closeLayer,n=e.guild,r=e.onSubscribeModalClose,l=(0,o.useStateFromStores)([u.default],function(){return u.default.getSubscription()});if(null!=l&&null!=l.renewalMutations){var c=(0,g.getNumPremiumGuildSubscriptions)(l.renewalMutations.additionalPlans),f=(0,g.getNumPremiumGuildSubscriptions)(l.additionalPlans);return N(h.default,{text:f>c?I.default.Messages.PREMIUM_GUILD_SUBSCRIPTION_PURCHASE_BUTTON_DISABLED_PENDING_MUTATION_PREMIUM_GUILD_SUBSCRIPTION:I.default.Messages.PREMIUM_GUILD_SUBSCRIPTION_PURCHASE_BUTTON_DISABLED_PENDING_MUTATION_PLAN},void 0,function(e){return a.createElement(p.default,C({},e,{disabled:!0,size:d.default.Sizes.SMALL}),I.default.Messages.PREMIUM_GUILD_PERKS_MODAL_BUTTON_SUBSCRIBE_THIS_SERVER)})}return N(p.default,{onClick:function(){var e=(0,_.getAvailableUserPremiumGuildSubscriptionSlots)(s.default.slots)[0];null!=e?(0,m.openModal)(function(t){var o=t.onClose,i=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["onClose"]);return a.createElement(E.default,C({},i,{onClose:function(e){o(),null!=r&&r(e)},selectedGuild:n,initialStep:E.Steps.CONFIRM,locationSection:S.AnalyticsSections.PREMIUM_GUILD_USER_MODAL,userPremiumGuildSubscriptionSlotId:e.id}))}):(0,i.openPremiumGuildSubscriptionPurchaseModal)({page:S.AnalyticsPages.GUILD_CHANNEL,section:S.AnalyticsSections.PREMIUM_GUILD_USER_MODAL,object:S.AnalyticsObjects.BUTTON_CTA},n.id,t,function(e){null!=r&&r(e)})},size:d.default.Sizes.SMALL},void 0,I.default.Messages.PREMIUM_GUILD_PERKS_MODAL_BUTTON_SUBSCRIBE_THIS_SERVER)};M.displayName="PremiumGuildSubscribeButton";var b=function(e){var t=e.guild,n=e.closeLayer,r=e.onSubscribeModalClose,a=(0,o.useStateFromStores)([s.default],function(){return s.default.slots}),i=Object.keys(a).filter(function(e){var n=a[e];return null!=n.premiumGuildSubscription&&n.premiumGuildSubscription.guildId===t.id});return N("div",{className:T.default.ctaBar},void 0,N(c.default,{guild:t,active:!0,size:c.default.Sizes.LARGE,className:T.default.guildIcon}),N("div",{className:T.default.guildDetails},void 0,N(v.default,{size:v.default.Sizes.SIZE_20,className:T.default.guildName},void 0,t.name),N("div",{className:T.default.guildSubscriptionInfo},void 0,N("div",{className:T.default.subscriberCountWrapper},void 0,N(f.default,{className:t.premiumSubscriberCount>0?T.default.badgeIconWithSubscribers:T.default.badgeIconWithoutSubscribers,name:f.default.Names.PREMIUM_GUILD_SUBSCRIBER_BADGE}),N(y.default,{className:T.default.guildSubscriptionInfoSubscriberCount},void 0,I.default.Messages.PREMIUM_GUILD_PERKS_MODAL_HEADER_SUBSCRIPTION_COUNT.format({subscriptions:t.premiumSubscriberCount}))),i.length>0?N(y.default,{className:T.default.userSubscriptionCount},void 0,I.default.Messages.PREMIUM_GUILD_PERKS_MODAL_HEADER_USER_SUBSCRIPTION_COUNT.format({numSubscriptions:i.length})):null)),N("div",{className:T.default.actions},void 0,N(M,{closeLayer:n,guild:t,onSubscribeModalClose:r}),N(d.default,{className:T.default.giftAction,innerClassName:T.default.giftActionContent,color:d.default.Colors.PRIMARY,onClick:function(){(0,l.openPremiumSubscriptionNewPlanModal)({planId:S.SubscriptionPlans.PREMIUM_MONTH_TIER_2,isGift:!0,analyticsLocation:{page:S.AnalyticsPages.GUILD_CHANNEL,section:S.AnalyticsSections.PREMIUM_GUILD_USER_MODAL,object:S.AnalyticsObjects.BUTTON_ICON,objectType:S.AnalyticsObjectTypes.GIFT},onClose:function(e){return e&&n()}})},size:d.default.Sizes.SMALL},void 0,N(f.default,{name:f.default.Names.GIFT,className:T.default.giftIcon}),I.default.Messages.PREMIUM_GUILD_PERKS_MODAL_GIFT_NITRO)))};b.displayName="PremiumGuildPerksModalCTABar";var R=b;t.default=R},8508:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=E(n(8)),i=n(3),l=E(n(263)),u=E(n(336)),s=E(n(21)),d=E(n(24)),c=E(n(274)),f=E(n(42)),p=E(n(6873)),h=E(n(75)),m=E(n(456)),v=E(n(257)),y=E(n(7705)),_=E(n(4)),g=E(n(6282));function E(e){return e&&e.__esModule?e:{default:e}}function S(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var T=function(e){function t(){return e.apply(this,arguments)||this}return I(t,e),t.prototype.render=function(){var e=this.props.onClose;return S(h.default.Header,{separator:!1,justify:d.default.Justify.BETWEEN},void 0,S(m.default,{size:m.default.Sizes.SIZE_16},void 0,this.props.text),null!=e?S(h.default.CloseButton,{onClick:e}):null)},t}(a.PureComponent);function O(e){var t=e.imageClass,n=e.children,r=e.error,a=e.onDismissError;return S("div",{className:g.default.content},void 0,S("div",{className:(0,o.default)(g.default.image,t)}),n,S(l.default,{},void 0,null!=r?S(p.default,{className:g.default.error},void 0,S(c.default,{onDismiss:a},void 0,r.message)):null))}T.displayName="ConfirmationHeader",O.displayName="Body";var A=function(){var e=(0,i.useStateFromStores)([u.default],function(){return u.default.getSubscription()});return null==e?null:S("div",{className:g.default.pendingCancellation},void 0,S(f.default,{className:g.default.pendingCancellationIcon,name:f.default.Names.NOVA_ALERT}),S(v.default,{size:v.default.Sizes.SIZE_16,className:g.default.pendingCancellationMessage},void 0,_.default.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_CANCEL_WARNING.format({date:e.currentPeriodEnd})))};A.displayName="PendingCancellationWarning";var N=S(A,{});function C(e){var t=e.imageClass,n=e.blurb,r=e.guild,a=e.warning,o=e.error,i=e.onDismissError,l=e.isCanceled;return S(O,{imageClass:t,error:o,onDismissError:i},void 0,S(v.default,{size:v.default.Sizes.SIZE_16},void 0,n),S(y.default,{className:g.default.guildCard,guild:r}),S(v.default,{size:v.default.Sizes.SIZE_16},void 0,a),l?N:null)}C.displayName="ConfirmationBody";var M=S(A,{});function b(e){var t=e.imageClass,n=e.blurb,r=e.fromGuild,a=e.toGuild,o=e.error,i=e.onDismissError,l=e.isCanceled;return S(O,{imageClass:t,error:o,onDismissError:i},void 0,S(v.default,{size:v.default.Sizes.SIZE_16},void 0,n),S(v.default,{size:v.default.Sizes.SIZE_12,className:g.default.transferGuildCardHeader},void 0,_.default.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_TRANSFER_FROM_GUILD),S(y.default,{className:g.default.transferFromGuildCard,guild:r,subscriptionChange:-1}),S(v.default,{size:v.default.Sizes.SIZE_12,className:g.default.transferGuildCardHeader},void 0,_.default.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_TRANSFER_TO_GUILD),S("div",{className:g.default.activeTransferGuildCardBorder},void 0,S(y.default,{className:g.default.transferToGuildCard,guild:a,subscriptionChange:1})),l?M:null)}b.displayName="TransferConfirmationBody";var R=function(e){function t(){return e.apply(this,arguments)||this}return I(t,e),t.prototype.render=function(){var e=this.props,t=e.confirmation,n=e.confirmationLabel,r=e.isModifyingSubscription,a=e.onConfirm,o=e.onCancel;return S(h.default.Footer,{},void 0,S(s.default,{onClick:a,submitting:r,"aria-label":n},void 0,t),S(s.default,{look:s.default.Looks.LINK,color:s.default.Colors.PRIMARY,onClick:o,disabled:r},void 0,_.default.Messages.CANCEL))},t}(a.PureComponent);R.displayName="ConfirmationFooter";var P=function(e){function t(){return e.apply(this,arguments)||this}return I(t,e),t.prototype.render=function(){var e=this.props,t=e.guild,n=e.header,r=e.blurb,o=e.warning,i=e.confirmation,l=e.confirmationLabel,u=e.imageClass,s=e.error,d=e.isModifyingSubscription,c=e.onConfirm,f=e.onCancel,p=e.onDismissError,m=e.isCanceled;return S(a.Fragment,{},void 0,S(T,{text:n}),S(h.default.Content,{},void 0,S(C,{guild:t,blurb:r,warning:o,imageClass:u,error:s,onDismissError:p,isCanceled:m})),S(R,{confirmation:i,confirmationLabel:l,isModifyingSubscription:d,onConfirm:c,onCancel:f}))},t}(a.PureComponent);P.displayName="PremiumGuildSubscriptionConfirmation",P.Header=T,P.SubscribeBody=C,P.TransferBody=b,P.Footer=R;var D=P;t.default=D},8509:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=u(n(42)),o=u(n(257)),i=u(n(4)),l=u(n(6285));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var d=function(){return s("ul",{className:l.default.perks},void 0,[{icon:a.default.Names.PREMIUM_GUILD_SUBSCRIBER_BADGE,text:i.default.Messages.PREMIUM_GUILD_SUBSCRIBER_FEATURE_MEMBER_BADGE},{icon:a.default.Names.PREMIUM_GUILD_SUBSCRIBER_BADGE_LEVEL_4,text:i.default.Messages.PREMIUM_GUILD_SUBSCRIBER_FEATURE_PROFILE_BADGE},{icon:a.default.Names.PERSON_SHIELD,text:i.default.Messages.PREMIUM_GUILD_SUBSCRIBER_FEATURE_ROLE}].map(function(e,t){return s("li",{className:l.default.perk},t,s(a.default,{name:e.icon,className:l.default.icon}),s(o.default,{size:o.default.Sizes.SIZE_14},void 0,e.text))}))};d.displayName="PremiumGuildSubscriberPerks";var c=d;t.default=c},8510:function(e,t,n){e.exports=n.p+"50f02014a2ac385c90461d9a4b80e482.svg"},8511:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=E(n(187)),i=E(n(349)),l=E(n(8512)),u=E(n(8514)),s=E(n(8518)),d=E(n(8519)),c=E(n(8520)),f=E(n(8521)),p=E(n(8522)),h=E(n(8523)),m=E(n(8524)),v=E(n(7491)),y=E(n(7492)),_=E(n(7496)),g=n(1);function E(e){return e&&e.__esModule?e:{default:e}}function S(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var I=S(v.default,{}),T=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e,t,n,r,a=this.props,v=a.type,E=a.className,T=a.channel,O=a.message,A=a.attachment,N=this.props.target;if(A)t=e=A.url;else for(;null!=N;)N instanceof HTMLImageElement&&null!=N.src&&(t=N.src),N instanceof HTMLAnchorElement&&null!=N.href&&(e=N.href),N=N.parentNode;var C=document.getSelection?document.getSelection():null;switch(C&&!C.isCollapsed&&(n=I,r=S(_.default,{value:C.toString()})),v){case g.ContextMenuTypes.MESSAGE_MAIN:return S("div",{className:E},void 0,S(o.default,{},void 0,n),S(o.default,{},void 0,r),S(o.default,{},void 0,S(l.default,{channel:T,message:O}),S(f.default,{channel:T,message:O}),S(m.default,{channel:T,message:O}),S(c.default,{channel:T,message:O}),S(d.default,{channelId:T.id,message:O}),S(p.default,{channel:T,message:O}),S(h.default,{channel:T,message:O}),S(u.default,{channel:T,message:O})),S(y.default,{href:e,src:t}),S(s.default,{channel:T,message:O}));case g.ContextMenuTypes.MESSAGE_SYSTEM:return S("div",{className:E},void 0,S(o.default,{},void 0,n),S(o.default,{},void 0,r),S(o.default,{},void 0,S(c.default,{channel:T,message:O}),S(u.default,{channel:T,message:O})),S(y.default,{href:e,src:t}),S(i.default,{id:O.id}));default:return null}},r}(a.PureComponent);T.displayName="MessageContextMenu";var O=T;t.default=O},8512:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=n(3),o=E(n(121)),i=n(35),l=n(491),u=E(n(473)),s=E(n(196)),d=E(n(64)),c=E(n(25)),f=E(n(88)),p=n(80),h=E(n(199)),m=n(516),v=E(n(8513)),y=E(n(287)),_=n(1),g=E(n(4));function E(e){return e&&e.__esModule?e:{default:e}}function S(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var I=function(e){var t=e.channel,n=e.message,r=(0,a.useStateFromStores)([d.default],function(){return d.default.can(_.Permissions.ADD_REACTIONS,t)},[t],o.default);function E(){(0,i.closeContextMenu)(),p.ComponentDispatch.dispatch(_.ComponentActions.TOGGLE_REACTION_POPOUT(n.id))}return c.default.renderReactions&&(t.isPrivate()||r)?S(y.default,{label:g.default.Messages.ADD_REACTION,render:function(){var r=t.getGuildId(),a=s.default.getDisambiguatedEmojiContext(r).getFrequentlyUsedEmojis().filter(function(t){return!h.default.isEmojiDisabled(t,e.channel)}).map(function(e){var r,a;r=null==e.id?h.default.getURL(e.optionallyDiverseSequence):f.default.getEmojiURL({id:e.id,animated:e.animated}),a=null==e.id?e.name:":"+e.name+":";var o=e.id||e.optionallyDiverseSequence;return S(v.default,{label:a,image:r,action:function(){return function(e){(0,l.addReaction)(t.id,n.id,(0,m.toReactionEmoji)(e)),(0,i.closeContextMenu)()}(e)}},o)});return a.push(S(v.default,{label:g.default.Messages.OTHER_REACTIONS,icon:u.default.NOVA_ADD_REACTION,action:E},"otherReactions")),a}}):null};t.default=I},8513:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=u(n(8)),o=u(n(58)),i=u(n(42)),l=u(n(202));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var d=function(e){var t,n,r=e.image,u=e.icon,d=e.label,c=e.action,f=e.active,p=void 0!==f&&f,h=e.disabled,m=void 0!==h&&h,v=e.danger,y=void 0!==v&&v;return m||(n=function(e){return c(e,d,p)}),s(o.default,{className:(0,a.default)(l.default.item,l.default.itemImage,(t={},t[l.default.clickable]=!m,t[l.default.disabled]=m,t[l.default.danger]=y,t)),onClick:n},void 0,s("div",{className:l.default.label},void 0,d),null!=r?s("img",{alt:"",src:r,className:l.default.image}):null,null!=u?s(i.default,{name:u,className:l.default.image}):null)};d.displayName="ImageMenuItem";var c=d;t.default=c},8514:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=n(3),o=h(n(121)),i=n(35),l=h(n(141)),u=h(n(64)),s=h(n(11)),d=h(n(38)),c=h(n(6876)),f=n(1),p=h(n(4));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){var t=e.channel,n=e.message,h=(0,a.useStateFromStores)([s.default],function(){return s.default.getCurrentUser()},[]);return!(0,a.useStateFromStores)([u.default],function(){return u.default.can(f.Permissions.MANAGE_MESSAGES,t)},[t],o.default)&&n.author.id!==h.id||n.state===f.MessageStates.SENDING?null:function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(d.default,{label:p.default.Messages.DELETE_MESSAGE,action:function(e){(0,i.closeContextMenu)(),n.state===f.MessageStates.SEND_FAILED?l.default.deleteMessage(t.id,n.id,!0):e.shiftKey?l.default.deleteMessage(t.id,n.id):c.default.confirmDelete(t,n,!0)},danger:!0})};t.default=m},8515:function(e,t,n){"use strict";t.__esModule=!0,t.canReportInChannel=d,t.canReportUser=c,t.canReportMessage=function(e){return null!=e&&c(e.author)&&d(e.getChannelId())};var r=u(n(10)),a=u(n(14)),o=u(n(275)),i=u(n(64)),l=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var s=50;function d(e){if(i.default.can(l.Permissions.MANAGE_MESSAGES,{channelId:e})){var t=a.default.getChannel(e);if(null!=t){var n=o.default.getMemberCount(t.getGuildId());return null!=n&&n>=s}}return!1}function c(e){if(null==e)return!1;var t=e.id;return r.default.getId()!==t}},8516:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=m(n(8517)),i=m(n(21)),l=m(n(6525)),u=m(n(182)),s=m(n(75)),d=m(n(262)),c=m(n(258)),f=m(n(66)),p=n(1),h=m(n(4));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this)._isMounted=!1,y(n).handleReasonChange=n.handleReasonChange.bind(y(n)),y(n).handleReport=n.handleReport.bind(y(n)),n.state={loading:!0,submitting:!1,reasons:[],selectedReason:null},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){var e=this;this._isMounted=!0,o.default.getReasons(this.getReportData()).then(function(t){e._isMounted&&e.setState({reasons:t,loading:!1})})},a.componentWillUnmount=function(){this._isMounted=!1},a.close=function(){(0,this.props.onClose)()},a.renderHeader=function(){var e,t=this.props,n=t.guild,r=t.message,a=t.user;return n?e=h.default.Messages.REPORT_SERVER.format({name:n.toString()}):r?e=h.default.Messages.REPORT_MESSAGE.format({name:r.getAuthorName()}):a&&(e=h.default.Messages.REPORT_USER.format({name:a.tag})),v(s.default.Header,{},void 0,v(f.default,{tag:f.default.Tags.H4},void 0,e))},a.getReportData=function(){var e=this.props,t=e.guild,n=e.message,r=e.user,a=this.state.selectedReason,o={};return null!=n?(o.channel_id=n.getChannelId(),o.message_id=n.id):null!=r?o.user_id=r.id:null!=t&&(o.guild_id=t.id),null!=a&&(o.reason=a),o},a.renderReasons=function(){var e=this.state,t=e.loading,n=e.reasons,r=e.selectedReason;if(t)return v(u.default,{style:{height:100}});var a=n.map(function(e){var t=e.reason;return{name:e.label,desc:e.description,value:t}});return v(l.default,{value:r,onChange:this.handleReasonChange,options:a})},a.renderFooter=function(){var e=this,t=this.state,n=t.loading,r=t.selectedReason,a=t.submitting,o=n||a||null==r;return v(s.default.Footer,{},void 0,v(i.default,{type:"submit",disabled:o,submitting:a},void 0,h.default.Messages.REPORT),v(i.default,{look:i.default.Looks.LINK,color:i.default.Colors.PRIMARY,onClick:function(){return e.close()}},void 0,h.default.Messages.CANCEL))},a.render=function(){return v(s.default,{tag:"form",onSubmit:this.handleReport},void 0,this.renderHeader(),v(s.default.Content,{},void 0,v(d.default,{title:h.default.Messages.FORM_LABEL_REPORT_REASON},void 0,this.renderReasons()),v(c.default,{type:c.default.Types.DESCRIPTION},void 0,h.default.Messages.FORM_REPORT_HELP_TEXT.format({guidelinesURL:p.MarketingURLs.GUIDELINES}))),this.renderFooter())},a.handleReasonChange=function(e){var t=e.value;if("number"!=typeof t)throw new Error("Report.handleReasonChange: Invalid reason type");this.setState({selectedReason:t})},a.handleReport=function(e){var t=this;e.preventDefault(),this.setState({submitting:!0});var n=this.props.onReport;o.default.report(this.getReportData()).then(function(){n&&n(),t.close()},function(){return t.setState({submitting:!1})})},r}(a.Component);_.displayName="Report";var g=_;t.default=g},8517:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=n(12))&&r.__esModule?r:{default:r},o=n(1);var i={report:function(e){return a.default.post({url:o.Endpoints.REPORT,body:e})},getReasons:function(e){return a.default.get({url:o.Endpoints.REPORT,query:e}).then(function(e){return e.body})}};t.default=i},8518:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=p(n(3)),i=n(35),l=p(n(25)),u=n(272),s=p(n(187)),d=p(n(38)),c=n(1),f=p(n(4));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var m=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleCopyID=function(e){var n=t.props.message,r=n.channel_id+"-"+n.id,a=r&&e.shiftKey?r:n.id;(0,u.copy)(a),(0,i.closeContextMenu)()},t.handleCopyLink=function(){var e=t.props,n=e.channel,r=e.message;(0,u.copy)(location.protocol+"//"+location.host+c.Routes.CHANNEL(n.guild_id,n.id,r.id)),(0,i.closeContextMenu)()},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){return!__OVERLAY__&&this.props.developerMode&&u.SUPPORTS_COPY?h(s.default,{},void 0,h(d.default,{label:f.default.Messages.COPY_ID,action:this.handleCopyID}),h(d.default,{label:f.default.Messages.COPY_MESSAGE_LINK,action:this.handleCopyLink})):null},r}(a.PureComponent);m.displayName="MessageDeveloperModeGroup";var v=o.default.connectStores([l.default],function(){return{developerMode:l.default.developerMode}})(m);t.default=v},8519:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(35),i=c(n(141)),l=c(n(11)),u=c(n(38)),s=n(1),d=c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleEditMessage=function(){(0,o.closeContextMenu)(),i.default.startEditMessage(t.props.channelId,t.props.message.id,t.props.message.content)},t}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.render=function(){var e=this.props.message,t=l.default.getCurrentUser();return e.state!==s.MessageStates.SEND_FAILED&&e.author.id===t.id?function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(u.default,{label:d.default.Messages.EDIT_MESSAGE,action:this.handleEditMessage}):null},a}(a.PureComponent);f.displayName="MessageEditItem";var p=f;t.default=p},8520:function(e,t,n){"use strict";t.__esModule=!0,t.default=s;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=n(35),o=n(883),i=u(n(38)),l=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.channel,n=e.message;return function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(i.default,{label:l.default.Messages.MARK_UNREAD,action:function(){(0,a.closeContextMenu)(),(0,o.markUnread)(t.id,n.id)}})}s.displayName="MessageMarkUnreadItem"},8521:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=n(3),o=f(n(6863)),i=n(35),l=f(n(64)),u=f(n(38)),s=f(n(6876)),d=n(1),c=f(n(4));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h=function(e){var t=e.channel,n=e.message;return!(0,a.useStateFromStores)([l.default],function(){return l.default.can(d.Permissions.MANAGE_MESSAGES,t)},[t])&&!t.isPrivate()||n.state===d.MessageStates.SEND_FAILED?null:!1===n.pinned?p(u.default,{action:function(e){(0,i.closeContextMenu)(),e.shiftKey?o.default.pinMessage(t,n.id):s.default.confirmPin(t,n)},label:c.default.Messages.PIN_MESSAGE}):p(u.default,{action:function(e){(0,i.closeContextMenu)(),e.shiftKey?o.default.unpinMessage(t,n.id):s.default.confirmUnpin(t,n)},label:c.default.Messages.UNPIN_MESSAGE})};h.displayName="MessagePinItem";var m=h;t.default=m},8522:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=n(35),o=s(n(30)),i=s(n(38)),l=s(n(7706)),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t=e.message;return t.reactions&&t.reactions.length>0?function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(i.default,{label:u.default.Messages.REACTIONS,action:function(){(0,a.closeContextMenu)(),o.default.push(l.default,{message:t})}}):null};t.default=d},8523:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(0));var r,a=n(3),o=f(n(142)),i=n(35),l=n(491),u=f(n(64)),s=f(n(38)),d=n(1),c=f(n(4));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){var t=e.channel,n=e.message;return(0,a.useStateFromStores)([u.default],function(){return u.default.can(d.Permissions.MANAGE_MESSAGES,t)},[t])&&n.reactions&&n.reactions.length>0?function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(s.default,{label:c.default.Messages.REMOVE_ALL_REACTIONS,action:function(e){(0,i.closeContextMenu)(),e.shiftKey?(0,l.removeAllReactions)(t.id,n.id):o.default.show({title:c.default.Messages.REMOVE_ALL_REACTIONS_CONFIRM_TITLE,body:c.default.Messages.REMOVE_ALL_REACTIONS_CONFIRM_BODY,confirmText:c.default.Messages.YES_TEXT,cancelText:c.default.Messages.NO_TEXT,onConfirm:function(){(0,l.removeAllReactions)(t.id,n.id)}})},danger:!0}):null};t.default=p},8524:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=n(35),i=d(n(141)),l=d(n(38)),u=n(1),s=d(n(4));function d(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleResendMessage=function(){var e=t.props,n=e.channel,r=e.message;(0,o.closeContextMenu)(),i.default.retrySendMessage(n,r.id,r.content,r.tts)},t}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.render=function(){return this.props.message.state===u.MessageStates.SEND_FAILED?function(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}(l.default,{label:s.default.Messages.RESEND_MESSAGE,action:this.handleResendMessage}):null},a}(a.PureComponent);c.displayName="MessageResendItem";var f=c;t.default=f},8525:function(e,t,n){e.exports=n.p+"9b0d90147f7fab54f00dd193fe7f85cd.svg"},8526:function(e,t,n){e.exports=n.p+"308e587f3a68412f137f7317206e92c2.svg"},8527:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=h(n(3)),i=h(n(30)),l=h(n(8528)),u=n(6557),s=n(8529),d=h(n(345)),c=n(1),f=h(n(4)),p=h(n(5958));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var v=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={memoizedMode:t.props.mode,clicked:!1},t.handleInstallDownload=function(){t.state.clicked||(t.setState({clicked:!0}),(0,s.quitAndInstall)())},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e,t){return e.mode!==t.memoizedMode?{memoizedMode:e.mode,clicked:!1}:null};var a=r.prototype;return a.handleDownloadApps=function(){i.default.push(d.default,{source:"Links"})},a.render=function(){switch(this.props.mode){case c.ActionTypes.UPDATE_AVAILABLE:return m(u.Icon,{hideOnClick:!1,tooltip:f.default.Messages.UPDATE_AVAILABLE,foreground:p.default.downloadArrow,background:p.default.cloud,name:u.Icon.Names.NOVA_DOWNLOADING});case c.ActionTypes.UPDATE_MANUALLY:case c.ActionTypes.UPDATE_DOWNLOADED:return m(u.Icon,{tooltip:f.default.Messages.UPDATE_DOWNLOADED,foreground:p.default.updateIconForeground,onClick:this.handleInstallDownload,name:u.Icon.Names.NOVA_DOWNLOAD});case c.ActionTypes.UPDATE_NOT_AVAILABLE:case c.ActionTypes.UPDATE_ERROR:case c.ActionTypes.CHECKING_FOR_UPDATES:default:return null}},r}(a.PureComponent);v.displayName="UpdateButton";var y=o.default.connectStores([l.default],function(){return{mode:l.default.getState()}})(v);t.default=y},8528:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(3)),a=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var i=n(1).ActionTypes.UPDATE_NOT_AVAILABLE;function l(e){i=e.type}var u=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.getState=function(){return i},r}(r.default.Store))(a.default,{CHECKING_FOR_UPDATES:l,UPDATE_NOT_AVAILABLE:l,UPDATE_AVAILABLE:l,UPDATE_MANUALLY:l,UPDATE_ERROR:l,UPDATE_DOWNLOADED:l});t.default=u},8529:function(e,t,n){"use strict";var r;t.__esModule=!0,t.checkForUpdates=function(e){void 0===e&&(e=!1);return a.checkForUpdates(e)},t.quitAndInstall=function(){a.quitAndInstall()};var a=new(((r=n(8530))&&r.__esModule?r:{default:r}).default)},8530:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(12)),a=u(n(2)),o=u(n(20)),i=u(n(13)),l=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var s=36e5,d=function(){function e(e){var t=this;void 0===e&&(e=s),this.updateAvailable=!1,this.hasNativeUpdate=!1,this._callbacks=[],this.checkForUpdates=function(e){return void 0===e&&(e=!1),!e&&t.updateAvailable||(i.default.embedded?o.default.send("CHECK_FOR_UPDATES"):t._handleNativeUpdateNotAvailable()),new Promise(function(e){t.updateAvailable?e(!0):t._callbacks.push(e)})},this._handleCheckingForUpdates=function(){a.default.dispatch({type:l.ActionTypes.CHECKING_FOR_UPDATES})},this._handleNativeUpdateNotAvailable=function(){t._handleCheckingForUpdates(),r.default.get({url:location.protocol+"//"+location.host+"/assets/version."+window.GLOBAL_ENV.RELEASE_CHANNEL+".json",query:{_:Date.now()/1e3/60/5|0}}).then(function(e){null!=e.body&&"807e300b9ead5d045016d0119737253632619aaa"!==e.body.hash&&e.body.required?t._handleUpdateDownloaded(!1):t._handleUpdateNotAvailable()},function(){return t._handleUpdateError()})},this._handleUpdateNotAvailable=function(){a.default.dispatch({type:l.ActionTypes.UPDATE_NOT_AVAILABLE}),t._emitCallbacks()},this._handleUpdateAvailable=function(e){t.updateAvailable=!0,t.hasNativeUpdate=e,a.default.dispatch({type:l.ActionTypes.UPDATE_AVAILABLE})},this._handleUpdateManually=function(){t.updateAvailable=!0,t.hasNativeUpdate=!0,a.default.dispatch({type:l.ActionTypes.UPDATE_MANUALLY})},this._handleUpdateError=function(e){t.updateAvailable=!1,a.default.dispatch({type:l.ActionTypes.UPDATE_ERROR,message:e})},this._handleUpdateDownloaded=function(e,n,r,o,i){t._handleUpdateAvailable(e),a.default.dispatch({type:l.ActionTypes.UPDATE_DOWNLOADED,releaseNotes:n,releaseName:r,releaseDate:o,updateURL:i}),t._emitCallbacks()},i.default.embedded&&(o.default.on(l.ActionTypes.CHECKING_FOR_UPDATES,this._handleCheckingForUpdates),o.default.on(l.ActionTypes.UPDATE_NOT_AVAILABLE,this._handleNativeUpdateNotAvailable),o.default.on(l.ActionTypes.UPDATE_AVAILABLE,function(){return t._handleUpdateAvailable(!0)}),o.default.on(l.ActionTypes.UPDATE_ERROR,this._handleUpdateError),o.default.on(l.ActionTypes.UPDATE_DOWNLOADED,function(){return t._handleUpdateDownloaded(!0)}),o.default.on(l.ActionTypes.UPDATE_MANUALLY,this._handleUpdateManually)),this._checkInterval=setInterval(this.checkForUpdates,e)}var t=e.prototype;return t.destroy=function(){clearInterval(this._checkInterval)},t.quitAndInstall=function(){this.updateAvailable&&(this.hasNativeUpdate?o.default.send("QUIT_AND_INSTALL"):location.reload(!0))},t._emitCallbacks=function(){var e=this;this._callbacks.forEach(function(t){return t(e.updateAvailable)}),this._callbacks=[]},e}();t.default=d},900:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=(r=n(42))&&r.__esModule?r:{default:r},i=n(1);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.default=function(e){var t=e.tier,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["tier"]);switch(t){case i.PremiumGuildTiers.TIER_1:return a.createElement(o.default,l({},n,{name:o.default.Names.PREMIUM_GUILD_TIER_1}));case i.PremiumGuildTiers.TIER_2:return a.createElement(o.default,l({},n,{name:o.default.Names.PREMIUM_GUILD_TIER_2}));case i.PremiumGuildTiers.TIER_3:return a.createElement(o.default,l({},n,{name:o.default.Names.PREMIUM_GUILD_TIER_3}));case i.PremiumGuildTiers.NONE:return null;default:throw new Error("Not a valid tier type")}}},901:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0)),o=(r=n(42))&&r.__esModule?r:{default:r},i=n(1);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.default=function(e){var t=e.tier,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["tier"]);switch(t){case i.PremiumGuildTiers.NONE:case i.PremiumGuildTiers.TIER_1:return a.createElement(o.default,l({},n,{name:o.default.Names.PREMIUM_GUILD_TIER_1_SIMPLE}));case i.PremiumGuildTiers.TIER_2:return a.createElement(o.default,l({},n,{name:o.default.Names.PREMIUM_GUILD_TIER_2_SIMPLE}));case i.PremiumGuildTiers.TIER_3:return a.createElement(o.default,l({},n,{name:o.default.Names.PREMIUM_GUILD_TIER_3_SIMPLE}));default:throw new Error("Not a valid tier type")}}}}]);
//# sourceMappingURL=6eb1b02c9e7794779df6.js.map